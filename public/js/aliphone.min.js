/* version: 0.0.1 , build at: Tue Oct 27 2015 11:43:26 GMT+0800 (CST)
 * document: http://alingphone.taobao.com/doc/phoneimportsdk.htm
 * order aliphone : http://alingphone.taobao.com */ 

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){this.domList=[],this.iconSrc="//img.alicdn.com/tps/TB1iUlBIFXXXXcUXpXXXXXXXXXX.png",this.longTips='\u4e00\u952e\u514d\u62e8\u53f7\u8f7b\u677e\u4e0e\u4e70\u5bb6\u7535\u8bdd\u6c9f\u901a~ \u5982\u65e0\u6cd5\u62e8\u6253\uff0c\u8bf7\u70b9\u51fb<a style="color:#04AE6D ;" href="http://www.taobao.com/market/seller/duliduan.php" target="_blank">\u4e0b\u8f7d\u5b89\u88c5\u963f\u8046\u5ba2\u6237\u7aef</a>',this.longTipsQn="\u4e00\u952e\u514d\u62e8\u53f7\u8f7b\u677e\u4e0e\u4e70\u5bb6\u7535\u8bdd\u6c9f\u901a~ \u5982\u65e0\u6cd5\u62e8\u6253\uff0c\u8bf7\u5b89\u88c5\u5343\u725b\u6700\u65b0\u7248\u672c",this.shortTips="\u4e00\u952e\u514d\u62e8\u53f7\u8f7b\u677e\u4e0e\u4e70\u5bb6\u7535\u8bdd\u6c9f\u901a~",this.appKey=""}var e=a("./modes/dom"),f=a("./modes/utils"),g=a("./modes/tooltip");d.prototype={_rendeIcon:function(a){a.style.display="inline-block","qn"==this.enviroment?this._makeIcon(a,a):this._webIcon(a),this.bindTooltip(a)},sourcelog:function(a){var b=this.enviroment;f.goldlog("/aling.1.18","source="+b+"-"+a)},_webIcon:function(a){var b,c=a.getAttribute("data-aling"),d=a.getAttribute("data-nick"),g=a.getAttribute("data-telnumber"),h=a.getAttribute("data-type"),i=f.getTaobaoNick(),j=document.createElement("a");b="qn"===h?'aliim:invokeprotocol?action=alingCallout&param={"calloutNick":"'+d+'","calloutNumber":"'+g+'","source":"'+c+'"}':'AlingUrlProtocol://action=alingCallout&param={"calloutNick":"'+d+'","calloutNumber":"'+g+'","source":"'+c+'","username":"'+i+'"}',j.href=b,a.innerHTML="",a.appendChild(j),this._makeIcon(j,a);var k=this;e.on(a,"click",function(){k.sourcelog(c)})},_makeIcon:function(a,b){var c,d=new Image;c=b&&b.getAttribute("data-icon")?b.getAttribute("data-icon"):this.iconSrc,d.src=c,d.style.cursor="pointer",d.style.border="none",d.setAttribute("data-aling-icon","icon"),a.innerHTML="",a.appendChild(d)},_rende:function(){for(var a=document.querySelectorAll("[data-aling]"),b=a.length-1;b>=0;b--)this._rendeIcon(a[b])},isTelNumber:function(a){return a=String(a),a.replace("-",""),/(^((\d{11})|(\d{7,8})|(\d{4}|\d{3})(-?)(\d{7,8}))(#?)$)/.test(a)},qnClick:function(a){if(a.target&&"icon"===a.target.dataset.alingIcon){var b=a.target.parentNode,c=b.dataset.aling,d=b.dataset.nick,e=b.dataset.telnumber;this._callPlug(e,d,c),this.sourcelog(c)}},_bind:function(){var a=this;e.on(document,"click",function(b){a.qnClick(b)})},bindTooltip:function(a){var b=a.style.position;if(b&&"static"!==b||(a.style.position="relative"),!this.tooltip)if("qn"===this.enviroment)this.tooltip=new g(this.shortTips);else{var c=a.getAttribute("data-type");"qn"===c?this.tooltip=new g(this.longTipsQn):this.tooltip=new g(this.longTips)}this.tooltip.bind(a)},_callPlug:function(a,b,c){var d=window.QN||parent.QN;return d?void d.application.invoke({cmd:"alingCallout",param:{calloutNumber:a,calloutNick:b,source:c}}):void console.error("ALING_SDK: not in qn enviroment!!")},jsonpCallback:function(){},_initWeb:function(){var a,b="",c=this;this.jsonpCallback=function(a){c.QNversion=a,a&&c._rende.apply(c,[])},f.isTaobao?(b=location.href.indexOf("taobao.net")>-1?"http://aling.daily.taobao.net/system/qnInfoAction.do?action=system/qnInfoAction&event_submit_do_getQnVersion=0&_input_charset=utf-8":/^https/gi.test(location.href)?"https://alingphone.taobao.com/system/qnInfoAction.do?action=system/qnInfoAction&event_submit_do_getQnVersion=0&_input_charset=utf-8":"http://aling.cloud.taobao.com/system/qnInfoAction.do?action=system/qnInfoAction&event_submit_do_getQnVersion=0&_input_charset=utf-8",a=f.getTaobaoNick(),a?f.getJSON(b,{usernick:a},"ALING.jsonpCallback",this.jsonpCallback):this._rende()):this._rende()},_init:function(){this.enviroment=this._getEnviroment(),"qn"===this.enviroment?(this._rende(),this._bind(),this.tooltip=new g(this.shortTips)):this._initWeb()},_getEnviroment:function(){var a;return a=window.workbench||top.workbench?"qn":"web"},setIcon:function(a){"string"==typeof a&&(this.iconSrc=a)},init:function(a){if(a&&a.nodeName&&this._rendeIcon(a),a&&a.length>0)for(var b=0;b<a.length;b++)this._rendeIcon(a[b]);else this._rende()}};var d=new d;window.ALING=d,e.on(window,"load",function(){d._init()})},{"./modes/dom":2,"./modes/tooltip":3,"./modes/utils":4}],2:[function(a,b,c){var d="undefined";b.exports={on:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},off:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c):a.detachEvent&&a.detachEvent("on"+b,c)},getOffset:function(a){var b,c,e={top:0,left:0},f=a,g=f&&f.ownerDocument;if(g)return b=g.documentElement,c=g.defaultView||g.parentWindow,typeof f.getBoundingClientRect!==d&&(e=f.getBoundingClientRect()),{top:e.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:e.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}}},{}],3:[function(a,b,c){var d=a("./dom"),e="undefined",f=function(a){this.tpl='<div style="background: #323742; color: #fff;max-width: 205px;padding: 3px 8px;border-radius: 4px;border: 1px solid #cecece;font-size: 12px;box-shadow: rgba(0, 0, 0, 0.25) 0px 0px 5px;">'+a+"</div>",this.init()};f.prototype={init:function(){this.tips=this.createTooltip()},createTooltip:function(){var a=this,b=document.createElement("div");return b.innerHTML=this.tpl,b.style.position="absolute",b.style.padding="2px",b.style.zIndex="99999",b.style.left="-100px",b.style.top="-100px",document.body.appendChild(b),d.on(b,"mouseenter",function(){a.hideTimeout&&clearTimeout(a.hideTimeout),a.hideTimeout=null}),d.on(b,"mouseleave",function(){a.bindHide()}),b},position:function(a){var b,c,e=d.getOffset(a),f=a.offsetWidth,g=a.offsetHeight,h=this.tips.offsetWidth,i=this.tips.offsetHeight,j=this.getDirection(a);c="left"===j.x?e.left:e.left-(h-f),b="top"===j.y?e.top-i:e.top+g,this.tips.style.left=c+"px",this.tips.style.top=b+"px"},getDirection:function(a){var b,c,d={top:0,bottom:0,left:0,right:0},f=a&&a.ownerDocument,g=f.documentElement,h={},i=(a.offsetWidth,a.offsetHeight,this.tips.offsetWidth),j=this.tips.offsetHeight;return typeof a.getBoundingClientRect!==e&&(d=a.getBoundingClientRect()),c=g.clientWidth,b=g.clientHeight,b<=d.bottom+j?h.y="top":h.y="bottom",c<=d.left+i?h.x="right":h.x="left",h},show:function(a){this.position(a)},hide:function(){this.tips.style.left="-100px",this.tips.style.top="-100px"},bindshow:function(a){var b,c;if(b=a.target||a.srcElement){this.hideTimeout&&clearTimeout(this.hideTimeout);for(var d=4;d>=0;d--){if(b.getAttribute("data-aling")){c=b;break}b=b.parentNode}c&&this.show(c)}},bindHide:function(a){var b=this;this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){b.hide(),b.hideTimeout=null},100)},bind:function(a){var b=this;d.on(a,"mouseenter",function(a){b.bindshow(a)}),d.on(a,"mouseleave",function(a){b.bindHide(a)})}},b.exports=f},{"./dom":2}],4:[function(a,b,c){var d=a("./dom");b.exports={currentScript:null,getJSON:function(a,b,c,e){function f(){l&&clearTimeout(l)}var g=a+(a.indexOf("?")+1?"&":"?"),h=document.getElementsByTagName("head")[0],i=document.createElement("script"),j=[],k="",l=null;b.callback=c;for(k in b)j.push(k+"="+encodeURIComponent(b[k]));g+=j.join("&"),i.type="text/javascript",d.on(i,"load",f),l&&clearTimeout(l),l=setTimeout(function(){e(!0)},2e3),i.src=g,this.currentScript&&(h.removeChild(currentScript),d.off(i,"load",f),l&&clearTimeout(l)),h.appendChild(i)},toGBK:function(a){return unescape(a.replace(/\\u/gi,"%u"))},getCookie:function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},getTaobaoNick:function(){var a=this.getCookie("_nk_")||this.getCookie("tracknick")||this.getCookie("sn")||"";return this.toGBK(a)},getTaobaoId:function(){return this.getCookie("unb")},goldlog:function(a,b){var c=Math.floor(268435456*Math.random()).toString(16),d=new Image,e="_img_"+Math.random(),f="http://gm.mmstat.com/";return d.onload=d.onerror=function(){window[e]=null},window[e]=d,d.src=f+a+"?cache="+c+"&gmkey=&gokey="+encodeURIComponent(b)+"&logtype=2",d.src},isTaobao:function(){var a,b=document.createElement("a");return b.href=location.href,a=b.hostname,/(taobao|tmall)\.(com|net)/gi.test(a)}()}},{"./dom":2}]},{},[1,2,3,4]);