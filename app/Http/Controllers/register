\:        if (! $this->get_parentid()  ) {
\:            echo $this->output_err("未登录");
\:        $parentid= $this->get_in_int_val("_parentid") ? $this->get_in_int_val("_parentid") : session("parentid");
\:        $parentid = $this->get_parentid();
\:        $ret_list=$this->t_lesson_info_b2->get_list_by_parent_id($parentid);
\:            $this->cache_set_item_student_nick($item);
\:            $this->cache_set_item_teacher_nick($item);
\:        return $this->output_succ(["children_lesson_info"=>$ret_list]);
\:        $lessonid = $this->get_in_lessonid();
\:        $parentid = $this->get_parentid();
\:        $has_lesson_bool = $this->t_lesson_info_b2->check_lesson_parentid( $lessonid, $parentid );
\:            return $this->output_err('暂无课程');
\:        $this->t_test_lesson_subject_sub_list->field_update_list($lessonid,[
\:        return $this->output_succ();
\:        $interaction        = $this->get_in_str_val("interaction");
\:        $class_atmos        = $this->get_in_str_val("class_atmos");
\:        $tea_standard       = $this->get_in_str_val("tea_standard");
\:        $tea_style          = $this->get_in_str_val("tea_style");
\:        $level              = $this->get_in_int_val("level");
\:        $device_level       = $this->get_in_int_val("device_level");
\:        $record_info        = $this->get_in_str_val("record_info");
\:        $lessonid           = $this->get_in_lessonid();
\:        $device_description = $this->get_in_str_val("device_description");
\:        $device_record      = $this->get_in_str_val("device_record");
\:        $parentid = $this->get_parentid();
\:        $has_lesson_bool = $this->t_lesson_info_b2->check_lesson_parentid( $lessonid, $parentid );
\:            return $this->output_err('暂无课程');
\:        $ret = $this->t_teacher_label->evaluate_row_delete($lessonid,1);
\:        $insert_ret=$this->t_teacher_label->row_insert([
\:        return $this->output_succ();
\:        $token = $auth->uploadToken($bucket);
\:        return  $this->output_succ([
\:        $public_flag=$this->get_in_int_val("publish_flag",0 );
\:        return $this->do_qiniu($public_flag );
\:        $token = $this->get_wx_token_jssdk(  $appid_tec, $appscript_tec);
\:            $jssdk    = $this->get_wx_jsapi_ticket($token);
\:        return $wx->get_wx_token($appid_tec,$appscript_tec);
\:        $json_jssdk_data=file_get_contents("https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=$token&type=jsapi ");
\:        $lessonid     = $this->get_in_int_val('lessonid');
\:        $serverId_str = $this->get_in_str_val('wx_picid_list');
\:        $this->t_test_lesson_subject->put_pic_to_alibaba($lessonid, "");
\:        return $this->output_succ();
\:        $accessToken = $this->get_wx_token_jssdk( $appid_tec, $appscript_tec);
\:        curl_setopt($ch,CURLOPT_URL,"http://file.api.weixin.qq.com/cgi-bin/media/get?access_token=$accessToken&media_id=$serverId");
\:            $ossClient->uploadFile($bucket, $file_name, $target  );
\:            return  $this->output_succ([
\:            return $this->output_err("init OssClient fail" );
\:        $ref=$this->get_in_str_val("ref");
\:        $signature_str = $this->get_signature_str($ref);
\:        return $this->output_succ($config);
\:        $report_uid   = $this->get_parentid();
\:        $report_msg   = $this->get_in_str_val('report_msg');
\:        $obj_account_type    = $this->get_in_str_val('obj_account_type',-1);
\:        $report_account_type = $this->get_in_str_val('report_account_type',-1);
\:        $report_msg_last = $this->t_user_report->get_last_msg($report_uid);
\:            return $this->output_err("投诉已受理,请勿重复提交..");
\:         $ret_info_qc = $this->t_complaint_info->row_insert([
\:        $ret_info = $this->t_user_report->row_insert([
\:            $log_time_date = date('Y-m-d H:i:s',$log_time);
\:                $opt_nick= $this->cache_get_parent_nick($report_uid);
\:                $wx->send_template_msg($qc_item,$template_id,$data_msg ,$url);
\:               8GYohyn1V6dmhuEB6ZQauz5ZtmqnnJFy-ETM8yesU3I
\:            $template_id_parent = "8GYohyn1V6dmhuEB6ZQauz5ZtmqnnJFy-ETM8yesU3I";//反馈给投诉者
\:            $parent_openid = $this->t_parent_info->get_wx_openid_by_parentid($report_uid);
\:            $ret = $wx->send_template_msg($parent_openid,$template_id_parent,$data_msg ,$url);
\:            return $this->output_succ();
\:        $lessonid = $this->get_in_int_val('lessonid');
\:        $lesson_time = $this->t_lesson_info_b2->get_lesson_time($lessonid);
\:        $teacher_lesson_time = $this->t_lesson_info_b2->get_teacher_time_by_lessonid($lessonid);
\:        $student_lesson_time = $this->t_lesson_info_b2->get_student_lesson_time_by_lessonid($lessonid);
\:            $t['time'][0] = date('Y-m-d',$item['lesson_start']);
\:            $t2['time'][0] = date('Y-m-d',$item['lesson_end']);
\:           $t4['time'][0] = date('Y-m-d',$item['lesson_start']);
\:           $t3['time'][0] = date('Y-m-d',$item['lesson_end']);
\:       return $this->output_succ(['data'=>$lesson_time_arr]);
\:        $parent_modify_time   = $this->get_in_str_val('parent_modify_time');
\:        $parent_modify_remark = $this->get_in_str_val('parent_modify_remark');
\:        $lessonid = $this->get_in_int_val('lessonid');
\:        $lesson_start_time = $this->t_lesson_info_b2->get_lesson_start($lessonid);
\:        $stu_nick          = $this->t_student_info->get_stu_nick_by_lessonid($lessonid);
\:        // $parentid  = $this->get_in_int_val('parentid');
\:        $ret = $this->t_lesson_time_modify->row_insert([
\:            $parent_wx_openid = $this->t_parent_info->get_parent_wx_openid($lessonid);
\:            $lesson_start_date = date('Y-m-d',$lesson_start_time );
\:            $day_time = date('Y-m-d H:i:s');
\:            $wx->send_template_msg($parent_wx_openid,$template_id,$data_msg ,$url);
\:            $teacher_wx_openid = $this->t_teacher_info->get_wx_openid_by_lessonid($lessonid);
\:            $template_id_teacher  = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
\:        return $this->output_succ();
\:        $lessonid = $this->get_in_int_val('lessonid');
\:        $lesson_time     = $this->t_lesson_info_b2->get_lesson_time($lessonid);
\:        $lesson_modify_arr = $this->t_lesson_time_modify->get_parent_modify_time_by_lessonid($lessonid);
\:        $lesson_time_arr['ass_phone']     = $this->t_assistant_info->get_ass_phone_by_lessonid($lessonid);
\:        $lesson_time_arr['seller_phone']  = $this->t_lesson_info_b2->get_seller_phone_by_lessonid($lessonid);
\:        return $this->output_succ(['data'=>$lesson_time_arr]);
\:        $lessonid = $this->get_in_int_val('lessonid');
\:        $lesson_time = $this->t_lesson_info_b2->get_lesson_time($lessonid);
\:        $teacher_lesson_time = $this->t_lesson_info_b2->get_teacher_time_by_lessonid($lessonid);
\:        $student_lesson_time = $this->t_lesson_info_b2->get_student_lesson_time_by_lessonid($lessonid);
\:        $parent_modify_time  = $this->t_lesson_time_modify->get_parent_modify_time($lessonid);
\:            $t['time'][0] = date('Y-m-d',$item['lesson_start']);
\:            $t2['time'][0] = date('Y-m-d',$item['lesson_end']);
\:           $t4['time'][0] = date('Y-m-d',$item['lesson_start']);
\:           $t3['time'][0] = date('Y-m-d',$item['lesson_end']);
\:           $t5['time'][0] = date('Y-m-d',$item);
\:       return $this->output_succ(['data'=>$lesson_time_arr]);
\:        $lessonid        = $this->get_in_int_val('lessonid');
\:        $lesson_time_str = $this->get_in_str_val('lesson_time');
\:        $lesson_old_start = $this->t_lesson_info_b2->get_lesson_start($lessonid);
\:        $lesson_old_end   = $this->t_lesson_info_b2->get_lesson_end($lessonid);
\:        $ret1 = $this->t_lesson_info_b2->field_update_list($lessonid,[
\:        $ret2 = $this->t_lesson_time_modify->field_update_list($lessonid,[
\:               //J57C9QLB-K3SeKgIwdvBMz1RfjUinhwWsN3lEM-Xo5o
\:            $teacher_wx_openid = $this->t_teacher_info->get_wx_openid_by_lessonid($lessonid);
\:            $teacher_nick      = $this->t_teacher_info->get_teacher_nick_lessonid($lessonid);
\:            $lesson_name       = $this->t_lesson_info_b2->get_lesson_name($lessonid);
\:            $stu_nick          = $this->t_student_info->get_stu_nick_by_lessonid($lessonid);
\:            $lesson_new_time   = date('m月d日',$lesson_time_arr[0]).'-'.date('H:i:s',$lesson_time_arr[1]);
\:            $template_id_teacher  = "J57C9QLB-K3SeKgIwdvBMz1RfjUinhwWsN3lEM-Xo5o";
\:            $parent_wx_openid = $this->t_parent_info->get_parent_wx_openid($lessonid);
\:            $wx->send_template_msg($parent_wx_openid, $parent_template_id, $data_parent, $url_parent);
\:            $wx_openid_arr[0] = $this->t_lesson_info_b2->get_ass_wx_openid($lessonid);
\:            $wx_openid_arr[1] = $this->t_lesson_info_b2->get_seller_wx_openid($lessonid);
\:            $wx_openid_arr[2] = $this->t_test_lesson_subject_sub_list->get_jiaowu_wx_openid($lessonid);
\:                $wx->send_template_msg($item_openid, $parent_template_id, $data_parent, $url_parent);
\:            return $this->output_succ();
\:        $lessonid = $this->get_in_int_val('lessonid');
\:        $original_time = $this->t_lesson_time_modify->get_original_time_by_lessonid($lessonid);
\:        $lesson_status_info['original_time_str'] = date('Y年m月d日 H:i:s',$original_time_arr[0]).'-'.date('H:i:s',$original_time_arr[1]);
\:        $modify_lesson_time_arr = $this->t_lesson_info_b2->get_modify_lesson_time($lessonid);
\:        $lesson_status_info['modify_lesson_time_str'] = date('Y年m月d日 H:i:s',$modify_lesson_time_arr['lesson_start']).'-'.date('H:i:s',$modify_lesson_time_arr['lesson_end']);
\:        $lesson_status_info['ass_phone']     = $this->t_assistant_info->get_ass_phone_by_lessonid($lessonid);
\:        $lesson_status_info['seller_phone']  = $this->t_lesson_info_b2->get_seller_phone_by_lessonid($lessonid);
\:        $lesson_status_info['is_modify_time_flag'] = $this->t_lesson_info_b2->get_modify_flag($lessonid);
\:        return $this->output_succ(['data'=>$lesson_status_info]);
\:        $lessonid = $this->get_in_int_val('lessonid');
\:        $teacher_keep_original_remark = $this->get_in_str_val('teacher_keep_original_remark');
\:        $ret = $this->t_lesson_time_modify->field_update_list($lessonid,[
\:            $day_time = date('Y-m-d H:i:s');
\:            $lesson_start_time = $this->t_lesson_info_b2->get_lesson_start($lessonid);
\:            $stu_nick          = $this->t_student_info->get_stu_nick_by_lessonid($lessonid);
\:            $teacher_keep_original_remark = $this->t_lesson_time_modify->get_teacher_keep_original_remark($lessonid);
\:            $teacher_wx_openid = $this->t_teacher_info->get_wx_openid_by_lessonid($lessonid);
\:            $template_id_teacher  = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
\:            $wx_openid_arr[0] = $this->t_lesson_info_b2->get_ass_wx_openid($lessonid);
\:            $wx_openid_arr[1] = $this->t_lesson_info_b2->get_seller_wx_openid($lessonid);
\:                $wx->send_template_msg($item_openid, $parent_template_id, $data_parent, $url_parent);
\:        $lessonid = $this->get_in_int_val('lessonid');
\:        $lesson_status_info['ass_phone']     = $this->t_assistant_info->get_ass_phone_by_lessonid($lessonid);
\:        $lesson_status_info['seller_phone']  = $this->t_lesson_info_b2->get_seller_phone_by_lessonid($lessonid);
\:        $lesson_start = $this->t_lesson_info_b2->get_lesson_start($lessonid);
\:        $lesson_end   = $this->t_lesson_info_b2->get_lesson_end($lessonid);
\:        $lesson_status_info['lesson_time_str'] = date('Y年m月d日 H:i:s',$lesson_start).'-'.date('H:i:s',$lesson_end);
\:        $lesson_status_info['is_modify_time_flag'] = $this->t_lesson_time_modify->get_modify_flag($lessonid);
\:        return $this->output_succ(['data'=>$lesson_status_info]);
\:        $lessonid = $this->get_in_int_val('lessonid');
\:        $lesson_name       = $this->t_lesson_info_b2->get_lesson_name($lessonid);
\:        $stu_nick          = $this->t_student_info->get_stu_nick_by_lessonid($lessonid);
\:        $teacher_nick      = $this->t_teacher_info->get_teacher_nick_lessonid($lessonid);
\:        $lesson_time_arr   = $this->t_lesson_info_b2->get_modify_lesson_time($lessonid);
\:        $lesson_new_time   = date('m月d日',$lesson_time_arr[0]).'-'.date('H:i:s',$lesson_time_arr[1]);
\:        $lesson_old_time_str   = $this->t_lesson_time_modify->get_original_time_by_lessonid($lessonid);
\:        $teacher_wx_openid = $this->t_teacher_info->get_wx_openid_by_lessonid($lessonid);
\:        $template_id_teacher  = "J57C9QLB-K3SeKgIwdvBMz1RfjUinhwWsN3lEM-Xo5o";
\:        $parent_wx_openid = $this->t_parent_info->get_parent_wx_openid($lessonid);
\:        $wx->send_template_msg($parent_wx_openid, $parent_template_id, $data_parent, $url_parent);
\:        $wx_openid_arr[0] = $this->t_lesson_info_b2->get_ass_wx_openid($lessonid);
\:        $wx_openid_arr[1] = $this->t_lesson_info_b2->get_seller_wx_openid($lessonid);
\:        $wx_openid_arr[2] = $this->t_test_lesson_subject_sub_list->get_jiaowu_wx_openid($lessonid);
\:            $wx->send_template_msg($item_openid, $parent_template_id, $data_parent, $url_parent);
\:        $lessonid = $this->get_in_int_val('lessonid');
admin_join.php:        return $this->pageView(__METHOD__);
admin_join.php:        $phone=$this->get_in_phone(); 
admin_join.php:            return $this->output_err("手机格式不对");
admin_join.php:        return $this->output_succ([
admin_join.php:        $phone      = $this->get_in_str_val("phone");
admin_join.php:        $phone_code = $this->get_in_str_val("phone_code");
admin_join.php:        return $this->output_succ(["check_flag" =>$ret]);
admin_join.php:        $phone = $this->get_in_phone();
admin_join.php:            $res = $this->t_apply_reg->phone_exist($reg_phone);                                
admin_join.php:                $ret = $this->t_apply_reg->apply_info($reg_phone);
admin_join.php:                                    $v['start_time'] = date('Y-m-d',$v['start_time']);
admin_join.php:                                    $v['end_time'] = date('Y-m-d',$v['end_time']);
admin_join.php:                        if(isset ($item) && !empty($item))  $arr[$key] = date('Y-m-d',$item);
admin_join.php:                $this->t_apply_reg->row_insert([
admin_join.php:            return $this->pageView(__METHOD__,null,[
admin_join.php:        $phone      = $this->get_in_str_val("phone");
admin_join.php:        $name      = $this->get_in_str_val("name");
admin_join.php:        $education      = $this->get_in_str_val("education");
admin_join.php:        $residence      = $this->get_in_str_val("residence");
admin_join.php:        $gender     = $this->get_in_int_val("gender");
admin_join.php:        $birth      = strtotime($this->get_in_str_val("birth"));
admin_join.php:        $english      = $this->get_in_str_val("english");
admin_join.php:        $polity     = $this->get_in_str_val("polity");
admin_join.php:        $carded      = $this->get_in_str_val("carded");
admin_join.php:        $minor     = $this->get_in_str_val("minor");
admin_join.php:        $native_place     = $this->get_in_str_val("native_place");
admin_join.php:        $height      = $this->get_in_int_val("height");
admin_join.php:        $birth_type      = $this->get_in_int_val("birth_type");
admin_join.php:        $gra_school      = $this->get_in_str_val("gra_school");
admin_join.php:        $gra_major     = $this->get_in_str_val("gra_major");
admin_join.php:        $health_condition      = $this->get_in_str_val("health_condition");
admin_join.php:        $postcodes      = $this->get_in_int_val("postcodes");
admin_join.php:        $residence_type      = $this->get_in_int_val("residence_type");
admin_join.php:        $is_insured      = $this->get_in_int_val("is_insured");
admin_join.php:        $join_time      = strtotime($this->get_in_str_val("join_time"));
admin_join.php:        $emergency_contact_nick     = $this->get_in_str_val("emergency_contact_nick");
admin_join.php:        $emergency_contact_address      = $this->get_in_str_val("emergency_contact_address");
admin_join.php:        $emergency_contact_phone      = $this->get_in_int_val("emergency_contact_phone");
admin_join.php:            return $this->output_err("身份证长度不对");
admin_join.php:        $ccb_card      = $this->get_in_int_val("ccb_card");
admin_join.php:            return $this->output_err("建行卡号长度不对");
admin_join.php:            return $this->output_err(" 请填写正确的手机号码");
admin_join.php:        $marry      = $this->get_in_str_val("marry");
admin_join.php:        $child      = $this->get_in_str_val("child");
admin_join.php:        $email      = $this->get_in_str_val("email");
admin_join.php:        $post      = $this->get_in_str_val("post");
admin_join.php:        $dept      = $this->get_in_str_val("dept");
admin_join.php:        $address      = $this->get_in_str_val("address");
admin_join.php:        $strong      = $this->get_in_str_val("strong");
admin_join.php:        $interest      = $this->get_in_str_val("interest");
admin_join.php:        $non_compete      = $this->get_in_int_val("non_compete");
admin_join.php:        $is_labor     = $this->get_in_int_val("is_labor");
admin_join.php:        $is_fre     = $this->get_in_int_val("is_fre");
admin_join.php:        $fre_name      = $this->get_in_str_val("fre_name");
admin_join.php:        $education_info1     = json_decode($this->get_in_str_val("education_info"),true);
admin_join.php:        $work_info1      =json_decode( $this->get_in_str_val("work_info"),true);
admin_join.php:        $family_info     = $this->get_in_str_val("family_info");
admin_join.php:        $this->t_apply_reg->field_update_list($phone,[
admin_join.php:        return $this->output_succ();
admin_join.php:        $phone      = $this->get_in_str_val("phone");
admin_join.php:        $trial_start_time      = strtotime($this->get_in_str_val("trial_start_time"));
admin_join.php:        $trial_end_time      = strtotime($this->get_in_str_val("trial_end_time"));
admin_join.php:        $trial_dept      = $this->get_in_str_val("trial_dept");
admin_join.php:        $trial_post     = $this->get_in_str_val("trial_post");
admin_join.php:        $this->t_apply_reg->field_update_list($phone,[
admin_join.php:        return $this->output_succ();
admin_join.php:        $phone      = $this->get_in_str_val("phone");
admin_join.php:            return $this->output_err("手机格式不对");
admin_join.php:        $res = $this->t_apply_reg->phone_exist($phone);                                
admin_join.php:            return $this->output_err("手机号码已存在!");
admin_join.php:        $name      = $this->get_in_str_val("name");
admin_join.php:        $post      = $this->get_in_str_val("post");
admin_join.php:        $dept      = $this->get_in_str_val("dept");
admin_join.php:        $ret = $this->t_apply_reg->row_insert([
admin_join.php:        return $this->output_succ("保存成功!");
admin_join.php:        $phone      = $this->get_in_str_val("phone");
admin_join.php:        $this->t_apply_reg->apply_del($phone);
admin_join.php:        return $this->output_succ();
admin_join.php:        $phone = $this->get_in_phone();
admin_join.php:        $ret = $this->t_apply_reg->apply_info($phone);
admin_join.php:                            $v['start_time'] = date('Y-m-d',$v['start_time']);
admin_join.php:                            $v['end_time'] = date('Y-m-d',$v['end_time']);
admin_join.php:                if(isset ($item) && !empty($item))  $arr[$key] = date('Y-m-d',$item);
admin_join.php:        $time = date('Y-m-d',time());
admin_join.php:        return $this->pageView(__METHOD__,null,[
admin_join.php:        $phone = $this->get_in_phone();
admin_join.php:        $ret = $this->t_apply_reg->apply_info($phone);
admin_join.php:                            $v['start_time'] = date('Y-m-d',$v['start_time']);
admin_join.php:                            $v['end_time'] = date('Y-m-d',$v['end_time']);
admin_join.php:                if(isset ($item) && !empty($item))  $arr[$key] = date('Y-m-d',$item);
admin_join.php:                    $start_time = date("Y-m-d",$arr["trial_start_time"]);
admin_join.php:                    $end_time = date("Y-m-d",$arr["trial_end_time"]);
admin_join.php:        $time = date('Y-m-d',time());
admin_join.php:        return $this->pageView(__METHOD__,null,[
admin_manage.php:        $page_info = $this->get_in_page_info();
admin_manage.php:        $ret_info  = $this->t_kaoqin_machine->get_list($page_info);
admin_manage.php:        return $this->pageView(__METHOD__,$ret_info);
admin_manage.php:        $page_info = $this->get_in_page_info();
admin_manage.php:        $machine_id = $this->get_in_int_val("machine_id",-1);
admin_manage.php:        $adminid    = $this->get_in_adminid(-1);
admin_manage.php:        $auth_flag = $this->get_in_e_boolean(-1,"auth_flag");
admin_manage.php:        $ret_info=$this->t_kaoqin_machine_adminid->get_list($page_info,$machine_id,$adminid,$auth_flag);
admin_manage.php:            $this->cache_set_item_account_nick($item);
admin_manage.php:        $machine_info = $this->t_kaoqin_machine->get_list(["page_num"=>1, "page_count"=>10000 ]);
admin_manage.php:        return $this->pageView(
agent.php:        $userid        = $this->get_in_userid(-1);
agent.php:        $phone         = $this->get_in_phone();
agent.php:        $grade         = $this->get_in_grade(-1);
agent.php:        $parentid      = $this->get_in_parentid(-1);
agent.php:        $wx_openid     = $this->get_in_wx_openid();
agent.php:        $bankcard      = $this->get_in_str_val('bankcard');
agent.php:        $idcard        = $this->get_in_str_val('idcard');
agent.php:        $bank_address  = $this->get_in_str_val('bank_address');
agent.php:        $bank_account  = $this->get_in_str_val('bank_account');
agent.php:        $bank_phone    = $this->get_in_str_val('bank_phone');
agent.php:        $bank_province = $this->get_in_str_val('bank_province');
agent.php:        $bank_city     = $this->get_in_str_val('bank_city');
agent.php:        $bank_type     = $this->get_in_str_val('bank_type');
agent.php:        $zfb_name     = $this->get_in_str_val('zfb_name');
agent.php:        $zfb_account     = $this->get_in_str_val('zfb_account');
agent.php:        $page_num      = $this->get_in_page_num();
agent.php:        $page_info     = $this->get_in_page_info();
agent.php:        $ret_info = $this->t_agent->get_agent_info($page_info,$userid,$parentid,$phone,$wx_openid);
agent.php:            $item['create_time'] = date('Y-m-d H:i:s',$item['create_time']);
agent.php:        return $this->pageView(__METHOD__,$ret_info);
agent.php:        $orderid   = $this->get_in_int_val('orderid');
agent.php:        $aid       = $this->get_in_int_val('aid');
agent.php:        $pid       = $this->get_in_int_val('pid');
agent.php:        $p_price   = $this->get_in_int_val('p_price');
agent.php:        $ppid      = $this->get_in_int_val('ppid');
agent.php:        $pp_price  = $this->get_in_int_val('pp_price');
agent.php:        $page_num  = $this->get_in_page_num();
agent.php:        $page_info = $this->get_in_page_info();
agent.php:        $ret_info  = $this->t_agent_order->get_agent_order_info($page_info);
agent.php:            $item['create_time'] = date('Y-m-d H:i:s',$item['create_time']);
agent.php:        return $this->pageView(__METHOD__,$ret_info);
agent.php:        $cash     = $this->get_in_int_val('cash');
agent.php:        $cash     = $this->get_in_int_val('type');
agent.php:        $page_num  = $this->get_in_page_num();
agent.php:        $page_info = $this->get_in_page_info();
agent.php:        $ret_info = $this->t_agent_cash->get_agent_cash_list($page_info);
agent.php:                $item['create_time'] = date('Y-m-d H:i:s',$item['create_time']);
agent.php:        return $this->pageView(__METHOD__,$ret_info);
agent.php:        $access_token = $wx->get_wx_token($wx_config["appid"],$wx_config["appsecret"]);
agent.php:        $url = "https://api.weixin.qq.com/cgi-bin/user/info?access_token=".$access_token."&openid=".$wx_openid."&lang=zh_CN";
agent.php:        $agent_order = $this->t_agent_order->get_row_by_orderid($orderid);
agent.php:            $phone    = $this->t_student_info->get_phone($userid);
agent.php:            $ret_info = $this->t_agent->get_p_pp_id_by_phone($phone);
agent.php:                    $level1 = $this->check_agent_level($ret_info['p_phone']);
agent.php:                    $level2 = $this->check_agent_level($ret_info['pp_phone']);
agent.php:                $this->t_agent_order->row_insert([
agent.php:        $student_info = $this->t_student_info->get_stu_row_by_phone($phone);
agent.php:            $agent_item = $this->t_agent->get_agent_info_row_by_phone($phone);
agent.php:                $test_lesson = $this->t_agent->get_agent_test_lesson_count_by_id($agent_item['id']);
agent.php:        $phone = $this->get_in_str_val('phone',$phone,-1);
agent.php:        $level = $this->check_agent_level($phone);
agent.php:            // $p_pay  = $this->t_agent->get_agent_level2_p_price_by_phone($phone);
agent.php:            // $pp_pay = $this->t_agent->get_agent_level2_pp_price_by_phone($phone);
agent.php:            $p_pay  = $this->t_agent_order->get_p_price_by_phone($phone);
agent.php:            $pp_pay = $this->t_agent_order->get_pp_price_by_phone($phone);
agent.php:            // $pay = $this->t_agent->get_agent_level1_p_price_by_phone($phone);
agent.php:            $pay_row = $this->t_agent_order->get_p_price_by_phone($phone);
agent.php:        // return $this->output_succ(["data"=>$lesson_list]);
agent.php:        $phone = $this->get_in_str_val('phone',$phone,-1);
agent.php:        $level = $this->check_agent_level($phone);
agent.php:            // $p_ret_list  = $this->t_agent->get_agent_level2_p_order_by_phone($phone);
agent.php:            // $pp_ret_list = $this->t_agent->get_agent_level2_pp_order_by_phone($phone);
agent.php:            $p_ret_list  = $this->t_agent_order->get_p_order_by_phone($phone);
agent.php:            $pp_ret_list  = $this->t_agent_order->get_pp_order_by_phone($phone);
agent.php:            $cash        = $this->get_cash($ret_list);
agent.php:            // $ret_list = $this->t_agent->get_agent_level1_order_by_phone($phone);
agent.php:            $ret_list  = $this->t_agent_order->get_p_order_by_phone($phone);
agent.php:            $cash     = $this->get_cash($ret_list);
agent.php:            $ret_row = $this->t_lesson_info_b2->get_lesson_count_by_userid($userid);
agent.php:            $ret_list[$key]['level2_cash'] = $pay-$ret_list[$key]['level1_cash'];
agent.php:        $userid_list       = $this->t_agent->get_all_userid();
agent.php:        $orderid_list      = $this->t_agent_order->get_all_orderid();
agent.php:        $agent_order = $this->t_order_info->get_agent_order($orderid_array_str,$userid_array_str);
agent.php:            $this->insert_agent_order($agent_order);
agent.php:            $p_level = $this->check_agent_level($p_phone);
agent.php:            $pp_level = $this->check_agent_level($pp_phone);
agent.php:            $this->t_agent_order->add_agent_order_row($orderid,$pid,$p_price,$ppid,$pp_price);
agent.php:        $phone      = $this->get_in_str_val("phone");
agent.php:        $code       = $this->get_in_str_val("code");
agent.php:        $wx_openid  = $this->get_in_str_val("wx_openid");
agent.php:            return $this->output_err("手机号不能为空！");
agent.php:            $agent = $this->t_agent->get_agent_info_by_phone($phone);
agent.php:                $data = $this->t_agent->add_agent_row_new($phone,$wx_openid);
agent.php:                    return $this->output_err($data);
agent.php:                $id = $this->t_agent->get_agent_info_by_openid($wx_openid);
agent.php:                    $ret = $this->t_agent->field_update_list($id,[
agent.php:                $re = $this->t_agent->field_update_list($agent_info['id'], [
agent.php:                return $this->output_err("微信绑定失败!请重新登录后绑定!");
agent.php:            return $this->output_succ(["wx_use_flag"=>$agent_info['wx_use_flag']]);
agent.php:            return $this->output_err ("验证码不对");
agent.php:        $p_phone = $this->get_in_str_val('p_phone');
agent.php:        $phone   = $this->get_in_str_val('phone');
agent.php:            return $this->output_err("请输入规范的手机号!");
agent.php:            return $this->output_err("不能邀请自己!");
agent.php:        $ret_list = $this->t_agent->get_id_by_phone($phone_str);
agent.php:                return $this->output_err("您已被邀请过!");
agent.php:        $ret = $this->t_agent->add_agent_row($parentid,$phone);
agent.php:            return $this->output_succ("邀请成功!");
agent.php:            return $this->output_err("数据请求异常!");
agent.php:        $phone = $this->get_in_str_val('phone');
agent.php:            return outputJson(array('ret' => -1, 'info' => "请输入规范的手机号!"));
agent.php:        $student_info = $this->t_student_info->get_stu_row_by_phone($phone);
agent.php:            $ret       = $this->get_pp_pay_cash($phone);
agent.php:            $cash_item = $this->t_agent_cash->get_cash_by_phone($phone);
agent.php:            $count_row = $this->t_agent->get_count_by_phone($phone);
agent.php:            $agent_list = $this->t_agent->get_agent_list_by_phone($phone);
agent.php:                $test_lesson = $this->t_agent->get_agent_test_lesson_count_by_id($agent_item['id']);
agent.php:                $cash_item   = $this->t_agent_cash->get_cash_by_phone($phone);
agent.php:                    $ret = $this->get_pp_pay_cash($phone);
agent.php:                    $ret = $this->get_p_pay_cash($phone);
agent.php:                return $this->output_err("您暂无资格!");
agent.php:        return $this->output_succ(["user_info_list" =>$data]);
agent.php:        $phone = $this->get_in_str_val('phone');
agent.php:            return $this->output_err("请输入规范的手机号!");
agent.php:        $ret = $this->t_agent->get_p_list_by_phone($phone);
agent.php:            $p_ret = $this->t_agent->get_agent_order_by_phone($p_id);
agent.php:            $ret_new = $this->t_agent_order->get_order_by_id($id);
agent.php:                    $count_item = $this->t_lesson_info_b2->get_test_lesson_count_by_userid($item['userid']);
agent.php:        return $this->output_succ(["list" =>$ret_list]);
agent.php:        $phone = $this->get_in_str_val('phone');
agent.php:            return outputJson(array('ret' => -1, 'info' => "请输入规范的手机号!"));
agent.php:        $student_info = $this->t_student_info->get_stu_row_by_phone($phone);
agent.php:            $ret = $this->get_pp_pay_cash($phone);
agent.php:            $agent_list = $this->t_agent->get_agent_list_by_phone($phone);
agent.php:                $test_lesson = $this->t_agent->get_agent_test_lesson_count_by_id($agent_item['id']);
agent.php:                    $ret = $this->get_pp_pay_cash($phone);
agent.php:                    $ret = $this->get_p_pay_cash($phone);
agent.php:                return $this->output_err("您暂无资格!");
agent.php:        return $this->output_succ(["list" =>$ret_list]);
agent.php:        $phone = $this->get_in_str_val('phone');
agent.php:        $type = $this->get_in_int_val('type');
agent.php:            return outputJson(array('ret' => -1, 'info' => "请输入规范的手机号!"));
agent.php:        $student_info = $this->t_student_info->get_stu_row_by_phone($phone);
agent.php:            $ret = $this->get_pp_pay_cash($phone);
agent.php:            $agent_list = $this->t_agent->get_agent_list_by_phone($phone);
agent.php:                $test_lesson = $this->t_agent->get_agent_test_lesson_count_by_id($agent_item['id']);
agent.php:                    $ret = $this->get_pp_pay_cash($phone);
agent.php:                    $ret = $this->get_p_pay_cash($phone);
agent.php:                return $this->output_err("您暂无资格!");
agent.php:            return $this->output_succ(["list" =>$ret_list]);
agent.php:        return $this->output_succ(["cash"=>$cash,"list" =>$ret_list]);
agent.php:        $phone = $this->get_in_str_val('phone');
agent.php:            return outputJson(array('ret' => -1, 'info' => "请输入规范的手机号!"));
agent.php:        $ret = $this->t_agent_cash->get_cash_list_by_phone($phone);
agent.php:            $ret_list[$key]['create_time'] = date('Y-m-d',$item['create_time']);
agent.php:        return $this->output_succ(["list" =>$ret_list]);
agent.php:        $pay_list = $this->t_agent_order->get_price_by_phone($phone);
agent.php:                $ret_list[$key]['pay_time'] = date('Y-m-d H:i:s',$item['pay_time']);
agent.php:        $ret = $this->get_cash($ret_list);
agent.php:        $pay_list  = $this->t_agent_order->get_p_price_by_phone($phone);
agent.php:                $ret_list[$key]['pay_time'] = date('Y-m-d H:i:s',$item['pay_time']);
agent.php:        $ret = $this->get_cash($ret_list);
agent.php:        $phone = $this->get_in_str_val('phone');
agent.php:            return outputJson(array('ret' => -1, 'info' => "请输入规范的手机号!"));
agent.php:        $ret = $this->t_agent->get_agent_info_by_phone($phone);
agent.php:            return $this->output_err('请先绑定优学优享账号!');
agent.php:        return $this->output_succ(["data" =>$data]);
agent.php:        $phone         = $this->get_in_str_val("phone");
agent.php:        $bankcard      = $this->get_in_str_val("bankcard");
agent.php:        $idcard        = $this->get_in_str_val("idcard");
agent.php:        $bank_address  = $this->get_in_str_val("bank_address");
agent.php:        $bank_account  = $this->get_in_str_val("bank_account");
agent.php:        $bank_phone    = $this->get_in_str_val("bank_phone");
agent.php:        $bank_province = $this->get_in_str_val("bank_province");
agent.php:        $bank_city     = $this->get_in_str_val("bank_city");
agent.php:        $bank_type     = $this->get_in_str_val("bank_type");
agent.php:        $zfb_name      = $this->get_in_str_val("zfb_name");
agent.php:        $zfb_account   = $this->get_in_str_val("zfb_account");
agent.php:        $cash   = $this->get_in_int_val("cash");
agent.php:            return outputJson(array('ret' => -1, 'info' => "请输入规范的手机号!"));
agent.php:        $row = $this->t_agent->get_id_row_by_phone($phone);
agent.php:            return $this->output_err("请先注册优学优享！");
agent.php:                return $this->output_err("请完善所有数据后重新提交！");
agent.php:                $ret = $this->t_agent->field_update_list($id,[
agent.php:                    $ret_new = $this->t_agent_cash->row_insert([
agent.php:                        return $this->output_err('更新失败！请重试！');
agent.php:                    return $this->output_err("更新失败！请重试！");
agent.php:                return $this->output_err("请完善所有数据后重新提交！");
agent.php:            $ret = $this->t_agent->field_update_list($id,[
agent.php:                $ret_new = $this->t_agent_cash->row_insert([
agent.php:                    return $this->output_err('更新失败！请重试！');
agent.php:                return $this->output_err("更新失败！请重试！");
agent.php:        return $this->output_succ();
ajax_deal2.php:        $email=$this->get_in_str_val( "email" );
ajax_deal2.php:        $title= $this->get_in_str_val("title");
ajax_deal2.php:        $cmd="sshpass -p\"yb142857\" ssh -2  -o \"StrictHostKeyChecking no\" -p22 -l\"zimbra\" 115.28.89.73   \"   $zmcmd \"";
ajax_deal2.php:        return $this->output_succ();
ajax_deal2.php:        $email=$this->get_in_str_val( "email" );
ajax_deal2.php:        $cmd="sshpass -p\"yb142857\" ssh -2  -o \"StrictHostKeyChecking no\" -p22 -l\"zimbra\" 115.28.89.73   \"   $zmcmd \"";
ajax_deal2.php:        return $this->output_succ();
ajax_deal2.php:        $userid=$this->get_in_userid();
ajax_deal2.php:        $tmk_student_status = $this->get_in_e_tmk_student_status();
ajax_deal2.php:        $tmk_desc          = $this->get_in_str_val("tmk_desc");
ajax_deal2.php:            $opt_adminid= $this->get_account_id();
ajax_deal2.php:            $phone=$this->t_seller_student_new->get_phone($userid);
ajax_deal2.php:            $account = $this-> get_account();
ajax_deal2.php:            $this->t_seller_student_new->set_admin_info(
ajax_deal2.php:                $opt_type, $userid_list,  $opt_adminid, $this->get_account_id() );
ajax_deal2.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
ajax_deal2.php:            $this->t_seller_student_new->field_update_list($userid,[
ajax_deal2.php:            $this->t_seller_student_new->set_admin_info(
ajax_deal2.php:                0, $userid_list,  0, $this->get_account_id() );
ajax_deal2.php:            $phone=$this->t_seller_student_new->get_phone($userid);
ajax_deal2.php:            $this->t_manager_info->send_wx_todo_msg( "李子璇","来自:$account" , "TMK 有效:$phone"  );
ajax_deal2.php:            $account = $this-> get_account();
ajax_deal2.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
ajax_deal2.php:            $this->t_seller_student_new->field_update_list($userid,[
ajax_deal2.php:        return $this->output_succ();
ajax_deal2.php:        $orderid   = $this->get_in_int_val("orderid");
ajax_deal2.php:        $row       = $this->t_order_info->field_get_list($orderid,"*");
ajax_deal2.php:        $type_1_lesson_count=$this->t_order_info->get_type1_lesson_count ($orderid)/100;
ajax_deal2.php:        $username           = $this->t_student_info->get_nick($userid);
ajax_deal2.php:        $this->t_order_info->field_update_list($orderid,[
ajax_deal2.php:        return $this->output_succ(["pdf_file_url" => $pdf_file_url] );
ajax_deal2.php:        $id               = $this->get_in_int_val("id");
ajax_deal2.php:        $userid           = $this->get_in_int_val("userid");
ajax_deal2.php:        $subject          = $this->get_in_int_val("subject");
ajax_deal2.php:        $stu_score_type   = $this->get_in_int_val("stu_score_type");
ajax_deal2.php:        $stu_score_time   = strtotime($this->get_in_str_val("stu_score_time"));
ajax_deal2.php:        $score            = $this->get_in_int_val("score");
ajax_deal2.php:        $rank             = $this->get_in_str_val("rank");
ajax_deal2.php:        $file_url         = $this->get_in_str_val("file_url");
ajax_deal2.php:        $create_adminid   =  $this->get_account_id();
ajax_deal2.php:        $id = $this->get_in_int_val('id');
ajax_deal2.php:        $ret = $this->t_student_score_info->field_update_list($id,$data);
ajax_deal2.php:        return $this->output_succ();
ajax_deal2.php:        $userid           = $this->get_in_int_val("userid");
ajax_deal2.php:        $subject          = $this->get_in_int_val("subject");
ajax_deal2.php:        $stu_score_type   = $this->get_in_int_val("stu_score_type");
ajax_deal2.php:        $stu_score_time   = strtotime($this->get_in_str_val("stu_score_time"));
ajax_deal2.php:        $score            = $this->get_in_int_val("score");
ajax_deal2.php:        $rank             = $this->get_in_str_val("rank");
ajax_deal2.php:        $file_url         = $this->get_in_str_val("file_url");
ajax_deal2.php:    $create_adminid   =  $this->get_account_id();
ajax_deal2.php:        $ret_info = $this->t_student_score_info->row_insert([
ajax_deal2.php:        return $this->output_succ();
ajax_deal2.php:        $id = $this->get_in_int_val('id');
ajax_deal2.php:        $this->t_student_score_info->row_delete($id);
ajax_deal2.php:        return $this->output_succ();
ajax_deal.php:        $flowid=$this->get_in_int_val("flowid");
ajax_deal.php:            return $this->output_err("没有数据");
ajax_deal.php:        $flow_type=$this->t_flow->get_flow_type($flowid);
ajax_deal.php:            return $this->output_err("没有数据");
ajax_deal.php:        $ret_info=$this->t_flow_node->get_node_list($flowid);
ajax_deal.php:            $this->cache_set_item_account_nick($item);
ajax_deal.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
ajax_deal.php:        return $this->output_succ(array('data' => $ret_info));
ajax_deal.php:        $flowid=$this->get_in_int_val("flowid");
ajax_deal.php:        $data=$this->t_flow->field_get_list($flowid,"*");
ajax_deal.php:            return $this->output_err("没有数据");
ajax_deal.php:                "admin_nick" => $this->cache_get_account_nick($adminid),
ajax_deal.php:        } while ($node_type  != -1);
ajax_deal.php:            "node_type" => -1,
ajax_deal.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
ajax_deal.php:        return $this->output_succ(array('data' => $ret_info));
ajax_deal.php:        $record_audio_server1=$this->get_in_str_val("record_audio_server1","" );
ajax_deal.php:        $id_list_str= $this->get_in_str_val("id_list");
ajax_deal.php:            return $this->output_err("还没选择例子");
ajax_deal.php:            $this->t_lesson_info->field_update_list($lessonid,[
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $lessonid=$this->get_in_lessonid();
ajax_deal.php:        $lesson_info=$this->t_lesson_info->field_get_list($lessonid,"*");
ajax_deal.php:        $adminid= $this->get_in_adminid();
ajax_deal.php:        list($start_time, $end_time) = $this->get_in_date_range(0,0);
ajax_deal.php:        $page_info= $this->get_in_page_info();
ajax_deal.php:        $ret_info=$this->t_test_lesson_subject_require->tongji_fail_lesson_list($page_info, $adminid, $start_time, $end_time);
ajax_deal.php:            $this->cache_set_item_student_nick($item);
ajax_deal.php:            $this->cache_set_item_teacher_nick($item);
ajax_deal.php:        return $this->output_ajax_table ($ret_info);
ajax_deal.php:        $userid=$this->get_in_userid();
ajax_deal.php:        $parentid=$this->get_in_parentid();
ajax_deal.php:        $wx_openid=$this->get_in_wx_openid();
ajax_deal.php:        $phone = $this->get_in_phone();
ajax_deal.php:        $bankcard = $this->get_in_str_val('bankcard');
ajax_deal.php:        $idcard = $this->get_in_str_val('idcard');
ajax_deal.php:        $bank_address = $this->get_in_str_val('bank_address');
ajax_deal.php:        $bank_account = $this->get_in_str_val('bank_account');
ajax_deal.php:        $bank_phone = $this->get_in_str_val('bank_phone');
ajax_deal.php:        $bank_province = $this->get_in_str_val('bank_province');
ajax_deal.php:        $bank_city = $this->get_in_str_val('bank_city');
ajax_deal.php:        $bank_type = $this->get_in_str_val('bank_type');
ajax_deal.php:        $zfb_name = $this->get_in_str_val('zfb_name');
ajax_deal.php:        $zfb_account = $this->get_in_str_val('zfb_account');
ajax_deal.php:        $this->t_agent->row_insert([
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $orderid      = $this->get_in_int_val('orderid');
ajax_deal.php:        $aid      = $this->get_in_int_val('aid');
ajax_deal.php:        $pid      = $this->get_in_int_val('pid');
ajax_deal.php:        $p_price  = $this->get_in_int_val('p_price');
ajax_deal.php:        $ppid     = $this->get_in_int_val('ppid');
ajax_deal.php:        $pp_price = $this->get_in_int_val('pp_price');
ajax_deal.php:        $this->t_agent_order->row_insert([
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $aid=$this->get_in_int_val('aid');
ajax_deal.php:        $cash=$this->get_in_int_val('cash');
ajax_deal.php:        $type=$this->get_in_int_val('type');
ajax_deal.php:        $this->t_agent_cash->row_insert([
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $id=$this->get_in_id();
ajax_deal.php:        $parentid=$this->get_in_parentid();
ajax_deal.php:        $phone = $this->get_in_phone();
ajax_deal.php:        $wx_openid = $this->get_in_wx_openid();
ajax_deal.php:        $bankcard = $this->get_in_str_val('bankcard');
ajax_deal.php:        $idcard = $this->get_in_str_val('idcard');
ajax_deal.php:        $bank_address = $this->get_in_str_val('bank_address');
ajax_deal.php:        $bank_account = $this->get_in_str_val('bank_account');
ajax_deal.php:        $bank_phone = $this->get_in_str_val('bank_phone');
ajax_deal.php:        $bank_province = $this->get_in_str_val('bank_province');
ajax_deal.php:        $bank_city = $this->get_in_str_val('bank_city');
ajax_deal.php:        $bank_type = $this->get_in_str_val('bank_type');
ajax_deal.php:        $zfb_name = $this->get_in_str_val('zfb_name');
ajax_deal.php:        $zfb_account = $this->get_in_str_val('zfb_account');
ajax_deal.php:        $this->t_agent->field_update_list($id,[
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $orderid=$this->get_in_int_val('orderid');
ajax_deal.php:        $aid=$this->get_in_int_val('aid');
ajax_deal.php:        $orderid_new=$this->get_in_int_val('orderid_new');
ajax_deal.php:        $pid=$this->get_in_int_val('pid');
ajax_deal.php:        $p_price=$this->get_in_int_val('p_price');
ajax_deal.php:        $ppid = $this->get_in_int_val('ppid');
ajax_deal.php:        $pp_price = $this->get_in_int_val('pp_price');
ajax_deal.php:        $this->t_agent_order->field_update_list($orderid,[
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $id=$this->get_in_int_val('id');
ajax_deal.php:        $aid=$this->get_in_int_val('aid');
ajax_deal.php:        $cash = $this->get_in_int_val('cash');
ajax_deal.php:        $type = $this->get_in_int_val('type');
ajax_deal.php:        $this->t_agent_cash->field_update_list($id,[
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $id=$this->get_in_id();
ajax_deal.php:        $this->t_agent->row_delete($id);
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $orderid=$this->get_in_int_val('orderid');
ajax_deal.php:        $this->t_agent_order->row_delete($orderid);
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $id=$this->get_in_int_val('id');
ajax_deal.php:        $this->t_agent_cash->row_delete($id);
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $teacher_id=$this->get_in_int_val("teacher_id",0);
ajax_deal.php:        $cc_id=$this->get_in_cc_id();
ajax_deal.php:        $lesson_id=$this->get_in_int_val('lesson_id', 0);
ajax_deal.php:        $question_type=$this->get_in_question_type();
ajax_deal.php:        $question_content=$this->get_in_question_content();
ajax_deal.php:        $teacher_flag=$this->get_in_teacher_flag();
ajax_deal.php:        $teacher_time=$this->get_in_teacher_time();
ajax_deal.php:        $cc_flag=$this->get_in_cc_flag();
ajax_deal.php:        $cc_time=$this->get_in_cc_time();
ajax_deal.php:        $this->t_teacher_apply->row_insert([
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $id=$this->get_in_id();
ajax_deal.php:        $cc_flag=$this->get_in_cc_flag();
ajax_deal.php:            $this->t_teacher_apply->field_update_list($id,[
ajax_deal.php:            $this->t_teacher_apply->field_update_list($id,[
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $id=$this->get_in_id();
ajax_deal.php:        $this->t_teacher_apply->row_delete($id);
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $machine_id= $this->get_in_int_val("machine_id");
ajax_deal.php:        $this->t_kaoqin_machine->send_cmd_unlock($machine_id);
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $machine_id= $this->get_in_int_val("machine_id");
ajax_deal.php:        $this->t_kaoqin_machine->send_cmd_reboot($machine_id);
ajax_deal.php:        return $this->output_succ();
ajax_deal.php:        $adminid=$this->get_account_id();
ajax_deal.php:        //$adminid=-1;
ajax_deal.php:        list($start_time,$end_time)=$this->get_in_date_range_day(0);
ajax_deal.php:        $status_map= $this->t_todo->get_todo_status_count_info(
ajax_deal.php:        return  $this->output_succ(["status_info"=> $status_info  ] ) ;
ajax_deal.php:        $adminid=$this->get_account_id();
ajax_deal.php:        list($start_time,$end_time)=$this->get_in_date_range_day(0);
ajax_deal.php:        //$adminid=-1;
ajax_deal.php:        $ret_info= $this->t_todo->get_list(
ajax_deal.php:            $page_info,$adminid,-1,-1, $start_time,$end_time);
ajax_deal.php:            $percent=-1;
ajax_deal.php:                $percent = intval(($now-$start_time)/($end_time-$start_time)*10)*10;
ajax_deal.php:        return $this->output_succ(["data"=>$ret_info["list"]]);
ajax_deal.php:        $todoid=$this->get_in_int_val("todoid");
ajax_deal.php:        return $this->output_succ();
api.php:        $sn= $this->get_in_str_val("sn");
api.php:        $this->sn=$sn;
api.php:        $this->t_kaoqin_machine->set_last_post_time($sn);
api.php:        return $this->api_output_succ($sync_data_list );
api.php:        return $this->api_output_succ([
api.php:        //"time":"2017-04-1413:10:58","verify":1,"ccid":"1236
api.php:            $this->t_admin_card_log->row_insert([
api.php:        $this->t_manager_info->field_update_list($ccid,[
api.php:        $this->t_manager_info->field_update_list($ccid,[
api.php:        $row=$this->t_manager_info->field_get_list($ccid,"del_flag");
api.php:            $this->t_manager_info->sync_kaoqin_del_user([$ccid]);
api.php:        $sn= $this->get_in_str_val("sn");
api.php:        $this->sn=$sn;
api.php:                $this->do_post_clockin($data);
api.php:                $this->do_post_fingerprint($data);
api.php:                $this->do_post_headpic($data);
api.php:                $this->do_post_user($data);
api.php:        return $this->api_output_succ( $id_list );
api.php:            return $this->do_get();
api.php:            return $this->do_post();
appoint.php:        $package_type = $this->get_in_str_val('package_type',-1);
appoint.php:        $page_num     = $this->get_in_page_num();
appoint.php:        $ret_info = $this->t_appointment_info->get_appoint_course_list($package_type,$page_num);
appoint.php:        $tea_list     = $this->t_teacher_info->get_teacher_simple_list();
appoint.php:        return $this->pageView(__METHOD__,$ret_info,['tea_list'=>$tea_list],[
appoint.php:        $page_num = $this->get_in_page_num();
appoint.php:        $ret_course = $this->t_appointment_info->get_appoint_course($page_num);
appoint.php:        $packageid = $this->get_in_int_val('packageid', 0);
appoint.php:        $ret_get = $this->t_appointment_info->get_package_simple_info($packageid);
appoint.php:        $packageid   = $this->get_in_int_val('packageid', 0);
appoint.php:        $ret_pic = $this->t_appointment_info->get_package_pic($packageid);
appoint.php:        $packageid   = $this->get_in_int_val('packageid', 0);
appoint.php:        $package_pic = $this->get_in_str_val('package_pic', '');
appoint.php:        $ret_set = $this->t_appointment_info->set_package_pic($packageid,$package_pic);
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        return $this->Pageview(__METHOD__,'' );
article_wx.php:        $img_url = $this->get_img_url($url);
article_wx.php:        $wechat->mediaId = $mediaId['media_id'];
article_wx.php:        // $ret = $wechat->run();
article_wx.php:        // $ret =  $wechat->send_img($mediaId);
ass_manage.php:		$ass_nick       = $this->get_in_str_val('ass_nick',"");
ass_manage.php:		$administrator  = $this->get_in_str_val('administrator',"");
ass_manage.php:		$gender         = $this->get_in_int_val('gender', -1);
ass_manage.php:		$birth          = $this->get_in_str_val('birth',"");
ass_manage.php:		$work_year      = $this->get_in_int_val('work_year', 0);
ass_manage.php:		$phone          = $this->get_in_str_val('phone',"");
ass_manage.php:		$email          = $this->get_in_str_val('email',"");
ass_manage.php:		$assistant_type = $this->get_in_int_val('assistant_type',-1);
ass_manage.php:		$school         = $this->get_in_str_val('school',"");
ass_manage.php:        $ret_auth = $this->t_manager_info->check_permission($this->get_account(), ASS_ARCHIVES);
ass_manage.php:            return outputJson(array('ret' => NOT_AUTH, 'info' => $this->err_string[NOT_AUTH]));
ass_manage.php:		if($ass_nick == "" || $birth == "" || $phone == "" || $assistant_type == -1 || $gender == -1){
ass_manage.php:			return outputJson(array('ret' => -1, 'info'  => '参数不完整，请检查后重新确认'));
ass_manage.php:        $ret_num = $this->t_phone_to_user->is_phone_valid($phone, 3);
ass_manage.php:			return outputJson(array('ret' => -1, 'info'  => '账号已经存在'));
ass_manage.php:		$tmp = explode('-',$birth);
ass_manage.php:		$assid = $this->t_user_info->add_account_ass(md5($passwd));
ass_manage.php:			return outputJson(array('ret' => -1, 'info'  => '插入失败'));
ass_manage.php:        //$this->users->add_ejabberd_account($assid,md5($passwd));
ass_manage.php:        //$this->users->add_ejabberd_account("ad_" . $assid,md5($passwd));
ass_manage.php:		$ret_db = $this->t_phone_to_user->add_phone_to_ass($assid, $phone);
ass_manage.php:			return outputJson(array('ret' => -1, 'info'  => '插入失败'));
ass_manage.php:		$ret_db = $this->t_assistant_info->add_new_ass($ass_nick, $gender, $birth, $work_year, $phone, $email,
ass_manage.php:			return outputJson(array('ret' => -1, 'info'  => '插入失败'));
ass_manage.php:        if($this->t_admin_users->is_manage_exist($phone))
ass_manage.php:            return outputJson(array('ret' => -1, 'info' => '用户已经存在'));
ass_manage.php:        $admin_id = $this->t_admin_users->add_manager($phone, $ass_nick, $email, $phone, $md5_passwd);
ass_manage.php:        $this->t_adid_to_adminid->add_ad_to_admin($assid, $admin_id);
authority.php:        $account    = $this->get_in_int_val('account',-1);
authority.php:        $flag       = $this->get_in_int_val('flag',-1 );
authority.php:        $start_date = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-3*86400 ));
authority.php:        $end_date   = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
authority.php:        $login_info = $this->get_in_str_val("login_info","");//sql
authority.php:        $page_num   = $this->get_in_page_num();
authority.php:        $ret_info     = $this->t_login_log->get_login_list($account,$flag,$start_date_s,$end_date_s,$login_info,$page_num);
authority.php:        return $this->pageView(__METHOD__,$ret_info);
authority.php:        $account   = $this->get_in_str_val('account','');
authority.php:        $role      = $this->get_in_int_val('account_role',0);
authority.php:        $ret_info  = $this->t_manager_info->get_sim_role($account);
authority.php:        $uid = $this->get_in_int_val('uid','');
authority.php:        $account_role = $this->get_in_int_val('account_role',0);
authority.php:        $creater_adminid = $this->get_in_int_val('creater_adminid',0);
authority.php:        $this->t_manager_info->field_update_list($uid,[
authority.php:        return $this->output_succ();
authority.php:        $this->get_in_int_val("assign_groupid", -1);
authority.php:        $this->get_in_int_val("assign_account_role",-1);
authority.php:        $creater_adminid=$this->get_in_int_val("creater_adminid",-1);
authority.php:        $adminid           = $this->get_in_adminid(-1);
authority.php:        $uid               = $this->get_in_int_val('uid',0);
authority.php:        $user_info         = trim($this->get_in_str_val('user_info',''));
authority.php:        $has_question_user = $this->get_in_int_val('has_question_user',0);
authority.php:        $del_flag          = $this->get_in_int_val('del_flag',0);
authority.php:        $page_info         = $this->get_in_page_info();
authority.php:        $account_role      = $this->get_in_int_val('account_role', -1);
authority.php:        $cardid            = $this->get_in_int_val("cardid",-1);
authority.php:        $day_new_user_flag = $this->get_in_boolean_val("day_new_user_flag",-1);
authority.php:        $tquin             = $this->get_in_int_val("tquin", -1);
authority.php:        $fulltime_teacher_type = $this->get_in_int_val("fulltime_teacher_type", -1);
authority.php:        $seller_level      = $this->get_in_el_seller_level();
authority.php:            $cardid = -1;
authority.php:        $ret_info = $this->t_manager_info->get_all_manager( $page_info,$uid,$user_info,$has_question_user, $creater_adminid,$account_role,$del_flag,$cardid,$tquin,$day_new_user_flag,$seller_level,$adminid,$fulltime_teacher_type);
authority.php:        $group_list=$this->t_authority_group->get_auth_groups();
authority.php:            $this->cache_set_item_account_nick($item,"creater_adminid", "creater_admin_nick");
authority.php:            $this->cache_set_item_account_nick($item,"up_adminid", "up_admin_nick");
authority.php:            if($item["seller_level_str"] == -1){
authority.php:        return $this->pageView(__METHOD__,$ret_info);
authority.php:        $this->get_in_int_val("assign_groupid", -1);
authority.php:        $this->get_in_int_val("assign_account_role",-1);
authority.php:        $creater_adminid=$this->get_in_int_val("creater_adminid",-1);
authority.php:        $uid               = $this->get_in_int_val('uid',0);
authority.php:        $user_info         = trim($this->get_in_str_val('user_info',''));
authority.php:        $has_question_user = $this->get_in_int_val('has_question_user',0);
authority.php:        $del_flag          = $this->get_in_int_val('del_flag',0);
authority.php:        $page_info          = $this->get_in_page_info();
authority.php:        $account_role      = $this->get_in_int_val('account_role', -1);
authority.php:        $cardid            = $this->get_in_int_val("cardid",-1);
authority.php:        $day_new_user_flag = $this->get_in_boolean_val("day_new_user_flag",-1);
authority.php:        $tquin             = $this->get_in_int_val("tquin", -1);
authority.php:            $cardid = -1;
authority.php:        $ret_info = $this->t_manager_info->get_all_manager( $page_info,$uid,$user_info,$has_question_user, $creater_adminid,$account_role,$del_flag,$cardid,$tquin,$day_new_user_flag);
authority.php:        $group_list=$this->t_authority_group->get_auth_groups();
authority.php:            $this->cache_set_item_account_nick($item,"creater_adminid", "creater_admin_nick");
authority.php:            $this->cache_set_item_account_nick($item,"up_adminid", "up_admin_nick");
authority.php:            if($item["seller_level_str"] == -1){
authority.php:        return $this->pageView(__METHOD__,$ret_info);
authority.php:        $permission = $this->get_in_str_val('permission');
authority.php:        $list    = $this->t_authority_group->get_all_list();
authority.php:        return $this->output_succ(["data"=> $list]);
authority.php:        $uid = $this-> get_in_int_val('uid');
authority.php:        $groupid_list = \App\Helper\Utils::json_decode_as_int_array( $this->get_in_str_val("groupid_list"));
authority.php:        $this->t_manager_info->field_update_list($uid,[
authority.php:        return $this->output_succ();
authority.php:        $uid= $this->get_in_str_val("uid","");
authority.php:        $del_flag= $this->get_in_int_val("del_flag","");
authority.php:        $this->t_manager_info->field_update_list($uid, $set_arr);
authority.php:        $this->t_manager_info->sync_kaoqin_user($uid);
authority.php:        return $this->output_succ();
authority.php:        $user_name = $this->get_in_str_val('user_name',"");
authority.php:            return outputJson(array('ret' =>-1,'info'=>'用户名为空'));
authority.php:        $ret_auth = $this->manage_model->check_permission($this->get_account(), GRP_MANAGE);
authority.php:            return outputJson(array('ret' => NOT_AUTH, 'info' => $this->err_string[NOT_AUTH]));
authority.php:        if($this->manage_model->is_auth_grp_exist($group_name))
authority.php:            return outputJson(array('ret'  => -1, 'info' => '用户组'.$group_name."已经存在！"));
authority.php:        $ret_info = $this->t_manager_info->add_user_name($user_name);
authority.php:        $uid      = $this->get_in_int_val('uid',0);
authority.php:        $ret_info = $this->t_manager_info->get_show_manage_info($uid);
authority.php:        $group_name=$this->get_in_str_val("group_name");
authority.php:        $user_list=$this->t_authority_group->get_admin_list_by_group_name($group_name);
authority.php:        $groupid = $this->get_in_int_val('groupid',1);
authority.php:        $user_list = $this->t_admin_group->get_admin_group_by_group_id($groupid);
authority.php:            $item['admin_nick']    = $item["account"] . '-'. $item ["name"];
authority.php:        $ret_info=$this->t_authority_group-> get_auth_groups();
authority.php:        return $this->view(__METHOD__, [
authority.php:        $list=$this->t_authority_group-> get_auth_groups_new();
authority.php:        return $this->pageView(__METHOD__,$ret_info,
authority.php:        $groupid= $this->get_in_int_val('group_id',-1);
authority.php:        $adminid= $this->get_in_int_val('admin_id',-1);
authority.php:        $page_num  = $this->get_in_page_num();
authority.php:        $ret_info = $this->t_admin_group->get_info_list($groupid,$adminid,$page_num);
authority.php:            $item['admin_nick']    = $this->cache_get_account_nick($item["adminid"]);
authority.php:        $adminid_str=$this->t_admin_group->get_adminid();
authority.php:        return $this->pageView(__METHOD__,$ret_info, [
authority.php:        $adminid= $this->get_in_int_val('adminid',-1);
authority.php:        $ret_info = $this->t_admin_group->get_member_sim($adminid);
authority.php:        $groupid= $this->get_in_int_val('groupid',-1);
authority.php:        $adminid= $this->get_in_int_val('adminid',-1);
authority.php:        $ret_info = $this->t_admin_group->add_member($groupid,$adminid);
authority.php:        return $this->output_succ();
authority.php:        $groupid= $this->get_in_int_val('groupid',-1);
authority.php:        $adminid= $this->get_in_int_val('adminid',-1);
authority.php:        $old_adminid= $this->get_in_int_val('old_adminid',-1);
authority.php:        $ret_info = $this->t_admin_group->edit_member($groupid,$adminid,$old_adminid);
authority.php:        return $this->output_succ();
authority.php:        $adminid= $this->get_in_int_val('adminid',-1);
authority.php:        $ret_info = $this->t_admin_group->delete_member_info($adminid);
authority.php:        return $this->output_succ();
authority.php:        $account = $this->get_in_str_val('account',"");
authority.php:        $passwd  = $this->get_in_str_val('passwd',"");
authority.php:        $name    = $this->get_in_str_val('name',"");
authority.php:        $email   = $this->get_in_str_val('email',"");
authority.php:        $phone   = $this->get_in_str_val('phone',"");
authority.php:        $groupid   = $this->get_in_int_val('groupid',0);
authority.php:        $account_role = $this->get_in_int_val('account_role',0);
authority.php:            return $this->output_err("参数错误");
authority.php:        if($this->t_admin_users->get_id_by_account($account)) {
authority.php:            return $this->output_err("用户已经存在 t_admin_users");
authority.php:        if($this->t_manager_info->get_id_by_account($account)) {
authority.php:            return $this->output_err("用户已经存在 t_manager_info");
authority.php:        if($this->t_manager_info->get_id_by_phone($phone)) {
authority.php:            return $this->output_err("电话已经存在:$phone ");
authority.php:        $adminid=$this->get_account_id();
authority.php:        $this->t_admin_users->row_insert([
authority.php:        $uid=$this->t_admin_users->get_last_insertid();
authority.php:        $this->t_manager_info->row_insert([
authority.php:        return $this->output_succ();
authority.php:        $this->set_in_value("account_role", E\Eaccount_role::V_2);
authority.php:        $this->set_in_value("assign_account_role",E\Eaccount_role::V_2);
authority.php:        //$this->set_in_value("creater_adminid",$this->get_account_id() );
authority.php:        return $this->manager_list( );
authority.php:        return $this->manager_list( );
authority.php:        $this->set_in_value("account_role", E\Eaccount_role::V_5);
authority.php:        $this->set_in_value("assign_account_role",E\Eaccount_role::V_5);
authority.php:        //$this->set_in_value("creater_adminid",$this->get_account_id() );
authority.php:        return $this->manager_list( );
authority.php:        $this->set_in_value("fulltime_teacher_type",1);
authority.php:        return $this->manager_list_for_qz();
authority.php:        $this->set_in_value("fulltime_teacher_type",2);
authority.php:        return $this->manager_list_for_qz();
authority.php:        $this->set_in_value("account_role", E\Eaccount_role::V_1);
authority.php:        $this->set_in_value("assign_account_role",E\Eaccount_role::V_1);
authority.php:        return $this->manager_list( );
authority.php:        $uid=$this->get_in_int_val("uid");
authority.php:        $uid   = $this->get_in_int_val('uid');
authority.php:        $fulltime_teacher_type   = $this->get_in_int_val('fulltime_teacher_type');
authority.php:        $this->t_manager_info->field_update_list($uid,[
authority.php:        return $this->output_succ();
CacheNick.php:        $this->cache_map_config = [
CacheNick.php:        $redis= $this->get_redis();
CacheNick.php:        $key=$this->get_key($type_str,$id);
CacheNick.php:        $nick=$redis->get($key);
CacheNick.php:        $config_item = $this->cache_map_config[$type_str];
CacheNick.php:        $ret_row = $this->t_student_info->main_get_row($sql);
CacheNick.php:            $redis->set($key,$nick);
CacheNick.php:        return $this->cache_get_map_str("teacher",$id);
CacheNick.php:        return $this->cache_get_map_str("assistant",$id);
CacheNick.php:        return $this->cache_get_map_str("student",$id);
CacheNick.php:        $this->cache_del_nick("student",$id);
CacheNick.php:        $this->cache_del_nick("teacher",$id);
CacheNick.php:        $key=$this->get_key($type_str,$id);
CacheNick.php:        $redis= $this->get_redis();
CacheNick.php:        $redis->del($key);
CacheNick.php:        return $this->cache_get_map_str("parent",$id);
CacheNick.php:        return $this->cache_get_map_str("account",$id);
CacheNick.php:        return $this->cache_get_map_str("seller",$id);
CacheNick.php:        $item[$nick_field_name] = $this->cache_get_teacher_nick($item[$field_name]);
CacheNick.php:        $item[$nick_field_name] = $this->cache_get_account_nick($item[$field_name]);
CacheNick.php:        $item[$nick_field_name] = $this->cache_get_parent_nick($item[$field_name]);
CacheNick.php:        $item[$nick_field_name] = $this->cache_get_assistant_nick($item[$field_name]);
CacheNick.php:        $item[$nick_field_name] = $this->cache_get_student_nick($item[$field_name]);
ceshi.php:        list($start_time,$end_time)=$this->get_in_date_range(0,-1);
ceshi.php:        $ret_info=$this->t_student_info-> get_closest_list($start_time,$end_time );
ceshi.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info( $ret_info));
ceshi.php:        //return $this->output_succ();
common_ex.php:        $code       = $this->get_in_str_val('code');
common_ex.php:        $phone      = $this->get_in_phone();
common_ex.php:            return $this->output_err("手机验证码不对,请重新输入");
common_ex.php:        return $this->book_free_lesson();
common_ex.php:        $phone = trim($this->get_in_str_val('phone'));
common_ex.php:        $code_flag= $this->get_in_int_val("code_flag",0) ;
common_ex.php:            return $this->output_err("电话号码出错");
common_ex.php:        return $this->output_succ($ret_arr);
common_ex.php:        $nick     = $this->get_in_str_val("nick");
common_ex.php:        $phone    = $this->get_in_str_val("phone");
common_ex.php:        $sms_type = $this->get_in_str_val("sms_type");
common_ex.php:        $grade    = $this->get_in_grade();
common_ex.php:        $origin   = urldecode( $this->get_in_str_val("origin")) ;
common_ex.php:        $subject      = $this->get_in_subject();
common_ex.php:        $has_pad      = $this->get_in_int_val("has_pad");
common_ex.php:        $trial_type   = $this->get_in_int_val('trial_type', 0);
common_ex.php:        $class_time   = $this->get_in_str_val('class_time');
common_ex.php:        $course_name  = $this->get_in_str_val("course_name");
common_ex.php:        $qq           = $this->get_in_int_val("qq");
common_ex.php:        $add_to_main_flag = $this->get_in_int_val("add_to_main_flag",0);
common_ex.php:            return outputJson(array('ret' => -1, 'info' => "请输入规范的手机号!"));
common_ex.php:        $client_ip = $this->get_in_client_ip();
common_ex.php:            return outputJson(array('ret' => -1, 'info' => "您预约的次数太多了!"));
common_ex.php:            return outputJson(array('ret' => -1, 'info' => "您预约的次数太多了!"));
common_ex.php:        $this->t_book_revisit->add_book_revisit($phone,"COMMING:$msg","system");
common_ex.php:        $user_ip = $this->get_in_client_ip();
common_ex.php:            $public_telphone = "400-680-6180";
common_ex.php:             * 预约完成4-28
common_ex.php:            $public_telphone = "400-680-6180";
common_ex.php:        $userid  = $this->t_seller_student_new->book_free_lesson_new( $nick,$phone,$grade, $origin, $subject, $has_pad );
common_ex.php:        return $this->output_succ(["userid"=> $userid,"name"=>$name]);
common_ex.php:        $reference = $this->get_in_str_val("reference");
common_ex.php:        $name      = $this->get_in_str_val("name");
common_ex.php:        $phone     = $this->get_in_str_val("phone");
common_ex.php:        $email     = $this->get_in_str_val("email");
common_ex.php:        $school    = $this->get_in_str_val("school");
common_ex.php:        $subject   = $this->get_in_str_val("subject");
common_ex.php:        $grade     = $this->get_in_str_val("grade");
common_ex.php:        $textbook  = $this->get_in_str_val("textbook");
common_ex.php:        $self_introduction_experience= $this->get_in_str_val("self_introduction_experience");
common_ex.php:            return $this->output_err("请输入正确的手机号！");
common_ex.php:        $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
common_ex.php:            return $this->output_err("提交失败,此号码已被推荐！");
common_ex.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert([
common_ex.php:            return $this->output_succ();
common_ex.php:            return $this->output_err("提交失败，请重试！");
common_new.php:        $wiki_key=$this->get_in_str_val("wiki_key");
common_new.php:        return $this->output_succ(["account"=> $account]);
common_new.php:        $to=$this->get_in_str_val("to");
common_new.php:        $title=$this->get_in_str_val("title");
common_new.php:        $body=trim($this->get_in_str_val("body"));
common_new.php:        $body.="<br/>from:  " .$this->get_in_client_ip();
common_new.php:        $xls_data=$this->get_in_str_val("xls_data");
common_new.php:            return $this->output_err("download error");
common_new.php:        $objPHPExcel->getProperties()->setCreator("jim ")
common_new.php:                             ->setLastModifiedBy("jim")
common_new.php:                             ->setTitle("jim title")
common_new.php:                             ->setSubject("jim subject")
common_new.php:                             ->setDescription("jim Desc")
common_new.php:                             ->setKeywords("jim key")
common_new.php:                             ->setCategory("jim  category");
common_new.php:        $objPHPExcel->setActiveSheetIndex(0);
common_new.php:                $objPHPExcel->getActiveSheet()->setCellValue( $pos_str, $cell_data);
common_new.php:      header('Content-type: application/vnd.ms-excel');
common_new.php:      header( "Content-Disposition:attachment;filename=\"$date.xlsx\"");
common_new.php:      $objWriter->save('php://output');
common_new.php:        $ip=$this->get_in_client_ip();
common_new.php:        $this->t_audio_record_server->add_server($ip);
common_new.php:        $config_userid=$this->t_audio_record_server->get_config_userid($ip);
common_new.php:                $db_ip=$this->t_audio_record_server->get_ip_from_config_userid($config_userid);
common_new.php:                    $this->t_audio_record_server->field_update_list($ip,[
common_new.php:        return $this->output_succ(["config_userid" => $config_userid]);
common_new.php:        $studentid=$this->get_in_studentid();
common_new.php:        $ret_list=$this->t_lesson_info->get_current_lessons("");
common_new.php:        $this->t_online_count_log->add($logtime-$logtime%60,$online_count);
common_new.php:        return date("Y-m-d H:i:s")." ".$online_count ."\n";
common_new.php:        $client_ip=$this->get_in_client_ip();
common_new.php:        $get_self_flag=$this->get_in_int_val("get_self_flag",0);
common_new.php:            $this->t_audio_record_server->add_server($client_ip);
common_new.php:        $ret_list=$this->t_lesson_info->get_current_lessons($client_ip);
common_new.php:        return $this->output_succ(["data"=>$ret_list]);
common_new.php:        $code = $this->get_in_str_val("code");
common_new.php:        $url  = $this->get_in_str_val("url");
common_new.php:        return $this->output_succ();
common_new.php:        $admin_str = $this->get_in_str_val("adminid");
common_new.php:        $next_revisit_count = $this->t_seller_student_new->get_today_next_revisit_count($adminid);
common_new.php:        $require_info     = $this->t_test_lesson_subject->get_require_and_return_back_count($adminid);
common_new.php:        $notify_lesson_info = $this->t_test_lesson_subject_require->get_notify_lesson_info($adminid);
common_new.php:        $row_item=$this->t_seller_student_new-> get_lesson_status_count($adminid );
common_new.php:        $no_confirm_count = $this->t_test_lesson_subject_require->get_no_confirm_count($adminid);
common_new.php:        return $this->output_succ(
common_new.php:        $admin_str = $this->get_in_str_val("adminid");
common_new.php:        $login_jump_key=$this->get_in_str_val("login_jump_key");
common_new.php:        if ($adminid==$arr[0] && time(NULL)-$arr[1] <300 ) {
common_new.php:        return $this->output_succ(["login_flag"=>$login_flag]);
common_new.php:        $answer_begin_time            = strtotime($this->get_in_str_val("answer_begin_time"));
common_new.php:        $answer_end_time              = strtotime($this->get_in_str_val("answer_end_time"));
common_new.php:        $name                         = $this->get_in_str_val("name");
common_new.php:        $phone                        = trim($this->get_in_str_val("phone"));
common_new.php:        $email                        = $this->get_in_str_val("email");
common_new.php:        $grade                        = $this->get_in_int_val("grade");
common_new.php:        $grade_start                  = $this->get_in_int_val("grade_start");
common_new.php:        $grade_end                    = $this->get_in_int_val("grade_end");
common_new.php:        $subject_ex                   = $this->get_in_str_val("subject_ex");
common_new.php:        $textbook                     = trim($this->get_in_str_val("textbook"),",");
common_new.php:        $school                       = $this->get_in_str_val("school");
common_new.php:        $teacher_type                 = $this->get_in_str_val("teacher_type");
common_new.php:        $self_introduction_experience = $this->get_in_str_val("self_introduction_experience");
common_new.php:        $reference                    = $this->get_in_int_val("reference");
common_new.php:        $custom                       = $this->get_in_str_val("custom");
common_new.php:        $lecture_appointment_status   = $this->get_in_int_val("lecture_appointment_status",0);
common_new.php:        $lecture_appointment_origin   = $this->get_in_int_val("lecture_appointment_origin",0);
common_new.php:        $qq                           = $this->get_in_str_val("qq","");
common_new.php:        $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
common_new.php:            return $this->output_err("该手机号已提交过了,不能重新提交!");
common_new.php:            return $this->output_err("请填写正确的qq号码!");
common_new.php:            return $this->output_err("请选择科目!");
common_new.php:            return $this->output_err("请选择您的教学经历!");
common_new.php:        $grade = $this->check_grade_by_subject($grade,$subject_ex);
common_new.php:            return $this->output_err("请选择规范的年级!");
common_new.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert($data);
common_new.php:                $html  = $this->get_email_html($subject_ex,$grade_start,$grade_end,$grade,$name);
common_new.php:                $reference_info = $this->t_teacher_info->get_reference_info_by_phone($phone);
common_new.php:            return $this->output_succ();
common_new.php:            return $this->output_err("添加失败，请重试！");
common_new.php:        $email = $this->get_in_str_val("email");
common_new.php:        $id    = $this->get_in_int_val("id");
common_new.php:        $name  = $this->get_in_str_val("name");
common_new.php:        \App\Helper\Utils::logger("lecture email:".$email."time :".date("Y-m-d H:i",time()));
common_new.php:            $html  = $this->get_email_html(0,0,0,0,$name);
common_new.php:                return $this->output_err("邮件发送失败!");
common_new.php:        return $this->output_succ();
common_new.php:        <meta charset='utf-8'>
common_new.php:         body{font-size:24px;line-height:48px;color:#666;}
common_new.php:         .t20{margin-top:20px;}
common_new.php:         .underline{text-decoration:underline;}
common_new.php:         .download-pc-url{cursor:pointer;}
common_new.php:                        <li>3、简历模板<a class='leo_blue' href='http://leowww.oss-cn-shanghai.aliyuncs.com/JianLi.docx'>点击下载</a></li>
common_new.php:                        <li>4、录制教程<a class='leo_blue' href='http://leowww.oss-cn-shanghai.aliyuncs.com/TeacherLecturePPT/MianShiLiuCheng.mp4' target='_blank'>点击播放</a></li>
common_new.php:                    如有疑问请加【LEO】试讲-答疑QQ群 : 608794924 <br/>
common_new.php:                    时薪：50-100RMB
common_new.php:        $objPHPExcel = $objReader->load($obj_file);
common_new.php:        $objPHPExcel->setActiveSheetIndex(0);
common_new.php:        $arr=$objPHPExcel->getActiveSheet()->toArray();
common_new.php:                    $this->t_seller_student_new->book_free_lesson_new(
common_new.php:        $file_url=$this->get_in_str_val("file_url");
common_new.php:        $public_flag=$this->get_in_int_val("public_flag",0);
common_new.php:        return $this->output_succ([
common_new.php:        $lessonid        = $this->get_in_int_val("lessonid");
common_new.php:        $lesson_abnormal = $this->get_in_str_val("lesson_abnormal");
common_new.php:            return $this->output_err("课程id出错！请重新进入本页面反馈！");
common_new.php:            return $this->output_err("请填写反馈内容！");
common_new.php:        $ret = $this->t_lesson_info->field_update_list($lessonid,[
common_new.php:            return $this->output_err("提交失败！请重试！");
common_new.php:        return $this->output_succ();
common_new.php:          customerNumberType 客户号码类型 客户号码类型，其值为1或2；1--固话，2--手机
common_new.php:          mainUniqueId 通话记录唯一标识 一通呼叫的唯一标识；如：ccic2_202-1367040082.6
common_new.php:          -------------
common_new.php:        $phone=$this->get_in_str_val("customerNumber");
common_new.php:        $cno =$this->get_in_str_val("cno");
common_new.php:        $userid=$this->t_seller_student_new->get_userid_by_phone($phone);
common_new.php:        $ss_info= $this->t_seller_student_new->field_get_list($userid,"*");
common_new.php:            $admin_info= $this->t_manager_info->get_info_by_tquin($cno);
common_new.php:                if(!$this->t_seller_student_new->check_admin_add($adminid,$get_count,$max_day_count )){
common_new.php:                    $this->t_manager_info->send_wx_todo_msg($account,"抢单", "目前你持有的例子数[$get_count]>=最高上限[$max_day_count]");
common_new.php:                if (!$this->t_seller_new_count->check_and_add_new_count($adminid,"获取新例子"))  {
common_new.php:                    $this->t_manager_info->send_wx_todo_msg($account,"抢单", "今天的配额,已经用完了");
common_new.php:                $this->t_manager_info->send_wx_todo_msg($account,"抢单", "成功!电话[$phone]");
common_new.php:                $this->t_seller_student_new->set_admin_info(
common_new.php:          cdr_main_unique_id 通话记录唯一标识 一通呼叫的唯一标识；如：ccic2_202-1367040082.6
common_new.php:          cdr_customer_number_type 来电或外呼客户号码类型: 手机/固话 客户号码类型，其值为1或2；1--固话，2--手机
common_new.php:          cdr_start_time 呼叫座席时间 UNIX时间戳；如：1367040082（易理解格式为2013-04-27 13:21:22）
common_new.php:        $cdr_bridge_time=$this->get_in_int_val("cdr_bridge_time");
common_new.php:        $cdr_end_time=$this->get_in_int_val("cdr_end_time");
common_new.php:        $cdr_bridge_cno = $this->get_in_int_val("cdr_bridge_cno");
common_new.php:        $cdr_status = $this->get_in_int_val("cdr_status");
common_new.php:        $cdr_customer_number = $this->get_in_str_val("cdr_customer_number");
common_new.php:        $this->t_tq_call_info->add(
common_new.php:            $cdr_end_time-$cdr_bridge_time,
common_new.php:        $this->t_seller_student_new->sync_tq($cdr_customer_number ,$called_flag, $cdr_bridge_time);
common_new.php:        $lessonid = $this->get_in_lessonid();
common_new.php:        $pdf_url  = $this->t_lesson_info->get_tea_cw_url($lessonid);
common_new.php:        $type       = $this->get_in_int_val("type");
common_new.php:        $usage_type = $this->get_in_int_val("usage_type");
common_new.php:        $list = $this->t_pic_manage_info->get_banner_pic_list($type,$usage_type);
common_new.php:        return $this->output_succ(["list"=>$list]);
common_new.php:        $teacherid = $this->get_in_teacherid();
common_new.php:        return $this->output_succ(
common_new.php:        $teacherid= $this->get_in_teacherid();
common_new.php:        $require_id= $this->get_in_int_val("require_id");
common_new.php:        $require_info= $this->t_test_lesson_subject_require->field_get_list($require_id,"curl_stu_request_test_lesson_time ,test_stu_grade");
common_new.php:        return $this->course_set_new_ex($require_id,$teacherid,$lesson_start,$grade,$adminid,$account);
common_new.php:        $phone = $this->get_in_str_val("phone");
common_new.php:        $teacher_info   = $this->t_teacher_info->get_teacher_info_by_phone($phone);
common_new.php:        $reference_info = $this->t_teacher_info->get_reference_info_by_phone($phone);
common_new.php:        $file=$this->get_in_str_val("file");
common_new.php:            return $this->output_err("没有权限");
common_new.php:        $table_list = json_decode($this->get_in_str_val("table_list"));
common_new.php:                $this->question_model->main_get_value(  "set names utf8" );
common_new.php:                $row  = $this->question_model->main_get_row($create_sql);
common_new.php:                $list = $this->question_model->main_get_list($desc_sql);
common_new.php:                $this->t_lesson_info ->main_get_value(  "set names utf8" );
common_new.php:                $row  = $this->t_lesson_info ->main_get_row($create_sql);
common_new.php:                $list = $this->t_lesson_info->main_get_list($desc_sql);
common_new.php:        return $this->output_succ(["table_desc_list" => $ret_map]);
common.php:        $user_list= $this->t_student_info-> get_user_list($arr["userids"]);
common.php:                "nickname" => isset($user_list[$userid]) ?  $user_list[$userid]["nick"]. "-$userid" :"$userid" ,
common.php:                    "time"     => "2015-06-03 12:12:50",//订单时间
common.php:        $to      = $this->get_in_str_val("to");
common.php:        $title   = $this->get_in_str_val("title");
common.php:        $body    = trim($this->get_in_str_val("body"));
common.php:        $is_html = trim($this->get_in_str_val("is_html"));
common.php:        $to     = $this->get_in_str_val("to","");
common.php:        <meta charset='UTF-8'>
common.php:                text-align: center;
common.php:              font-family: 'Microsoft YaHei', 微软雅黑, 'Microsoft JhengHei', Helvetica, Arial, FreeSans, Arimo, 'Droid Sans','wenquanyi micro hei','Hiragino Sans GB', 'Hiragino Sans GB W3', Arial, sans-serif;
common.php:              -webkit-font-smoothing: antialiased;
common.php:              -moz-osx-font-smoothing: grayscale;
common.php:                font-size: 20px;
common.php:                text-align: left;
common.php:                margin-bottom: 3px;
common.php:                vertical-align: middle;
common.php:                font-size: 15px;
common.php:                text-align: left;
common.php:                font-size: 15px;
common.php:                text-align: left;
common.php:                text-decoration: none;
common.php:                text-decoration: underline;
common.php:                vertical-align: top;
common.php:                margin-top: 15px;
common.php:                margin-right: 5px;
common.php:                padding-right: 5px;
common.php:                font-size: 15px;
common.php:                text-align: left;
common.php:                font-size: 15px;
common.php:                font-size: 15px;
common.php:                <div class='description'>咨询电话：400-680-6180</div>
common.php:        $name   = $this->get_in_str_val("name","");
common.php:        $phone  = $this->get_in_str_val("phone","");
common.php:        $this->add_user_origin_info($name,$phone);
common.php:        $this->t_seller_student_info->add_or_add_to_sub($name,$phone,0,$origin,0,0,0,0);
common.php:        $this->t_seller_student_new->book_free_lesson_new($name,$phone,0,$origin,0,0);
common.php:        $check_flag=$this->t_user_origin_info->check_phone($phone);
common.php:            $this->t_user_origin_info->row_insert([
common.php:        $url=$this->get_in_str_val("url");
common.php:        $this->t_teacher_record_list->switch_tongji_database();
common.php:        $id        = $this->get_in_int_val("id",0);
common.php:        $teacherid = $this->get_in_int_val("teacherid",50158);
common.php:        $type      = $this->get_in_int_val("type",1);
common.php:        $add_time  = $this->get_in_int_val("add_time",1484116899);
common.php:            $ret_info  = $this->t_teacher_record_list->get_all_info($teacherid,$type,$add_time);
common.php:            $ret_info = $this->t_teacher_record_list->field_get_list($id,"*");
common.php:        return $this->pageView(__METHOD__,null,[
common.php:        $userid     = $this->get_in_str_val("userid");
common.php:        $totalvalue = $this->get_in_str_val("totalvalue");
common.php:            // $ret = $this->check_answer_time($answer["lessonid"]);
common.php:            //     header("Content-type: text/html; charset=utf-8");
common.php:            $teacher_info = $this->t_teacher_info->get_teacher_info($answer['userid']);
common.php:            $old_score    = $this->t_train_lesson_user->get_score($answer['lessonid'],$answer['userid']);
common.php:                    $this->t_train_lesson_user->field_update_list_2($answer['lessonid'],$answer['userid'],[
common.php:                    $ret = $this->t_teacher_info->field_update_list($answer['userid'],[
common.php:                        $html  = $this->get_offer_html($teacher_info);
common.php:                    $this->add_trial_train_lesson($teacher_info);
common.php:                    $reference_info = $this->t_teacher_info->get_reference_info_by_phone($teacher_info['phone']);
common.php:                    $check_flag     = $this->t_teacher_money_list->check_is_exists($teacher_info['teacherid'],6);
common.php:                            $ref_num = $this->t_teacher_lecture_appointment_info->get_reference_num(
common.php:                            $this->t_teacher_money_list->row_insert([
common.php:                                $wx_data["remark"]   = "您已获得".$ref_price."元伯乐奖，请在个人中心-我的收入中查看详情，"
common.php:        $courseid = $this->t_course_order->add_course_info_new(
common.php:        $lessonid = $this->t_lesson_info->add_lesson(
common.php:        $this->t_homework_info->add(0,0,0,$lessonid,$grade,$teacher_info['subject'],$teacher_info['teacherid']);
common.php:        $this->t_teacher_record_list->row_insert([
common.php:        $teacherid = $this->get_in_int_val("teacherid");
common.php:        $is_test   = $this->get_in_int_val("is_test");
common.php:            return $this->output_err("老师id出错！");
common.php:        $teacher_info = $this->t_teacher_info->get_teacher_info($teacherid);
common.php:        $html = $this->get_offer_html($teacher_info);
common.php:                $data["keyword3"] = date("Y-m-d",time());
common.php:        $group_html = $this->get_qq_group_html($teacher_info['subject']);
common.php:        <meta name='viewport' content='width=device-width, initial-scale=0.8, maximum-scale=1,user-scalable=true'>
common.php:         html{font-size:10px;}
common.php:         .top-line{margin-top:24px;}
common.php:         .tea_name{position:relative;z-index:1;top:321px;}
common.php:         .tea_level{position:relative;z-index:1;top:410px;}
common.php:         .date{position:relative;z-index:1;top:-215px;left:165px;}
common.php:         .ul_title{margin:10px 0 0;color:#333;font-size;28px;}
common.php:         .join-us{margin:40px 0;}
common.php:         .join-us-content{width:44%;}
common.php:         .middle-line{
common.php:             background:url(http://7u2f5q.com2.z0.glb.qiniucdn.com/7854b16d86652ff547354f84b119d7a51496676904532.png) repeat-x;
common.php:             background-position:0 50%;
common.php:         .size12{font-size:2.4rem;}
common.php:         .size14{font-size:2.8rem;}
common.php:         .size18{font-size:3.6rem;}
common.php:         .size20{font-size:4rem;}
common.php:         .size24{font-size:4.8rem;}
common.php:         @media screen and (max-width: 720px) {
common.php:             .size12{font-size:1.5rem;}
common.php:             .size14{font-size:1.75rem;}
common.php:             .size18{font-size:2.25rem;}
common.php:             .size20{font-size:2.5rem;}
common.php:             .size24{font-size:3rem;}
common.php:             .date{top:-135px;left:90px;}
common.php:             .middle-line{height:2.5rem;}
common.php:            <div class='logo top-line' align='left'>
common.php:                <div class='size24 top-line color:#333'>
common.php:                <div class='size12' style='line-height:24px'>
common.php:                    -加入相关QQ群(请备注 科目-年纪-姓名)
common.php:                    -理优老师后台链接
common.php:                <div class='size14' style='text-indent:2em'>理优1对1致力于为初高中学生提供专业、专注、有效的教学，帮助更多的家庭打破师资、时间、地域、费用的局限，
common.php:                <div class='join-us'>
common.php:                    <div class='middle-line fl'></div>
common.php:                    <div class='join-us-content size14 color333 fl' align='center'>我们欢迎您的加入</div>
common.php:                    <div class='middle-line fr'></div>
common.php:        $teacherid = $this->get_in_int_val("teacherid");
common.php:        $is_test   = $this->get_in_int_val("is_test");
common.php:            return $this->output_err("老师id出错！");
common.php:        $teacher_info = $this->t_teacher_info->get_teacher_info($teacherid);
common.php:        $html = $this->get_offer_html($teacher_info);
common.php:                $data["keyword3"] = date("Y-m-d",time());
common.php:                ["教研-语文","126321887","处理教学相关事务"],
common.php:                ["排课-语文","103229898","用于抢课"]
common.php:                ["教研-数学","29759286","处理教学相关事务"],
common.php:                ["排课-数学","132041242","用于排课"],
common.php:                ["教研-英语","451786901","处理教学相关事务"],
common.php:                ["排课-英语","41874330","用于排课"],
common.php:                ["教研-综合","513683916","处理教学相关事务"],
common.php:                ["排课-理化","129811086","用于排课"],
common.php:                ["教研-综合","513683916","处理教学相关事务"],
common.php:                ["排课-文理综合","538808064","用于排课"],
common.php:        list($start_time,$end_time) =  $this->get_in_date_range(-2,0);
common.php:        $text = $this->get_in_str_val("text");
common.php:        $type = $this->get_in_str_val("type");
common.php:        return $this->output_succ(["data"=>$ret_info]);
common.php:        $lesson_start = $this->t_lesson_info->get_lesson_start($lessonid);
common.php:            $finish=strtotime(date("Y-m-d 10:00",$lesson_start+86400));
common.php:            $finish=strtotime(date("Y-m-d 21:00",$lesson_start));
common.php:        $data    = $this->get_in_str_val("data");
common.php:            $this->t_manager_info->send_wx_todo_msg(urldecode($account),urldecode($from_user),urldecode($header_msg),$msg,$url,$desc='点击进入管理系统操作');
common.php:        $data    = $this->get_in_str_val("data");
common.php:            $this->t_manager_info->send_wx_todo_msg(urldecode($account),urldecode($from_user),urldecode($header_msg),$msg,$url);
common.php:        $draw          = $this->get_in_str_val('draw',"");
common.php:        $audio         = $this->get_in_str_val('audio',"");
common.php:        $real_end_time = $this->get_in_str_val('real_end_time',"");
common.php:        $courseid      = $this->get_in_int_val('courseid', 0);
common.php:        $lesson_num    = $this->get_in_int_val('lesson_num',0);
common.php:        $pcm_file_count    = $this->get_in_int_val("pcm_file_count");
common.php:        $pcm_file_all_size = $this->get_in_int_val("pcm_file_all_size");
common.php:        $this->notice_lesson_video($courseid,$lesson_num);
common.php:        $this->t_lesson_info_b2->set_lesson_upload_info(
common.php:            $lessonid=$this->t_lesson_info_b2->get_lessonid_by_courseid_num($courseid,$lesson_num);
common.php:        return $this->output_succ();
common.php:        $lesson_info = $this->t_lesson_info->get_lesson_info($courseid,$lesson_num);
common.php:        $check_time = time()-86400*2;
common.php:            $this->t_baidu_msg->change_lesson_start_message_status($lessonid);
common.php:                $userid=$this->t_lesson_info->get_userid($lessonid);
common.php:                $this->baidu_push_video($userid,$lesson_info);
common.php:                $user_list=$this->t_small_lesson_info->get_all_user($lessonid);
common.php:                $this->baidu_push_video($user_list,$lesson_info);
common.php:                $user_list=$this->t_open_lesson_user->get_all_user($lessonid);
common.php:                $this->baidu_push_video($user_list,$lesson_info);
common.php:        $date_str = date('m月d日 H:i', $lesson_info['lesson_start'])."-".date('H:i', $lesson_info['lesson_end']);
common.php:                $this->t_baidu_msg->baidu_push_msg($val['userid'],$message,$lesson_info['lessonid'],1015,4);
common.php:            $parentid = $this->t_student_info->get_parentid($userid);
common.php:            $stu_nick = $this->t_student_info->get_nick($userid);
common.php:            $this->t_baidu_msg->baidu_push_msg($userid,$message,$lesson_info['lessonid'],1015,4);
common.php:            $this->t_baidu_msg->baidu_push_msg($parentid,$message,$lesson_info['lessonid'],4013,304);
common.php:        $ret = $this->t_lesson_info_b2->get_finish_lessons();
common.php:                $this->t_lesson_info->field_update_list($lessonid,[
common.php:        return $this->output_succ([
common.php:        $wx_openid = $this->get_in_str_val("wx_openid");
common.php:        $phone = $this->t_teacher_info->get_phone_by_wx_openid($wx_openid);
common.php:            $text           = "http://wx-teacher-web.leo1v1.com/tea.html?".$phone;
common.php:            $bg_url         = "http://leowww.oss-cn-shanghai.aliyuncs.com/summer_pic_invitation.png";
common.php:        $wx_openid = $this->get_in_str_val("wx_openid");
common.php:        $row = $this->t_agent->get_agent_info_by_openid($wx_openid);
common.php:        $user_info = $this->get_wx_user_info($wx_openid);
common.php:            $text         = "http://wx-yxyx-web.leo1v1.com/#/student-form?p_phone=".$phone;
common.php:        $orderid = $this->get_in_int_val("orderid");
common.php:        $channel = $this->get_in_str_val("channel");
common.php:        $order_info = $this->t_order_info->field_get_list($orderid,"price,userid,lesson_total,default_lesson_count");
common.php:            return $this->output_err("channel or amount is empty");
common.php:         * 然后登录 [Dashboard](https://dashboard.pingxx.com)->点击右上角公司名称->开发信息->商户公钥（用于商户身份验证）
common.php:         * 将你的公钥复制粘贴进去并且保存->先启用 Test 模式进行测试->测试通过后启用 Live 模式
common.php:         * 以下 channel 仅为部分示例，未列出的 channel 请查看文档 https://pingxx.com/document/api#api-c-new；
common.php:                'open_id' => 'openidxxxxxxxxxxxx'// 用户在商户微信公众号下的唯一标识，获取方式可参考 pingpp-php/lib/WxpubOAuth.php
common.php:                'product_id' => 'Productid'// 为二维码中包含的商品 ID，1-32 位字符串，商户可自定义
common.php:                'product_category' => '1',// 商品类别码参考链接 ：https://www.pingxx.com/api#api-appendix-2
common.php:        $nick = $this->cache_get_student_nick($order_info["userid"]);
common.php:                    //请求参数字段规则，请参考 API 文档：https://www.pingxx.com/api#api-c-new
common.php:                    'order_no'  => $orderNo,// 推荐使用 8-20 位，要求数字或字母，不允许其他字符
common.php:                    'channel'   => $channel,// 支付使用的第三方支付渠道取值，请参考：https://www.pingxx.com/api#api-c-new
common.php:                $this->t_orderid_orderno_list->row_insert([
common.php:            return $this->output_succ(["charge"=>$ch]);
common.php:            // return $this->output_succ(json_decode($ch,true));
common.php:            if ($e->getHttpStatus() != null) {
common.php:                header('Status: ' . $e->getHttpStatus());
common.php:                \App\Helper\Utils::logger($e->getHttpBody());
common.php:                echo $e->getHttpBody();
common.php:                \App\Helper\Utils::logger($e->getMessage());
common.php:                echo $e->getMessage();
common.php:            return $this->output_err("系统异常");
common.php:        return $this->get_webhooks_notice_test();
common.php:        if (!isset($event->type)) {
common.php:        switch ($event->type) {
common.php:            $orderNo = $event->data->object->order_no;
common.php:            $channel = $event->data->object->channel;
common.php:            $orderid=  $this->t_orderid_orderno_list->get_orderid($orderNo);
common.php:            $this->t_order_info->field_update_list($orderid,[
common.php:            $userid = $this->t_order_info->get_userid($orderid);
common.php:            $sys_operator = $this->t_order_info->get_sys_operator($orderid);
common.php:            $nick = $this->t_student_info->get_nick($userid);
common.php:            /*$this->t_manager_info->send_wx_todo_msg(
common.php:            $this->t_manager_info->send_wx_todo_msg(
common.php:            $this->t_manager_info->send_wx_todo_msg(
common.php:            $this->t_manager_info->send_wx_todo_msg(
common.php:    //wx - teacher bind
common.php:        $phone      = $this->get_in_str_val("phone");
common.php:        $code       = $this->get_in_str_val("code");
common.php:        $wx_openid  = $this->get_in_str_val("wx_openid");
common.php:            return $this->output_err("手机号不能为空！");
common.php:            $teacher_info = $this->t_teacher_info->get_teacher_info_by_phone($phone);
common.php:                return $this->output_err("此账号无法绑定！");
common.php:                $data = $this->add_teacher_common($teacher_info);
common.php:                    return $this->output_err($data);
common.php:                $teacherid = $this->t_teacher_info->get_teacherid_by_openid($wx_openid);
common.php:                    $ret = $this->t_teacher_info->field_update_list($teacherid,[
common.php:                $re = $this->t_teacher_info->field_update_list($teacher_info['teacherid'], [
common.php:                return $this->output_err("微信绑定失败!请重新登录后绑定!");
common.php:            return $this->output_succ(["wx_use_flag"=>$teacher_info['wx_use_flag']]);
common.php:            return $this->output_err ("验证码不对");
common.php:    //wx- teacher
common.php:        return (new common_ex )->send_phone_code();
common.php:        $access_token = $wx->get_wx_token($wx_config["appid"],$wx_config["appsecret"]);
common.php:        $url = "https://api.weixin.qq.com/cgi-bin/user/info?access_token=".$access_token."&openid=".$wx_openid."&lang=zh_CN";
common.php:        // $data['name'] = $info->nickname;
common.php:        // $data['image'] = $info->headimgurl;
common.php:            return $this->output_err("老师荣誉榜获取失败!");
common.php:            return $this->output_succ(['data'=>$ret_arr['data']]);
common.php:            return $this->output_err('老师荣誉榜不存在!');
common.php:        \App\Helper\Utils::logger("12333-tages");
common.php:        $lessonid = $this->get_in_int_val('lessonid');
common.php:            return $this->output_err('lessonid not exist');
common.php:        $lesson_intro_str = $this->t_lesson_info_b2->get_lesson_intro($lessonid);
common.php:        return $this->output_succ(['default_comment_tags'=>$default_comment_tags]);
common.php:         return $auth->uploadToken($bucket);
common.php:        $is_public = $this->get_in_int_val( "is_public", 0 );
common.php:                "token"  => $this->get_token($public_bucket),
common.php:                "token"  => $this->get_token($private_bucket),
common.php:        return $this->output_succ($ret_arr);
common.php:        $file_name_fix=$this->get_in_str_val("file_name_fix");
common.php:        if($file->isValid()){
common.php:            $tmpName       = $file ->getFileName();
common.php:            $realPath      = $file ->getRealPath();
common.php:            $original_name = $file->getClientOriginalName();
common.php:            //$objPHPExcel = $objReader->load( $realPath );
common.php:            $bucketMgr->delete($bucket, $qiniu_file_name);
common.php:            $token = $auth->uploadToken($bucket);
common.php:            list($ret, $err) = $uploadMgr->putFile($token, $qiniu_file_name,  $realPath );
common.php:            return $this->output_succ(["file_name" => $qiniu_file_name]);
common.php:        return $this->output_err("上传失败");
contract_present.php:        list($start_time,$end_time) = $this->get_in_date_range_month(0 );
contract_present.php:        $subject      = $this->get_in_e_subject(-1);
contract_present.php:        $grade        = $this->get_in_e_grade(-1);
contract_present.php:        $require_flag = $this->get_in_e_boolean(-1,"require_flag");
contract_present.php:        $class_hour   = $this->get_in_e_boolean(-1,"class_hour");
contract_present.php:        $account_role = $this->get_in_e_account_role(-1);
contract_present.php:        $page_num = $this->get_in_page_num();
contract_present.php:        $ret_info = $this->t_order_info-> get_order_desc_list($page_num,$start_time,$end_time, $subject, $grade,$require_flag, $class_hour, $account_role);
contract_present.php:            $this->cache_set_item_student_nick($item);
contract_present.php:                $item['cost_price'] = ($item['discount_price'] - $item['price'])/100 + ($item['discount_price']/$item['t_1_lesson_count'] ) * ($item['t_2_lesson_count']/100);
contract_present.php:            $v=\App\Helper\Common::div_safe($item['discount_price'] - $item['cost_price']*100, $item['discount_price']);
contract_present.php:        $v=\App\Helper\Common::div_safe( $all_discount_price -  $all_cost_value , $all_discount_price);
contract_present.php:        return $this->pageView(__METHOD__,$ret_info, [
contract_present.php:            "all_price" => $all_discount_price -  $all_cost_value  ,
contractTest.php:    //分配例子--主管
contractTest.php:        $adminid=$this->get_account_id();
contractTest.php:        $self_groupid=$this->t_admin_group_name->get_groupid_by_master_adminid($adminid);
contractTest.php:            return $this->error_view(["你不是销售主管"]);
contractTest.php:        $this->set_in_value("self_groupid", $self_groupid );
contractTest.php:        $this->set_in_value("sub_assign_adminid_2",$adminid );
contractTest.php:        if (!$this->check_in_has( "admin_revisiterid")) {
contractTest.php:            $this->set_in_value("admin_revisiterid", 0);
contractTest.php:        return $this->assign_sub_adminid_list();
contractTest.php:        $self_groupid=$this->get_in_int_val("self_groupid",-1);
contractTest.php:        list($start_time,$end_time,$opt_date_str)= $this->get_in_date_range(
contractTest.php:            -30*6, 0, 0, [
contractTest.php:            =$this->get_in_order_by_str( );
contractTest.php:        $userid            = $this->get_in_userid(-1);
contractTest.php:        $origin            = trim($this->get_in_str_val('origin', ''));
contractTest.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
contractTest.php:        $grade             = $this->get_in_grade(-1);
contractTest.php:        $subject           = $this->get_in_subject(-1);
contractTest.php:        $phone_location    = trim($this->get_in_str_val('phone_location', ''));
contractTest.php:        $admin_revisiterid = $this->get_in_int_val('admin_revisiterid', -1);
contractTest.php:        $tq_called_flag    = $this->get_in_int_val("tq_called_flag", -1,E\Etq_called_flag::class);
contractTest.php:        $global_tq_called_flag = $this->get_in_int_val("global_tq_called_flag", -1,E\Etq_called_flag::class);
contractTest.php:        $seller_student_status = $this->get_in_int_val('seller_student_status', -1, E\Eseller_student_status::class);
contractTest.php:        $page_num              = $this->get_in_page_num();
contractTest.php:        $page_count            = $this->get_in_page_count();
contractTest.php:        $has_pad               = $this->get_in_int_val("has_pad", -1, E\Epad_type::class);
contractTest.php:        $sub_assign_adminid_2  = $this->get_in_int_val("sub_assign_adminid_2", 0);
contractTest.php:        $origin_assistantid    = $this->get_in_int_val("origin_assistantid",-1  );
contractTest.php:        $tmk_adminid           = $this->get_in_int_val("tmk_adminid",-1, "");
contractTest.php:        $origin_level          = $this-> get_in_enum_val( E\Eorigin_level::class, -1 );
contractTest.php:        $seller_student_sub_status = $this->get_in_enum_val(E\Eseller_student_sub_status::class,-1);
contractTest.php:        $tmk_student_status        = $this->get_in_int_val("tmk_student_status", -1, E\Etmk_student_status::class);
contractTest.php:        $seller_resource_type      = $this->get_in_int_val("seller_resource_type",0, E\Eseller_resource_type::class);
contractTest.php:        $publish_flag  = $this->get_in_e_boolean(1,"publish_flag");
contractTest.php:        $ret_info = $this->t_seller_student_new->get_assign_list(
contractTest.php:        $real_page_num = $ret_info["page_info"]["page_num"]-1;
contractTest.php:            $this->cache_set_item_account_nick($item,"sub_assign_adminid_2","sub_assign_admin_2_nick");
contractTest.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid","admin_revisiter_nick");
contractTest.php:            $this->cache_set_item_account_nick($item,"origin_assistantid","origin_assistant_nick");
contractTest.php:            $this->cache_set_item_account_nick($item,"tmk_adminid","tmk_admin_nick");
contractTest.php:            $unallot_info=$this->t_test_lesson_subject->get_unallot_info_sub_assign_adminid_2($sub_assign_adminid_2);
contractTest.php:            $unallot_info=$this->t_test_lesson_subject->get_unallot_info( );
contractTest.php:        return $this->pageView(__METHOD__,$ret_info,[
contractTest.php:        $status_list_str=$this->get_in_str_val("status_list_str");
contractTest.php:        $no_jump=$this->get_in_int_val("no_jump", 0);
contractTest.php:        list($start_time,$end_time,$opt_date_str)= $this->get_in_date_range(
contractTest.php:            -180, 0, 4, [
contractTest.php:        $adminid_list= $this->get_in_str_val("adminid_list");
contractTest.php:        $origin_assistant_role = $this->get_in_int_val("origin_assistant_role",-1,E\Eaccount_role::class  );
contractTest.php:        $origin                = trim($this->get_in_str_val('origin', ''));
contractTest.php:        $page_num              = $this->get_in_page_num();
contractTest.php:        $userid                = $this->get_in_userid(-1);
contractTest.php:        $seller_student_status = $this->get_in_int_val('seller_student_status', -1, E\Eseller_student_status::class);
contractTest.php:        $seller_groupid_ex    = $this->get_in_str_val('seller_groupid_ex', "");
contractTest.php:        $require_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
contractTest.php:        $phone_location        = trim($this->get_in_str_val('phone_location', ''));
contractTest.php:        $page_count            = $this->get_in_int_val("page_count",10);
contractTest.php:        $require_admin_type    = $this->get_in_int_val("require_admin_type",-1);
contractTest.php:        $subject               = $this->get_in_subject(-1);
contractTest.php:        $has_pad               = $this->get_in_int_val("has_pad", -1, E\Epad_type::class);
contractTest.php:        $tq_called_flag = $this->get_in_int_val("tq_called_flag", -1,E\Etq_called_flag::class);
contractTest.php:        $seller_resource_type  = $this->get_in_int_val("seller_resource_type",-1, E\Eseller_resource_type::class);
contractTest.php:        $origin_assistantid    = $this->get_in_int_val("origin_assistantid",-1  );
contractTest.php:        $admin_revisiterid = $this->get_account_id();
contractTest.php:        $admin_revisiterid = $this->get_in_int_val( "admin_revisiterid", $admin_revisiterid );
contractTest.php:        $success_flag = $this->get_in_int_val("success_flag", -1, E\Eset_boolean::class);
contractTest.php:        $seller_require_change_flag   = $this->get_in_int_val("seller_require_change_flag",-1);
contractTest.php:        $group_seller_student_status= $this->get_in_enum_val(E\Egroup_seller_student_status::class,-1);
contractTest.php:        $tmk_student_status= $this->get_in_e_tmk_student_status(-1);
contractTest.php:        $grade = -1;
contractTest.php:        $phone_name = trim($this->get_in_str_val("phone_name"));
contractTest.php:        $check_need_jump_flag= $nick || $phone || ($userid != -1 ) ;
contractTest.php:        $ret_info=$this->t_seller_student_new->get_seller_list(
contractTest.php:        $notify_lesson_check_end_time=strtotime(date("Y-m-d", $now+86400*2));
contractTest.php:        $next_day=$notify_lesson_check_end_time-86400;
contractTest.php:        $notify_lesson_check_start_time=$now - 3600;
contractTest.php:            \App\Helper\Utils::unixtime2date_for_item($item, "lesson_start","", "Y-m-d H:i");
contractTest.php:            \App\Helper\Utils::unixtime2date_for_item($item, "next_revisit_time", "", "Y-m-d H:i");
contractTest.php:            \App\Helper\Utils::unixtime2date_for_item($item, "confirm_time", "", "Y-m-d H:i");
contractTest.php:            $item["last_revisit_msg_sub"]=mb_substr($item["last_revisit_msg"], 0, 40, "utf-8");
contractTest.php:            $item["user_desc_sub"]=mb_substr($item["user_desc"], 0, 40, "utf-8");
contractTest.php:            $this->cache_set_item_account_nick($item,"confirm_adminid","confirm_admin_nick");
contractTest.php:            $this->cache_set_item_teacher_nick($item);
contractTest.php:            $this->cache_set_item_account_nick($item,"origin_assistantid","origin_assistant_nick");
contractTest.php:            $this->cache_set_item_student_nick($item,"origin_userid","origin_user_nick");
contractTest.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid","admin_revisiter_nick");
contractTest.php:            $this->cache_set_item_account_nick($item,"accept_adminid","accept_admin_nick");
contractTest.php:        $phone=trim($this->get_in_phone());
contractTest.php:        $page_num= $this-> get_in_page_num();
contractTest.php:        $ret_info= $this->t_test_lesson_subject->get_list_by_phone($page_num,$phone );
contractTest.php:            $this->cache_set_item_account_nick($item,"sub_assign_adminid_2", "sub_assign_admin_2_nick" );
contractTest.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid", "admin_revisiter_nick" );
contractTest.php:                $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
contractTest.php:        return $this->pageView(__METHOD__,$ret_info);
contractTest.php:        $cur_page       = $this->get_in_int_val("cur_page");
contractTest.php:        $page_hide_list = $this->get_page_hide_list($cur_page);
contractTest.php:        $ret_info = $this->seller_student_list_data(); 
contractTest.php:        return $this->pageView(__METHOD__,$ret_info, ["page_hide_list" => $page_hide_list, "cur_page" => $cur_page ] );
contractTest.php:        if ($status_list_str==-1) {
contractTest.php:        $this->set_in_value("status_list_str",$status_list_str) ;
contractTest.php:        $this->set_in_value("cur_page","$id") ;
contractTest.php:        return $this->seller_student_list();
contractTest.php:        return $this->seller_student_list_ex(10000, -1);
contractTest.php:        return $this->seller_student_list_ex(0,"0,2");
contractTest.php:        if (!$this->check_in_has("seller_student_status") ) {
contractTest.php:            $this->set_in_value("seller_student_status",  100);
contractTest.php:        return $this->seller_student_list_ex(103,"100,103");
contractTest.php:        return $this->seller_student_list_ex(101,"101,102");
contractTest.php:        return $this->seller_student_list_ex(110,"110,120");
contractTest.php:        return $this->seller_student_list_ex(200);
contractTest.php:        return $this->seller_student_list_ex(1);
contractTest.php:        //$this->set_in_value("date_type", 5 ); //上课时间
contractTest.php:        return $this->seller_student_list_ex(210);
contractTest.php:        return $this->seller_student_list_ex(220);
contractTest.php:        return $this->seller_student_list_ex(290);
contractTest.php:        return $this->seller_student_list_ex(301, "300,301,302,420");
contractTest.php:        $this->set_in_value("tmk_flag",1);
contractTest.php:        return $this->no_called_list();
contractTest.php:        $seller_level=$this->t_manager_info->get_seller_level($this->get_account_id() );
contractTest.php:        if( !$this->check_account_in_arr(["jim1"]) ){
contractTest.php:        //list($start_time,$end_time)= $this->get_in_date_range(-7,0 );
contractTest.php:        $page_num   = $this->get_in_page_num();
contractTest.php:        $grade=$this->get_in_grade(-1);
contractTest.php:        $has_pad=$this->get_in_has_pad(-1);
contractTest.php:        $subject=$this->get_in_subject(-1);
contractTest.php:        $origin=trim($this->get_in_str_val("origin",""));
contractTest.php:        $adminid=$this->get_account_id();
contractTest.php:        $phone=$this->get_in_phone();
contractTest.php:            $ret_info= $this->t_seller_student_new->get_new_list($page_num, $now-300*86400 ,$now, $grade, $has_pad, $subject,$origin,$phone );
contractTest.php:        $max_day_count=$this->t_manager_info->get_max_get_new_user_count($adminid,$v1,$v2);
contractTest.php:        $count_info=$this->t_seller_new_count->get_now_count_info($adminid);
contractTest.php:        $ret_arr["left_count"] =  $max_day_count-$cur_count;
contractTest.php:        $ret_arr=$this->get_new_list_data();
contractTest.php:        return $this->pageView(__METHOD__, $ret_info,[
contractTest.php:        //list($start_time,$end_time)= $this->get_in_date_range(-7,0 );
contractTest.php:        $page_num   = $this->get_in_page_num();
contractTest.php:        $this->get_in_int_val("tmk_flag",0);
contractTest.php:        $grade=$this->get_in_grade(-1);
contractTest.php:        $has_pad=$this->get_in_has_pad(-1);
contractTest.php:        $subject=$this->get_in_subject(-1);
contractTest.php:        $origin=trim($this->get_in_str_val("origin",""));
contractTest.php:        $ret_info= $this->t_seller_student_new->get_no_called_list($page_num, $this->get_account_id(), $grade, $has_pad, $subject,$origin );
contractTest.php:        return $this->pageView(__METHOD__, $ret_info);
contractTest.php:        $page_num = $this->get_in_page_num();
contractTest.php:        list($start_time,$end_time) = $this->get_in_date_range(-80,0 );
contractTest.php:        $grade                      = $this->get_in_grade(-1);
contractTest.php:        $phone                      = trim($this->get_in_phone());
contractTest.php:        $adminid  = $this->get_account_id();
contractTest.php:        $seller_level = $this->t_manager_info->get_seller_level( $adminid);
contractTest.php:        $last_count          = $level_limit_count - $json_ret['opt_count'];
contractTest.php:       $ret_info = $this->t_test_lesson_subject->get_test_lesson_lost_user_list(
contractTest.php:        $ret_arr = $this->test_lesson_no_order_list_data();
contractTest.php:        return $this->pageView(__METHOD__, $ret_info, [
contractTest.php:        $this->set_in_value("origin_assistantid",$this->get_account_id());
contractTest.php:        $this->set_in_value("admin_revisiterid",-1);
contractTest.php:        $this->set_in_value("cur_page",10001);
contractTest.php:        $this->check_in_not_has_and_set("date_type",0);
contractTest.php:        return $this->seller_student_list();
contractTest.php:        return $this->ass_seller_student_list();
contractTest.php:        if (!$this->check_in_has("origin_assistantid") ) {
contractTest.php:            $this->set_in_value("origin_assistantid",-2); //是转介绍
contractTest.php:        $this->set_in_value("admin_revisiterid",-1);
contractTest.php:        $this->set_in_value("cur_page",10002);
contractTest.php:        $adminid = $this->get_account_id();
contractTest.php:        $list    = $this->t_admin_group_user->get_userid_list_by_master_adminid($adminid);
contractTest.php:        $this->set_in_value("adminid_list", $adminid_list);
contractTest.php:        return $this->seller_student_list();
contractTest.php:        if (!$this->check_in_has("origin_assistantid") ) {
contractTest.php:            $this->set_in_value("origin_assistantid", -2); //是转介绍
contractTest.php:        $this->set_in_value("admin_revisiterid", -1 );
contractTest.php:        $this->set_in_value("cur_page",10002);
contractTest.php:        return $this->seller_student_list();
contractTest.php:        $hold_flag=$this->get_in_int_val("hold_flag",0, E\Eboolean::class );
contractTest.php:        $phone_name = trim($this->get_in_str_val("phone_name"));
contractTest.php:        $page_num              = $this->get_in_page_num();
contractTest.php:        $seller_student_status = $this->get_in_int_val('seller_student_status', -1, E\Eseller_student_status::class);
contractTest.php:        $subject               = $this->get_in_subject(-1);
contractTest.php:        $grade = $this->get_in_grade();
contractTest.php:        $page_count        = $this->get_in_page_count();
contractTest.php:        $admin_revisiterid=$this->get_account_id();
contractTest.php:        $ret_info=$this->t_seller_student_new->get_hold_list($page_num,$page_count,$admin_revisiterid,$hold_flag, $subject, $grade, $seller_student_status,$nick,$phone );
contractTest.php:        $seller_level=$this->t_manager_info->get_seller_level($admin_revisiterid);
contractTest.php:        return $this->pageView(__METHOD__,$ret_info,[
contractTest.php:            "hold_cur_count"  => $this->t_seller_student_new->get_hold_count($admin_revisiterid) ,
contractTest.php:        list($start_time,$end_time)= $this->get_in_date_range(-80,0 );
contractTest.php:        $page_num   = $this->get_in_page_num();
contractTest.php:        $phone_name = trim($this->get_in_str_val("phone_name"));
contractTest.php:        $grade=$this->get_in_grade(-1);
contractTest.php:        $has_pad=$this->get_in_has_pad(-1);
contractTest.php:        $subject=$this->get_in_subject(-1);
contractTest.php:        $origin=trim($this->get_in_str_val("origin",""));
contractTest.php:        $ret_info= $this->t_seller_student_new->get_free_seller_list($page_num,  $start_time, $end_time , $this->get_account_id(), $grade, $has_pad, $subject,$origin,$nick,$phone);
contractTest.php:        $ret_info=$this->get_free_seller_list_data();
contractTest.php:        return $this->pageView(__METHOD__, $ret_info);
contractTest.php:        $accountid=$this->get_account_id();
contractTest.php:        $key="wiki_".md5("asdfa-$accountid-".rand() );
contractTest.php:        \App\Helper\Common::redis_set($key, $this->get_account() );
contractTest.php:        $this->get_in_str_val("wiki_key",$key);
contractTest.php:        return $this->pageView(__METHOD__, null);
contractTest.php:        return $this->pageView(__METHOD__, null);
contractTest.php:        $cur_require_adminid=$this->get_in_int_val("cur_require_adminid",-1);
contractTest.php:        $this->get_in_int_val("hide_cur_require_adminid",0);
contractTest.php:        list($start_time, $end_time)=$this->get_in_date_range(-30,0);
contractTest.php:        $page_num          = $this->get_in_page_num();
contractTest.php:        $origin_userid_flag = $this->get_in_enum_val(E\Eboolean::class , -1,"origin_userid_flag" );
contractTest.php:        $order_flag = $this->get_in_enum_val(E\Eboolean::class , -1 ,"order_flag");
contractTest.php:        $test_lesson_fail_flag = $this->get_in_enum_val(E\Etest_lesson_order_fail_flag::class , -1 );
contractTest.php:        $userid=$this->get_in_userid(-1 );
contractTest.php:        $ret_info=$this->t_test_lesson_subject_require->get_order_fail_list($page_num,$start_time, $end_time, $cur_require_adminid,$origin_userid_flag,$order_flag,$test_lesson_fail_flag,$userid);
contractTest.php:            $this->cache_set_item_student_nick($item);
contractTest.php:            $this->cache_set_item_teacher_nick($item);
contractTest.php:            $this->cache_set_item_account_nick ($item,"cur_require_adminid",
contractTest.php:            \App\Helper\Utils::unixtime2date_for_item($item,"lesson_start","","Y-m-d H:i");
contractTest.php:        return $this->pageView(__METHOD__,$ret_info);
contractTest.php:        return $this->test_lesson_order_fail_list_seller();
contractTest.php:        $this->set_in_value("cur_require_adminid", $this->get_account_id());
contractTest.php:        $this->set_in_value("hide_cur_require_adminid",1);
contractTest.php:        return $this->test_lesson_order_fail_list();
ControllerEnums.php:  * @method integer get_in_el_accept_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_account_role( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_ad_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_assess_res( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_assistant_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_ass_test_lesson_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_attendance_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_authority( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_book_grade( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_book_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_boolean( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_call_phone_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_can_set( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_change_teacher_reason_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_check_money_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_check_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_child_class_performance_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_child_class_performance_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_class_time( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_class_will_sub_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_class_will_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_click_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_company( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_competition_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_complaint_department( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_complaint_reject_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_complaint_state( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_complaint_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_complaint_user_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_confirm_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_contract_from_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_contract_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_contract_type_ex( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_contract_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_course_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_date_id_log_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_degree( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_department_group( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_department( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_dialect_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_education( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_employee_level( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_ency_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_env( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_error( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_express_name( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_feedback_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_flow_check_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_flow_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_flow_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_freetime( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_from_parent_order_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_from_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_fulltime_teacher_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_gender( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_gift_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_gift_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_grab_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_grade_part_ex( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_grade_part( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_grade( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_grade_range( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_grade_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_groupid( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_group_seller_student_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_honor_list( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_hour( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_identity( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_is_auto_set_type_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_is_freeze( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_is_invoice( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_is_test( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_is_top( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_is_warning_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_jw_test_lesson_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lecture_appointment_origin( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lecture_appointment_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lecture_revisit_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lesson_cancel_reason_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lesson_cancel_time_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lesson_count_level( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lesson_deduct( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lesson_error( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lesson_grade_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lesson_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lesson_sub_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_lesson_work_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_level( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_limit_plan_lesson_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_main_department( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_main_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_message_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_operation_satisfy_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_opt_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_order_channel( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_order_price_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_order_promotion_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_origin_level( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_package_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_pad_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_performance( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_permission( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_pic_time_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_pic_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_pic_usage_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_positive_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_post( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_power( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_praise( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_process_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_push_num( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_push_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_push_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_putonghua_is_correctly( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_qingjia( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_qingjia_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_question_check_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_question_difficulty( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_question_grade( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_question_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_record_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_region_version( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_relation_ship( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_renw_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_residual( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_retrial( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_revisit_origin( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_revisit_person( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_revisit_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_reward_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_role( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_school_score_change_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_school_scores_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_school_work_change_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_book_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_level( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_new_count_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_order_money( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_require_change_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_require_change_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_resource_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_student_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_student_sub_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_seller_work_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_send_gift( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_set_boolean( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_sh_area( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_sh_page_grade( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_sms_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_star_level( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_student_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_stu_origin( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_stu_score_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_subject( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_teacher_is_good( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_teacher_join_info( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_teacher_label_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_teacher_lecture_score( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_teacher_money_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_teacher_ref_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_teacher_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tea_content_satisfy_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tea_content_satisfy_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tea_label_atmos_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tea_label_interact_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tea_label_norm_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tea_label_style_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tea_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_template_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_lesson_cancel_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_lesson_fail_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_lesson_level( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_lesson_order_fail_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_lesson_score( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_lesson_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_listen_from_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_subject_free_reason( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_subject_free_reason_teacher( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_subject_free_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_test_user( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_textbook_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tmk_student_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_todo_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_todo_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tongji_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_tq_called_flag( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_train_lesson_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_train_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_trial_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_user_lesson_account_reason( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_user_report_from_type( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_week( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_work_status( $def_value=[-1] , $filed_name="" );
ControllerEnums.php:  * @method integer get_in_el_year( $def_value=[-1] , $filed_name="" );
Controller.php:        if ($this->check_login_flag ) {
Controller.php:            $this->check_login();
Controller.php:        $this->setUpTraits();
Controller.php:        $this->switch_tongji_database_flag=$flag;
Controller.php:            $this->CacheNickInit();
Controller.php:            $this->$name= $reflectionObj->newInstanceArgs();
Controller.php:            if ($this->switch_tongji_database_flag){
Controller.php:                $this->$name->switch_tongji_database();
Controller.php:            return $this->$name;
Controller.php:            return $this->get_account();
Controller.php:            return $this->get_in_enum_val($class_name ,$def_value ,$field_name);
Controller.php:            $def_value=-1;
Controller.php:            return $this->get_in_enum_list ( $class_name, $def_value ,$field_name);
Controller.php:            return $this->view_with_header_info ( "common.without-power", [],[
Controller.php:        $adminid      = $this->get_account_id();
Controller.php:        $groupid      = $this->t_admin_group_user->get_groupid_value($adminid);
Controller.php:        if ($this->check_account_in_arr(["jim","leowang", "fly"])  ) {
Controller.php:            $master_adminid = $this->t_admin_group_name->get_master_adminid($groupid );
Controller.php:            $up_groupid = $this->t_admin_group_name->get_up_groupid($groupid );
Controller.php:            $main_type = $this->t_admin_group_name->get_main_type($groupid );
Controller.php:            $main_master_adminid = $this->t_admin_main_group_name->get_master_adminid($up_groupid );
Controller.php:                $list = $this->t_admin_group_name->get_adminid_list_by_up_groupid($up_groupid);
Controller.php:                $adminid_list = $this->t_admin_group_user->get_userid_arr($groupid);
Controller.php:        $adminid = $this->get_account_id();
Controller.php:        $account = $this->get_account();
Controller.php:        $groupid = $this->t_admin_group_user->get_groupid_value($adminid);
Controller.php:            $group_name = $this->t_admin_group_name->get_group_name($groupid);
Controller.php:            $master_adminid = $this->t_admin_group_name->get_master_adminid($groupid );
Controller.php:            $up_groupid = $this->t_admin_group_name->get_up_groupid($groupid );
Controller.php:            $up_group_name = $this->t_admin_main_group_name->get_group_name($up_groupid);
Controller.php:            $main_type = $this->t_admin_group_name->get_main_type($groupid );
Controller.php:            $main_master_adminid = $this->t_admin_main_group_name->get_master_adminid($up_groupid );
Controller.php:        $ret_row1 = $this->t_lesson_info->check_student_time_free(
Controller.php:            return $this->output_err(
Controller.php:        $ret_row2=$this->t_lesson_info->check_teacher_time_free(
Controller.php:            return $this->output_err(
Controller.php:        $this->t_seller_student_new->row_delete($userid);
custom.php:        $path=$g_request->path();
custom.php:            $this->$act();
festival.php:        $page_num = $this->get_in_page_num();
festival.php:        $ret_info=$this->t_festival_info->get_festival_list($page_num);
festival.php:        return $this->pageView(__METHOD__,$ret_info);
festival.php:            $this->t_festival_info->add_festival_info($k,$v);
fineuploader_qiniu.php:        $save_to=$this->get_in_str_val("save_to");
fineuploader_qiniu.php:        $public_flag=$this->get_in_str_val("public_flag")=="true" ;
fineuploader_qiniu.php:        header("Access-Control-Allow-Origin: *");
fineuploader_qiniu.php:        header("Content-Type: text/plain");
fineuploader_qiniu.php:        $uploader->allowedExtensions = array(); // all files types allowed by default
fineuploader_qiniu.php:        $uploader->sizeLimit = null;
fineuploader_qiniu.php:        $uploader->inputName = "qqfile"; // matches Fine Uploader's default inputName value by default
fineuploader_qiniu.php:        $uploader->chunksFolder = "/tmp/trunks";
fineuploader_qiniu.php:            $result = $uploader->combineChunks('/tmp');
fineuploader_qiniu.php:            $result = $uploader->handleUpload("/tmp");
fineuploader_qiniu.php:            $result["uploadName"] = $uploader->getUploadName();
fineuploader_qiniu.php:                $ret=$this->do_aliyun($public_flag , $result["target"]);
fineuploader_qiniu.php:                $ret=$this->do_qiniu($public_flag , $result["target"]);
fineuploader_qiniu.php:        //$bucketMgr->delete($bucket, $file_name );
fineuploader_qiniu.php:        $token = $auth->uploadToken($bucket);
fineuploader_qiniu.php:         $ret = $uploadMgr->putFile($token, $file_name,  $target );
fineuploader_qiniu.php:        return  $this->output_succ([
fineuploader_qiniu.php:            return $this->output_err("public_flag flag not set false" );
fineuploader_qiniu.php:            $ossClient->uploadFile($bucket, $file_name, $target  );
fineuploader_qiniu.php:            return  $this->output_succ([
fineuploader_qiniu.php:            return $this->output_err("init OssClient fail" );
fineuploader_qiniu.php: * Do not use or reference this directly from your client-side code.
fineuploader_qiniu.php: * Instead, this should be required via the endpoint.php or endpoint-cors.php
fineuploader_qiniu.php:        if (isset($_FILES[$this->inputName]))
fineuploader_qiniu.php:            return $_FILES[$this->inputName]['name'];
fineuploader_qiniu.php:            array_push($initialFiles, array("name" => "name" + $i, uuid => "uuid" + $i, thumbnailUrl => "/test/dev/handlers/vendor/fineuploader/php-traditional-server/fu.png"));
fineuploader_qiniu.php:        return $this->uploadName;
fineuploader_qiniu.php:            $name = $this->getName();
fineuploader_qiniu.php:        $targetFolder = $this->chunksFolder.DIRECTORY_SEPARATOR.$uuid;
fineuploader_qiniu.php:        $this->uploadName = $name;
fineuploader_qiniu.php:        if (!is_null($this->sizeLimit) && filesize($targetPath) > $this->sizeLimit) {
fineuploader_qiniu.php:        if (is_writable($this->chunksFolder) &&
fineuploader_qiniu.php:            1 == mt_rand(1, 1/$this->chunksCleanupProbability)){
fineuploader_qiniu.php:            $this->cleanupChunks();
fineuploader_qiniu.php:        if ($this->toBytes(ini_get('post_max_size')) < $this->sizeLimit ||
fineuploader_qiniu.php:            $this->toBytes(ini_get('upload_max_filesize')) < $this->sizeLimit){
fineuploader_qiniu.php:            $neededRequestSize = max(1, $this->sizeLimit / 1024 / 1024) . 'M';
fineuploader_qiniu.php:        if ($this->isInaccessible($uploadDirectory)){
fineuploader_qiniu.php:        $file = $_FILES[$this->inputName];
fineuploader_qiniu.php:            $name = $this->getName();
fineuploader_qiniu.php:        if (!is_null($this->sizeLimit) && $size > $this->sizeLimit) {
fineuploader_qiniu.php:        if($this->allowedExtensions && !in_array(strtolower($ext), array_map("strtolower", $this->allowedExtensions))){
fineuploader_qiniu.php:            $these = implode(', ', $this->allowedExtensions);
fineuploader_qiniu.php:            $chunksFolder = $this->chunksFolder;
fineuploader_qiniu.php:            $targetFolder = $this->chunksFolder.DIRECTORY_SEPARATOR.$uuid;
fineuploader_qiniu.php:            $success = move_uploaded_file($_FILES[$this->inputName]['tmp_name'], $target);
fineuploader_qiniu.php:        # non-chunked upload
fineuploader_qiniu.php:                $this->uploadName = basename($target);
fineuploader_qiniu.php:        if ($this->isInaccessible($uploadDirectory)) {
fineuploader_qiniu.php:            return array('error' => "Server error. Uploads directory isn't writable" . ((!$this->isWindows()) ? " or executable." : "."));
fineuploader_qiniu.php:            $uuid = $tokens[sizeof($tokens)-1];
fineuploader_qiniu.php:            $this->removeDir($target);
fineuploader_qiniu.php:            $unique = $base.'-'.$suffix;
fineuploader_qiniu.php:        foreach (scandir($this->chunksFolder) as $item){
fineuploader_qiniu.php:            $path = $this->chunksFolder.DIRECTORY_SEPARATOR.$item;
fineuploader_qiniu.php:            if (time() - filemtime($path) > $this->chunksExpireIn){
fineuploader_qiniu.php:                $this->removeDir($path);
fineuploader_qiniu.php:                $this->removeDir($item);
fineuploader_qiniu.php:        $last = strtolower($str[strlen($str)-1]);
fineuploader_qiniu.php:        $val = (int) substr($str, 0, -1);
fineuploader_qiniu.php:     *  (http://www.php.net/manual/en/function.is-executable.php)
fineuploader_qiniu.php:        $isWin = $this->isWindows();
fulltime_teacher.php:        $adminid = $this->get_account_id();
fulltime_teacher.php:        $this->set_in_value("tea_adminid",$adminid);
fulltime_teacher.php:        $tea_adminid = $this->get_in_int_val("tea_adminid");
fulltime_teacher.php:        $teacher_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
fulltime_teacher.php:        $account_info = $this->t_manager_info->field_get_list($adminid,"create_time,name,post,main_department");
fulltime_teacher.php:        if((time() - $account_info["create_time"])<55*86400){
fulltime_teacher.php:            return $this->error_view(
fulltime_teacher.php:        if((time() - $account_info["create_time"])>60*86400){
fulltime_teacher.php:        $this->set_in_value("time_flag",$time_flag);
fulltime_teacher.php:        $time_flag = $this->get_in_int_val("time_flag");
fulltime_teacher.php:        // $lesson_info  = $this->t_lesson_info_b2->get_teacher_test_lesson_order_info($teacherid,$account_info["create_time"],time());
fulltime_teacher.php:        $account_info["order_per"]= $this->get_fulltime_teacher_test_lesson_score($teacherid,$account_info["create_time"],time());
fulltime_teacher.php:        $normal_stu_num = $this->t_lesson_info_b2->get_tea_stu_num_list_personal($teacherid,$week_start,$week_end);
fulltime_teacher.php:        // $normal_stu_num = $this->t_week_regular_course->get_tea_stu_num_list_new($teacherid);
fulltime_teacher.php:        /* $rate_info = $this->t_teacher_label->get_parent_rate_info($teacherid);
fulltime_teacher.php:        $ret_info = $this->t_fulltime_teacher_assessment_list->get_all_info_by_adminid($adminid);
fulltime_teacher.php:            $ret_info["assess_time_str"] = $ret_info["assess_time"]>0?date("Y-m-d H:i:s",$ret_info["assess_time"]):"";
fulltime_teacher.php:            $ret_info["assess_admin_nick"] =  $ret_info["assess_adminid"]>0?$this->t_manager_info->get_name($ret_info["assess_adminid"]):"";
fulltime_teacher.php:            $ret_info["total_score_new"] = $ret_info["result_score_new"]-$ret_info["result_score"]+$ret_info["total_score"];
fulltime_teacher.php:            $positive_info = $this->t_fulltime_teacher_positive_require_list->get_all_info_by_assess_id($ret_info["id"]);
fulltime_teacher.php:        $positive_fail_type = $this->t_fulltime_teacher_positive_require_list->get_fail_require_positive_type($adminid);
fulltime_teacher.php:        $check_is_late = $this->t_fulltime_teacher_positive_require_list->check_is_late($adminid);
fulltime_teacher.php:        return $this->Pageview(__METHOD__,null,[
fulltime_teacher.php:        $adminid = $this->get_in_int_val("adminid");
fulltime_teacher.php:        $positive_type = $this->get_in_int_val("positive_type");
fulltime_teacher.php:        $data = $this->t_manager_info->get_fulltime_teacher_admin_info($adminid);
fulltime_teacher.php:        $data["create_time_str"] = date("Y-m-d",$data["create_time"]);
fulltime_teacher.php:        $data["positive_time_str"] = date("Y-m-d",$data["positive_time"]);
fulltime_teacher.php:        return $this->output_succ(["data"=>$data]);
fulltime_teacher.php:        $id = $this->get_in_int_val("id");
fulltime_teacher.php:        $data = $this->t_fulltime_teacher_assessment_list->field_get_list($id,"*");
fulltime_teacher.php:        return $this->output_succ(["data"=>$data]);
fulltime_teacher.php:        $adminid = $this->get_in_int_val("adminid");
fulltime_teacher.php:        $teacher_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
fulltime_teacher.php:        $account_info = $this->t_manager_info->field_get_list($adminid,"create_time,name,post,main_department");  
fulltime_teacher.php:        $lesson_info  = $this->t_lesson_info_b2->get_teacher_test_lesson_order_info($teacherid,$account_info["create_time"],time());
fulltime_teacher.php:        $normal_stu_num = $this->t_week_regular_course->get_tea_stu_num_list_new($teacherid);
fulltime_teacher.php:        $rate_info = $this->t_teacher_label->get_parent_rate_info($teacherid);
fulltime_teacher.php:        return $this->output_succ(["data"=>$account_info]);
fulltime_teacher.php:        $this->set_in_value("main_flag",1);
fulltime_teacher.php:        return $this->fulltime_teacher_assessment_positive_info();
fulltime_teacher.php:        $adminid = $this->get_in_int_val("adminid",-1);
fulltime_teacher.php:        $main_flag = $this->get_in_int_val("main_flag",-1);
fulltime_teacher.php:        $become_full_member_flag = $this->get_in_int_val("become_full_member_flag",0);
fulltime_teacher.php:        $page_info= $this->get_in_page_info();
fulltime_teacher.php:        $ret_info = $this->t_manager_info->get_fulltime_teacher_assessment_positive_info($page_info,$adminid,$become_full_member_flag,$main_flag);
fulltime_teacher.php:            \App\Helper\Utils::unixtime2date_for_item($item,"create_time","_str","Y-m-d");
fulltime_teacher.php:            \App\Helper\Utils::unixtime2date_for_item($item,"become_full_member_time","_str","Y-m-d");
fulltime_teacher.php:            $this->cache_set_item_account_nick($item,"assess_adminid","assess_admin_nick");
fulltime_teacher.php:            $this->cache_set_item_account_nick($item,"mater_adminid","mater_admin_nick");
fulltime_teacher.php:            $this->cache_set_item_account_nick($item,"main_mater_adminid","main_mater_admin_nick");
fulltime_teacher.php:        return $this->Pageview(__METHOD__,$ret_info);
fulltime_teacher.php:        $id = $this->get_in_int_val("id");
fulltime_teacher.php:        $data = $this->t_fulltime_teacher_positive_require_list->field_get_list($id,"*");
fulltime_teacher.php:        $data["name"] = $this->t_manager_info->get_name($data["adminid"]);
fulltime_teacher.php:        $data["email"] = $this->t_manager_info->get_email($data["adminid"]);
fulltime_teacher.php:        $data["create_time_str"] = date("Y-m-d",$data["create_time"]);
fulltime_teacher.php:        $data["positive_time_str"] = date("Y-m-d",$data["positive_time"]);
fulltime_teacher.php:        return $this->output_succ(["data"=>$data]);
get_all_info:common_ex.php:        $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:common_ex.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert([
get_all_info:common_new.php:        $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:common_new.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert($data);
get_all_info:common.php:                            $ref_num = $this->t_teacher_lecture_appointment_info->get_reference_num($reference_info['phone'],$type);
get_all_info:getZ_all_info:common_ex.php:        $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:getZ_all_info:common_ex.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert([
get_all_info:getZ_all_info:common_new.php:        $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:getZ_all_info:common_new.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert($data);
get_all_info:getZ_all_info:common.php:                            $ref_num = $this->t_teacher_lecture_appointment_info->get_reference_num($reference_info['phone'],$type);
get_all_info:getZ_all_info:human_resource.php:        $this->t_teacher_lecture_appointment_info->field_update_list($appointment_id,[
get_all_info:getZ_all_info:human_resource.php:            $appointment_info = $this->t_teacher_lecture_appointment_info->get_appointment_info_by_id($appointment_id);
get_all_info:getZ_all_info:human_resource.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info(
get_all_info:getZ_all_info:human_resource.php:        $ret = $this->t_teacher_lecture_appointment_info->field_update_list($id,$update_data);
get_all_info:getZ_all_info:human_resource.php:        $check_flag=$this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:getZ_all_info:human_resource.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert([
get_all_info:getZ_all_info:human_resource.php:        $appoint_list = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_appointment_origin_list(
get_all_info:getZ_all_info:human_resource.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_app_lecture_sum_by_reference($start_time,$end_time);
get_all_info:getZ_all_info:human_resource.php:        $lecture_info = $this->t_teacher_lecture_appointment_info->get_lecture_sum_by_reference($start_time,$end_time);
get_all_info:getZ_all_info:human_resource.php:        $trial_info = $this->t_teacher_lecture_appointment_info->get_trial_sum_by_reference($start_time,$end_time);
get_all_info:getZ_all_info:human_resource.php:        $through_info = $this->t_teacher_lecture_appointment_info->get_trial_sum_by_reference($start_time,$end_time,1);
get_all_info:getZ_all_info:human_resource.php:        $train_info = $this->t_teacher_lecture_appointment_info->get_train_sum_by_reference($start_time,$end_time);
get_all_info:getZ_all_info:human_resource.php:        // $train_trial_info = $this->t_teacher_lecture_appointment_info->get_train_trial_sum_by_reference($start_time,$end_time);
get_all_info:getZ_all_info:human_resource.php:        // $train_through_info = $this->t_teacher_lecture_appointment_info->get_train_trial_sum_by_reference($start_time,$end_time,1);
get_all_info:getZ_all_info:main_page.php:        //$lecture_info = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_tongji($start_time,$end_time);
get_all_info:getZ_all_info:main_page.php:        $this->t_teacher_lecture_appointment_info->switch_tongji_database();
get_all_info:getZ_all_info:main_page.php:        $ret_info  = $this->t_teacher_lecture_appointment_info->tongji_teacher_lecture_appoiment_info_by_accept_adminid($start_time,$end_time);
get_all_info:getZ_all_info:seller_student.php:            $ret_id = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:getZ_all_info:seller_student.php:                $id = $this->t_teacher_lecture_appointment_info->add_all_info(
get_all_info:getZ_all_info:ss_deal.php:            $this->t_teacher_lecture_appointment_info->field_update_list($item,[
get_all_info:getZ_all_info:ss_deal.php:        $old_phone = $this->t_teacher_lecture_appointment_info->get_phone($id);
get_all_info:getZ_all_info:ss_deal.php:            $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:getZ_all_info:ss_deal.php:        $ret = $this->t_teacher_lecture_appointment_info->field_update_list($id,[
get_all_info:getZ_all_info:ss_deal.php:            $this->t_teacher_lecture_appointment_info->field_update_list($id,["lecture_appointment_status"=>$lecture_appointment_status]);
get_all_info:getZ_all_info:ss_deal.php:            $this->t_teacher_lecture_appointment_info->row_delete($item);
get_all_info:getZ_all_info:ss_deal.php:        $this->t_teacher_lecture_appointment_info->row_delete($id);
get_all_info:getZ_all_info:ss_deal.php:        $ret = $this->t_teacher_lecture_appointment_info->add_all_info(
get_all_info:getZ_all_info:teacher_info_new.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info($page_num,$start_time,$end_time,$phone,$status);
get_all_info:getZ_all_info:teacher_info_new.php:        $all_info  = $this->t_teacher_lecture_appointment_info->get_lecture_count_info($start_time,$end_time,$phone);
get_all_info:getZ_all_info:tea_manage_new.php:        $email = $this->t_teacher_lecture_appointment_info->get_email_by_phone($phone);
get_all_info:getZ_all_info:tea_manage_new.php:        $email = $this->t_teacher_lecture_appointment_info->get_email_by_phone($phone);
get_all_info:getZ_all_info:tea_manage.php:        $reference      = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
get_all_info:getZ_all_info:tea_manage.php:        $this->t_teacher_lecture_appointment_info->reset_teacher_identity_by_phone($phone,$identity);
get_all_info:getZ_all_info:TeaPower.php:        $reference      = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
get_all_info:getZ_all_info:TeaPower.php:        $appointment_info = $this->t_teacher_lecture_appointment_info->get_simple_info($teacher_info['phone']);
get_all_info:getZ_all_info:TeaPower.php:        $reference           = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
get_all_info:getZ_all_info:TeaPower.php:        $reference_count     = $this->t_teacher_lecture_appointment_info->get_reference_count($reference);
get_all_info:getZ_all_info:test_code.php:        $list = $this->t_teacher_lecture_appointment_info->get_ref_teacher_list();
get_all_info:getZ_all_info:test_code.php:        $teacher_info = $this->t_teacher_lecture_appointment_info->get_lecture_appointment_info($phone);
get_all_info:getZ_all_info:tongji_ss.php:        $this->t_teacher_lecture_appointment_info->switch_tongji_database();
get_all_info:getZ_all_info:tongji_ss.php:        $ret = $this->t_teacher_lecture_appointment_info->tongji_teacher_appoinment_lecture_info($time);
get_all_info:getZ_all_info:tongji_ss.php:        $tea_arr = $this->t_teacher_lecture_appointment_info->get_train_through_tea($time);
get_all_info:getZ_all_info:tongji_ss.php:        $app_time = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_time($time);
get_all_info:getZ_all_info:tongji_ss.php:        $list = $this->t_teacher_lecture_appointment_info->tongji_zs_reference_info($start_time,$end_time);
get_all_info:human_resource.php:        $this->t_teacher_lecture_appointment_info->field_update_list($appointment_id,[
get_all_info:human_resource.php:            $appointment_info = $this->t_teacher_lecture_appointment_info->get_appointment_info_by_id($appointment_id);
get_all_info:human_resource.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info(
get_all_info:human_resource.php:        $ret = $this->t_teacher_lecture_appointment_info->field_update_list($id,$update_data);
get_all_info:human_resource.php:        $check_flag=$this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:human_resource.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert([
get_all_info:human_resource.php:        $appoint_list = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_appointment_origin_list(
get_all_info:human_resource.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_app_lecture_sum_by_reference($start_time,$end_time);
get_all_info:human_resource.php:        $lecture_info = $this->t_teacher_lecture_appointment_info->get_lecture_sum_by_reference($start_time,$end_time);
get_all_info:human_resource.php:        $trial_info = $this->t_teacher_lecture_appointment_info->get_trial_sum_by_reference($start_time,$end_time);
get_all_info:human_resource.php:        $through_info = $this->t_teacher_lecture_appointment_info->get_trial_sum_by_reference($start_time,$end_time,1);
get_all_info:human_resource.php:        $train_info = $this->t_teacher_lecture_appointment_info->get_train_sum_by_reference($start_time,$end_time);
get_all_info:human_resource.php:        // $train_trial_info = $this->t_teacher_lecture_appointment_info->get_train_trial_sum_by_reference($start_time,$end_time);
get_all_info:human_resource.php:        // $train_through_info = $this->t_teacher_lecture_appointment_info->get_train_trial_sum_by_reference($start_time,$end_time,1);
get_all_info:main_page.php:        //$lecture_info = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_tongji($start_time,$end_time);
get_all_info:main_page.php:        $this->t_teacher_lecture_appointment_info->switch_tongji_database();
get_all_info:main_page.php:        $ret_info  = $this->t_teacher_lecture_appointment_info->tongji_teacher_lecture_appoiment_info_by_accept_adminid($start_time,$end_time);
get_all_info:seller_student.php:            $ret_id = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:seller_student.php:                $id = $this->t_teacher_lecture_appointment_info->add_all_info(
get_all_info:ss_deal.php:            $this->t_teacher_lecture_appointment_info->field_update_list($item,[
get_all_info:ss_deal.php:        $old_phone = $this->t_teacher_lecture_appointment_info->get_phone($id);
get_all_info:ss_deal.php:            $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
get_all_info:ss_deal.php:        $ret = $this->t_teacher_lecture_appointment_info->field_update_list($id,[
get_all_info:ss_deal.php:            $this->t_teacher_lecture_appointment_info->field_update_list($id,["lecture_appointment_status"=>$lecture_appointment_status]);
get_all_info:ss_deal.php:            $this->t_teacher_lecture_appointment_info->row_delete($item);
get_all_info:ss_deal.php:        $this->t_teacher_lecture_appointment_info->row_delete($id);
get_all_info:ss_deal.php:        $ret = $this->t_teacher_lecture_appointment_info->add_all_info(
get_all_info:teacher_info_new.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info($page_num,$start_time,$end_time,$phone,$status);
get_all_info:teacher_info_new.php:        $all_info  = $this->t_teacher_lecture_appointment_info->get_lecture_count_info($start_time,$end_time,$phone);
get_all_info:tea_manage_new.php:        $email = $this->t_teacher_lecture_appointment_info->get_email_by_phone($phone);
get_all_info:tea_manage_new.php:        $email = $this->t_teacher_lecture_appointment_info->get_email_by_phone($phone);
get_all_info:tea_manage.php:        $reference      = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
get_all_info:tea_manage.php:        $this->t_teacher_lecture_appointment_info->reset_teacher_identity_by_phone($phone,$identity);
get_all_info:TeaPower.php:        $reference      = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
get_all_info:TeaPower.php:        $appointment_info = $this->t_teacher_lecture_appointment_info->get_simple_info($teacher_info['phone']);
get_all_info:TeaPower.php:        $reference           = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
get_all_info:TeaPower.php:        $reference_count     = $this->t_teacher_lecture_appointment_info->get_reference_count($reference);
get_all_info:test_code.php:        $list = $this->t_teacher_lecture_appointment_info->get_ref_teacher_list();
get_all_info:test_code.php:        $teacher_info = $this->t_teacher_lecture_appointment_info->get_lecture_appointment_info($phone);
get_all_info:tongji_ss.php:        $this->t_teacher_lecture_appointment_info->switch_tongji_database();
get_all_info:tongji_ss.php:        $ret = $this->t_teacher_lecture_appointment_info->tongji_teacher_appoinment_lecture_info($time);
get_all_info:tongji_ss.php:        $tea_arr = $this->t_teacher_lecture_appointment_info->get_train_through_tea($time);
get_all_info:tongji_ss.php:        $app_time = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_time($time);
get_all_info:tongji_ss.php:        $list = $this->t_teacher_lecture_appointment_info->tongji_zs_reference_info($start_time,$end_time);
getZ_all_info:common_ex.php:        $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
getZ_all_info:common_ex.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert([
getZ_all_info:common_new.php:        $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
getZ_all_info:common_new.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert($data);
getZ_all_info:common.php:                            $ref_num = $this->t_teacher_lecture_appointment_info->get_reference_num($reference_info['phone'],$type);
getZ_all_info:human_resource.php:        $this->t_teacher_lecture_appointment_info->field_update_list($appointment_id,[
getZ_all_info:human_resource.php:            $appointment_info = $this->t_teacher_lecture_appointment_info->get_appointment_info_by_id($appointment_id);
getZ_all_info:human_resource.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info(
getZ_all_info:human_resource.php:        $ret = $this->t_teacher_lecture_appointment_info->field_update_list($id,$update_data);
getZ_all_info:human_resource.php:        $check_flag=$this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
getZ_all_info:human_resource.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert([
getZ_all_info:human_resource.php:        $appoint_list = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_appointment_origin_list(
getZ_all_info:human_resource.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_app_lecture_sum_by_reference($start_time,$end_time);
getZ_all_info:human_resource.php:        $lecture_info = $this->t_teacher_lecture_appointment_info->get_lecture_sum_by_reference($start_time,$end_time);
getZ_all_info:human_resource.php:        $trial_info = $this->t_teacher_lecture_appointment_info->get_trial_sum_by_reference($start_time,$end_time);
getZ_all_info:human_resource.php:        $through_info = $this->t_teacher_lecture_appointment_info->get_trial_sum_by_reference($start_time,$end_time,1);
getZ_all_info:human_resource.php:        $train_info = $this->t_teacher_lecture_appointment_info->get_train_sum_by_reference($start_time,$end_time);
getZ_all_info:human_resource.php:        // $train_trial_info = $this->t_teacher_lecture_appointment_info->get_train_trial_sum_by_reference($start_time,$end_time);
getZ_all_info:human_resource.php:        // $train_through_info = $this->t_teacher_lecture_appointment_info->get_train_trial_sum_by_reference($start_time,$end_time,1);
getZ_all_info:main_page.php:        //$lecture_info = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_tongji($start_time,$end_time);
getZ_all_info:main_page.php:        $this->t_teacher_lecture_appointment_info->switch_tongji_database();
getZ_all_info:main_page.php:        $ret_info  = $this->t_teacher_lecture_appointment_info->tongji_teacher_lecture_appoiment_info_by_accept_adminid($start_time,$end_time);
getZ_all_info:seller_student.php:            $ret_id = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
getZ_all_info:seller_student.php:                $id = $this->t_teacher_lecture_appointment_info->add_all_info(
getZ_all_info:ss_deal.php:            $this->t_teacher_lecture_appointment_info->field_update_list($item,[
getZ_all_info:ss_deal.php:        $old_phone = $this->t_teacher_lecture_appointment_info->get_phone($id);
getZ_all_info:ss_deal.php:            $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
getZ_all_info:ss_deal.php:        $ret = $this->t_teacher_lecture_appointment_info->field_update_list($id,[
getZ_all_info:ss_deal.php:            $this->t_teacher_lecture_appointment_info->field_update_list($id,["lecture_appointment_status"=>$lecture_appointment_status]);
getZ_all_info:ss_deal.php:            $this->t_teacher_lecture_appointment_info->row_delete($item);
getZ_all_info:ss_deal.php:        $this->t_teacher_lecture_appointment_info->row_delete($id);
getZ_all_info:ss_deal.php:        $ret = $this->t_teacher_lecture_appointment_info->add_all_info(
getZ_all_info:teacher_info_new.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info($page_num,$start_time,$end_time,$phone,$status);
getZ_all_info:teacher_info_new.php:        $all_info  = $this->t_teacher_lecture_appointment_info->get_lecture_count_info($start_time,$end_time,$phone);
getZ_all_info:tea_manage_new.php:        $email = $this->t_teacher_lecture_appointment_info->get_email_by_phone($phone);
getZ_all_info:tea_manage_new.php:        $email = $this->t_teacher_lecture_appointment_info->get_email_by_phone($phone);
getZ_all_info:tea_manage.php:        $reference      = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
getZ_all_info:tea_manage.php:        $this->t_teacher_lecture_appointment_info->reset_teacher_identity_by_phone($phone,$identity);
getZ_all_info:TeaPower.php:        $reference      = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
getZ_all_info:TeaPower.php:        $appointment_info = $this->t_teacher_lecture_appointment_info->get_simple_info($teacher_info['phone']);
getZ_all_info:TeaPower.php:        $reference           = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
getZ_all_info:TeaPower.php:        $reference_count     = $this->t_teacher_lecture_appointment_info->get_reference_count($reference);
getZ_all_info:test_code.php:        $list = $this->t_teacher_lecture_appointment_info->get_ref_teacher_list();
getZ_all_info:test_code.php:        $teacher_info = $this->t_teacher_lecture_appointment_info->get_lecture_appointment_info($phone);
getZ_all_info:tongji_ss.php:        $this->t_teacher_lecture_appointment_info->switch_tongji_database();
getZ_all_info:tongji_ss.php:        $ret = $this->t_teacher_lecture_appointment_info->tongji_teacher_appoinment_lecture_info($time);
getZ_all_info:tongji_ss.php:        $tea_arr = $this->t_teacher_lecture_appointment_info->get_train_through_tea($time);
getZ_all_info:tongji_ss.php:        $app_time = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_time($time);
getZ_all_info:tongji_ss.php:        $list = $this->t_teacher_lecture_appointment_info->tongji_zs_reference_info($start_time,$end_time);
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $userid    = $this->get_in_int_val('userid',-1);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $userid = $this->get_in_int_val('userid',-1);
human_resource.php:        return $this->pageView(__METHOD__, $ret_info);
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $userid = $this->get_in_int_val('userid',-1);
human_resource.php:        return $this->pageView(__METHOD__, $ret_info);
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        return $this->pageView(__METHOD__, $ret_info);
human_resource.php:        return $this->regular_course();
human_resource.php:        return $this->winter_regular_course();
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $common_lesson_config= $this->t_teacher_freetime_for_week->get_common_lesson_config($teacherid);
human_resource.php:            $arr=explode("-",$start_time);
human_resource.php:            $item["assistantid"] = $this->t_student_info->get_assistantid($item['userid']);
human_resource.php:            $item['ass_nick'] = $this->t_assistant_info->get_nick($item['assistantid']);
human_resource.php:            $day_start=$stime + ($week-1)*86400;
human_resource.php:            $item["start_time_ex"] = strtotime(date("Y-m-d", $day_start)." $start_time")*1000;
human_resource.php:            $item["end_time_ex"]   = strtotime(date("Y-m-d", $day_start)." $end_time")*1000;
human_resource.php:            $item["nick"]          = $this->cache_get_student_nick($item["userid"]);
human_resource.php:            $item["teacher"]       = $this->cache_get_teacher_nick($teacherid);
human_resource.php:        return  $this->output_succ( [ "common_lesson_config" => $common_lesson_config] );
human_resource.php:        $userid = $this->get_in_int_val('userid',-1);
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $common_lesson_config= $this->t_week_regular_course->get_lesson_info($teacherid,$userid);
human_resource.php:            $common_lesson_config_summer= $this->t_summer_week_regular_course->get_lesson_info($teacherid,$userid);
human_resource.php:            $arr=explode("-",$start_time);
human_resource.php:            $item["assistantid"] = $this->t_student_info->get_assistantid($item['userid']);
human_resource.php:            $item['ass_nick'] = $this->t_assistant_info->get_nick($item['assistantid']);
human_resource.php:            $day_start=$stime + ($week-1)*86400;
human_resource.php:            $item["start_time_ex"] = strtotime(date("Y-m-d", $day_start)." $start_time")*1000;
human_resource.php:            $item["end_time_ex"]   = strtotime(date("Y-m-d", $day_start)." $end_time")*1000;
human_resource.php:            $item["nick"]          = $this->cache_get_student_nick($item["userid"]);
human_resource.php:            $item["teacher"]       = $this->cache_get_teacher_nick($item["teacherid"]);
human_resource.php:        $userid = $this->get_in_int_val('userid',-1);
human_resource.php:        //$userid=-1;
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $common_lesson_config= $this->t_summer_week_regular_course->get_lesson_info($teacherid,$userid);
human_resource.php:            $arr=explode("-",$start_time);
human_resource.php:            $item["assistantid"] = $this->t_student_info->get_assistantid($item['userid']);
human_resource.php:            $item['ass_nick'] = $this->t_assistant_info->get_nick($item['assistantid']);
human_resource.php:            $day_start=$stime + ($week-1)*86400;
human_resource.php:            $item["start_time_ex"] = strtotime(date("Y-m-d", $day_start)." $start_time")*1000;
human_resource.php:            $item["end_time_ex"]   = strtotime(date("Y-m-d", $day_start)." $end_time")*1000;
human_resource.php:            $item["nick"]          = $this->cache_get_student_nick($item["userid"]);
human_resource.php:            $item["teacher"]       = $this->cache_get_teacher_nick($item["teacherid"]);
human_resource.php:        $userid = $this->get_in_int_val('userid',-1);
human_resource.php:        //$userid=-1;
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $common_lesson_config= $this->t_winter_week_regular_course->get_lesson_info($teacherid,$userid);
human_resource.php:            $arr=explode("-",$start_time);
human_resource.php:            $item["assistantid"] = $this->t_student_info->get_assistantid($item['userid']);
human_resource.php:            $item['ass_nick'] = $this->t_assistant_info->get_nick($item['assistantid']);
human_resource.php:            $day_start=$stime + ($week-1)*86400;
human_resource.php:            $item["start_time_ex"] = strtotime(date("Y-m-d", $day_start)." $start_time")*1000;
human_resource.php:            $item["end_time_ex"]   = strtotime(date("Y-m-d", $day_start)." $end_time")*1000;
human_resource.php:            $item["nick"]          = $this->cache_get_student_nick($item["userid"]);
human_resource.php:            $item["teacher"]       = $this->cache_get_teacher_nick($item["teacherid"]);
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $old_start_time = $this->get_in_str_val("old_start_time");
human_resource.php:        #$common_lesson_config= $this->t_teacher_freetime_for_week->get_common_lesson_config($teacherid);
human_resource.php:        $common_lesson_config = $this->t_week_regular_course->get_lesson_info($teacherid,-1);
human_resource.php:                $arr=explode("-",$start_time);
human_resource.php:                $day_start=$stime + ($week-1)*86400;
human_resource.php:                $item["nick"]          = $this->cache_get_student_nick($item["userid"]);
human_resource.php:                $item["teacher"]       = $this->cache_get_teacher_nick($teacherid);
human_resource.php:        $opt_type       = $this->get_in_str_val("opt_type");
human_resource.php:        $teacherid      = $this->get_in_teacherid();
human_resource.php:        #$teacherid = $this->teacherid;
human_resource.php:        $old_key = $this->get_in_str_val("old_key");
human_resource.php:        $start_time          = $this->get_in_str_val("start_time");
human_resource.php:        $end_time            = $this->get_in_str_val("end_time");
human_resource.php:        $lesson_count           = $this->get_in_str_val("lesson_count");
human_resource.php:        #$count_total            = $this->get_in_str_val("count_total");
human_resource.php:        $tea_type       = $this->get_in_int_val("tea_type",0);
human_resource.php:        $freetime       = $this->get_in_int_val("freetime",0);
human_resource.php:        $userid         = $this->get_in_userid();
human_resource.php:        $count_total = $this->t_course_order->get_count_total($teacherid,$userid);
human_resource.php:        $teacher_in = $this->t_teacher_freetime_for_week->check_userid($teacherid);
human_resource.php:            $this->t_teacher_freetime_for_week->add_regular_course($teacherid,$tea_type,$freetime);
human_resource.php:        $common_lesson_config     = $this->t_teacher_freetime_for_week->get_common_lesson_config($teacherid);
human_resource.php:        $arr=explode("-",$start_time);
human_resource.php:        $lesson_start = strtotime(date("Y-m-d", time(NULL))." $start");
human_resource.php:        $lesson_end = strtotime(date("Y-m-d", time(NULL))." $end_time");
human_resource.php:        $diff=($lesson_end-$lesson_start)/60;
human_resource.php:                    return $this->output_err("请设置正确的课时数") ;
human_resource.php:                    return $this->output_err("请设置正确的课时数") ;
human_resource.php:                    return $this->output_err("请设置正确的课时数") ;
human_resource.php:                    return $this->output_err("请设置正确的课时数") ;
human_resource.php:                return $this->output_err("请设置学生") ;
human_resource.php:        $ret_db = $this->t_teacher_freetime_for_week->field_update_list($teacherid,[
human_resource.php:        return $this->output_succ();
human_resource.php:        $opt_type   = $this->get_in_str_val("opt_type");
human_resource.php:        $userid     = $this->get_in_userid();
human_resource.php:        $old_userid = $this->get_in_int_val("old_userid");
human_resource.php:        if(!$this->check_power(E\Epower::V_OTP_COMMON_CONFIG_NEW) ) {
human_resource.php:            $assistantid=$this->t_assistant_info->get_assistantid($this->get_account());
human_resource.php:            $ret_stu = $this->t_student_info->get_stu_info($assistantid);
human_resource.php:                    return $this->output_err("请选择自己的学生!") ;
human_resource.php:                    return $this->output_err("请选择自己的学生!") ;
human_resource.php:        $teacherid        = $this->get_in_teacherid();
human_resource.php:        $old_key          = $this->get_in_str_val("old_key");
human_resource.php:        $start_time       = $this->get_in_str_val("start_time");
human_resource.php:        $old_start_time   = $this->get_in_str_val("old_start_time");
human_resource.php:        $old_week         = $this->get_in_int_val("old_week");
human_resource.php:        $end_time         = $this->get_in_str_val("end_time");
human_resource.php:        $lesson_count     = $this->get_in_str_val("lesson_count");
human_resource.php:        $competition_flag = $this->get_in_int_val("competition_flag");
human_resource.php:        $arr              = explode("-",$start_time);
human_resource.php:        $old_start_time = $old_week."-".$old_start_time;
human_resource.php:        $lesson_start = strtotime(date("Y-m-d", time(NULL))." $start");
human_resource.php:        $lesson_end = strtotime(date("Y-m-d", time(NULL))." $end_time");
human_resource.php:        $diff=($lesson_end-$lesson_start)/60;
human_resource.php:                return $this->output_err("请设置学生") ;
human_resource.php:            $rr = $this->regular_course_set_check($teacherid,$week,$start,$end_time,"");
human_resource.php:            $ret = $this->t_week_regular_course->check_is_clash($userid,$teacherid,$start_time,$end_time,"");
human_resource.php:                return $this->output_err("排课与老师课程冲突了(add)") ;
human_resource.php:                return $this->output_err("排课与学生课程冲突了(add)") ;
human_resource.php:            $this->t_week_regular_course->add_regular_course($teacherid,$userid,$start_time,$end_time,$lesson_count,$competition_flag);
human_resource.php:            $rr = $this->regular_course_set_check($teacherid,$week,$start,$end_time,$old_start_time);
human_resource.php:            $ret = $this->t_week_regular_course->check_is_clash($userid,$teacherid,$start_time,$end_time,$old_start_time);
human_resource.php:                return $this->output_err("排课与老师课程冲突了(update)") ;
human_resource.php:                return $this->output_err("排课与学生课程冲突了(update)") ;
human_resource.php:            $this->t_week_regular_course->field_update_list_2(
human_resource.php:            $this->t_week_regular_course->row_delete_2($teacherid,$start_time);
human_resource.php:        return $this->output_succ();
human_resource.php:        $opt_type       = $this->get_in_str_val("opt_type");
human_resource.php:        $userid         = $this->get_in_userid();
human_resource.php:        $old_userid         = $this->get_in_int_val("old_userid");
human_resource.php:        if(!$this->check_power(E\Epower::V_OTP_COMMON_CONFIG_NEW) ) {
human_resource.php:            $assistantid=$this->t_assistant_info->get_assistantid($this->get_account());
human_resource.php:            $ret_stu = $this->t_student_info->get_stu_info($assistantid);
human_resource.php:                    return $this->output_err("请选择自己的学生!") ;
human_resource.php:                    return $this->output_err("请选择自己的学生!") ;
human_resource.php:        $teacherid      = $this->get_in_teacherid();
human_resource.php:        #$teacherid = $this->teacherid;
human_resource.php:        $old_key = $this->get_in_str_val("old_key");
human_resource.php:        $start_time          = $this->get_in_str_val("start_time");
human_resource.php:        $old_start_time          = $this->get_in_str_val("old_start_time");
human_resource.php:        $old_week         = $this->get_in_int_val("old_week");
human_resource.php:        $end_time            = $this->get_in_str_val("end_time");
human_resource.php:        $lesson_count           = $this->get_in_str_val("lesson_count");
human_resource.php:        $competition_flag         = $this->get_in_int_val("competition_flag");
human_resource.php:        $arr=explode("-",$start_time);
human_resource.php:        $old_start_time = $old_week."-".$old_start_time;
human_resource.php:        $lesson_start = strtotime(date("Y-m-d", time(NULL))." $start");
human_resource.php:        $lesson_end = strtotime(date("Y-m-d", time(NULL))." $end_time");
human_resource.php:        $diff=($lesson_end-$lesson_start)/60;
human_resource.php:                return $this->output_err("请设置学生") ;
human_resource.php:            $rr = $this->regular_course_set_check($teacherid,$week,$start,$end_time,"");
human_resource.php:            $ret = $this->t_winter_week_regular_course->check_is_clash($userid,$teacherid,$start_time,$end_time,"");
human_resource.php:                return $this->output_err("排课与老师课程冲突了") ;
human_resource.php:                return $this->output_err("排课与学生课程冲突了") ;
human_resource.php:            $this->t_winter_week_regular_course->add_regular_course($teacherid,$userid,$start_time,$end_time,$lesson_count,$competition_flag);
human_resource.php:            $rr = $this->regular_course_set_check($teacherid,$week,$start,$end_time,$old_start_time);
human_resource.php:            $ret = $this->t_winter_week_regular_course->check_is_clash($userid,$teacherid,$start_time,$end_time,$old_start_time);
human_resource.php:                return $this->output_err("排课与老师课程冲突了") ;
human_resource.php:                return $this->output_err("排课与学生课程冲突了") ;
human_resource.php:            $this->t_winter_week_regular_course->field_update_list_2(
human_resource.php:            $this->t_winter_week_regular_course->row_delete_2($teacherid,$start_time);
human_resource.php:        return $this->output_succ();
human_resource.php:        $opt_type       = $this->get_in_str_val("opt_type");
human_resource.php:        $userid         = $this->get_in_userid();
human_resource.php:        $old_userid         = $this->get_in_int_val("old_userid");
human_resource.php:        if(!$this->check_power(E\Epower::V_OTP_COMMON_CONFIG_NEW) ) {
human_resource.php:            $assistantid=$this->t_assistant_info->get_assistantid($this->get_account());
human_resource.php:            $ret_stu = $this->t_student_info->get_stu_info($assistantid);
human_resource.php:                    return $this->output_err("请选择自己的学生!") ;
human_resource.php:                    return $this->output_err("请选择自己的学生!") ;
human_resource.php:        $teacherid      = $this->get_in_teacherid();
human_resource.php:        #$teacherid = $this->teacherid;
human_resource.php:        $old_key = $this->get_in_str_val("old_key");
human_resource.php:        $start_time          = $this->get_in_str_val("start_time");
human_resource.php:        $old_start_time          = $this->get_in_str_val("old_start_time");
human_resource.php:        $old_week         = $this->get_in_int_val("old_week");
human_resource.php:        $end_time            = $this->get_in_str_val("end_time");
human_resource.php:        $lesson_count           = $this->get_in_str_val("lesson_count");
human_resource.php:        $competition_flag         = $this->get_in_int_val("competition_flag");
human_resource.php:        $arr=explode("-",$start_time);
human_resource.php:        $old_start_time = $old_week."-".$old_start_time;
human_resource.php:        $lesson_start = strtotime(date("Y-m-d", time(NULL))." $start");
human_resource.php:        $lesson_end = strtotime(date("Y-m-d", time(NULL))." $end_time");
human_resource.php:        $diff=($lesson_end-$lesson_start)/60;
human_resource.php:                return $this->output_err("请设置学生") ;
human_resource.php:            $rr = $this->regular_course_set_check($teacherid,$week,$start,$end_time,"");
human_resource.php:            $ret = $this->t_summer_week_regular_course->check_is_clash($userid,$teacherid,$start_time,$end_time,"");
human_resource.php:                return $this->output_err("排课与老师课程冲突了") ;
human_resource.php:                return $this->output_err("排课与学生课程冲突了") ;
human_resource.php:            $this->t_summer_week_regular_course->add_regular_course($teacherid,$userid,$start_time,$end_time,$lesson_count,$competition_flag);
human_resource.php:            $rr = $this->regular_course_set_check($teacherid,$week,$start,$end_time,$old_start_time);
human_resource.php:            $ret = $this->t_summer_week_regular_course->check_is_clash($userid,$teacherid,$start_time,$end_time,$old_start_time);
human_resource.php:                return $this->output_err("排课与老师课程冲突了") ;
human_resource.php:                return $this->output_err("排课与学生课程冲突了") ;
human_resource.php:            $this->t_summer_week_regular_course->field_update_list_2(
human_resource.php:            $this->t_summer_week_regular_course->row_delete_2($teacherid,$start_time);
human_resource.php:        return $this->output_succ();
human_resource.php:        $grade           = $this->get_in_int_val('grade',-1);
human_resource.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
human_resource.php:        $subject_default = Cookie::get("subject")==null?-1: Cookie::get("subject");
human_resource.php:        $subject         = $this->get_in_int_val('subject', $subject_default);
human_resource.php:        $page_num        = $this->get_in_int_val('page_num',-1);
human_resource.php:        $ret_info = $this->t_teacher_closest->get_teacher_closest($grade,$subject,$teacherid,$page_num);
human_resource.php:        $number   = ($page_num-1)*10+1;
human_resource.php:            $item['nick'] = $this->cache_get_teacher_nick($item['teacherid']);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
human_resource.php:        $grade_map= $this->t_teacher_closest_grade->get_grade_info($teacherid);
human_resource.php:        $subject_info = $this->t_teacher_closest_subject->get_subject_info($teacherid);
human_resource.php:        $js_values_str=$this->get_js_g_args($args);
human_resource.php:        return $this->view(__METHOD__,[
human_resource.php:        return $this->teacher_info_new () ;
human_resource.php:        return $this->teacher_info_new () ;
human_resource.php:        return $this->teacher_info_new () ;
human_resource.php:        $this->set_in_value("lesson_hold_flag",0);
human_resource.php:        $this->set_in_value("is_test_user",0);
human_resource.php:        return $this->index_new();
human_resource.php:        $this->set_in_value("lesson_hold_flag",1);
human_resource.php:        $this->set_in_value("is_test_user",0);
human_resource.php:        return $this->index_new() ;
human_resource.php:         // return $this->teacher_info_new () ;
human_resource.php:        $this->set_in_value("seller_hold_flag",1);
human_resource.php:        return $this->index_new_jw_hold() ;
human_resource.php:        // return $this->teacher_info_new () ;
human_resource.php:        $this->set_in_value("is_test_user",0);
human_resource.php:        $this->set_in_value("fulltime_flag",0);
human_resource.php:        return $this->index_new() ;
human_resource.php:        $this->set_in_value("is_test_user",0);
human_resource.php:        $this->set_in_value("fulltime_flag",1);
human_resource.php:        return $this->index_new() ;
human_resource.php:        $this->set_in_value("seller_flag",1);
human_resource.php:        return $this->teacher_info_new () ;
human_resource.php:        $teacherid                = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $is_freeze                = $this->get_in_int_val('is_freeze',-1);
human_resource.php:        $teacher_money_type       = $this->get_in_int_val("teacher_money_type",-1);
human_resource.php:        $teacher_ref_type         = $this->get_in_int_val("teacher_ref_type",-1);
human_resource.php:        $level                    = $this->get_in_int_val("level",-1);
human_resource.php:        $page_num                 = $this->get_in_page_num();
human_resource.php:        $need_test_lesson_flag    = $this->get_in_int_val("need_test_lesson_flag",1);
human_resource.php:        $textbook_type            = $this->get_in_int_val("textbook_type",-1);
human_resource.php:        $is_good_flag             = $this->get_in_int_val("is_good_flag",-1);
human_resource.php:        $is_new_teacher           = $this->get_in_int_val("is_new_teacher",1);
human_resource.php:        $gender                   = $this->get_in_int_val("gender",-1);
human_resource.php:        $free_time                = $this->get_in_str_val("free_time","");
human_resource.php:        $grade_part_ex            = $this->get_in_int_val("grade_part_ex",-1);
human_resource.php:        $subject                  = $this->get_in_int_val("subject",-1);
human_resource.php:        $second_subject           = $this->get_in_int_val("second_subject",-1);
human_resource.php:        $trial_flag               = $this->get_in_int_val("trial_flag",0);
human_resource.php:        $test_flag                = $this->get_in_int_val("test_flag",0);
human_resource.php:        $seller_flag              = $this->get_in_int_val("seller_flag",0);
human_resource.php:        $is_test_user             = $this->get_in_int_val("is_test_user",-1);
human_resource.php:        $is_quit                  = $this->get_in_int_val("is_quit",0);
human_resource.php:        $address                  = trim($this->get_in_str_val('address',''));
human_resource.php:        $limit_plan_lesson_type   = $this->get_in_int_val("limit_plan_lesson_type",-1);
human_resource.php:        $is_record_flag           = $this->get_in_int_val("is_record_flag",-1);
human_resource.php:        $test_lesson_full_flag    = $this->get_in_int_val("test_lesson_full_flag",-1);
human_resource.php:        $train_through_new        = $this->get_in_int_val("train_through_new",-1);
human_resource.php:        $lesson_hold_flag         = $this->get_in_int_val("lesson_hold_flag",-1);
human_resource.php:        $test_transfor_per        = $this->get_in_int_val("test_transfor_per",-1);
human_resource.php:        $week_liveness            = $this->get_in_int_val("week_liveness",-1);
human_resource.php:        $interview_score          = $this->get_in_int_val("interview_score",-1);
human_resource.php:        $set_leave_flag           = $this->get_in_int_val("set_leave_flag",-1);
human_resource.php:        $second_interview_score   = $this->get_in_int_val("second_interview_score",-1);
human_resource.php:        $lesson_hold_flag_adminid = $this->get_in_int_val("lesson_hold_flag_adminid",-1);
human_resource.php:        $fulltime_flag            = $this->get_in_int_val("fulltime_flag",-1);
human_resource.php:        $teacher_type             = $this->get_in_int_val("teacher_type",-1);
human_resource.php:        $seller_hold_flag         = $this->get_in_int_val("seller_hold_flag",-1);
human_resource.php:        $have_wx                  = $this->get_in_int_val("have_wx",-1);
human_resource.php:        $grade_plan               = $this->get_in_int_val("grade_plan",-1);
human_resource.php:        $subject_plan             = $this->get_in_int_val("subject_plan",-1);
human_resource.php:            $teacherid_arr = $this->get_free_teacherid_arr_new($free_time);
human_resource.php:        $adminid     = $this->get_account_id();
human_resource.php:        $right_list  = $this->get_tea_subject_and_right_by_adminid($adminid);
human_resource.php:        $account_info    = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
human_resource.php:        $this->t_teacher_info->switch_tongji_database();
human_resource.php:        $ret_info = $this->t_teacher_info->get_teacher_detail_info_new(
human_resource.php:        $lesson_tea_list           = $this->t_lesson_info->get_teacher_lesson_list_by_week($tea_list);
human_resource.php:            $start     = date('m-d H:i:s',$item['lesson_start']);
human_resource.php:            @$arr_tea_list[$teacherid] .= $start."-".$end." ".$subject;
human_resource.php:        $label_list = $this->get_teacher_label($tea_list);
human_resource.php:            $revisit_info = $this->t_teacher_record_list->get_jw_revisit_info($item["teacherid"]);
human_resource.php:            $age        = (int)date('Y',time())-(int)$birth_year;
human_resource.php:                $item["work_day"] = ceil((time()-$item["train_through_new_time"])/86400)."天";
human_resource.php:            $item["phone_ex"] = preg_replace('/(1[358]{1}[0-9])[0-9]{4}([0-9]{4})/i','$1****$2',$item['phone_spare']);
human_resource.php:                $item["freeze_adminid_str"] = $this->t_manager_info->get_account($item["freeze_adminid"]);
human_resource.php:                $item["week_left_num"]=$item["limit_plan_lesson_type"]-$item["week_lesson_num"];
human_resource.php:                $ret_num = $this->t_lesson_info->check_teacher_have_test_lesson_pre_week($item["teacherid"],time());
human_resource.php:                    $item["week_left_num"]=$item["limit_week_lesson_num"]-$item["week_lesson_num"];
human_resource.php:                    $item["week_left_num"]=6-$item["week_lesson_num"];
human_resource.php:                $item["interview_access"] = $this->t_teacher_info->get_interview_access($item["teacherid"]);
human_resource.php:                    $item['interview_access'] = $this->t_teacher_record_list->get_teacher_interview_access($item['teacherid']);
human_resource.php:                $acc1 = $this->t_teacher_lecture_info->get_interview_acc($item["phone"]);
human_resource.php:                $acc2 = $this->t_teacher_record_list->get_interview_acc($item["phone"]);
human_resource.php:        $account_role    = $this->t_manager_info->get_account_role($this->get_account_id());
human_resource.php:        $week_num_person = $this->t_teacher_info->get_week_info_new();
human_resource.php:        $jw_teacher_list = $this->t_manager_info->get_jw_teacher_list_new();
human_resource.php:        return $this->pageView(__METHOD__,$ret_info,[
human_resource.php:        $this->set_in_value("trial_flag",$trial_flag);
human_resource.php:        $this->set_in_value("test_flag",$test_flag);
human_resource.php:        return $this->index();
human_resource.php:        $teacherid_arr = $this->t_lesson_info->get_test_lesson_num_by_free_time_new($free_start,$free_end);
human_resource.php:        $ret_free   = $this->t_teacher_freetime_for_week->get_teacherid_and_freetime();
human_resource.php:                    $free_time_arr[$k][] = date("Y-m-d H:i",$rr);
human_resource.php:        $test_info = $this->t_lesson_info->get_test_lesson_num_by_free_time($free_start,$free_end,$teacherid_arr);
human_resource.php:        $is_part_time = $this->get_in_int_val('is_part_time',-1);
human_resource.php:        $ass_nick     = $this->get_in_str_val('ass_nick',"");
human_resource.php:        $phone        = $this->get_in_str_val('phone',"");
human_resource.php:        $score        = $this->get_in_int_val('score',-1);
human_resource.php:        $page_num     = $this->get_in_int_val('page_num',-1);
human_resource.php:        $ret_info = $this->t_assistant_info->get_ass_info_list_for_hr($is_part_time, $ass_nick, $phone, $score, $page_num);
human_resource.php:        $number   = ($page_num-1)*10+1;
human_resource.php:            $age        = (int)date('Y', time()) - (int)$birth_year;
human_resource.php:        // $this->setTplPageInfo($s_url, $ret_info['total_num'] , TEA_PER_PAGE , $page_num);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $is_part_time = $this->get_in_int_val('is_part_time',-1);
human_resource.php:        $rate_score   = $this->get_in_int_val('rate_score',-1);
human_resource.php:        $assistantid  = $this->get_in_int_val('assistantid',-1);
human_resource.php:        $page_num     = $this->get_in_page_num();
human_resource.php:        $ret_info     = $this->t_assistant_info->get_ass_info_new($is_part_time,$assistantid , $rate_score, $page_num);
human_resource.php:            $age        = (int)date('Y', time()) - (int)$birth_year;
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $ass_nick       = $this->get_in_str_val('ass_nick',"");
human_resource.php:        $gender         = $this->get_in_int_val('gender', -1);
human_resource.php:        $birth          = $this->get_in_str_val('birth',"");
human_resource.php:        $work_year      = $this->get_in_int_val('work_year', 0);
human_resource.php:        $phone          = $this->get_in_str_val('phone',"");
human_resource.php:        $email          = trim($this->get_in_str_val('email',""));
human_resource.php:        $assistant_type = $this->get_in_int_val('assistant_type',-1);
human_resource.php:        $school         = $this->get_in_str_val('school',"");
human_resource.php:        if($ass_nick == "" || $birth == "" || $phone == "" || $assistant_type == -1 || $gender == -1){
human_resource.php:            return outputJson(array('ret' => -1, 'info'  => '参数不完整，请检查后重新确认'));
human_resource.php:            return $this->output_err("邮箱要填");
human_resource.php:        if($this->t_manager_info->get_id_by_account($account)) {
human_resource.php:            return $this->output_err("用户已经存在");
human_resource.php:        $ret_num = $this->t_phone_to_user->is_phone_valid($phone, 3);
human_resource.php:            return outputJson(array('ret' => -1, 'info'  => '111账号已经存在'));
human_resource.php:        $tmp = explode('-',$birth);
human_resource.php:        $this->t_user_info->row_insert([
human_resource.php:        $assid =  $this->t_user_info->get_last_insertid();
human_resource.php:            return outputJson(array('ret' => -1, 'info'  => '插入失败'));
human_resource.php:        //$this->users->add_ejabberd_account($assid,md5($passwd));
human_resource.php:        //$this->users->add_ejabberd_account("ad_" . $assid,md5($passwd));
human_resource.php:        $ret_db = $this->t_phone_to_user->add_phone_to_ass($assid, $phone);
human_resource.php:            return outputJson(array('ret' => -1, 'info'  => '插入失败'));
human_resource.php:        $ret_db = $this->t_assistant_info->add_new_ass($ass_nick, $gender, $birth, $work_year, $phone, $email,
human_resource.php:            return outputJson(array('ret' => -1, 'info'  => '插入失败'));
human_resource.php:        $adminid=$this->get_account_id();
human_resource.php:        $this->t_admin_users->row_insert([
human_resource.php:        $uid=$this->t_admin_users->get_last_insertid();
human_resource.php:        $this->t_manager_info->row_insert([
human_resource.php:            "permission" => "59", //助教-一般
human_resource.php:            "creater_adminid" => $this->get_account_id(),
human_resource.php:        return $this->output_succ();
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $teacher_type = $this->get_in_int_val('teacher_type',0);
human_resource.php:            $ret_auth = $this->t_manager_info->check_permission($this->get_account(), TEA_ARCHIVES);
human_resource.php:                return outputJson(array('ret' => NOT_AUTH, 'info' => $this->err_string[NOT_AUTH]));
human_resource.php:            $this->t_teacher_info->delete_teacher($teacherid);
human_resource.php:            $this->t_user_info->delete_user($teacherid, 2);
human_resource.php:            $ret_auth = $this->t_manager_info->check_permission($this->get_account(), ASS_ARCHIVES);
human_resource.php:                return outputJson(array('ret' => NOT_AUTH, 'info' => $this->err_string[NOT_AUTH]));
human_resource.php:            $this->t_assistant_info->delete_ass($teacherid);
human_resource.php:            $ret_admin_id = $this->t_adid_to_adminid->get_admin_from_ad($teacherid);
human_resource.php:            $this->t_manager_info->del_ass_manager($ret_admin_id);
human_resource.php:            $this->t_user_info->delete_user($teacherid, 3);
human_resource.php:        $assistantid = $this->get_in_int_val('assistantid',-1);
human_resource.php:        $ret_db      = $this->t_assistant_info>get_ass_page_info($assistantid);
human_resource.php:        $birth = $year."-".$month."-".$day;
human_resource.php:            'gender'       => $this->g_config['gender'][$ret_db['gender']],
human_resource.php:        $assistantid    = $this->get_in_int_val('assistantid', -1);
human_resource.php:        $ass_nick       = $this->get_in_str_val('ass_nick', "");
human_resource.php:        $gender         = $this->get_in_int_val('gender', 0);
human_resource.php:        $work_year      = $this->get_in_int_val('work_year',0);
human_resource.php:        $assistant_type = $this->get_in_int_val('assistant_type',0);
human_resource.php:        $email          = $this->get_in_str_val('email',"");
human_resource.php:        $ass_style      = $this->get_in_str_val('ass_style',"");
human_resource.php:        $achievement    = $this->get_in_str_val('achievement',"");
human_resource.php:        $birth          = $this->get_in_str_val('birth', "");
human_resource.php:        $school         = $this->get_in_str_val('school',"");
human_resource.php:        $base_intro     = $this->get_in_str_val('base_intro',"");
human_resource.php:        $prize          = $this->get_in_str_val('prize',"");
human_resource.php:        $ret_auth = $this->t_manager_info->check_permission($this->get_account(), ASS_ARCHIVES);
human_resource.php:            return outputJson(array('ret' => NOT_AUTH, 'info' => $this->err_string[NOT_AUTH]));
human_resource.php:        $tmp = explode("-",$birth);
human_resource.php:        $this->t_assistant_info->modify_ass_detail_info($assistantid, $ass_nick, $gender, $work_year, $school,
human_resource.php:        $key         = $this->get_in_str_val('key',"");
human_resource.php:        $assistantid = $this->get_in_int_val('assistantid', -1);
human_resource.php:            return outputJson(array('ret' => -1, 'info' => 'key不能为空'));
human_resource.php:        $url = "http://" . $this->g_config['qiniu']['download_pub'] . "/" . $key;
human_resource.php:        $ret_db = $this->t_assistant_info->change_ass_face($url, $assistantid);
human_resource.php:            return outputJson(array('ret' => -1, 'info' => '失败'));
human_resource.php:        $assistantid = $this->get_in_int_val('assistantid',-1);
human_resource.php:        $row=$this->t_assistant_info->field_get_list($assistantid,"*");
human_resource.php:        $assistantid = $this->get_in_int_val('assistantid',-1);
human_resource.php:        $ret_info=$this->t_assistant_info->get_assistant_list($assistantid);
human_resource.php:        $assistantid = $this->get_in_int_val('assistantid',-1);
human_resource.php:        $nick        = $this->get_in_str_val('name');
human_resource.php:        $birth       = $this->get_in_int_val('birth');
human_resource.php:        $gender      = $this->get_in_int_val('sex');
human_resource.php:        $work_year   = $this->get_in_int_val('years');
human_resource.php:        $school      = $this->get_in_str_val('school');
human_resource.php:        $phone       = $this->get_in_str_val('phone');
human_resource.php:        $email       = $this->get_in_str_val('email');
human_resource.php:        $assistant_type= $this->get_in_int_val('job');
human_resource.php:        $ret_info = $this->t_assistant_info->update_assistant_info3($assistantid,$nick,$birth,$gender,$work_year,$school,$phone,$email,$assistant_type);
human_resource.php:           return outputJson(array('ret' => -1, 'info' => '错误'));
human_resource.php:        $grade        = $this->get_in_int_val('grade',-1);
human_resource.php:        $grade_ex     = $this->get_in_int_val('grade_ex',-1);
human_resource.php:        $subject      = $this->get_in_int_val('subject',0);
human_resource.php:        $degree       = $this->get_in_int_val('degree',-1);
human_resource.php:        $teacher      = $this->get_in_int_val('teacher',-1);
human_resource.php:        $introduction = $this->get_in_str_val('introduction','');
human_resource.php:                    $ret_info=$this->t_teacher_closest->add_teacher_info($key,$subject,$degree,$teacher,$introduction);
human_resource.php:            $ret_info = $this->t_teacher_closest->add_teacher_info($grade,$subject,$degree,$teacher,$introduction);
human_resource.php:           return outputJson(array('ret' => -1, 'info' => '错误'));
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $row       = $this->t_teacher_closest->field_get_list($teacherid,"*");
human_resource.php:        $teacherid    = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $grade        = $this->get_in_int_val('grade',-1);
human_resource.php:        $subject      = $this->get_in_int_val('subject',0);
human_resource.php:        $degree       = $this->get_in_int_val('degree',-1);
human_resource.php:        $introduction = $this->get_in_str_val('introduction','');
human_resource.php:        $ret_info     = $this->t_teacher_closest->update_teacher_list($teacherid,$grade,$subject,$degree,$introduction);
human_resource.php:           return outputJson(array('ret' => -1, 'info' => '错误'));
human_resource.php:        $teacherid = $this->get_in_teacherid();
human_resource.php:        $subject   = $this->get_in_subject();
human_resource.php:        $grade     = $this->get_in_grade();
human_resource.php:        $ret_info = $this->t_teacher_closest->delete_tea_info($teacherid,$subject,$grade);
human_resource.php:            return outputJson(array('ret' => -1, 'info' => '错误'));
human_resource.php:        list($start_time,$end_time) =        $this->get_in_date_range(-30,0);
human_resource.php:        $user_name = $this->get_in_str_val('user_name',"");
human_resource.php:        $page_num           = $this->get_in_page_num();
human_resource.php:        $ret_info = $this->t_apply_reg->get_apply_info($page_num,$start_time,$end_time,$user_name);
human_resource.php:            $item['add_time'] = date('Y-m-d',$item['add_time']);
human_resource.php:                $item['trial_start_time_str'] = date('Y-m-d',$item['trial_start_time']);
human_resource.php:                $item['trial_end_time_str'] = date('Y-m-d',$item['trial_end_time']);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $page_num    = $this->get_in_page_num();
human_resource.php:        list($start_time,$end_time)=$this->get_in_date_range( -30,0);
human_resource.php:        $ret_info = $this->t_teacher_meeting_info->get_all_info($start_time,$end_time,$page_num);
human_resource.php:            $item['create_time_str'] = date('Y-m-d H:i:s',$item['create_time']);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $create_time = $this->get_in_str_val('create_time');
human_resource.php:            return $this->error_view(
human_resource.php:            $create_time_str= date('Y-m-d H:i:s',$create_time);
human_resource.php:            $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:            $subject = $this->get_in_int_val('subject',-1);
human_resource.php:            $page_count        = $this->get_in_page_count();
human_resource.php:            $page_num    = $this->get_in_page_num();
human_resource.php:            $ret_info = $this->t_teacher_info->get_teacher_info_all_by_page($teacherid,$create_time,$page_num,$subject);
human_resource.php:            $real_page_num=$ret_info["page_info"]["page_num"]-1;
human_resource.php:            return $this->pageView(__METHOD__,$ret_info,["create_time_str"=>$create_time_str,"create_time"=>$create_time]);
human_resource.php:        list($start_time,$end_time)=$this->get_in_date_range( -30,0);
human_resource.php:        $teacherid      = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $page_num    = $this->get_in_page_num();
human_resource.php:        $ret_info = $this->t_teacher_assess->get_assess_info($teacherid,$page_num,$start_time,$end_time);
human_resource.php:            $item['assess_nick'] = $this->cache_get_account_nick($item['assess_adminid']);
human_resource.php:            $item['assess_time_str'] = date("Y-m-d H:i:s",$item["assess_time"]) ;
human_resource.php:            $item['nick'] = $this->t_teacher_info->get_nick($item['teacherid']);
human_resource.php:            $item['assess_num'] = $this->t_teacher_info->field_get_value($item['teacherid'],"assess_num");
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        return $this->teacher_lecture_list();
human_resource.php:        list($start_time,$end_time,$opt_date_type) = $this->get_in_date_range(date("Y-m-01",time(NULL)),0,1,[
human_resource.php:        $adminid     = $this->get_account_id();
human_resource.php:        $right_list  = $this->get_tea_subject_and_right_by_adminid($adminid);
human_resource.php:        $grade        = $this->get_in_int_val("grade",-1);
human_resource.php:        $trans_grade  = $this->get_in_int_val("trans_grade",-1);
human_resource.php:        $subject      = $this->get_in_int_val("subject",-1);
human_resource.php:        $status       = $this->get_in_int_val("status",0);
human_resource.php:        $page_num     = $this->get_in_page_num();
human_resource.php:        $phone        = trim($this->get_in_str_val('phone',''));
human_resource.php:        $teacherid    = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $is_test_flag = $this->get_in_int_val('is_test_flag',0);
human_resource.php:        $have_wx = $this->get_in_int_val('have_wx',-1);
human_resource.php:        $this->t_teacher_lecture_info->switch_tongji_database();
human_resource.php:        $ret_info = $this->t_teacher_lecture_info->get_teacher_lecture_list(
human_resource.php:                $val['textbook'] = $this->get_teacher_textbook($val['subject'],$val['textbook']);
human_resource.php:                $this->change_https_to_http($val['audio']);
human_resource.php:                $this->change_https_to_http($val['draw']);
human_resource.php:        return $this->pageView(__METHOD__, $ret_info ,[
human_resource.php:        $adminid  = $this->get_in_int_val("adminid");
human_resource.php:            $date = strtotime(date("Y-m-d",$date_week["sdate"] + 86400)." 10:00:00");
human_resource.php:                $date_week_pre = \App\Helper\Utils::get_week_range(time()-7*86400,1);
human_resource.php:                $date_pre = strtotime(date("Y-m-d",$date_week_pre["sdate"] + 86400)." 10:00:00");
human_resource.php:                $num = $this->t_teacher_lecture_info->get_week_confirm_num($adminid,$date_pre,$date);
human_resource.php:                $date_next = strtotime(date("Y-m-d",$date_week_next["sdate"] + 86400)." 10:00:00");
human_resource.php:                $num = $this->t_teacher_lecture_info->get_week_confirm_num($adminid,$date,$date_next);
human_resource.php:        return $this->output_succ(["data"=>$num]);
human_resource.php:        $id  = $this->get_in_int_val("id");
human_resource.php:        $acc = $this->get_in_str_val("acc");
human_resource.php:        $account = $this->t_teacher_lecture_info->get_account($id);
human_resource.php:            return $this->output_err("此试讲视频已有人审核!请审核其他视频!");
human_resource.php:            $this->t_teacher_lecture_info->field_update_list($id,[
human_resource.php:        return $this->output_succ();
human_resource.php:        $id                                 = $this->get_in_int_val("id");
human_resource.php:        $appointment_id                     = $this->get_in_int_val("appointment_id");
human_resource.php:        $subject                            = $this->get_in_int_val("subject");
human_resource.php:        $grade                              = $this->get_in_int_val("grade");
human_resource.php:        $reason                             = $this->get_in_str_val("reason");
human_resource.php:        $lecture_content_design_score       = $this->get_in_int_val("lecture_content_design_score");
human_resource.php:        $lecture_combined_score             = $this->get_in_int_val("lecture_combined_score");
human_resource.php:        $course_review_score                = $this->get_in_str_val("course_review_score");
human_resource.php:        $teacher_mental_aura_score          = $this->get_in_int_val("teacher_mental_aura_score");
human_resource.php:        $teacher_point_explanation_score    = $this->get_in_int_val("teacher_point_explanation_score");
human_resource.php:        $teacher_class_atm_score            = $this->get_in_int_val("teacher_class_atm_score");
human_resource.php:        $teacher_dif_point_score            = $this->get_in_int_val("teacher_dif_point_score");
human_resource.php:        $teacher_blackboard_writing_score   = $this->get_in_int_val("teacher_blackboard_writing_score");
human_resource.php:        $teacher_explain_rhythm_score       = $this->get_in_int_val("teacher_explain_rhythm_score");
human_resource.php:        $teacher_language_performance_score = $this->get_in_int_val("teacher_language_performance_score");
human_resource.php:        $teacher_lecture_score              = $this->get_in_int_val("total_score");
human_resource.php:        $identity                           = $this->get_in_int_val("identity");
human_resource.php:        $work_year                          = $this->get_in_int_val("work_year");
human_resource.php:        $sshd_good                          = $this->get_in_str_val("sshd_good");
human_resource.php:        $sshd_bad                           = $this->get_in_str_val("sshd_bad");
human_resource.php:        $ktfw_good                          = $this->get_in_str_val("ktfw_good");
human_resource.php:        $ktfw_bad                           = $this->get_in_str_val("ktfw_bad");
human_resource.php:        $skgf_good                          = $this->get_in_str_val("skgf_good");
human_resource.php:        $skgf_bad                           = $this->get_in_str_val("skgf_bad");
human_resource.php:        $jsfg_good                          = $this->get_in_str_val("jsfg_good");
human_resource.php:        $jsfg_bad                           = $this->get_in_str_val("jsfg_bad");
human_resource.php:        $not_grade                          = $this->get_in_str_val("not_grade");
human_resource.php:        $acc                                = $this->get_account();
human_resource.php:        $lecture_info           = $this->t_teacher_lecture_info->get_lecture_info($id);
human_resource.php:        $this->send_lecture_sms($lecture_info,$status);
human_resource.php:        $this->t_teacher_lecture_info->field_update_list($id,[
human_resource.php:        $this->t_teacher_lecture_appointment_info->field_update_list($appointment_id,[
human_resource.php:            $teacher_info     = $this->t_teacher_info->get_teacher_info_by_phone($lecture_info['phone']);
human_resource.php:            $appointment_info = $this->t_teacher_lecture_appointment_info->get_appointment_info_by_id($appointment_id);
human_resource.php:                $this->add_teacher_label($sshd_good,$sshd_bad,$ktfw_good,$ktfw_bad,$skgf_good,$skgf_bad,$jsfg_good,$jsfg_bad,$teacher_info["teacherid"],3,0,$subject);
human_resource.php:                $this->check_teacher_lecture_is_pass($teacher_info);
human_resource.php:                $ret = $this->set_teacher_grade($teacher_info,$check_info);
human_resource.php:                    return $this->output_err("更新老师年级出错！请重试！");
human_resource.php:                $teacherid = $this->add_teacher_common($add_info);
human_resource.php:                $reference_info = $this->t_teacher_info->get_reference_info_by_phone($lecture_info['phone']);
human_resource.php:        return $this->output_succ();
human_resource.php:        $teacher_re_submit_num = $this->t_teacher_lecture_info->get_teacher_re_submit_num($teacher_info['id']);
human_resource.php:             * 老师试讲通过2-14
human_resource.php:             * 模板名称 : 老师试讲未通过2-14
human_resource.php:             * 模板名称 : 老师试讲可重申2-14
human_resource.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid($id,$from_user,$header_msg,$msg_info,$admin_url);
human_resource.php:        $phone = $this->get_in_int_val("phone");
human_resource.php:        $id    = $this->get_in_int_val("id");
human_resource.php:        $ret = $this->t_teacher_info->check_teacher_phone($phone);
human_resource.php:            $teacherid = $this->t_phone_to_user->get_userid_by_phone($phone,E\Erole::V_TEACHER);
human_resource.php:                $this->t_phone_to_user->delete_user($teacherid,E\Erole::V_TEACHER);
human_resource.php:            $ret_info = $this->t_teacher_lecture_info->get_simple_info_new($id);
human_resource.php:            return $this->output_succ(["data"=>$ret_info]);
human_resource.php:            return $this->output_err("老师已存在!");
human_resource.php:        $teacherid    = $this->get_in_int_val("teacherid");
human_resource.php:        $is_test_user = $this->get_in_int_val("is_test_user");
human_resource.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
human_resource.php:            return $this->output_succ();
human_resource.php:            return $this->output_err("更换失败!请重试!");
human_resource.php:        $phone          = $this->get_in_str_val('phone');
human_resource.php:        $revisit_note   = $this->get_in_str_val('revisit_note');
human_resource.php:        $revisit_origin = $this->get_in_int_val('revisit_origin');
human_resource.php:        $sys_operator   = $this->get_account();
human_resource.php:        $this->t_lecture_revisit_info->row_insert([
human_resource.php:        return $this->output_succ();
human_resource.php:        $teacherid      = $this->get_in_int_val('teacherid');
human_resource.php:        $revisit_note   = $this->get_in_str_val('revisit_note');
human_resource.php:        $class_will_type   = $this->get_in_int_val('class_will_type');
human_resource.php:        $class_will_sub_type   = $this->get_in_int_val('class_will_sub_type');
human_resource.php:        $recover_class_time   = $this->get_in_str_val('recover_class_time');
human_resource.php:        $acc            = $this->get_account();
human_resource.php:        $this->t_teacher_record_list->row_insert([
human_resource.php:        return $this->output_succ();
human_resource.php:        $phone  = $this->get_in_str_val('phone');
human_resource.php:        $ret = $this->t_lecture_revisit_info->get_lecture_revisit_info_by_phone($phone);
human_resource.php:            $item["revisit_time_str"] = date("Y-m-d H:i:s",$item["revisit_time"]);
human_resource.php:        return $this->output_succ(["revisit_list"=>$ret]);
human_resource.php:        $teacherid  = $this->get_in_int_val('teacherid');
human_resource.php:        $ret = $this->t_teacher_record_list->get_record_info_new($teacherid,5);
human_resource.php:            $item["add_time_str"] = date("Y-m-d H:i:s",$item["add_time"]);
human_resource.php:        return $this->output_succ(["revisit_list"=>$ret]);
human_resource.php:        return $this->teacher_lecture_appointment_info();
human_resource.php:        $this->switch_tongji_database();
human_resource.php:        list($start_time,$end_time) = $this->get_in_date_range(-7,0);
human_resource.php:        $lecture_appointment_status = $this->get_in_int_val('lecture_appointment_status',-1);
human_resource.php:        $teacherid                  = $this->get_in_int_val('teacherid',"-1");
human_resource.php:        $status                     = $this->get_in_int_val("status",-1);
human_resource.php:        $interview_type             = $this->get_in_int_val("interview_type",-1);
human_resource.php:        $user_name                  = trim($this->get_in_str_val('user_name',''));
human_resource.php:        $record_status              = $this->get_in_int_val("record_status",-1);
human_resource.php:        $page_num                   = $this->get_in_page_num();
human_resource.php:        $grade                      = $this->get_in_int_val('grade',-1);
human_resource.php:        $subject                    = $this->get_in_int_val('subject',-1);
human_resource.php:        $have_wx                    = $this->get_in_int_val("have_wx",-1);
human_resource.php:        $lecture_revisit_type       = $this->get_in_int_val("lecture_revisit_type",-1);
human_resource.php:        $teacher_ref_type           = $this->get_in_enum_list(E\Eteacher_ref_type::class);
human_resource.php:        $adminid = $this->get_account_id();
human_resource.php:        $acc     = $this->get_account();
human_resource.php:            $adminid = -1;
human_resource.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info(
human_resource.php:            $item["answer_time"] = date("Y-m-d H:i:s",$item["answer_begin_time"])."-".date("H:i:s",$item["answer_end_time"]);
human_resource.php:            if($item['status']=="-2" && empty($item["train_lessonid"])){
human_resource.php:            }elseif(($item['status']==0 && (($item["trial_train_status"] ==-2 && $item["train_lessonid"]>0) || empty($item["train_lessonid"]))) || (($item['status']==0 || $item['status']=="-2") && ($item["trial_train_status"] ==-2 && $item["train_lessonid"]>0))){
human_resource.php:            }else if(($item['status']==2 && ($item["trial_train_status"]==0 || empty($item["train_lessonid"]) )) || (($item['status']==2 || $item['status']=="-2") && $item["trial_train_status"]==0 )) {
human_resource.php:                $item['textbook']     = $this->get_teacher_textbook($item['subject_ex'],$item['textbook']);
human_resource.php:                                      ."-".E\Egrade_range::get_desc($item['grade_end']);
human_resource.php:                $item['trans_grade_str'] = E\Egrade_range::get_desc($item['trans_grade_start'])."-"
human_resource.php:            $item["phone_ex"] = preg_replace('/(1[358]{1}[0-9])[0-9]{4}([0-9]{4})/i','$1****$2',$item["phone"]);
human_resource.php:            $item["qq_ex"] = substr($item["qq"],0,3)."***".substr($item["qq"],6,$count-1);
human_resource.php:            $item["email_ex"] = substr($item["email"],0,3)."****".substr($item["email"],7,$num-1);
human_resource.php:        $account_id = $this->get_account_id();
human_resource.php:        $this->set_in_value("tea_adminid",$account_id);
human_resource.php:        $tea_adminid = $this->get_in_int_val("tea_adminid");
human_resource.php:        return $this->pageView(__METHOD__,$ret_info,["account_id"=>$account_id]);
human_resource.php:        $teacherid   = $this->get_in_int_val("teacherid");
human_resource.php:        $grade_start = $this->get_in_int_val("grade_start");
human_resource.php:        $grade_end   = $this->get_in_int_val("grade_end");
human_resource.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
human_resource.php:            return $this->output_err("更新失败！");
human_resource.php:        return $this->output_succ();
human_resource.php:        $id          = $this->get_in_int_val("id");
human_resource.php:        $subject     = $this->get_in_int_val("subject");
human_resource.php:        $grade_start = $this->get_in_int_val("grade_start");
human_resource.php:        $grade_end   = $this->get_in_int_val("grade_end");
human_resource.php:        $not_grade   = $this->get_in_str_val("not_grade");
human_resource.php:        $textbook    = $this->get_in_str_val("textbook");
human_resource.php:            return $this->output_err("请选择科目！");
human_resource.php:        $ret = $this->t_teacher_lecture_appointment_info->field_update_list($id,$update_data);
human_resource.php:            return $this->output_err("更新失败或没有变更内容！");
human_resource.php:        return $this->output_succ();
human_resource.php:          $grade = $this->get_in_int_val('grade',200);
human_resource.php:          $subject = $this->get_in_int_val('subject',2);
human_resource.php:          $note_name              = trim($this->get_in_str_val('note_name',''));
human_resource.php:          $page_num              = $this->get_in_page_num();
human_resource.php:        $ret_info = $this->t_lesson_note->get_all_info();
human_resource.php:          $item["main_note_id"] = substr($note_id,0,$num-4)."0000";
human_resource.php:          $item["main_note_name"] = $this->t_lesson_note->get_note_name($item["main_note_id"]);
human_resource.php:          $item["second_note_id"] = substr($note_id,0,$num-2)."00";
human_resource.php:          $item["second_note_name"] = $this->t_lesson_note->get_note_name($item["second_note_id"]);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $teacherid          = $this->get_in_int_val("teacherid",0);
human_resource.php:        $record_lesson_list = $this->get_in_str_val("lessonid_list","");
human_resource.php:                $ret = $this->t_lesson_info->get_lesson_info_stu($item);
human_resource.php:        $ret = $this->t_teacher_record_list->row_insert([
human_resource.php:            "acc"                              => $this->get_account(),
human_resource.php:            $openid = $this->t_teacher_info->get_wx_openid($teacherid);
human_resource.php:                $data['keyword3'] = date("Y-m-d H:i:s",time())."(教研评价时间)";
human_resource.php:        return $this->output_succ();
human_resource.php:        $teacherid                        = $this->get_in_int_val("teacherid",0);
human_resource.php:        $type                             = $this->get_in_int_val("type",0);
human_resource.php:        $courseware_flag                  = $this->get_in_str_val('courseware_flag');
human_resource.php:        $courseware_flag_score            = $this->get_in_int_val('courseware_flag_score');
human_resource.php:        $lesson_preparation_content       = $this->get_in_str_val('lesson_preparation_content');
human_resource.php:        $lesson_preparation_content_score = $this->get_in_int_val('lesson_preparation_content_score');
human_resource.php:        $courseware_quality               = $this->get_in_str_val('courseware_quality');
human_resource.php:        $courseware_quality_score         = $this->get_in_int_val('courseware_quality_score');
human_resource.php:        $tea_process_design               = $this->get_in_str_val('tea_process_design');
human_resource.php:        $tea_process_design_score         = $this->get_in_int_val('tea_process_design_score');
human_resource.php:        $class_atm                        = $this->get_in_str_val('class_atm');
human_resource.php:        $class_atm_score                  = $this->get_in_int_val('class_atm_score');
human_resource.php:        $knw_point                        = $this->get_in_str_val('knw_point');
human_resource.php:        $knw_point_score                  = $this->get_in_int_val('knw_point_score');
human_resource.php:        $dif_point                        = $this->get_in_str_val('dif_point');
human_resource.php:        $dif_point_score                  = $this->get_in_int_val('dif_point_score');
human_resource.php:        $teacher_blackboard_writing       = $this->get_in_str_val('teacher_blackboard_writing');
human_resource.php:        $teacher_blackboard_writing_score = $this->get_in_int_val('teacher_blackboard_writing_score');
human_resource.php:        $tea_rhythm                       = $this->get_in_str_val('tea_rhythm');
human_resource.php:        $tea_rhythm_score                 = $this->get_in_int_val('tea_rhythm_score');
human_resource.php:        $language_performance             = $this->get_in_str_val('language_performance');
human_resource.php:        $language_performance_score       = $this->get_in_int_val('language_performance_score');
human_resource.php:        $content_fam_degree               = $this->get_in_str_val('content_fam_degree');
human_resource.php:        $content_fam_degree_score         = $this->get_in_int_val('content_fam_degree_score');
human_resource.php:        $answer_question_cre              = $this->get_in_str_val('answer_question_cre');
human_resource.php:        $answer_question_cre_score        = $this->get_in_int_val('answer_question_cre_score');
human_resource.php:        $tea_attitude                     = $this->get_in_str_val('tea_attitude');
human_resource.php:        $tea_attitude_score               = $this->get_in_int_val('tea_attitude_score');
human_resource.php:        $tea_method                       = $this->get_in_str_val('tea_method');
human_resource.php:        $tea_method_score                 = $this->get_in_int_val('tea_method_score');
human_resource.php:        $tea_concentration                = $this->get_in_str_val('tea_concentration');
human_resource.php:        $tea_concentration_score          = $this->get_in_int_val('tea_concentration_score');
human_resource.php:        $tea_accident                     = $this->get_in_str_val('tea_accident');
human_resource.php:        $tea_accident_score               = $this->get_in_int_val('tea_accident_score');
human_resource.php:        $tea_operation                    = $this->get_in_str_val('tea_operation');
human_resource.php:        $tea_operation_score              = $this->get_in_int_val('tea_operation_score');
human_resource.php:        $tea_environment                  = $this->get_in_str_val('tea_environment');
human_resource.php:        $tea_environment_score            = $this->get_in_int_val('tea_environment_score');
human_resource.php:        $class_abnormality                = $this->get_in_str_val('class_abnormality');
human_resource.php:        $class_abnormality_score          = $this->get_in_int_val('class_abnormality_score');
human_resource.php:        $record_info                      = $this->get_in_str_val("record_info","");
human_resource.php:        $record_score                     = $this->get_in_int_val("record_score",0);
human_resource.php:        $record_monitor_class             = $this->get_in_str_val("record_monitor_class","");
human_resource.php:        $record_rank                      = $this->get_in_str_val("record_rank","");
human_resource.php:        $record_lesson_list               = $this->get_in_str_val("record_lesson_list","");
human_resource.php:        $sshd_good                          = $this->get_in_str_val("sshd_good");
human_resource.php:        $sshd_bad                           = $this->get_in_str_val("sshd_bad");
human_resource.php:        $ktfw_good                          = $this->get_in_str_val("ktfw_good");
human_resource.php:        $ktfw_bad                           = $this->get_in_str_val("ktfw_bad");
human_resource.php:        $skgf_good                          = $this->get_in_str_val("skgf_good");
human_resource.php:        $skgf_bad                           = $this->get_in_str_val("skgf_bad");
human_resource.php:        $jsfg_good                          = $this->get_in_str_val("jsfg_good");
human_resource.php:        $jsfg_bad                           = $this->get_in_str_val("jsfg_bad");
human_resource.php:            return $this->output_err("参数出错!请重新评价!");
human_resource.php:            return $this->output_err("评价内容超过了150字!");
human_resource.php:        $tea_nick = $this->cache_get_teacher_nick($teacherid);
human_resource.php:        $ret = $this->t_teacher_record_list->row_insert([
human_resource.php:            "acc"                              => $this->get_account(),
human_resource.php:                $ret = $this->t_lesson_info->get_lesson_info_stu($item);
human_resource.php:            $this->t_teacher_info->field_update_list($teacherid,["is_record_flag"=>1]);
human_resource.php:            $this->add_teacher_label($sshd_good,$sshd_bad,$ktfw_good,$ktfw_bad,$skgf_good,$skgf_bad,$jsfg_good,$jsfg_bad,$teacherid,2,0,0,$record_lesson_list);
human_resource.php:            $openid = $this->t_teacher_info->get_wx_openid($teacherid);
human_resource.php:                $data['keyword3'] = date("Y-m-d H:i:s",time())."(教研评价时间)";
human_resource.php:                 * 模板名称 : 老师反馈通知2-14
human_resource.php:                $phone    = $this->t_teacher_info->get_phone($teacherid);
human_resource.php:            return $this->output_succ();
human_resource.php:            return $this->output_err("评价失败!请重新评价");
human_resource.php:        $teacherid                        = $this->get_in_int_val("teacherid",0);
human_resource.php:        $type                             = $this->get_in_int_val("type",0);
human_resource.php:        $tea_process_design_score         = $this->get_in_int_val('tea_process_design_score');
human_resource.php:        $knw_point_score                  = $this->get_in_int_val('knw_point_score');
human_resource.php:        $teacher_blackboard_writing_score = $this->get_in_int_val('teacher_blackboard_writing_score');
human_resource.php:        $tea_rhythm_score                 = $this->get_in_int_val('tea_rhythm_score');
human_resource.php:        $language_performance_score       = $this->get_in_int_val('language_performance_score');
human_resource.php:        $answer_question_cre_score        = $this->get_in_int_val('answer_question_cre_score');
human_resource.php:        $tea_concentration_score          = $this->get_in_int_val('tea_concentration_score');
human_resource.php:        $tea_operation_score              = $this->get_in_int_val('tea_operation_score');
human_resource.php:        $tea_environment_score            = $this->get_in_int_val('tea_environment_score');
human_resource.php:        $class_abnormality_score          = $this->get_in_int_val('class_abnormality_score');
human_resource.php:        $record_info                      = $this->get_in_str_val("record_info","");
human_resource.php:        $record_score                     = $this->get_in_int_val("score",0);
human_resource.php:        $no_tea_related_score             = $this->get_in_int_val("no_tea_related_score",0);
human_resource.php:        $record_monitor_class             = $this->get_in_str_val("record_monitor_class","");
human_resource.php:        $record_lesson_list               = $this->get_in_str_val("record_lesson_list","");
human_resource.php:        $sshd_good                        = $this->get_in_str_val("sshd_good");
human_resource.php:        $sshd_bad                         = $this->get_in_str_val("sshd_bad");
human_resource.php:        $ktfw_good                        = $this->get_in_str_val("ktfw_good");
human_resource.php:        $ktfw_bad                         = $this->get_in_str_val("ktfw_bad");
human_resource.php:        $skgf_good                        = $this->get_in_str_val("skgf_good");
human_resource.php:        $skgf_bad                         = $this->get_in_str_val("skgf_bad");
human_resource.php:        $jsfg_good                        = $this->get_in_str_val("jsfg_good");
human_resource.php:        $jsfg_bad                         = $this->get_in_str_val("jsfg_bad");
human_resource.php:        $trial_train_status               = $this->get_in_int_val("trial_train_status");
human_resource.php:            return $this->output_err("参数出错!请重新评价!");
human_resource.php:            return $this->output_err("评价内容超过了150字!");
human_resource.php:        $tea_nick = $this->cache_get_teacher_nick($teacherid);
human_resource.php:        $ret = $this->t_teacher_record_list->row_insert([
human_resource.php:            "acc"                              => $this->get_account(),
human_resource.php:                $ret = $this->t_lesson_info->get_lesson_info_stu($item);
human_resource.php:            $this->t_teacher_info->field_update_list($teacherid,["is_record_flag"=>1]);
human_resource.php:            $this->add_teacher_label($sshd_good,$sshd_bad,$ktfw_good,$ktfw_bad,$skgf_good,$skgf_bad,$jsfg_good,$jsfg_bad,$teacherid,2,0,0,$record_lesson_list);
human_resource.php:            $openid = $this->t_teacher_info->get_wx_openid($teacherid);
human_resource.php:                $data['keyword3'] = date("Y-m-d H:i:s",time())."(教研评价时间)";
human_resource.php:                 * 模板名称 : 老师反馈通知2-14
human_resource.php:                $phone    = $this->t_teacher_info->get_phone($teacherid);
human_resource.php:            return $this->output_succ();
human_resource.php:            return $this->output_err("评价失败!请重新评价");
human_resource.php:        $id                               = $this->get_in_int_val("id",0);
human_resource.php:        $teacherid                        = $this->get_in_int_val("teacherid",0);
human_resource.php:        $lessonid                         = $this->get_in_int_val("lessonid",0);
human_resource.php:        $record_lesson_list               = $this->get_in_str_val("record_lesson_list","");
human_resource.php:        $status                           = $this->get_in_int_val("status");
human_resource.php:        $tea_process_design_score         = $this->get_in_int_val('tea_process_design_score');
human_resource.php:        $knw_point_score                  = $this->get_in_int_val('knw_point_score');
human_resource.php:        $teacher_blackboard_writing_score = $this->get_in_int_val('teacher_blackboard_writing_score');
human_resource.php:        $tea_rhythm_score                 = $this->get_in_int_val('tea_rhythm_score');
human_resource.php:        $language_performance_score       = $this->get_in_int_val('language_performance_score');
human_resource.php:        $answer_question_cre_score        = $this->get_in_int_val('answer_question_cre_score');
human_resource.php:        $tea_concentration_score          = $this->get_in_int_val('tea_concentration_score');
human_resource.php:        $tea_operation_score              = $this->get_in_int_val('tea_operation_score');
human_resource.php:        $tea_environment_score            = $this->get_in_int_val('tea_environment_score');
human_resource.php:        $class_abnormality_score          = $this->get_in_int_val('class_abnormality_score');
human_resource.php:        $record_info                      = $this->get_in_str_val("record_info","");
human_resource.php:        $record_score                     = $this->get_in_int_val("score",0);
human_resource.php:        $no_tea_related_score             = $this->get_in_int_val("no_tea_related_score",0);
human_resource.php:        $record_monitor_class             = $this->get_in_str_val("record_monitor_class","");
human_resource.php:        $sshd_good                        = $this->get_in_str_val("sshd_good");
human_resource.php:        $sshd_bad                         = $this->get_in_str_val("sshd_bad");
human_resource.php:        $ktfw_good                        = $this->get_in_str_val("ktfw_good");
human_resource.php:        $ktfw_bad                         = $this->get_in_str_val("ktfw_bad");
human_resource.php:        $skgf_good                        = $this->get_in_str_val("skgf_good");
human_resource.php:        $skgf_bad                         = $this->get_in_str_val("skgf_bad");
human_resource.php:        $jsfg_good                        = $this->get_in_str_val("jsfg_good");
human_resource.php:        $jsfg_bad                         = $this->get_in_str_val("jsfg_bad");
human_resource.php:        $info = $this->t_teacher_info->get_teacher_info($teacherid);
human_resource.php:        $ret = $this->t_teacher_record_list->field_update_list($id,[
human_resource.php:            return $this->output_err("更新出错！请重新提交！");
human_resource.php:        $this->add_teacher_label(
human_resource.php:        $teacher_info  = $this->t_teacher_info->get_teacher_info($teacherid);
human_resource.php:        $lesson_info   = $this->t_lesson_info->get_lesson_info($lessonid);
human_resource.php:            $ret = $this->t_teacher_info->field_update_list($teacherid,[
human_resource.php:            $check_flag = $this->t_teacher_money_type->check_is_exists($lessonid);
human_resource.php:                $this->t_teacher_money_type->row_insert([
human_resource.php:                    "acc"        => $this->get_account(),
human_resource.php:            $ret = $this->add_trial_train_lesson($teacher_info);
human_resource.php:            return $this->output_err("审核状态出错！");
human_resource.php:            $data['keyword3'] = date("Y-m-d H:i:s");
human_resource.php:        return $this->output_succ();
human_resource.php:        $courseid = $this->t_course_order->add_course_info_new(
human_resource.php:        $lessonid = $this->t_lesson_info->add_lesson(
human_resource.php:        $this->t_homework_info->add(0,0,0,$lessonid,$grade,$teacher_info['subject'],$teacher_info['teacherid']);
human_resource.php:        $this->t_teacher_record_list->row_insert([
human_resource.php:        $this->t_teacher_record_list->switch_tongji_database();
human_resource.php:        $teacherid = $this->get_in_int_val("teacherid",53289);
human_resource.php:        $type      = $this->get_in_int_val("type",1);
human_resource.php:        $add_time  = $this->get_in_int_val("add_time",1496368310);
human_resource.php:        $ret_info  = $this->t_teacher_record_list->get_all_info($teacherid,$type,$add_time);
human_resource.php:        return $this->pageView(__METHOD__,null,["ret_info"=>$ret_info]);
human_resource.php:        $this->t_teacher_record_list->switch_tongji_database();
human_resource.php:        $teacherid = $this->get_in_int_val("teacherid",53289);
human_resource.php:        $type      = $this->get_in_int_val("type",1);
human_resource.php:        $add_time  = $this->get_in_int_val("add_time",1496370325);
human_resource.php:        $ret_info  = $this->t_teacher_record_list->get_all_info($teacherid,$type,$add_time);
human_resource.php:        return $this->pageView(__METHOD__,null,["ret_info"=>$ret_info]);
human_resource.php:        $this->t_teacher_record_list->switch_tongji_database();
human_resource.php:        $teacherid = $this->get_in_int_val("teacherid",-1);
human_resource.php:        $subject   = $this->get_in_int_val("subject",-1);
human_resource.php:        $page_num  = $this->get_in_page_info();
human_resource.php:        list($start_time,$end_time) = $this->get_in_date_range(-31,date("2017-05-31"));
human_resource.php:        $ret_info = $this->t_teacher_record_list->get_all_record_info_time($teacherid,1,$start_time,$end_time,$page_num,$subject);
human_resource.php:        $time = time()-7*86400;
human_resource.php:            $item["create_time_str"] = date("Y-m-d",$item["create_time"]);
human_resource.php:                    $ret = $this->t_lesson_info->get_lesson_info_stu($item);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $this->t_teacher_record_list->switch_tongji_database();
human_resource.php:        $teacherid = $this->get_in_int_val("teacherid",-1);
human_resource.php:        $subject   = $this->get_in_int_val("subject",-1);
human_resource.php:        $page_num  = $this->get_in_page_num();
human_resource.php:        list($start_time,$end_time) = $this->get_in_date_range(-7,0);
human_resource.php:        $ret_info = $this->t_teacher_record_list->get_all_record_info_time($teacherid,1,$start_time,$end_time,$page_num,$subject);
human_resource.php:        $time = time()-7*86400;
human_resource.php:            $item["create_time_str"] = date("Y-m-d",$item["create_time"]);
human_resource.php:                        $ret = $this->t_lesson_info->get_lesson_info_stu($item);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $teacherid = $this->get_in_int_val("teacherid",0);
human_resource.php:        $type      = $this->get_in_int_val("type",1);
human_resource.php:            return $this->output_err("老师id出错!");
human_resource.php:        $list = $this->t_teacher_record_list->get_teacher_record_list($teacherid,$type);
human_resource.php:            $val['add_time_str']=date("Y-m-d H:i:s",$val['add_time']);
human_resource.php:            return $this->output_err("该老师没有反馈记录!");
human_resource.php:            return $this->output_succ(["data"=>$list]);
human_resource.php:        $id     = $this->get_in_int_val("id");
human_resource.php:        $status = $this->get_in_int_val("status");
human_resource.php:        $ret = $this->t_teacher_lecture_info->field_update_list($id,[
human_resource.php:            return $this->output_succ();
human_resource.php:            return $this->output_err("更改失败,请刷新重试!");
human_resource.php:        $name         = $this->get_in_str_val("name");
human_resource.php:        $phone        = $this->get_in_str_val("phone");
human_resource.php:        $email        = $this->get_in_str_val("email");
human_resource.php:        $grade_ex     = $this->get_in_str_val("grade");
human_resource.php:        $subject_ex   = $this->get_in_str_val("subject");
human_resource.php:        $school       = $this->get_in_str_val("school");
human_resource.php:        $textbook     = $this->get_in_str_val("textbook");
human_resource.php:        $teacher_type = $this->get_in_str_val("teacher_type");
human_resource.php:        $reference    = $this->get_in_str_val("reference");
human_resource.php:        $check_flag=$this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
human_resource.php:            return $this->output_err("手机号已存在!");
human_resource.php:        $ret = $this->t_teacher_lecture_appointment_info->row_insert([
human_resource.php:            return $this->output_succ();
human_resource.php:            return $this->output_err("上传失败!请重试!");
human_resource.php:        $this->t_lesson_info->switch_tongji_database();
human_resource.php:        $start_time = strtotime("2015-7-1");
human_resource.php:        $end        = strtotime("2017-1-1");
human_resource.php:            $ret[$i]["date"]=date("Y-m-d",$start_time);
human_resource.php:            $ret[$i]['stu_new_num'] = $this->t_lesson_info->get_stu_total_by_type($start_time,$end_time,1);
human_resource.php:            $ret[$i]['stu_old_num'] = $this->t_lesson_info->get_stu_total_by_type($start_time,$end_time,2);
human_resource.php:            $ret[$i]['stu_all_num'] = $this->t_lesson_info->get_stu_total($start_time,$end_time);
human_resource.php:            $subject_new = $this->t_lesson_info->get_stu_subject_list($start_time,$end_time,1);
human_resource.php:            $subject_old = $this->t_lesson_info->get_stu_subject_list($start_time,$end_time,2);
human_resource.php:            $ret[$i]['lesson_total_new']   = $this->t_lesson_info->get_lesson_total_by_stuid($start_time,$end_time,1);
human_resource.php:            $ret[$i]['lesson_total_old']   = $this->t_lesson_info->get_lesson_total_by_stuid($start_time,$end_time,2);
human_resource.php:            $ret[$i]['lesson_trial_total'] = $this->t_lesson_info->get_trial_lesson_total($start_time,$end_time);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $teacherid                = $this->get_in_int_val("teacherid");
human_resource.php:        $limit_plan_lesson_type   = $this->get_in_int_val("limit_plan_lesson_type");
human_resource.php:        $seller_require_flag      = $this->get_in_int_val("seller_require_flag",0);
human_resource.php:        $limit_plan_lesson_reason = trim($this->get_in_str_val("limit_plan_lesson_reason"));
human_resource.php:        $account                  = $this->get_account();
human_resource.php:        $account_id = $this->get_account_id();
human_resource.php:        $tea_nick = $this->cache_get_teacher_nick($teacherid);
human_resource.php:        $limit_account = $this->t_teacher_info->field_get_value($teacherid,"limit_plan_lesson_account");
human_resource.php:        $old_type      = $this->t_teacher_info->field_get_value($teacherid,"limit_plan_lesson_type");
human_resource.php:        $del_flag = $this->t_manager_info->get_del_flag_new($limit_account);
human_resource.php:             return $this->output_err("没有权限!");
human_resource.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
human_resource.php:            $this->t_teacher_info->field_update_list($teacherid,[
human_resource.php:            $this->t_teacher_info->field_update_list($teacherid,[
human_resource.php:            $this->t_teacher_record_list->row_insert([
human_resource.php:                    $this->t_manager_info->send_wx_todo_msg_by_adminid ($ss,"理优监课组","老师限制排课更改",$tea_nick."老师,限制排课由一周限排".$old_type."节,改为".$rr.",操作人:".$account,"");
human_resource.php:                $data['keyword2'] = date("Y-m-d H:i",time());
human_resource.php:                 * 模板名称 : 限制老师排课通知2-14
human_resource.php:                $data['keyword2'] = date("Y-m-d H:i",time());
human_resource.php:                 * 模板名称 : 解除排课限制通知2-14
human_resource.php:            $openid = $this->t_teacher_info->get_wx_openid($teacherid);
human_resource.php:                $phone = $this->t_teacher_info->get_phone($teacherid);
human_resource.php:        return $this->output_succ();
human_resource.php:        list($start_time, $end_time) = $this->get_in_date_range(date("Y-m-01",strtotime("-1 month",time())),0, 0,[],3 );
human_resource.php:        $trial_money  = $this->get_in_int_val("trial_money",60);
human_resource.php:        $normal_money = $this->get_in_int_val("normal_money",80);
human_resource.php:        $order_str    = $this->get_in_int_val("order_str",0);
human_resource.php:        $order_type   = $this->get_in_int_val("order_type",0);
human_resource.php:        $lesson_num   = $this->get_in_int_val("lesson_num",15);
human_resource.php:        $full_type    = $this->get_in_int_val("full_type",0);
human_resource.php:        $lesson_list = $this->t_lesson_info->get_lesson_list_for_lesson_full_num($start_time,$end_time);
human_resource.php:                    $this->get_all_money(
human_resource.php:                    $this->get_all_money(
human_resource.php:        $all_teacher = $this->t_lesson_info->tongji_get_teacher_count($start_time,$end_time);
human_resource.php:        return $this->pageView(__METHOD__,$ret_list,[
human_resource.php:        list($start_time, $end_time) = $this->get_in_date_range(date("Y-m-01",strtotime("-1 month",time())),0, 0,[],3 );
human_resource.php:        $full_money = $this->get_in_int_val("normal_money",100);
human_resource.php:        $lesson_num = $this->get_in_int_val("lesson_num",20);
human_resource.php:        $order_type = $this->get_in_int_val("order_type",0);
human_resource.php:        $all_teacher = $this->t_lesson_info->tongji_get_teacher_count($start_time,$end_time);
human_resource.php:        $lesson_list = $this->t_lesson_info->get_lesson_list_for_lesson_full_num($start_time,$end_time);
human_resource.php:         $list = $this->t_lesson_info->get_lesson_full_wage_old($start_time,$end_time,$lesson_num,$order_type);
human_resource.php:        return $this->pageView(__METHOD__,$ret_list,[
human_resource.php:        $id                    = $this->get_in_int_val("id");
human_resource.php:        $phone                 = $this->get_in_str_val("phone");
human_resource.php:        $nick                  = $this->get_in_str_val("nick");
human_resource.php:        $teacher_re_submit_num = $this->get_in_int_val("teacher_re_submit_num");
human_resource.php:                $this->t_teacher_lecture_info->field_update_list($id,[
human_resource.php:                $teacher_info = $this->t_teacher_lecture_info->field_get_list($id,"phone,subject,nick");
human_resource.php:                    $this->t_manager_info->send_wx_todo_msg_by_adminid($id,$from_user,$header_msg,$msg_info,$admin_url);
human_resource.php:                return $this->output_succ();
human_resource.php:                return $this->output_err("短信发送失败！");
human_resource.php:            return $this->output_err("已经通知过老师，请勿重复点击！");
human_resource.php:        $userid    = $this->get_in_int_val("userid");
human_resource.php:        $phone     = $this->get_in_int_val("phone");
human_resource.php:        $new_phone = $this->get_in_int_val("new_phone");
human_resource.php:        $role      = $this->get_in_int_val("role",1);
human_resource.php:            return $this->output_err("手机号不是11位!");
human_resource.php:        $ret = $this->t_phone_to_user->check_is_exist_by_phone_and_userid($userid,$phone,$role);
human_resource.php:            return $this->output_err("电话与用户不匹配，无法修改手机号！");
human_resource.php:        $new_ret = $this->t_phone_to_user->check_is_exist_by_phone_and_userid(-1,$new_phone,$role);
human_resource.php:            return $this->output_err("该账号已存在！");
human_resource.php:        $this->t_phone_to_user->start_transaction();
human_resource.php:        $update_ret = $this->t_phone_to_user->set_phone($new_phone,$role,$userid);
human_resource.php:        $tea_ret    = $this->t_teacher_info->field_update_list($userid,[
human_resource.php:            $this->t_phone_to_user->commit();
human_resource.php:                $this->t_teacher_record_list->row_insert([
human_resource.php:                    'acc'         => $this->get_account(),
human_resource.php:            return $this->output_succ();
human_resource.php:            $this->t_phone_to_user->rollback();
human_resource.php:            return $this->output_err("手机号更新失败!请重试!");
human_resource.php:        $id = $this->get_in_int_val("id");
human_resource.php:        $old_is_test_flag=$this->t_teacher_lecture_info->get_is_test_flag($id);
human_resource.php:        $ret=$this->t_teacher_lecture_info->field_update_list($id,[
human_resource.php:            return $this->output_succ();
human_resource.php:            return $this->output_err("更改失败，请重试！");
human_resource.php:        $teacherid = $this->get_in_int_val("teacherid");
human_resource.php:        $old_level = $this->get_in_int_val("old_level");
human_resource.php:        $level     = $this->get_in_int_val("level");
human_resource.php:        $acc       = $this->get_account();
human_resource.php:        $nick      = $this->cache_get_teacher_nick($teacherid);
human_resource.php:        $teacher_info = $this->t_teacher_info->get_teacher_info($teacherid);
human_resource.php:            return $this->output_err("固定工资和外聘不能修改等级！");
human_resource.php:        $this->t_teacher_info->start_transaction();
human_resource.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
human_resource.php:            $this->t_teacher_info->rollback();
human_resource.php:            return $this->output_err("更改老师等级失败！");
human_resource.php:        $lesson_num = $this->t_lesson_info->get_teacher_level_num($teacherid,$old_level);
human_resource.php:            $ret = $this->t_lesson_info->reset_lesson_teacher_level($teacherid,$level);
human_resource.php:                $this->t_teacher_info->rollback();
human_resource.php:                return $this->output_err("更改课程的老师等级失败！");
human_resource.php:            $old_money   = $this->t_teacher_money_type->get_teacher_money_type($teacher_money_type,$old_level);
human_resource.php:            $new_money   = $this->t_teacher_money_type->get_teacher_money_type($teacher_money_type,$level);
human_resource.php:            $diff_money  = $new_money[101]['money']-$old_money[101]['money'];
human_resource.php:                $data['keyword3'] = date("Y-m-d H:i");
human_resource.php:        $this->t_teacher_info->commit();
human_resource.php:        $this->t_teacher_record_list->row_insert([
human_resource.php:            'acc'         => $this->get_account(),
human_resource.php:        return $this->output_succ();
human_resource.php:        $record_info = $this->get_in_str_val("record_info");
human_resource.php:        $type        = $this->get_in_int_val("type");
human_resource.php:        $teacherid   = $this->get_in_int_val("teacherid");
human_resource.php:        $ret = $this->t_teacher_record_list->row_insert([
human_resource.php:            "acc"         => $this->get_account(),
human_resource.php:            return $this->output_succ();
human_resource.php:            return $this->output_err("添加出错！");
human_resource.php:        list($start_time,$end_time, $opt_date_str)=$this->get_in_date_range(
human_resource.php:        $teacherid   = $this->get_in_int_val("teacherid",-1);
human_resource.php:        $account_role   = $this->get_in_int_val("account_role",-1);
human_resource.php:        $ret_info = $this->t_course_order->get_tea_stu_info($teacherid,$account_role);
human_resource.php:        $start = time()-60*86400;
human_resource.php:            $item["lesson_total"] = $this->t_lesson_info->get_month_stu_lesson_count($start,$end,$teacherid,$userid);
human_resource.php:            $item["lesson_left"] = $item["assigned_lesson_count"]-$item["finish_lesson_count"];
human_resource.php:                $item["end_day"]= date("Y-m-d",$day);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $this->set_in_value("fulltime_flag",1);
human_resource.php:        return $this->teacher_test_lesson_info();
human_resource.php:            =$this->get_in_order_by_str($order_field_arr,"nick desc");
human_resource.php:        $page_num    = $this->get_in_page_num();
human_resource.php:        list($start_time,$end_time)=$this->get_in_date_range( 0,0,0,[],3);
human_resource.php:        $teacherid       = $this->get_in_int_val('teacherid', -1);
human_resource.php:        $subject         = $this->get_in_int_val('subject', -1);
human_resource.php:        $teacher_subject = $this->get_in_int_val('teacher_subject', -1);
human_resource.php:        $identity        = $this->get_in_int_val('identity', -1);
human_resource.php:        $grade_part_ex   = $this->get_in_int_val('grade_part_ex',-1);
human_resource.php:        $tea_status      = $this->get_in_int_val('tea_status',-1);
human_resource.php:        $teacher_account = $this->get_in_int_val('teacher_account', -1);
human_resource.php:        $qzls_flag       = $this->get_in_int_val('qzls_flag', -1);
human_resource.php:        $fulltime_flag   = $this->get_in_int_val('fulltime_flag', -1);
human_resource.php:        $create_now      = $this->get_in_int_val('create_now', -1);
human_resource.php:        $adminid         = $this->get_account_id();
human_resource.php:        $right_list      = $this->get_tea_subject_and_right_by_adminid($adminid);
human_resource.php:        $this->t_teacher_info->switch_tongji_database();
human_resource.php:        $this->t_lesson_info->switch_tongji_database();
human_resource.php:        $ret_info = $this->t_teacher_info->get_teacher_test_lesson_info_by_time($page_num,$teacherid,$teacher_subject,$identity,$tea_subject,$qz_flag,$tea_status,$teacher_account,$qzls_flag,$fulltime_flag,$create_now,$start_time,$end_time);
human_resource.php:        $all_lesson_list = $this->t_lesson_info->get_all_lesson_num_info( $start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $test_person_num= $this->t_lesson_info->get_teacher_test_person_num_list( $start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $test_person_num_old= $this->t_lesson_info->get_teacher_test_person_num_list_old( $start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $test_person_num_other= $this->t_lesson_info->get_teacher_test_person_num_list_other( $start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $kk_test_person_num= $this->t_lesson_info->get_kk_teacher_test_person_num_list( $start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $change_test_person_num= $this->t_lesson_info->get_change_teacher_test_person_num_list( $start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $success_test_lesson_list = $this->t_lesson_info->get_success_test_lesson_list_new($start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $success_not_in_lesson_list =  $this->t_lesson_info->get_success_not_test_lesson_list_new($start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $have_order_list =$this->t_lesson_info->get_have_order_list_new($start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $subject_num_list = $this->t_lesson_info->get_teacher_test_subject_num_list( $start_time,$end_time,$subject,$grade_part_ex,$teacherid_list);
human_resource.php:        $teacher_regular_stu_list          = $this->t_lesson_info->get_regular_stu_num($date["sdate"],$date["edate"],$teacherid_list);
human_resource.php:        $teacher_test_lesson_num_list      = $this->t_lesson_info->get_test_lesson_num_list(time(),time()+21*86400,$teacherid_list);
human_resource.php:        $teacher_lesson_count_total        = $this->t_lesson_info->get_teacher_lesson_count_total(time(),$date["edate"],$teacherid_list);
human_resource.php:        $teacher_test_lesson_num_list_week = $this->t_lesson_info->get_test_lesson_num_list(time(),$date_week["edate"],$teacherid_list);
human_resource.php:                $item["work_day"] = ceil((time()-$item["train_through_new_time"])/86400)."天";
human_resource.php:            $item["kk_lesson_per"] = !empty($item["success_lesson"]-$item["test_person_num"])?round(($item["order_number"]-$item["have_order"])/($item["success_lesson"]-$item["test_person_num"]),4)*100:0;
human_resource.php:            $item["freeze_time_str"] = date('Y-m-d',$item["freeze_time"]);
human_resource.php:            $item["limit_plan_lesson_time_str"] = date("Y-m-d",$item["limit_plan_lesson_time"]);
human_resource.php:                $item["freeze_adminid_str"] = $this->t_manager_info->get_account($item["freeze_adminid"]);
human_resource.php:        $day_time = $this->get_avg_conversion_time(time(),2);
human_resource.php:        $rr = $this->t_lesson_info->get_order_add_time();
human_resource.php:        $order_lesson_day = !empty($rr["all_count"])?round(($rr["lesson_time"]-$rr["order_time"])/$rr["all_count"]/86400,1):0;
human_resource.php:        return $this->pageView(__METHOD__,$ret_info,[
human_resource.php:            "adminid"     => $this->get_account_id(),
human_resource.php:        $this->set_in_value("fulltime_flag",1);
human_resource.php:        return $this->teacher_test_lesson_info_total();
human_resource.php:        list($start_time,$end_time)=$this->get_in_date_range(-10,0);
human_resource.php:        $teacherid                  = $this->get_in_int_val('teacherid', -1);
human_resource.php:        $subject                    = $this->get_in_int_val('subject', -1);
human_resource.php:        $teacher_subject            = $this->get_in_int_val('teacher_subject', -1);
human_resource.php:        $identity                   = $this->get_in_int_val('identity', -1);
human_resource.php:        $grade_part_ex              =$this->get_in_int_val('grade_part_ex',-1);
human_resource.php:        $tea_status                 =$this->get_in_int_val('tea_status',-1);
human_resource.php:        $teacher_account            = $this->get_in_int_val('teacher_account', -1);
human_resource.php:        $fulltime_flag            = $this->get_in_int_val('fulltime_flag', -1);
human_resource.php:        $adminid      = $this->get_account_id();
human_resource.php:        $right_list = $this->get_tea_subject_and_right_by_adminid($adminid);
human_resource.php:        $this->t_lesson_info->switch_tongji_database();
human_resource.php:        $day_time = $this->get_avg_conversion_time(time(),2);
human_resource.php:        $rr = $this->t_lesson_info->get_order_add_time();
human_resource.php:        $order_lesson_day = !empty($rr["all_count"])?round(($rr["lesson_time"]-$rr["order_time"])/$rr["all_count"]/86400,1):0;
human_resource.php:        $all_lesson_total = $this->t_lesson_info->get_all_lesson_num_info_total( $start_time,$end_time,$subject,$grade_part_ex,$teacherid,$teacher_subject,$identity,$tea_subject,$qz_flag,$tea_status,$teacher_account,$fulltime_flag);
human_resource.php:        $test_person_num_total_old= $this->t_lesson_info->get_teacher_test_person_num_list_total_old( $start_time,$end_time,$subject,$grade_part_ex,$teacherid,$teacher_subject,$identity,$tea_subject,$qz_flag,$tea_status,$teacher_account,$fulltime_flag);
human_resource.php:        $test_person_num_total= $this->t_lesson_info->get_teacher_test_person_num_list_total( $start_time,$end_time,$subject,$grade_part_ex,$teacherid,$teacher_subject,$identity,$tea_subject,$qz_flag,$tea_status,$teacher_account,$fulltime_flag);
human_resource.php:        $test_person_num_total_other= $this->t_lesson_info->get_teacher_test_person_num_list_total_other( $start_time,$end_time,$subject,$grade_part_ex,$teacherid,$teacher_subject,$identity,$tea_subject,$qz_flag,$tea_status,$teacher_account,$fulltime_flag);
human_resource.php:        $kk_test_person_num_total= $this->t_lesson_info->get_kk_teacher_test_person_num_list_total( $start_time,$end_time,$subject,$grade_part_ex,$teacherid,$teacher_subject,$identity,$tea_subject,$qz_flag,$tea_status,$teacher_account,$fulltime_flag);
human_resource.php:        $change_test_person_num_total= $this->t_lesson_info->get_change_teacher_test_person_num_list_total( $start_time,$end_time,$subject,$grade_part_ex,$teacherid,$teacher_subject,$identity,$tea_subject,$qz_flag,$tea_status,$teacher_account,$fulltime_flag);
human_resource.php:        $success_test_lesson_list_total = $this->t_lesson_info->get_success_test_lesson_list_new_total($start_time,$end_time,$subject,$grade_part_ex,$teacherid,$teacher_subject,$identity,$tea_subject,$qz_flag,$tea_status,$teacher_account,$fulltime_flag);
human_resource.php:        return $this->pageView(__METHOD__,null,[
human_resource.php:            "adminid"     => $this->get_account_id(),
human_resource.php:        $page_num = $this->get_in_page_num();
human_resource.php:        $teacherid              = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $jw_adminid             = $this->get_in_int_val('jw_adminid',-1);
human_resource.php:        $grade_part_ex          = $this->get_in_int_val("grade_part_ex",-1);
human_resource.php:        $subject                = $this->get_in_int_val("subject",-1);
human_resource.php:        $second_subject         = $this->get_in_int_val("second_subject",-1);
human_resource.php:        $identity               = $this->get_in_int_val("identity",-1);
human_resource.php:        $class_will_type        = $this->get_in_int_val("class_will_type",-1);
human_resource.php:        $have_lesson            = $this->get_in_int_val("have_lesson",0);
human_resource.php:        $revisit_flag           = $this->get_in_int_val("revisit_flag",-1);
human_resource.php:        $adminid = $this->get_account_id();
human_resource.php:            $adminid=-1;
human_resource.php:        $ret_info = $this->t_teacher_info->get_assign_jw_adminid_info($page_num,$adminid,$teacherid,$grade_part_ex,$subject,$second_subject,$identity,$jw_adminid,$class_will_type,$have_lesson,$revisit_flag);
human_resource.php:                $item["work_day"] = ceil((time()-$item["train_through_new_time"])/86400)."天";
human_resource.php:        $jw_list = $this->t_manager_info->get_adminid_list_by_account_role(3);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info,[
human_resource.php:        $this->t_lesson_info->switch_tongji_database();
human_resource.php:        $start_time_ave = $time-30*86400;
human_resource.php:        $res = $this->t_lesson_info->get_all_test_order_info_by_time($start_time_ave);
human_resource.php:                $arr += ($item["order_time"]-$item["lesson_start"]);
human_resource.php:        $teacherid              = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $is_freeze              = $this->get_in_int_val('is_freeze',-1);
human_resource.php:        $free_time              = $this->get_in_str_val("free_time","");
human_resource.php:        $page_num               = $this->get_in_page_num();
human_resource.php:        $is_test_user           = $this->get_in_int_val("is_test_user",-1);
human_resource.php:        $gender                 = $this->get_in_int_val("gender",-1);
human_resource.php:        $grade_part_ex          = $this->get_in_int_val("grade_part_ex",-1);
human_resource.php:        $subject                = $this->get_in_int_val("subject",-1);
human_resource.php:        $second_subject         = $this->get_in_int_val("second_subject",-1);
human_resource.php:        $address                = trim($this->get_in_str_val('address',''));
human_resource.php:        $limit_plan_lesson_type = $this->get_in_int_val("limit_plan_lesson_type",-1);
human_resource.php:        $lesson_hold_flag       = $this->get_in_int_val("lesson_hold_flag",-1);
human_resource.php:        $train_through_new      = $this->get_in_int_val("train_through_new",-1);
human_resource.php:        $seller_flag            = $this->get_in_int_val("seller_flag",0);
human_resource.php:        $adminid                = $this->get_account_id();
human_resource.php:        $right_list             = $this->get_tea_subject_and_right_by_adminid($adminid);
human_resource.php:            $teacherid_arr = $this->get_free_teacherid_arr_new($free_time);
human_resource.php:        $ret_info  = $this->t_teacher_info->get_teacher_detail_list_new(
human_resource.php:            $age        = (int)date('Y', time()) - (int)$birth_year;
human_resource.php:                $item["work_day"] = ceil((time()-$item["train_through_new_time"])/86400)."天";
human_resource.php:            $item["limit_plan_lesson_time_str"] = date("Y-m-d",$item["limit_plan_lesson_time"]);
human_resource.php:                $item["freeze_adminid_str"] = $this->t_manager_info->get_account($item["freeze_adminid"]);
human_resource.php:                $item["phone_ex"] = preg_replace('/(1[358]{1}[0-9])[0-9]{4}([0-9]{4})/i','$1****$2',$item["phone"]);
human_resource.php:        $acc = $this->get_account();
human_resource.php:        return $this->pageView(__METHOD__,$ret_info,[
human_resource.php:        $address                = trim($this->get_in_str_val('address',''));
human_resource.php:        $page_num               = $this->get_in_page_num();
human_resource.php:        $ret_info = $this->t_teacher_info->get_seller_teacher_detail_list_new($page_num,$address);
human_resource.php:                $item["freeze_adminid_str"] = $this->t_manager_info->get_account($item["freeze_adminid"]);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        list($start_time,$end_time)=$this->get_in_date_range(-10,0);
human_resource.php:        $ret_info = $this->t_teacher_lecture_info->get_fail_ave_score($start_time,$end_time);
human_resource.php:        return $this->pageView(__METHOD__,null,[
human_resource.php:        $teacherid        = $this->get_in_int_val("teacherid");
human_resource.php:        $teacher_ref_type = $this->get_in_int_val("teacher_ref_type");
human_resource.php:        $teacher_type     = $this->get_in_int_val("teacher_type");
human_resource.php:        $ret_info = $this->t_teacher_info->field_update_list($teacherid,[
human_resource.php:            return $this->output_err("系统错误！请重试！");
human_resource.php:        return $this->output_succ();
human_resource.php:        $id = $this->get_in_int_val("id");
human_resource.php:        $ret = $this->t_teacher_lecture_info->field_update_list($id,[
human_resource.php:            return $this->output_err("更新出错！");
human_resource.php:        return $this->output_succ();
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $userid = $this->get_in_int_val('userid',-1);
human_resource.php:        return $this->pageView(__METHOD__, $ret_info);
human_resource.php:        $userid    = $this->get_in_int_val('userid',-1);
human_resource.php:        $type      = $this->get_in_int_val('type');
human_resource.php:        $timestamp = $this->get_in_int_val('timestamp');
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $adminid   = $this->get_account_id();
human_resource.php:            $ret_db = $this->t_lesson_info->get_lesson_info_by_adminid($adminid, $timestamp, $teacherid);
human_resource.php:            $ret_db_except = $this->t_test_lesson_subject_require->get_expect_lesson_info_by_adminid($adminid, $timestamp);
human_resource.php:            $this->output_succ( array('lesson_list' => $ret_db));
human_resource.php:            $item['teacher']          = $this->cache_get_teacher_nick($item["teacherid"]);
human_resource.php:            $item['nick']             = $this->cache_get_student_nick($item["userid"]);
human_resource.php:                $item["title"] = '-申请时间-未排课';
human_resource.php:                $item["title"]            =  $item['teacher'] ."-"  . $item['nick'] ;
human_resource.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
human_resource.php:        $subject = $this->get_in_int_val('subject',-1);
human_resource.php:        list($start_time, $end_time) = $this->get_in_date_range(0,0,0,[],3 );
human_resource.php:        $page_num               = $this->get_in_page_num();
human_resource.php:        $ret_info = $this->t_teacher_info->get_teacher_quit_info($page_num,$start_time,$end_time,$teacherid,$subject);
human_resource.php:        return $this->pageView(__METHOD__, $ret_info);
human_resource.php:        $phone     = $this->get_in_str_val("phone");
human_resource.php:        $new_phone = $this->get_in_str_val("new_phone");
human_resource.php:        $acc       = $this->get_account();
human_resource.php:            return $this->output_err("权限不足！");
human_resource.php:            return $this->output_err("请填写手机号！");
human_resource.php:        $new_teacherid = $this->t_teacher_info->get_teacherid_by_phone($new_phone);
human_resource.php:            $teacher_info = $this->t_teacher_info->get_teacher_info_by_phone($phone);
human_resource.php:                return $this->output_err("老师信息为空!请确定老师手机是否正确!".$phone);
human_resource.php:            $new_teacherid = $this->add_teacher_common($add_info);
human_resource.php:        return $this->output_succ(["new_teacherid"=>$new_teacherid]);
human_resource.php:            $phone = $this->get_in_str_val("new_phone");
human_resource.php:        $check_flag = $this->t_teacher_info->check_teacher_phone($phone);
human_resource.php:            return $this->output_err("此手机号已存在！");
human_resource.php:        return $this->output_succ();
human_resource.php:        $old_teacherid = $this->get_in_int_val("old_teacherid");
human_resource.php:        $new_teacherid = $this->get_in_int_val("new_teacherid");
human_resource.php:        $lesson_date   = $this->get_in_str_val("lesson_start",date("Y-m-d",time()));
human_resource.php:        $acc           = $this->get_account();
human_resource.php:            return $this->output_err("权限不足！");
human_resource.php:        $teacher_info = $this->t_teacher_info->get_teacher_info($new_teacherid);
human_resource.php:        $this->t_course_order->start_transaction();
human_resource.php:        $course_count = $this->t_course_order->get_course_count($old_teacherid);
human_resource.php:            $ret = $this->t_course_order->transfer_teacher_course($old_teacherid,$new_teacherid);
human_resource.php:                $this->t_course_order->rollback();
human_resource.php:                return $this->output_err("更新课程包(course)出错！请重试！");
human_resource.php:        $lesson_count = $this->t_lesson_info_b2->get_teacher_lesson_num($old_teacherid,$lesson_start,-1);
human_resource.php:            $ret = $this->t_lesson_info_b2->transfer_teacher_lesson(
human_resource.php:                $this->t_course_order->rollback();
human_resource.php:                return $this->output_err("更新课程(lesson)出错！请重试！");
human_resource.php:        $this->t_course_order->commit();
human_resource.php:        $regular_count = $this->t_week_regular_course->get_regular_count($old_teacherid);
human_resource.php:            $ret = $this->t_week_regular_course->transfer_teacher_week_regular($old_teacherid,$new_teacherid);
human_resource.php:                $this->t_course_order->rollback();
human_resource.php:                return $this->output_err("更新常规课表(regular)出错！请重试！");
human_resource.php:        $this->t_manager_info->send_wx_todo_msg("adrian",$from_user,$header_msg);
human_resource.php:        return $this->output_succ();
human_resource.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
human_resource.php:        $appoint_list = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_appointment_origin_list(
human_resource.php:        $lecture_list = $this->t_teacher_lecture_info->get_lecture_origin_list($start_time,$end_time);
human_resource.php:        $teacher_list = $this->t_lesson_info_b2->get_teacher_origin_list($start_time,$end_time);
human_resource.php:        return $this->pageView(__METHOD__,$ret_list);
human_resource.php:        $teacherid = $this->get_in_int_val("teacherid",-1);
human_resource.php:        $page_info = $this->get_in_page_info();
human_resource.php:        $ret_info = $this->t_teacher_info->get_research_teacher_list_lesson($page_info,$teacherid);
human_resource.php:        return $this->pageView(__METHOD__,$ret_info);
human_resource.php:        $this->switch_tongji_database();
human_resource.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
human_resource.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_app_lecture_sum_by_reference($start_time,$end_time);
human_resource.php:        $lecture_info = $this->t_teacher_lecture_appointment_info->get_lecture_sum_by_reference($start_time,$end_time);
human_resource.php:        $trial_info = $this->t_teacher_lecture_appointment_info->get_trial_sum_by_reference($start_time,$end_time);
human_resource.php:        $through_info = $this->t_teacher_lecture_appointment_info->get_trial_sum_by_reference($start_time,$end_time,1);
human_resource.php:        $train_info = $this->t_teacher_lecture_appointment_info->get_train_sum_by_reference($start_time,$end_time);
human_resource.php:        // $train_trial_info = $this->t_teacher_lecture_appointment_info->get_train_trial_sum_by_reference($start_time,$end_time);
human_resource.php:        // $train_through_info = $this->t_teacher_lecture_appointment_info->get_train_trial_sum_by_reference($start_time,$end_time,1);
human_resource.php:                $item["teacher_ref_type"]=-1;
human_resource.php:        $all["level"]="l-0";
human_resource.php:            $val["level"]="l-1";
human_resource.php:                    if($v["teacher_ref_type"]==-1){
human_resource.php:                    $v["level"]="l-2";
human_resource.php:            if($i["teacher_ref_type"]==-1){
human_resource.php:        return $this->pageView(__METHOD__,$ret_list);
index.php:        $account_role=$this->t_manager_info->get_account_role( $this->get_account_id() );
index.php:            if ( $this->get_account() =="jim"  ) {
index.php:        $jump_url=$this->get_in_str_val("jump_url");
index.php:        $openid=$this->get_in_str_val("openid");
index.php:            $code=$this->get_in_str_val("code");
index.php:                    $redirect_uri = urlencode("http://wx-teacher.leo1v1.com");
index.php:                    \App\Helper\Utils::logger("wx-teacer-login redirect_uri:$redirect_uri");
index.php:                    $wx->goto_wx_login( $redirect_uri );
index.php:                    $token_info = $wx->get_token_from_code($code);
index.php:                    $to_url=urldecode(hex2bin($this->get_in_str_val("to_url")));
index.php:                        return $this->output_err("微信code验证失败");
index.php:                $teacherid=$this->t_teacher_info-> get_teacherid_by_openid ($openid);
index.php:                    $wx_use_flag=$this->t_teacher_info->get_wx_use_flag($teacherid);
index.php:                    $to_url= "http://wx-teacher-web.leo1v1.com/login.html?wx_openid=".$openid;
index.php:            return $this->output_err("微信验证失败") ;
index.php:            return $this->output_err("请在微信中打开") ;
index.php:        if ( @$_SERVER["HTTP_HOST"] == "wx-teacher.leo1v1.com" ) {
index.php:            return $this->wx_teacher_index();
index.php:        $tq_token=$this->get_in_str_val("token");
index.php:        $tq_uin=$this->get_in_int_val("uin");
index.php:                $this->jump_page();
index.php:                $code=$this->get_in_str_val("code");
index.php:                    $to_url=$this->get_in_str_val("to_url");
index.php:                    $redirect_url=urlencode("http://wx-parent.leo1v1.com?to_url=$to_url" );
index.php:                    $wx->goto_wx_login( $redirect_url );
index.php:                    if ( $_SERVER["HTTP_HOST"] == "wx-parent.leo1v1.com" ) {
index.php:                    $token_info = $wx->get_token_from_code($code);
index.php:                    $to_url=urldecode(hex2bin($this->get_in_str_val("to_url")));
index.php:                        //$code=$this->set
index.php:                    $ret_row=$this->t_manager_info-> get_info_for_wx_openid($openid);
index.php:                        $ip      = $this->get_in_client_ip();
index.php:                        $this->t_login_log->add($account,$ip,1);
index.php:                        $permission = $login->reset_power($account);
index.php:                        $this->t_admin_users->set_last_ip( $account,$ip );
index.php:                        $user_info=$wx->get_user_info_from_token($openid,$token);
index.php:                    $ret_row=$this->t_manager_info->get_info_by_tquin($tq_uin);
index.php:                        $ip      = $this->get_in_client_ip();
index.php:                        $this->t_login_log->add($account,$ip,1);
index.php:                        $permission=  $login->reset_power($account);
index.php:                        $this->t_admin_users->set_last_ip( $account,$ip );
index.php:                        $this->jump_page();
index.php:            return $this->view(__METHOD__,["passwd_login_flag"=> $passwd_login_flag]);
index.php:        $path=$g_request->path();
index.php:            return $reflectionObj->newInstanceArgs()->$act();
index.php:        $list=$this->t_paper_info->get_list_for_test();
index.php:                $this->t_paper_info->field_update_list($item["paperid"],[
index.php:        $account=$this->get_in_str_val("account");
index.php:        $id=$this->t_admin_users->get_id_by_account($account);
index.php:            $phone=$this->t_manager_info->get_phone($id);
index.php:        return $this->output_succ(["phone"=>$phone]);
index.php:        $phone      = $this->get_in_str_val("phone");
index.php:        $phone_code = $this->get_in_str_val("phone_code");
index.php:        return $this->output_succ(["check_flag" =>$ret]);
index.php:        $phone=$this->get_in_phone();
index.php:        return $this->output_succ(["index" =>$phone_index ]);
index.php:        $account    = $this->get_in_str_val('account',"");
index.php:        $check_flag = $this->get_in_str_val("check_flag",'false');
index.php:        $passwd     = $this->get_in_str_val('passwd',"");
index.php:        $this->t_admin_users->update_password($account, $passwd);
index.php:        //$this->t_manager_info->sync_kaoqin_re_upload_user_info();
index.php:        $this->t_manager_info->send_wx_todo_msg(
index.php:        $this->t_manager_info->send_wx_todo_msg("fly","xx","fadf","sdaf","");
index.php:        $this->t_manager_info->send_wx_todo_msg("jim","xx","fadf","sdaf","");
index.php:        $ret= $this->t_manager_info->send_template_msg("jim",$template_id,[
index.php:        $pdf->saveImage($pdfToImage);
index.php:        //$this->pdf2png($PDF,$Path);
index.php:        $IM->setResolution(100,100);
index.php:        $IM->setCompressionQuality(100);
index.php:        //$IM->set desity
index.php:        $IM->readImage($PDF);
index.php:            $Var->setImageFormat('png');
index.php:            if($Var->writeImage($Filename)==true){
InputDeal.php:        $g_request-> offsetSet ($key,$value);
InputDeal.php:        $this->set_in_value($field_name,$v);
InputDeal.php:        $this->last_in_values[$field_name]=$v;
InputDeal.php:        $this->last_in_types[$field_name]= $type_str ;
InputDeal.php:        if (!$this->check_in_has($field_name)) {
InputDeal.php:            $this->set_in_value($field_name,$value);
InputDeal.php:        return $g_request->has($field_name) ;
InputDeal.php:        return $this->get_in_int_val($field_name,$def_value,E\Eboolean::class );
InputDeal.php:        return $this->get_in_int_val($field_name, $def_value, $enum_class );
InputDeal.php:    public function get_in_enum_list( $enum_class, $def_value="-1", $field_name="" ){
InputDeal.php:        $str = $this->get_in_str_val($field_name, $def_value );
InputDeal.php:        $this->last_in_types[$field_name]=array( "type" => "enum_list" , "enum_class" => $enum_class );
InputDeal.php:    public function get_in_int_list( $enum_class, $field_name="", $def_value="-1"  ){
InputDeal.php:        $str = $this->get_in_str_val($field_name, $def_value );
InputDeal.php:        if($g_request->has($field_name)){
InputDeal.php:            $v = (int) $g_request->$field_name;
InputDeal.php:        $this->last_in_values[$field_name] = $v;
InputDeal.php:            $this->last_in_types[$field_name]=$enum_class;
InputDeal.php:            $this->last_in_types[$field_name]="number";
InputDeal.php:        if ( $g_request->has($field_name)   ){
InputDeal.php:            $v = (float)$g_request->$field_name;
InputDeal.php:        $this->last_in_values[$field_name]=$v;
InputDeal.php:        $this->last_in_types[$field_name]="number";
InputDeal.php:        if ( $g_request->has($field_name) ){
InputDeal.php:            if(!( $g_request->$field_name == "")) {
InputDeal.php:                $v= $g_request->$field_name;
InputDeal.php:        $this->last_in_values[$field_name]=$v;
InputDeal.php:        $this->last_in_types[$field_name]="string";
InputDeal.php:        $page_num = $this->get_in_int_val('page_num',-1);
InputDeal.php:        return $this->get_in_page_info();
InputDeal.php:            "page_num"   => $this->get_in_page_num_ex(),
InputDeal.php:            "page_count" => $this->get_in_page_count(),
InputDeal.php:        $page_count= $this->get_in_int_val('page_count',10);
InputDeal.php:            $this->set_in_value("page_count",$page_count);
InputDeal.php:    public function get_in_grade( $def_value=-1){
InputDeal.php:        return  $this->get_in_int_val('grade',$def_value,E\Egrade::class );
InputDeal.php:    public function get_in_account_role( $def_value=-1){
InputDeal.php:        return  $this->get_in_int_val('account_role',$def_value,E\Eaccount_role::class );
InputDeal.php:    public function get_in_has_pad( $def_value=-1){
InputDeal.php:        return  $this->get_in_int_val('has_pad',$def_value,E\Epad_type::class );
InputDeal.php:        return  $this->get_in_int_val('id', $def_value);
InputDeal.php:        return  $this->get_in_int_val('courseid', $def_value);
InputDeal.php:        return  $this->get_in_int_val('packageid', $def_value);
InputDeal.php:        return  $this->get_in_int_val('lessonid', $def_value);
InputDeal.php:        return  $this->get_in_str_val('phone', $def_value);
InputDeal.php:        return  $this->get_in_str_val('wx_openid', $def_value);
InputDeal.php:    // 15601830297-1 ->  15601830297
InputDeal.php:        $str=$this->get_in_phone();
InputDeal.php:        $arr=explode("-", $str);
InputDeal.php:        return  $this->get_in_int_val('type', $def_value);
InputDeal.php:        return  $this->get_in_int_val('opt_type', $def_value);
InputDeal.php:        return  $this->get_in_int_val('parentid', $def_value);
InputDeal.php:        return  $this->get_in_int_val('studentid', $def_value);
InputDeal.php:        return  $this->get_in_int_val('userid', $def_value);
InputDeal.php:        return  $this->get_in_int_val('adminid', $def_value);
InputDeal.php:        return  $this->get_in_int_val('teacherid', $def_value);
InputDeal.php:        return  $this->get_in_int_val('cc_id', $def_value);
InputDeal.php:        return  $this->get_in_int_val('question_type', $def_value);
InputDeal.php:        return  $this->get_in_str_val('question_content', $def_value);
InputDeal.php:        return  $this->get_in_int_val('teacher_flag', $def_value);
InputDeal.php:        return  $this->get_in_int_val('teacher_time', $def_value);
InputDeal.php:        return  $this->get_in_int_val('cc_flag', $def_value);
InputDeal.php:        return  $this->get_in_int_val('cc_time', $def_value);
InputDeal.php:        return  $this->get_in_int_val('assistantid', $def_value);
InputDeal.php:        return  $this->get_in_int_val('lesson_account_id', $def_value);
InputDeal.php:    public function get_in_subject( $def_value=-1){
InputDeal.php:        return  $this->get_in_int_val('subject',$def_value,E\Esubject::class);
InputDeal.php:    public function get_in_hour( $def_value=-1){ //04-27
InputDeal.php:        return  $this->get_in_int_val('hour',$def_value,E\Ehour::class);
InputDeal.php:        $date= $this->get_in_str_val($field_name, $def_value);
InputDeal.php:        return $this->get_in_unixtime_from_str( "lesson_start", $def_value);
InputDeal.php:        return $this->get_in_unixtime_from_str( "lesson_end", $def_value);
InputDeal.php:        return $this->get_in_unixtime_from_str( $field_name, $def_value);
InputDeal.php:        return $this->get_in_unixtime_from_str( $field_name, $def_value);
InputDeal.php:        return $this->get_in_unixtime_from_str( "end_time", $def_value)+86400;
InputDeal.php:        return  $this->get_in_int_val('sid', $def_value);
InputDeal.php:        $this->set_in_value("date_type",$date_type);
InputDeal.php:        $this->set_in_value("opt_date_type",$opt_date_type);
InputDeal.php:        $this->set_in_value("start_time",$start_time);
InputDeal.php:        $this->set_in_value("end_time",$end_time);
InputDeal.php:            return $this->$name= $reflectionObj->newInstanceArgs();
InputDeal.php:            return $this->get_account();
InputDeal.php:            return $this->get_in_enum_val($class_name ,$def_value ,$field_name);
InputDeal.php:            $def_value=-1;
InputDeal.php:            return $this->get_in_enum_list ( $class_name, $def_value ,$field_name);
InputDeal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
InputDeal.php:        return $this->output_succ( array_merge(["data" => $ret_list], $arr) );
InputDeal.php:        $str=$this->get_in_str_val("order_by_str",$def);
InputDeal.php:            if(!preg_match('/^[a-z_0-9]*$/',$field_name) ) {
InputDeal.php:        return $this->get_in_date_range($init_start_date,0, $date_type, $date_type_config, 1 );
InputDeal.php:        return $this->get_in_date_range($init_start_date,0, $date_type, $date_type_config, 2 );
InputDeal.php:        return $this->get_in_date_range($init_start_date,0, $date_type, $date_type_config, 3 );
InputDeal.php:            $init_start_date=date("Y-m-d", $now+$init_start_date*86400);
InputDeal.php:            $init_end_date=date("Y-m-d", $now+$init_end_date*86400);
InputDeal.php:            $init_start_date = date("Y-m-d",$week_info["sdate"] );
InputDeal.php:            $init_end_date   = date("Y-m-d",$week_info["edate"]  );
InputDeal.php:            $init_start_date = date("Y-m-01",  strtotime($init_start_date));
InputDeal.php:            $init_end_date   = date("Y-m-d",  strtotime(date("Y-m-01",  (strtotime($init_start_date)+86400*32)     ))-86400 );
InputDeal.php:        $this->last_in_values["$date_type_config_str"]=json_encode($date_type_config);
InputDeal.php:        $this->last_in_types["$date_type_config_str"]="string";
InputDeal.php:        $date_type     = $this->get_in_int_val($date_type_str,$date_type);
InputDeal.php:        $opt_date_type = $this->get_in_int_val($opt_date_type_str,$opt_date_type);
InputDeal.php:        $start_time  = $this->get_in_start_time_from_str($init_start_date, $start_time_str);
InputDeal.php:        $end_time    = $this->get_in_end_time_from_str($init_end_date,$end_time_str);
jinshuju.php:        $input     = $g_request->input();
jinshuju.php:        $this->add( $phone,$nick, $origin, $grade   , $subject, $has_pad, $add_time);
jinshuju.php:        if (isset($this->grade_map[$grade] ))  {
jinshuju.php:            $grade = $this->grade_map[$grade] ;
jinshuju.php:        if (isset($this->subject_map [$subject] ))  {
jinshuju.php:            $subject = $this->subject_map[$subject] ;
jinshuju.php:        $this->t_seller_student_info->add_or_add_to_sub(
jinshuju.php:        $this->t_seller_student_new->book_free_lesson_new($nick,$phone,$grade,$origin,$subject,$has_pad);
jinshuju.php:        return $this->output_succ();
jump_page.php:        $url=$this->get_in_str_val("url");
jump_page.php:        $redirect_uri="http://wx-teacher.leo1v1.com/jump_page/jump?url=$url";
jump_page.php:        $code = $wx->goto_wx_login( $redirect_uri );
jump_page.php:        $url  = $this->get_in_str_val("url");
jump_page.php:        $code = $this->get_in_str_val("code");
jump_page.php:        $token_info = $wx->get_token_from_code($code);
jump_page.php:            header("Location: http://wx-teacher-web.leo1v1.com/login.html?wx_openid=".$openid);
lesson_info.php:        $lessonid = $this->get_in_int_val("lessonid");
lesson_info.php:        $grade    = $this->get_in_int_val("grade");
lesson_info.php:        $ret = $this->t_lesson_info->field_update_list($lessonid,[
lesson_info.php:            return $this->output_err("更新失败！请重试！");
lesson_info.php:        return $this->output_succ();
lesson_manage.php:        $start_date   = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-86400*30 ));
lesson_manage.php:        $end_date     = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)));
lesson_manage.php:        $page_num     = $this->get_in_page_num();
lesson_manage.php:        $ret_info = $this->t_tongji->get_tongji_info($startday,$endday,$page_num);
lesson_manage.php:        return $this->Pageview(__METHOD__,$ret_info);
lesson.php:        $teacherid          = $this->get_teacherid();
lesson.php:        $lessonid           = $this->get_in_int_val('lessonid');
lesson.php:        $total_judgement    = $this->get_in_int_val("total_judgement");
lesson.php:        $homework_situation = $this->get_in_str_val("homework_situation");
lesson.php:        $content_grasp      = $this->get_in_str_val("content_grasp");
lesson.php:        $lesson_interact    = $this->get_in_str_val("lesson_interact");
lesson.php:        $teacher_message_str = $this->get_in_str_val("teacher_message");
lesson.php:        $stu_comment        = $this->get_in_str_val("stu_comment");
lesson.php:        $this->t_lesson_info_b2->set_stu_performance($lessonid, $teacherid, $stu_performance_str,3);
lesson.php:        $com_state = $this->t_lesson_info_b2->set_comment_status($lessonid,$comment_date);
lesson.php:            return $this->output_succ(['time'=>$com_state]);
lesson.php:        $teacherid = $this->get_teacherid();
lesson.php:        $teacher_money_type= $this->t_teacher_info->get_teacher_money_type($teacherid);
lesson.php:        $level= $this->t_teacher_info->get_level($teacherid);
lesson.php:        return $this->output_succ(["type"=>$type] );
lesson.php:        $teacherid  = $this->get_teacherid();
lesson.php:        $page_num   = $this->get_in_page_num();
lesson.php:        $type       = $this->get_in_int_val('type');
lesson.php:        $now_time_int = strtotime(date('Y-m-d',$now_time))+86400;
lesson.php:        $ret_info = $this->t_lesson_info_b2->get_comment_list_by_page($teacherid, 0, $now_time_int, $type_str, $page_num);
lesson.php:            return $this->output_succ(['list'=>[]]);
lesson.php:                        $comment_time_ex = $item['lesson_end']+60*$time_limit-time(NULL);
lesson.php:                        if($list[$index-1]['lesson_start']<$time_limit*60+$list[$index]['lesson_start']){
lesson.php:                            $comment_time_ex = $item['lesson_end']+60*$time_limit-time(NULL);
lesson.php:                    $item["need_comment_time"] = $now_time-$item["lesson_end"] >= 0? $comment_time_ex:0;
lesson.php:                    if ($now_time-$item['lesson_end'] >= 0 && $now_time-$item['lesson_end'] < 2*24*60*60 && $item["tea_rate_time"] <= 0) {
lesson.php:                        $comment_time_ex2 = $item['lesson_end']-$now_time+2*24*60*60;
lesson.php:            return $this->output_succ(['list'=>$list]);
lesson.php:        $lessonid = $this->get_in_int_val('lessonid');
lesson.php:            return $this->output_err("lessonid not exist");
lesson.php:        $time = $this->t_lesson_info->check_comment_status($lessonid);
lesson.php:        return $this->output_succ(['time'=>$time]);
lesson.php:        $lessonid = $this->get_in_int_val('lessonid');
lesson.php:            return $this->output_err("lessonid not exist");
lesson.php:        $lesson_intro = $this->t_lesson_info->get_lesson_intro($lessonid);
lesson.php:            return $this->output_succ(['lesson_intro'=>$lesson_intro]);
lesson.php:            return $this->output_err('知识点不存在!');
lesson.php:        $teacherid = $this->get_teacherid();
lesson.php:        $type      = $this->get_in_int_val("type");
lesson.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
lesson.php:            return $this->output_succ();
lesson.php:            return $this->output_err('试听状态不存在!');
lesson.php:        $lessonid = $this->get_in_int_val('lessonid');
lesson.php:            return $this->output_err("lessonid not exist");
lesson.php:        $stu_per = $this->t_lesson_info->get_common_stu_performance($lessonid);
lesson.php:            return $this->output_succ(['data'=>$stu_per_arr]);
lesson.php:            return $this->output_err('普通评价不存在!');
lesson.php:        $teacherid = $this->get_teacherid();
lesson.php:        $type      = $this->get_in_int_val("type");
lesson.php:        $start     = $this->get_in_int_val("start");
lesson.php:        $end       = $this->get_in_int_val("end");
lesson.php:        $ret = $this->t_lesson_info_b2->get_lesson_cost_list($teacherid,$lesson_type,$start,$end);
lesson.php:                $item['lesson_content'] = ($item['lesson_count']/100).'课时课时费-'.$item['nick'];
lesson.php:            return $this->output_succ(['data'=>$ret]);
lesson.php:            return $this->output_succ(['data'=>[]]);
lesson.php:            // return $this->output_err('课程消耗不存在!');
lesson.php:        $teacherid   = $this->get_teacherid();
lesson.php:        $start_time  = $this->get_in_int_val("start");
lesson.php:        $end_time    = $this->get_in_int_val("end");
lesson.php:            return $this->output_succ(['data'=>$ret_arr['data'],'all_reward_list'=>$ret_arr['all_reward_list']]);
lesson.php:            return $this->output_succ(['data'=>[],'all_reward_list'=>[]]);
lesson.php:       //     return $this->output_succ(['data'=>[],'all_reward_list'=>[]]);
lesson.php:       //     return $this->output_succ(['data'=>$ret_arr['data'],'all_reward_list'=>$ret_arr['all_reward_list']]);
lesson.php:       //     // return $this->output_err("工资明细获取失败!");
lesson.php:       //     return $this->output_succ(['data'=>[],'all_reward_list'=>[]]);
lesson.php:        $teacherid    = $this->get_teacherid();
lesson.php:        $lessonid     = $this->get_in_int_val('lessonid',0);
lesson.php:            return $this->output_err("lessonid not exist");
lesson.php:        $stu_lesson_content   = $this->get_in_str_val("stu_lesson_content");
lesson.php:        $stu_lesson_status    = $this->get_in_str_val("stu_lesson_status");
lesson.php:        $stu_study_status     = $this->get_in_str_val("stu_study_status");
lesson.php:        $stu_advantages       = $this->get_in_str_val("stu_advantages");
lesson.php:        $stu_disadvantages    = $this->get_in_str_val("stu_disadvantages");
lesson.php:        $stu_lesson_plan      = $this->get_in_str_val("stu_lesson_plan");
lesson.php:        $stu_teaching_direction = $this->get_in_str_val("stu_teaching_direction");
lesson.php:        $stu_advice           = $this->get_in_str_val("stu_advice");
lesson.php:        $requireid = $this->t_test_lesson_subject_sub_list->get_require_id($lessonid);
lesson.php:           $ret_info = $this->t_test_lesson_subject_require->set_info( $stu_lesson_content, $stu_lesson_status,
lesson.php:            $ret_state = $this->t_lesson_info_b2->set_comment_status($lessonid, $comment_date);
lesson.php:            return $this->output_succ(['time'=>$ret_state]);
lesson.php:            return $this->output_err('requireid不存在');
lesson.php:        $lessonid = $this->get_in_int_val('lessonid');
lesson.php:            return $this->output_err('lessonid not exist!');
lesson.php:        $requireid = $this->t_test_lesson_subject_sub_list->get_require_id($lessonid);
lesson.php:            $ret = $this->t_test_lesson_subject_require->get_info($requireid);
lesson.php:                \App\Helper\Utils::logger("shiting122:".$this->output_succ(['list'=>$ret]));
lesson.php:                return $this->output_succ(['list'=>$ret]);
lesson.php:                return $this->output_err("试听评价不存在!");
lesson.php:            return $this->output_err('requireid不存在!');
lesson.php:        $require_id_list = $this->get_in_int_list("require_id_list");
lesson.php:        $teacherid       = $this->get_teacherid();
lesson.php:        $ret = $this->t_test_lesson_subject_require->get_list_by_id_list($require_id_list);
lesson.php:        return $this->output_succ(['list'=>$ret]);
login.php:            $tmp=$this->gen_account_role_one_item( $item, $power_map,$url_power_map);
login.php:                $tmp=$this->gen_account_role_one_item( $item, $power_map, $url_power_map);
login.php:                return  array('<li class="treeview " > <a href="#"> <i class="fa fa-folder-o "></i> <span>'.$node["name"].'</span> <i class="fa fa-angle-left pull-right"></i> </a> <ul class="treeview-menu"> '.$sub_list_str.'</ul> </li>', $sub_list_str);
login.php:                    $icon="fa-circle-o";
login.php:                //\App\Helper\Utils::logger("do:".$node["name"].":null--$power_id");
login.php:                $tmp=$this->gen_one_item( $item, $power_id ,$level+1,$power_map);
login.php:                return  array('<li class="treeview " > <a href="#"> <i class="fa fa-folder-o "></i> <span>'.$node["name"].'</span> <i class="fa fa-angle-left pull-right"></i> </a> <ul class="treeview-menu"> '.$sub_list_str.'</ul> </li>', $sub_list_str);
login.php:                    $icon="fa-circle-o";
login.php:                //\App\Helper\Utils::logger("do:".$node["name"].":null--$power_id");
login.php:            $tmp=$this->gen_one_item( $item, $start,$level,$power_map);
login.php:                    if ( substr($item_name,0,7)== "角色-" ) {
login.php:                $menu_str.='<li class="treeview " > <a href="#"> <i class="fa fa-folder-o"></i> <span>角色列表</span> <i class="fa fa-angle-left pull-right"></i> </a> <ul class="treeview-menu"> '.$role_str.'</ul> </li>';
login.php:        $account          = $this->get_in_str_val("account");
login.php:        $ip               = $this->get_in_client_ip();
login.php:            $need_verify_flag = $this->t_admin_users->check_need_verify($account,$ip);
login.php:        $ret_permission = $this->t_manager_info->get_user_permission(array($account));
login.php:        $ret_row = $this->t_manager_info->get_info_by_account($account);
login.php:        $power_list = $this->t_manager_info->get_permission_list($account);
login.php:        //$menu_html=$this->gen_account_role_menu( \App\Config\seller_menu::get_config(), $arr,  $url_power_map  );
login.php:        $menu_html .= $this->gen_menu( $arr,$menu,1,1);
login.php:        $stu_menu_html = $this->gen_menu( $arr,$stu_menu,201,2);
login.php:        $tea_menu_html = $this->gen_menu( $arr,$tea_menu,202,2);
login.php:        $account  = strtolower(trim($this->get_in_str_val("account")));
login.php:        $password = $this->get_in_str_val('password');
login.php:        $seccode  = $this->get_in_str_val('seccode') ;
login.php:        $ip       = $this->get_in_client_ip();
login.php:            $need_verify_flag = $this->t_admin_users->check_need_verify($account,$ip);
login.php:        $ret_db   = $this->t_admin_users->user_login($account, $password);
login.php:            $this->t_login_log->add($account,$ip,0);
login.php:            $this->t_login_log->add($account,$ip,0);
login.php:        $this->t_login_log->add($account,$ip,1);
login.php:        $_SESSION['account_role'] = $this->t_manager_info->get_account_role($ret_db['id']);
login.php:            $this->t_manager_info->field_update_list($ret_db["id"],[
login.php:        $permission = $this->reset_power($account);
login.php:        $this->t_admin_users->set_last_ip( $account,$ip );
login.php:        return $this->output_succ( array(
login.php:        $account  = strtolower(trim($this->get_in_str_val("account")));
login.php:        $password = $this->get_in_str_val('password');
login.php:        $seccode  = $this->get_in_str_val('seccode') ;
login.php:        $ip       = $this->get_in_client_ip();
login.php:            $need_verify_flag = $this->t_admin_users->check_need_verify($account,$ip);
login.php:        $userid = $this->t_user_info->check_login_userid($account, $password);
login.php:            $ret_dynamic = $this->login_with_dymanic_passwd($account, E\Erole::V_TEACHER , $password  );
login.php:                return $this->output_err("用户名密码出错");
login.php:            $teacherid= $this->t_phone_to_user->get_teacherid($account);
login.php:        return $this->output_succ([
login.php:        if(!$this->check_account_in_arr(["jim","adrian","seven", "james","jack","michael","ted"]) ) {
login.php:            return $this->output_err("没权限");
login.php:        $login_adminid=$this->get_in_int_val("login_adminid");
login.php:        $ret_db = $this->t_admin_users->field_get_list($login_adminid,"*");
login.php:        $_SESSION['account_role'] = $this->t_manager_info->get_account_role( $ret_db['id']);
login.php:        $permission = $this->reset_power($account);
login.php:        return $this->output_succ();
login.php:        $phone  = $this->get_in_str_val("telphone");
login.php:        $passwd = $this->get_in_str_val("passwd");
login.php:        $grade  = $this->get_in_int_val("grade");
login.php:            return outputJson(array('ret' => -1, 'info' => "请输入规范的手机号!"));
login.php:        $ret=$this->t_phone_to_user->get_userid_by_phone($phone,E\Erole::V_STUDENT);
login.php:            return $this->output_err("用户已存在!");
login.php:        $userid= $this->t_user_info->user_reg($passwd,$reg_channel,ip2long($ip));
login.php:            return $this->output_err("用户注册失败!");
login.php:        $ret = $this->t_phone_to_user->add($phone,E\Erole::V_STUDENT,$userid);
login.php:            return $this->output_err("添加用户角色表失败,用户id".$userid);
login.php:        $ret = $this->t_student_info->add_student($userid,$grade,$phone,$nick,$region);
login.php:            return $this->output_err("添加学生表失败,用户id".$userid);
login.php:        return $this->output_succ();
login.php:        return $this->pageView(__METHOD__);
main_page.php:        $adminid = $this->get_account_id();
main_page.php:        list($start_time,$end_time)=$this->get_in_date_range_day(0);
main_page.php:        $sms_list=$this->t_sms_msg->tongji_type_get_list($start_time,$end_time);
main_page.php:        $lesson_info=$this->t_lesson_info->tongji_count($start_time, $end_time);
main_page.php:        $record_server_list=$this->t_lesson_info->tongji_record_server_info($start_time, $end_time);
main_page.php:        return $this->pageView(__METHOD__ ,null, [
main_page.php:        list($start_time,$end_time)= $this->get_in_date_range_month(date("Y-m-01" )  );
main_page.php:        $adminid=$this->get_account_id();
main_page.php:        $self_groupid = $this->t_admin_group_user->get_groupid_by_adminid(2 , $adminid );
main_page.php:        $get_self_adminid = $this->t_admin_group_name->get_master_adminid($self_groupid);
main_page.php:        $self_info= $this->t_order_info->get_1v1_order_seller($this->get_account(),
main_page.php:        $ret_info= $this->t_order_info->get_1v1_order_seller_list($start_time,$end_time);
main_page.php:        $groupid =$this->get_in_int_val("groupid",-1);
main_page.php:        if($groupid == -1) {
main_page.php:            $groupid=$this->t_admin_group_user->get_groupid_by_adminid(2 , $adminid );
main_page.php:            $group_name=$this->t_admin_group_name->get_group_name($groupid);
main_page.php:        $group_self_list = $this->t_order_info->get_1v1_order_seller_list_group_self($start_time,$end_time,$groupid);
main_page.php:        $group_list      = $this->t_order_info->get_1v1_order_seller_list_group($start_time,$end_time);
main_page.php:        $self_top_info =$this->t_tongji_seller_top_info->get_admin_top_list( $adminid,  $start_time );
main_page.php:        $this->get_in_int_val("self_groupid",$self_groupid);
main_page.php:        $this->get_in_int_val("is_group_leader_flag",$is_group_leader_flag);
main_page.php:        //date("y-m-01");
main_page.php:        list($start_time,$end_time)=$this->get_in_date_range_month(date("Y-m-01") );
main_page.php:        $tongji_type=$this->get_in_int_val("tongji_type",5, E\Etongji_type::class); //5 代表查询本月签单率
main_page.php:        $ret_info_num = $this->t_tongji_seller_top_info->get_list_top($tongji_type,$start_time);
main_page.php:            $this->cache_set_item_account_nick($item);
main_page.php:        $day= strtotime(date("Y-m-d") );
main_page.php:            $hw_start_time=$day-($w-5)*86400;
main_page.php:            $hw_start_time=$day-($w-1)*86400;
main_page.php:        $half_week_info= $this->t_order_info->get_1v1_order_seller_list($hw_start_time,$hw_end_time, [-1],"limit 5" );
main_page.php:        $self_top_info =$this->t_tongji_seller_top_info->get_admin_top_list( $adminid,  $start_time );
main_page.php:        return $this->pageView(__METHOD__, $ret_info, [
main_page.php:            "test_lesson_need_count" => $this->t_seller_month_money_target->get_test_lesson_count($adminid,date("Y-m-01") ),
main_page.php:        $end_time = strtotime( date("Y-m-d") );
main_page.php:        $end_time_date = date("Y-m-d") ;
main_page.php:        $start_time   = $end_time-100*86400;
main_page.php:        $start_time_date  = date("Y-m-d",$start_time);
main_page.php:        $account = $this->get_account();
main_page.php:        $assistantid=$this->t_assistant_info->get_assistantid( $account );
main_page.php:            $assistantid = -1;
main_page.php:        $ret_info = $this->t_gift_consign->get_consign_status_list($start_time,$end_time,$assistantid);
main_page.php:        list($start_time,$end_time) = $this->get_in_date_range( date("Y-m-01",time(NULL)) ,0 );
main_page.php:        $this->t_lesson_info->switch_tongji_database();
main_page.php:        $lesson_count_list=$this->t_lesson_info->get_confirm_lesson_list($start_time,$end_time);
main_page.php:            $item["assistant_nick"] =$this->cache_get_assistant_nick($item["assistantid"]);
main_page.php:        $stu_info=$this->t_student_info->tongji_assisent($assistantid);
main_page.php:        $this->t_assistant_info->switch_tongji_database();
main_page.php:        $assistant_renew_list = $this->t_assistant_info->get_all_assistant_renew($start_time,$end_time);
main_page.php:            $val['bye_total']=$val['all_total']-$val['give_total'];
main_page.php:        return $this->pageView(__METHOD__ ,null, [
main_page.php:        $account_id = $this->get_account_id();
main_page.php:        $is_master = $this->t_admin_main_group_name->check_is_master($main_type,$account_id);
main_page.php:            $up_master_adminid=-1;
main_page.php:        list($start_time,$end_time) = $this->get_in_date_range( date("Y-m-01",time(NULL)) ,0 );
main_page.php:        //$start = date('Y-m-d',$start_time);
main_page.php:        $this->t_manager_info->switch_tongji_database();
main_page.php:        $target_info = $this->t_manager_info->get_assistant_month_target_info($start_time);
main_page.php:        $assistant_stu_info=$this->t_manager_info->get_assistant_stu_info_new($end_time);
main_page.php:        $revisit_info = $this->t_manager_info->tongji_assistant_revisit_info($start_time,$end_time);
main_page.php:        $lesson_count_list = $this->t_manager_info->get_assistant_lesson_count_info($start_time,$end_time);
main_page.php:        $assistant_renew_list = $this->t_manager_info->get_all_assistant_renew_new($start_time,$end_time);
main_page.php:            $val['buy_total']=$val['all_total']-$val['give_total'];
main_page.php:        $jk_stu = $this ->t_manager_info->get_assistant_jk_stu_info();
main_page.php:        $assistant_admin_info = $this->t_manager_info->get_assistant_admin_member_list($up_master_adminid,$account_id);
main_page.php:            if($item["level"] != "l-4"){
main_page.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info),["data_ex_list"=>$ret_info]);
main_page.php:        list($start_time,$end_time) = $this->get_in_date_range( date("Y-m-01",time(NULL)) ,0 );
main_page.php:        // $this->t_test_lesson_subject_require->switch_tongji_database();
main_page.php:        // $res        = $this->t_test_lesson_subject_sub_list->get_teat_lesson_transfor_info($start_time,$end_time);
main_page.php:        $none_total = $this->t_test_lesson_subject_require->get_none_total_info($start_time,$end_time);
main_page.php:        $no_assign_total = $this->t_test_lesson_subject_require->get_no_assign_total_info($start_time,$end_time);
main_page.php:        $month_start = strtotime(date("Y-m-01",time(NULL)));
main_page.php:        // $revisit_info = $this->t_teacher_info->get_jw_assign_teacher_info($start_time,$end_time);
main_page.php:        //$res        = $this->t_test_lesson_subject_require->get_teat_lesson_transfor_info($start_time,$end_time);
main_page.php:        $ret_info   = $this->t_test_lesson_subject_require->get_jw_teacher_test_lesson_info($start_time,$end_time);
main_page.php:        $tra_info =  $this->t_jw_teacher_month_plan_lesson_info->get_info_by_month_new($start_time);
main_page.php:            $item["all_count"] = $item["all_count"]-$item["back_other_count"];
main_page.php:            if($start_time == strtotime(date("2017-01-01"))){
main_page.php:                $s = strtotime(date("2017-01-01 00:00:00"));
main_page.php:                $e = strtotime(date("2017-01-03 12:00:00"));
main_page.php:                $bc_info   = $this->t_test_lesson_subject_require->get_jw_teacher_test_lesson_info_bc($s,$e);
main_page.php:        $day_start = strtotime(date("Y-m-d",time()));
main_page.php:        $test_lesson_info = $this->t_test_lesson_subject_require->get_test_lesson_info_time($day_start,$day_end);
main_page.php:            $val["hour"] = $h_s.":00 -".$h_e.":00";
main_page.php:        $week_test_lesson = $this->t_test_lesson_subject_require->get_test_lesson_info_time_week($week_start,$week_end);
main_page.php:            $day = date("m-d",$ss["stu_request_test_lesson_time"]);
main_page.php:            $hour = $h_s.":00 -".$h_e.":00";
main_page.php:        //$lecture_info = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_tongji($start_time,$end_time);
main_page.php:         return $this->pageView(__METHOD__ ,null, [
main_page.php:        list($start_time,$end_time) = $this->get_in_date_range( date("Y-m-01",time(NULL)) ,0 );
main_page.php:        $this->t_teacher_lecture_appointment_info->switch_tongji_database();
main_page.php:        $ret_info  = $this->t_teacher_lecture_appointment_info->tongji_teacher_lecture_appoiment_info_by_accept_adminid($start_time,$end_time);
main_page.php:        $list      = $this->t_teacher_lecture_info->tongji_teacher_info_by_accept_adminid($start_time,$end_time);
main_page.php:        $suc_list  = $this->t_teacher_lecture_info->tongji_suc_teacher_info_by_accept_adminid($start_time,$end_time);
main_page.php:        $fail_list = $this->t_teacher_lecture_info->tongji_fail_teacher_info_by_accept_adminid($start_time,$end_time);
main_page.php:        $res_subject = $this->t_teacher_lecture_info->get_lecture_info_by_subject_new($start_time,$end_time);
main_page.php:        $video_succ_subject = $this->t_teacher_lecture_info->get_lecture_info_by_subject_new($start_time,$end_time,1);
main_page.php:        $one_subject = $this->t_teacher_record_list->get_all_interview_count_by_subject($start_time,$end_time,-1);
main_page.php:        $one_succ_subject = $this->t_teacher_record_list->get_all_interview_count_by_subject($start_time,$end_time,1);        
main_page.php:            $teacher_list = $this->t_teacher_lecture_info->get_teacher_list_passed("",$start_time,$end_time,$t["subject"]);
main_page.php:            $teacher_arr = $this->t_teacher_record_list->get_teacher_train_passed("",$start_time,$end_time,$t["subject"]);
main_page.php:            $t["train_num"] = $this->t_lesson_info_b2->get_all_train_num($start_time,$end_time,$teacher_list,-1,false);
main_page.php:            $t["train_succ"] = $this->t_lesson_info_b2->get_all_train_num($start_time,$end_time,$teacher_list,1,false);
main_page.php:        $res_grade = $this->t_teacher_lecture_info->get_lecture_info_by_grade($start_time,$end_time);
main_page.php:        $video_succ_grade = $this->t_teacher_lecture_info->get_lecture_info_by_grade($start_time,$end_time,1);
main_page.php:        $one_grade = $this->t_teacher_record_list->get_all_interview_count_by_grade($start_time,$end_time,-1);
main_page.php:        $one_succ_grade = $this->t_teacher_record_list->get_all_interview_count_by_grade($start_time,$end_time,1);        
main_page.php:            $teacher_list = $this->t_teacher_lecture_info->get_teacher_list_passed("",$start_time,$end_time,-1,-1,-1,-1,"",$i["grade_ex"]);
main_page.php:            $teacher_arr = $this->t_teacher_record_list->get_teacher_train_passed("",$start_time,$end_time,-1,-1,-1,-1,"",$i["grade_ex"]);
main_page.php:            $i["train_num"] = $this->t_lesson_info_b2->get_all_train_num($start_time,$end_time,$teacher_list,-1);
main_page.php:            $i["train_succ"] = $this->t_lesson_info_b2->get_all_train_num($start_time,$end_time,$teacher_list,1);
main_page.php:        $list = $this->t_teacher_lecture_info->get_lecture_info_by_time_new(
main_page.php:            -1,$start_time,$end_time,-1,-1,-1,"");
main_page.php:        $arr = $this->t_teacher_record_list->get_train_teacher_interview_info(
main_page.php:            -1,$start_time,$end_time,-1,-1,-1,"");
main_page.php:            $teacher_list = $this->t_teacher_lecture_info->get_teacher_list_passed($account,$start_time,$end_time);
main_page.php:            $teacher_arr = $this->t_teacher_record_list->get_teacher_train_passed($account,$start_time,$end_time);
main_page.php:            $res = $this->t_lesson_info->get_test_leson_info_by_teacher_list($teacher_list);
main_page.php:        $teacher_list_ex = $this->t_teacher_lecture_info->get_teacher_list_passed("",$start_time,$end_time);
main_page.php:        $teacher_arr_ex = $this->t_teacher_record_list->get_teacher_train_passed("",$start_time,$end_time);
main_page.php:        $train_all = $this->t_lesson_info_b2->get_all_train_num($start_time,$end_time,$teacher_list_ex,-1);
main_page.php:        $train_succ = $this->t_lesson_info_b2->get_all_train_num($start_time,$end_time,$teacher_list_ex,1);
main_page.php:        $lecture_identity = $this->t_teacher_lecture_info->get_lecture_info_by_identity($start_time,$end_time);
main_page.php:        $lecture_identity_succ = $this->t_teacher_lecture_info->get_lecture_info_by_identity($start_time,$end_time,1);
main_page.php:        $train_identity = $this->t_teacher_record_list->get_all_interview_count_by_identity($start_time,$end_time,-1);
main_page.php:        $train_identity_succ = $this->t_teacher_record_list->get_all_interview_count_by_identity($start_time,$end_time,1);        
main_page.php:            $teacher_list = $this->t_teacher_lecture_info->get_teacher_list_passed("",$start_time,$end_time,-1,-1,-1,$n["identity_ex"]);
main_page.php:            $teacher_arr = $this->t_teacher_record_list->get_teacher_train_passed("",$start_time,$end_time,-1,-1,-1,$n["identity_ex"]);
main_page.php:            $n["train_num"] = $this->t_lesson_info_b2->get_all_train_num($start_time,$end_time,$teacher_list,-1);
main_page.php:            $n["train_succ"] = $this->t_lesson_info_b2->get_all_train_num($start_time,$end_time,$teacher_list,1);
main_page.php:        return $this->pageView(__METHOD__ ,null, [
main_page.php:        $this->t_lesson_info->switch_tongji_database();
main_page.php:        $this->t_month_ass_student_info->switch_tongji_database();
main_page.php:        $this->t_test_lesson_subject->switch_tongji_database();
main_page.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
main_page.php:        $opt_date_type = $this->get_in_int_val("opt_date_type",3);
main_page.php:            $cur_start = strtotime(date('Y-m-01',$start_time));
main_page.php:            $mid_time = strtotime(date('Y-m-15',$start_time));
main_page.php:            $cur_end = strtotime(date('Y-m-01',$mid_time+30*86400));
main_page.php:            $cur_start = strtotime(date('Y-m-01',$end_time));
main_page.php:            $mid_time = strtotime(date('Y-m-15',$end_time));
main_page.php:            $cur_end = strtotime(date('Y-m-01',$mid_time+30*86400));
main_page.php:        $last_month = strtotime(date('Y-m-01',$cur_start-100));
main_page.php:        $month_start = strtotime(date("Y-m-01",time(NULL)));
main_page.php:        $account_id = $this->get_account_id();
main_page.php:        //$master_adminid = $this->t_admin_group_user->get_master_adminid_by_adminid($account_id);
main_page.php:        //$up_master_adminid = $this->t_admin_main_group_name->get_up_group_adminid( $master_adminid);
main_page.php:        $ass_last_month = $this->t_month_ass_student_info->get_ass_month_info($last_month);
main_page.php:        $ass_list = $this->t_manager_info->get_adminid_list_by_account_role(1);
main_page.php:        $lesson_target = $this->t_ass_group_target->get_rate_target($cur_start);
main_page.php:        $kk_require= $this->t_test_lesson_subject->get_ass_kk_tongji_all_info($start_time,$end_time);
main_page.php:        // @$kk_suc= $this->t_test_lesson_subject->get_ass_kk_tongji_info($start_time,$end_time);
main_page.php:        $stu_info_all = $this->t_student_info->get_ass_stu_info_new();
main_page.php:        $ass_month= $this->t_month_ass_student_info->get_ass_month_info($cur_start);
main_page.php:        $assistant_renew_list = $this->t_manager_info->get_all_assistant_renew_list_new($start_time,$end_time);
main_page.php:                $lesson_count_list_old[$ks]=$this->t_manager_info->get_assistant_lesson_count_old($start_time,$end_time,$ks,$userid_list);
main_page.php:        $stu_info["week_stu_num"] = $this->t_lesson_info->get_week_stu_num_info($lstart,$lend,$account_id);
main_page.php:        return $this->pageView(__METHOD__ ,null, [
main_page.php:        $this->t_lesson_info->switch_tongji_database();
main_page.php:        $this->t_month_ass_student_info->switch_tongji_database();
main_page.php:        $this->t_test_lesson_subject->switch_tongji_database();
main_page.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
main_page.php:        $opt_date_type = $this->get_in_int_val("opt_date_type",3);
main_page.php:            $cur_start = strtotime(date('Y-m-01',$start_time));
main_page.php:            $mid_time = strtotime(date('Y-m-15',$start_time));
main_page.php:            $cur_end = strtotime(date('Y-m-01',$mid_time+30*86400));
main_page.php:            $cur_start = strtotime(date('Y-m-01',$end_time));
main_page.php:            $mid_time = strtotime(date('Y-m-15',$end_time));
main_page.php:            $cur_end = strtotime(date('Y-m-01',$mid_time+30*86400));
main_page.php:        $last_month  = strtotime(date('Y-m-01',$cur_start-100));
main_page.php:        $month_start = strtotime(date("Y-m-01",time(NULL)));
main_page.php:        $account_id  = $this->get_account_id();
main_page.php:        $master_adminid    = $this->t_admin_group_user->get_master_adminid_by_adminid($account_id);
main_page.php:        $up_master_adminid = $this->t_admin_main_group_name->get_up_group_adminid( $master_adminid);
main_page.php:        $ass_last_month    = $this->t_month_ass_student_info->get_ass_month_info($last_month);
main_page.php:        $ass_list = $this->t_manager_info->get_adminid_list_by_account_role(1);
main_page.php:        $lesson_target     = $this->t_ass_group_target->get_rate_target($cur_start);
main_page.php:        $kk_require        = $this->t_test_lesson_subject->get_ass_kk_tongji_all_info($start_time,$end_time);
main_page.php:        $lesson_money_list = $this->t_manager_info->get_assistant_lesson_money_info($start_time,$end_time);
main_page.php:        $stu_info_all      = $this->t_student_info->get_ass_stu_info_new();
main_page.php:        $ass_month= $this->t_month_ass_student_info->get_ass_month_info($cur_start);
main_page.php:        $assistant_renew_list = $this->t_manager_info->get_all_assistant_renew_list_new($start_time,$end_time);
main_page.php:        $new_info = $this->t_student_info->get_new_assign_stu_info($start_time,$end_time);
main_page.php:                $lesson_count_list_old[$ks]=$this->t_manager_info->get_assistant_lesson_count_old($start_time,$end_time,$ks,$userid_list);
main_page.php:        $ass_leader_arr = $this->t_admin_group_name->get_leader_list(1);
main_page.php:            $master_adminid_ass = $this->t_admin_group_user->get_master_adminid_by_adminid($key);
main_page.php:            $v["account"] = $this->t_manager_info->get_account($key);
main_page.php:            $ass_master_adminid = $this->t_admin_group_user->get_master_adminid_by_adminid($k);
main_page.php:        return $this->pageView(__METHOD__ ,null, [
main_page.php:        $this->t_lesson_info->switch_tongji_database();
main_page.php:        $this->t_month_ass_student_info->switch_tongji_database();
main_page.php:        $this->t_test_lesson_subject->switch_tongji_database();
main_page.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
main_page.php:        $opt_date_type = $this->get_in_int_val("opt_date_type",3);
main_page.php:            $cur_start = strtotime(date('Y-m-01',$start_time));
main_page.php:            $mid_time = strtotime(date('Y-m-15',$start_time));
main_page.php:            $cur_end = strtotime(date('Y-m-01',$mid_time+30*86400));
main_page.php:            $cur_start = strtotime(date('Y-m-01',$end_time));
main_page.php:            $mid_time = strtotime(date('Y-m-15',$end_time));
main_page.php:            $cur_end = strtotime(date('Y-m-01',$mid_time+30*86400));
main_page.php:        $last_month  = strtotime(date('Y-m-01',$cur_start-100));
main_page.php:        $month_start = strtotime(date("Y-m-01",time(NULL)));
main_page.php:        $account_id  = $this->get_account_id();
main_page.php:        $master_adminid    = $this->t_admin_group_user->get_master_adminid_by_adminid($account_id);
main_page.php:        $up_master_adminid = $this->t_admin_main_group_name->get_up_group_adminid( $master_adminid);
main_page.php:        $ass_last_month    = $this->t_month_ass_student_info->get_ass_month_info($last_month);
main_page.php:        $ass_list = $this->t_manager_info->get_adminid_list_by_account_role(1);
main_page.php:        $lesson_target     = $this->t_ass_group_target->get_rate_target($cur_start);
main_page.php:        $kk_require        = $this->t_test_lesson_subject->get_ass_kk_tongji_all_info($start_time,$end_time);
main_page.php:        $lesson_money_list = $this->t_manager_info->get_assistant_lesson_money_info($start_time,$end_time);
main_page.php:        $stu_info_all      = $this->t_student_info->get_ass_stu_info_new();
main_page.php:        $ass_month= $this->t_month_ass_student_info->get_ass_month_info($cur_start);
main_page.php:        $assistant_renew_list = $this->t_manager_info->get_all_assistant_renew_list_new($start_time,$end_time);
main_page.php:        $new_info = $this->t_student_info->get_new_assign_stu_info($start_time,$end_time);
main_page.php:                $lesson_count_list_old[$ks]=$this->t_manager_info->get_assistant_lesson_count_old($start_time,$end_time,$ks,$userid_list);
main_page.php:        $ass_leader_arr = $this->t_admin_group_name->get_leader_list(1);
main_page.php:            $master_adminid_ass = $this->t_admin_group_user->get_master_adminid_by_adminid($key);
main_page.php:            $v["account"] = $this->t_manager_info->get_account($key);
main_page.php:        return $this->pageView(__METHOD__ ,null, [
monitor.php:        list($start_time,$end_time) = $this->get_in_date_range(-10, 0);
monitor.php:        $is_succ  = $this->get_in_int_val('is_succ', -1);
monitor.php:        $phone    = $this->get_in_phone();
monitor.php:        $type     = $this->get_in_int_val('type', -1);
monitor.php:        $page_num = $this->get_in_page_num();
monitor.php:        $ret_info = $this->t_sms_msg->get_sms_list($page_num, $start_time, $end_time, $phone, $is_succ, $type);
monitor.php:            $item['send_time']  = date('Y-m-d H:i:s', $item['send_time']);
monitor.php:        return $this->pageView(__METHOD__,$ret_info);
monitor.php:        list($start_time,$end_time) = $this->get_in_date_range(-10, 0);
monitor.php:        $is_succ     = $this->get_in_int_val('is_succ', -1);
monitor.php:        $teacherid   = $this->get_in_phone();
monitor.php:        $template_id = $this->get_in_int_val('type', -1);
monitor.php:        $page_num    = $this->get_in_page_num();
monitor.php:        $ret_info = $this->t_weixin_msg->get_weixin_list($page_num, $start_time, $end_time, $phone, $is_succ, $type);
monitor.php:            $item['send_time']  = date('Y-m-d H:i:s', $item['send_time']);
monitor.php:        return $this->Pageview(__METHOD__, $ret_info);
news_info.php:        $start_date   = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-3*86400 ));
news_info.php:        $end_date     = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
news_info.php:        $status       = $this->get_in_int_val('status',-1);
news_info.php:        $news_ad_info = $this->get_in_str_val("news_ad_info","");
news_info.php:        $page_num     = $this->get_in_page_num();
news_info.php:        $ret_info=$this->t_news_ad_info->get_ad_info_list($start_date_s,$end_date_s,$status,$news_ad_info,$page_num);
news_info.php:            $val['time_str']=date('Y-m-d ',$val['start_time'])." ~ ".date('Y-m-d',$val['end_time']);
news_info.php:        return $this->pageView(__METHOD__,$ret_info,array(),['qiniu_upload_domain_url' =>
news_info.php:        $id = $this->get_in_int_val('id',-1);
news_info.php:        $ret_info = $this->t_news_ad_info->field_get_list($id,'*');
news_info.php:        $ret_info['start_time_str']=date('Y-m-d',$ret_info['start_time']);
news_info.php:        $ret_info['end_time_str']=date('Y-m-d',$ret_info['end_time']);
news_info.php:        $id         = $this->get_in_int_val('id',-1);
news_info.php:        $start_date = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-3*86400 ));
news_info.php:        $end_date   = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
news_info.php:        $ad_url     = $this->get_in_str_val('ad_url','');
news_info.php:        $img_url    = $this->get_in_str_val('img_url','');
news_info.php:        $url        = $this->get_in_str_val('url','');
news_info.php:        $title      = $this->get_in_str_val('title','');
news_info.php:        $intro      = $this->get_in_str_val('intro','');
news_info.php:        $status     = $this->get_in_int_val('status',-1);
news_info.php:        $opt_type   = $this->get_in_int_val('opt_type','');
news_info.php:        $ret_info=$this->t_news_ad_info->add_ad_info($opt_type,$id,$start_date_s,$end_date_s
news_info.php:        $id = $this->get_in_int_val('id',-1);
news_info.php:        $ret_info = $this->t_news_ad_info->row_delete($id);
news_info.php:        $page_num = $this->get_in_page_num();
news_info.php:        $ret_info = $this->t_baidu_push_msg->get_stu_message_list($page_num);
news_info.php:        return $this->pageView(__METHOD__,$ret_info);
news_info.php:        $message_content = $this->get_in_str_val("message_content",'');
news_info.php:        $value           = $this->get_in_str_val("value",'');
news_info.php:        $type            = $this->get_in_int_val("type",1);
news_info.php:            $messageid = $this->t_baidu_push_msg->add_baidu_push_msg($message_content,$push_type);
news_info.php:        $messageid=$this->get_in_int_val("messageid",0);
news_info.php:        $ret_info=$this->t_baidu_push_msg->row_delete($messageid);
news_info.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,1);
news_info.php:        $studentid    = $this->get_in_int_val("studentid");
news_info.php:        $message_type = $this->get_in_int_val("userid");
news_info.php:        $page_num     = $this->get_in_page_num();
news_info.php:        $ret_info = $this->t_baidu_msg->get_stu_detail_message_list($page_num,$start_time,$end_time,$studentid,$message_type);
news_info.php:        return $this->pageView(__METHOD__,$ret_info);
news_info.php:        $id        = $this->get_in_int_val("id");
news_info.php:        $device    = $this->get_in_int_val("device",4);
news_info.php:        $grade     = $this->get_in_int_val("grade",1);
news_info.php:        $messageid = $this->get_in_int_val("messageid");
news_info.php:            $message = $this->t_news_headlines->get_h_info($id);
news_info.php:            $message = $this->t_news_info->get_news_info($id);
news_info.php:        $result = $this->baidu_push_news($device,$grade,$messageid,$message,$title);
news_info.php:        $ret=$this->t_news_headlines->field_update_list($id,['push_status'=>1]);
news_info.php:        $len=$this->utf8_strlen($message);
news_info.php:            $message=mb_substr($message,0,55,"utf-8")."  >";
news_info.php:        $userid  = $this->get_in_str_val("userid");
news_info.php:        $content = $this->get_in_str_val("content");
news_info.php:        $value   = $this->get_in_str_val("value");
news_info.php:        $acc     = $this->get_account();
news_info.php:        $parentid = $this->t_student_info->get_parentid($userid);
news_info.php:        $this->t_baidu_msg->start_transaction();
news_info.php:        $ret = $this->t_baidu_msg->baidu_push_msg($userid,$content,$value,1007,0);
news_info.php:            $this->t_baidu_msg->rollback();
news_info.php:            return $this->output_err("添加失败！请重试！");
news_info.php:            $ret = $this->t_baidu_msg->baidu_push_msg($parentid,$content,$value,4014,0);
news_info.php:                $this->t_baidu_msg->rollback();
news_info.php:                return $this->output_err("添加失败！请重试！");
news_info.php:            $wx_openid = $this->t_parent_info->get_wx_openid($parentid);
news_info.php:                    "keyword3"  => date("Y-m-d"),
news_info.php:        $this->t_baidu_msg->commit();
news_info.php:        return $this->output_succ();
notice.php:                if ( property_exists($ret,"result") && $ret->result->err_code==="0") {
notice.php:                    if (   $ret->code=="15" ) {
notice.php:                        $sub_code= $ret->sub_code;
notice.php:        $this->t_sms_msg->row_insert([
notice.php:        return  $this->get_in_str_val("user_ip");
notice.php:        $phone   = $this->get_in_phone();
notice.php:        $user_ip = $this->get_in_user_ip();
notice.php:        $code    = $this->get_in_str_val("code");
notice.php:        $index   = $this->get_in_str_val("index");
notice.php:        $this->sms_common($phone,$user_ip,$type,[
notice.php:        $phone   = $this->get_in_phone();
notice.php:        $user_ip = $this->get_in_user_ip();
notice.php:        $type    = $this->get_in_type();
notice.php:        $args    = json_decode($this->get_in_str_val("args"),true);
notice.php:            return $this->output_err("xx");
notice.php:        $this->sms_common($phone,$user_ip,$type, $args);
notice.php:        return $this->output_succ();
order_refund_confirm_config.php:        $key1=$this->get_in_int_val("key1",-1);
order_refund_confirm_config.php:        $key2=$this->get_in_int_val("key2",-1);
order_refund_confirm_config.php:        $key3=$this->get_in_int_val("key3",-1);
order_refund_confirm_config.php:        list($refund_info ,$map) = $this->t_order_refund_confirm_config->get_refund_list_and_map( $key1, $key2, $key3 );
order_refund_confirm_config.php:        $key2_list = $this->t_order_refund_confirm_config->get_key2_list($key1);
order_refund_confirm_config.php:        $key3_list = $this->t_order_refund_confirm_config->get_key3_list($key1,$key2);
order_refund_confirm_config.php:        return $this->pageView(__METHOD__,$ret_info, [
order_refund_confirm_config.php:            "key1_list" => $this->t_order_refund_confirm_config->get_key1_list(),
order_refund_confirm_config.php:        $key1  = $this->get_in_int_val("key1",-1);
order_refund_confirm_config.php:        $key2  = $this->get_in_int_val("key2",-1);
order_refund_confirm_config.php:        $key3  = $this->get_in_int_val("key3",-1);
order_refund_confirm_config.php:        $value = $this->get_in_str_val("value");
order_refund_confirm_config.php:        if ($key1==-1) {
order_refund_confirm_config.php:            $key1= $this->t_order_refund_confirm_config-> get_next_key_value($key1,$key2,$key3);
order_refund_confirm_config.php:        }else if($key2==-1) {
order_refund_confirm_config.php:            $key2= $this->t_order_refund_confirm_config-> get_next_key_value($key1,$key2,$key3);
order_refund_confirm_config.php:        }else if($key3==-1) {
order_refund_confirm_config.php:            $key3= $this->t_order_refund_confirm_config-> get_next_key_value($key1,$key2,$key3);
order_refund_confirm_config.php:            $key4= $this->t_order_refund_confirm_config-> get_next_key_value($key1,$key2,$key3);
order_refund_confirm_config.php:        $this->t_order_refund_confirm_config-> row_insert($refund_arr);
order_refund_confirm_config.php:        return  $this->output_succ();
order_refund_confirm_config.php:        $id = $this->get_in_int_val("id");
order_refund_confirm_config.php:        $this->t_order_refund_confirm_config->row_delete($id);
order_refund_confirm_config.php:        return  $this->output_succ();
page_common.php:        $opt_type=$this->get_in_str_val("opt_type");
page_common.php:        $table_key=$this->get_in_str_val("table_key");
page_common.php:        $data=$this->get_in_str_val("data");
page_common.php:        $account=$this->get_account();
page_common.php:            return $this->output_succ();
page_common.php:            return $this->output_succ([
page_common.php:        $xls_data = $this->get_in_str_val("xls_data");
page_common.php:        (new  login() )->reset_power($this->get_account());
page_common.php:        return $this->output_succ();
parent_wx_server.php:        //$wechat->checkSignature();
parent_wx_server.php:        $ret=$wechat->run();
parent_wx_server.php:            //array('id'=>'6', 'pid'=>'3', 'name'=>'帐号绑定', 'type'=>'view', 'code'=>'http://wx-parent.leo1v1.com/wx_parent/binding'),
parent_wx_server.php:            array('id'=>'8', 'pid'=>'3', 'name'=>'试听课程', 'type'=>'view', 'code'=>'http://wx-parent.leo1v1.com/wx_parent/index'),
parent_wx_server.php:            array('id'=>'9', 'pid'=>'3', 'name'=>'我要投诉', 'type'=>'view', 'code'=>'http://wx-parent.leo1v1.com/wx_parent/complain' ),
parent_wx_server.php:        return $this->output_succ(["index" =>$phone_index ]);
parent_wx_server.php:        $to_url=bin2hex($this->get_in_str_val("to_url"));
parent_wx_server.php:        $redirect_url=urlencode("http://wx-parent.leo1v1.com?=$to_url" );
parent_wx_server.php:        $wx->goto_wx_login( $redirect_url );
parent_wx_server.php:            $to_url=bin2hex($this->get_in_str_val("to_url"));
parent_wx_server.php:            $wx->goto_wx_login( $redirect_url );
pdf_viewer.php:        return $this->pageView(__METHOD__);
pic_manage.php:        $type      = $this->get_in_int_val('type',-1);
pic_manage.php:        $usage_type= $this->get_in_int_val('usage_type',-1);
pic_manage.php:        $page_num  = $this->get_in_page_num();
pic_manage.php:        $ret_info  = $this->t_pic_manage_info->get_pic_info_list($type,$usage_type,$page_num);
pic_manage.php:        return $this->pageView(__METHOD__,$ret_info,array(),['qiniu_upload_domain_url' =>
pic_manage.php:        $id = $this->get_in_int_val('id',-1);
pic_manage.php:        $ret_info = $this->t_pic_manage_info->field_get_list($id,'*');
pic_manage.php:        $ret_info['start_time'] = date("Y-m-d",$ret_info['start_time']);
pic_manage.php:        $ret_info['end_time']   = date("Y-m-d",$ret_info['end_time']);
pic_manage.php:        $opt_type     = $this->get_in_str_val('opt_type','');
pic_manage.php:        $id           = $this->get_in_int_val('id',-1);
pic_manage.php:        $name         = $this->get_in_str_val('name','');
pic_manage.php:        $type         = $this->get_in_int_val('type',-1);
pic_manage.php:        $usage_type   = $this->get_in_int_val('usage_type',-1);
pic_manage.php:        $click_status = $this->get_in_int_val('click_status',-1);
pic_manage.php:        $order_by     = $this->get_in_int_val('order_by',0);
pic_manage.php:        $grade        = $this->get_in_int_val('grade',0);
pic_manage.php:        $subject      = $this->get_in_int_val('subject',0);
pic_manage.php:        $pic_url      = $this->get_in_str_val('pic_url','');
pic_manage.php:        $tag_url      = $this->get_in_str_val('tag_url','');
pic_manage.php:        $start_time  = $this->get_in_str_val('start_time');
pic_manage.php:        $end_time    = $this->get_in_str_val('end_time');
pic_manage.php:        $title_share = $this->get_in_str_val('title_share');
pic_manage.php:        $info_share  = $this->get_in_str_val('info_share');
pic_manage.php:        $jump_url    = $this->get_in_str_val('jump_url');
pic_manage.php:        $ret_info=$this->t_pic_manage_info->add_pic_info($opt_type,$id,$name,$type,$usage_type,
pic_manage.php:        $id = $this->get_in_int_val('id',-1);
pic_manage.php:        $ret_info=$this->t_pic_manage_info->row_delete($id);
revisit.php:        $userid = $this->get_in_userid();
revisit.php:        $phone = $this->get_in_phone_ex();
revisit.php:            $phone_row=$this->t_phone_to_user->get_phone_role_by_userid($userid);
revisit.php:                if (preg_match("/[0-9]*/",$phone,$matches)) {
revisit.php:            $userid=$this->t_phone_to_user->get_userid_by_phone($phone);
revisit.php:            $ret_db_userid = $this->t_revisit_info->get_all_revisit_ex($userid);
revisit.php:            $revisit_show_all_flag = $this->t_lesson_info-> get_book_user_lesson_count($userid)>0;
revisit.php:            $ret_db_phone=$this->t_book_revisit->get_book_revisit_list($phone ,$revisit_show_all_flag  );
revisit.php:            return ($a["revisit_time"]<$b["revisit_time"])?1:-1;
revisit.php:            "operator_note" => $this->t_seller_student_new->get_tmk_desc($userid),
revisit.php:        $userid = $this->get_in_userid();      
revisit.php:        $ret_db = $this->t_revisit_info->get_all_revisit_limit_list($userid);             
revisit.php:        $userid         = intval($this->get_in_int_val('userid',-1));
revisit.php:        $revisit_type   = $this->get_in_int_val('revisit_type',0);
revisit.php:        $revisit_person = trim($this->get_in_str_val('revisit_person'));
revisit.php:        $revisit_time = $this->get_in_str_val('revisit_time');
revisit.php:        $operator_note  = trim($this->get_in_str_val('operator_note'));
revisit.php:        $operation_satisfy_flag =$this->get_in_int_val("operation_satisfy_flag",0);
revisit.php:        $operation_satisfy_type =$this->get_in_int_val("operation_satisfy_type",0);
revisit.php:        $record_tea_class_flag =$this->get_in_int_val("record_tea_class_flag",0);
revisit.php:        $tea_content_satisfy_flag =$this->get_in_int_val("tea_content_satisfy_flag",0);
revisit.php:        $tea_content_satisfy_type=$this->get_in_int_val("tea_content_satisfy_type",0);
revisit.php:        $operation_satisfy_info= trim($this->get_in_str_val("operation_satisfy_info",""));
revisit.php:        $child_performance = trim($this->get_in_str_val("child_performance",""));
revisit.php:        $tea_content_satisfy_info= trim($this->get_in_str_val("tea_content_satisfy_info",""));
revisit.php:        $other_parent_info= trim($this->get_in_str_val("other_parent_info",""));
revisit.php:        $other_warning_info= trim($this->get_in_str_val("other_warning_info",""));
revisit.php:        $child_class_performance_flag =$this->get_in_int_val("child_class_performance_flag",0);
revisit.php:        $child_class_performance_type =$this->get_in_int_val("child_class_performance_type",0);
revisit.php:        $child_class_performance_info = trim($this->get_in_str_val("child_class_performance_info",""));
revisit.php:        $school_score_change_flag  =$this->get_in_int_val("school_score_change_flag",0);
revisit.php:        $school_score_change_info = trim($this->get_in_str_val("school_score_change_info",""));
revisit.php:        $school_work_change_flag  =$this->get_in_int_val("school_work_change_flag",0);
revisit.php:        $school_work_change_type =$this->get_in_int_val("school_work_change_type",0);
revisit.php:        $school_work_change_info = trim($this->get_in_str_val("school_work_change_info",""));
revisit.php:        $acc = $this->get_account();
revisit.php:        $ret_stu      = $this->t_student_info->get_student_simple_info($userid);
revisit.php:            return  $this->output_err( "系统出错");
revisit.php:        if ( $this->t_revisit_info->check_add_existed($userid,$revisit_time) ) {
revisit.php:            return  $this->output_succ();
revisit.php:        $ret_add = $this->t_revisit_info->add_revisit_record($userid, $revisit_time, $ret_stu['nick'], $revisit_person,
revisit.php:        $max_revisit_time = $this->t_revisit_info->get_max_revisit_time($userid);
revisit.php:                $this->t_student_info->field_update_list($userid, $set_arr);
revisit.php:        return  $this->output_succ();
self_manage.php:        return $this->pageView(__METHOD__);
self_manage.php:        list($start_time,$end_time)= $this->get_in_date_range(date("Y-01-01"), 0 );
self_manage.php:        $adminid  = $this->get_account_id();
self_manage.php:        $page_num = $this->get_in_page_num();
self_manage.php:        $ret_list = $this->t_qingjia->get_list($page_num,$adminid,$start_time,$end_time);
self_manage.php:            \App\Helper\Utils::unixtime2date_for_item($item,"start_time","", "Y-m-d H");
self_manage.php:            \App\Helper\Utils::unixtime2date_for_item($item,"end_time", "", "Y-m-d H");
self_manage.php:        return $this->pageView(__METHOD__,$ret_list);
self_manage.php:        $adminid    = $this->get_account_id();
self_manage.php:        $msg        = $this->get_in_str_val("msg");
self_manage.php:        $type       = $this->get_in_int_val("type");
self_manage.php:        $start_time = $this->get_in_start_time_from_str();
self_manage.php:        $end_time   = $this->get_in_end_time_from_str_next_day();
self_manage.php:        $hour_count = $this->get_in_int_val("hour_count");
self_manage.php:        $this->t_qingjia->start_transaction();
self_manage.php:        $this->t_qingjia->row_insert([
self_manage.php:        $id= $this->t_qingjia->get_last_insertid();
self_manage.php:        $ret=$this->t_flow->add_flow(E\Eflow_type::V_QINGJIA,$adminid,$msg, $id );
self_manage.php:            $this->t_qingjia->rollback();
self_manage.php:            return $this->output_err("你的上级不存在,不能提交休假!");
self_manage.php:        $this->t_qingjia->commit();
self_manage.php:        return $this->output_succ();
self_manage.php:        $id      = $this->get_in_id();
self_manage.php:        $adminid = $this->get_account_id();
self_manage.php:        $del_flag=$this->t_flow->flow_del_by_from_key_int( $adminid, E\Eflow_type::V_QINGJIA, $id);
self_manage.php:            $this->t_qingjia->row_delete($id);
self_manage.php:        return $this->output_bool_ret($del_flag);
self_manage.php:        list($start_time,$end_time)=$this->get_in_date_range(-60,0);
self_manage.php:        $adminid         = $this->get_account_id();
self_manage.php:        $post_adminid    = $this->get_in_int_val("post_adminid",-1);
self_manage.php:        $flow_check_flag = $this->get_in_int_val("flow_check_flag",-1,E\Eflow_check_flag::class);
self_manage.php:        $flow_type       = $this->get_in_int_val("flow_type",-1, E\Eflow_type::class );
self_manage.php:        $page_num        = $this->get_in_page_num();
self_manage.php:        $ret_info=$this->t_flow_node->get_list($page_num,$start_time,$end_time,$adminid,$post_adminid,$flow_type,$flow_check_flag);
self_manage.php:            $this->cache_set_item_account_nick($item, "post_adminid","post_admin_nick");
self_manage.php:        return $this->pageView(__METHOD__,$ret_info);
self_manage.php:        $flowid    = $this->get_in_int_val("flowid");
self_manage.php:        $flow_type = $this->get_in_int_val("flow_type");
self_manage.php:        $ret_info   = $this->t_flow_node->get_node_list($flowid,"asc");
self_manage.php:            $this->cache_set_item_account_nick($item);
self_manage.php:        return $this->output_succ(["table_data"=>$table_data,"node_list"=>$ret_info["list"] ]);
self_manage.php:        $nodeid          = $this->get_in_int_val("nodeid");
self_manage.php:        $flow_check_flag = $this->get_in_int_val("flow_check_flag",1 );
self_manage.php:        $check_msg       = $this->get_in_str_val("check_msg" );
self_manage.php:        $node_info  = $this->t_flow_node->field_get_list($nodeid,"*");
self_manage.php:        $flow_info  = $this->t_flow->field_get_list($flowid,"*");
self_manage.php:        if($this->get_account_id() != $node_info["adminid"] ) {
self_manage.php:            return $this->output_err("你不是审核者!");
self_manage.php:            if ($next_node_type==-1) { //END
self_manage.php:                $this->t_flow_node->set_check_info($nodeid,$flow_check_flag,-1, $check_msg);
self_manage.php:                $this->t_flow->set_flow_status($flowid, E\Eflow_status::V_PASS);
self_manage.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid($flow_info["post_adminid"],"审批系统","审批完成:".E\Eflow_type::get_desc($flow_type),$msg,"");
self_manage.php:                    return  $this->output_err("出错,下一个审批人不存在.");
self_manage.php:                $next_nodeid=$this->t_flow_node->add_node($next_node_type,$flowid,$next_adminid);
self_manage.php:                $this->t_flow_node->set_check_info($nodeid,$flow_check_flag,$next_nodeid,$check_msg);
self_manage.php:            return $this->output_succ();
self_manage.php:            $this->t_flow_node->set_check_info($nodeid,$flow_check_flag,0);
self_manage.php:            $this->t_flow->set_flow_status($flowid, E\Eflow_status::V_NO_PASS);
self_manage.php:            return $this->output_succ();
self_manage.php:            return $this->output_err("未支持flag:$flow_check_flag");
self_manage.php:        $account = $this->get_account();
self_manage.php:            \App\Helper\Utils::exec_cmd("sshpass -p\"yb142857\" ssh -2  -o \"StrictHostKeyChecking no\" -p56000 -lybai 114.215.66.38  sudo usermod -U    $account ");
self_manage.php:            $job=(new \App\Jobs\deal_ssh_lock_user( $account ))->delay(60);
self_manage.php:            return $this->output_succ( [
self_manage.php:                "ssh_cmd"  => "ssh -l$account $ip "
self_manage.php:            return $this->output_err("内网不能用" ) ;
self_manage.php:        list($start_time,$end_time) = $this->get_in_date_range_day(0);
self_manage.php:        $todo_type= $this->get_in_el_todo_type();
self_manage.php:        $todo_status= $this->get_in_el_todo_status();
self_manage.php:        $adminid= $this->get_account_id();
self_manage.php:        //$adminid=-1;
self_manage.php:        $page_info= $this->get_in_page_info();
self_manage.php:        $ret_info=$this->t_todo->get_list( $page_info, $adminid , $todo_type  ,$todo_status,  $start_time, $end_time );
self_manage.php:        return $this->pageView(__METHOD__,$ret_info);
self_manage.php:        $next_revisit_time = $this->get_in_start_time_from_str("","start_time");
self_manage.php:        $userid            = $this->get_in_userid();
self_manage.php:        $adminid       = $this->get_account_id();
self_manage.php:        return $this->output_succ();
seller_api.php:tmk_new_no_call_count,    "微信-新分配例子未回访数", "btn-danger"
seller_api.php:        $this->set_in_value("group_seller_student_status", -1 );
seller_api.php:            $this->set_in_value("seller_student_status", E\Eseller_student_status::V_0 );
seller_api.php:            $this->set_in_date_range(4,0,date("Y-m-d",time()-60*86400),0);
seller_api.php:            $this->set_in_value("tmk_student_status", E\Etmk_student_status::V_3 );
seller_api.php:            $ret_info=$c->seller_student_list_data();
seller_api.php:            //$this->set_in_date_rage($key,$value);
seller_api.php:            $this->set_in_value("seller_student_status", E\Eseller_student_status::V_0 );
seller_api.php:            $this->set_in_date_range(4,0,date("Y-m-d",time()-60*86400),0);
seller_api.php:            $ret_info=$c->seller_student_list_data();
seller_api.php:        $this->set_in_value("page_count",10000);
seller_api.php:        $this->set_in_value("require_admin_type",2);
seller_api.php:        $ret_info=$c->seller_student_list_data();
seller_api.php:        $notify_count_str=$this->get_in_str_val("notify_count_str");
seller_api.php:        $top_list=$this->get_top_list($notify_count_str);
seller_api.php:        return $this->output_api_ret_info($list);
seller_api.php:        return $c->set_test_lesson_user_to_self();
seller_api.php:        $adminid=$this->get_account_id();
seller_api.php:        return $this->output_succ([
seller_api.php:            "account" =>  $this->get_account(),
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $ret_info = $this->t_student_info->get_user_info_for_api($userid);
seller_api.php:            $ret_info["next_revisit_time"] =  date("Y-m-d H:i",$ret_info["next_revisit_time"]);
seller_api.php:        // $parent_info_list = $this->t_parent_child->get_stu_parent_info_list($userid);
seller_api.php:        $course_list = $this->t_test_lesson_subject->get_user_course_list($userid);
seller_api.php:        $adminid = $this->t_seller_student_new->get_admin_revisiterid($userid);
seller_api.php:        $admin_info= $this->t_manager_info->field_get_list($adminid,"name,phone,email");
seller_api.php:        $tea_arr = $this->t_course_order->get_ass_tea_info($userid);
seller_api.php:        $assistant_info = $this->t_assistant_info->field_get_list($tea_arr["assistantid"],"nick,phone,email");
seller_api.php:        $tea_info = $this->t_teacher_info->field_get_list($tea_arr["teacherid"],"realname,phone,email");
seller_api.php:        return $this->output_succ([
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $realname = $this->get_in_str_val("realname");
seller_api.php:        $stu_nick = $this->get_in_str_val("stu_nick");
seller_api.php:        $birth = $this->get_in_str_val("birth");
seller_api.php:        $school = $this->get_in_str_val("school");
seller_api.php:        $gender = $this->get_in_int_val("gender");
seller_api.php:        $xingetedian = $this->get_in_str_val("xingetedian");
seller_api.php:        $grade = $this->get_in_int_val("grade");
seller_api.php:        $aihao = $this->get_in_str_val("aihao");
seller_api.php:        $yeyuanpai = $this->get_in_str_val("yeyuanpai");
seller_api.php:        $address = $this->get_in_str_val("address");
seller_api.php:        $subject = $this->get_in_int_val("subject");
seller_api.php:        $textbook = $this->get_in_str_val("textbook");
seller_api.php:        $parent_name      = $this->get_in_str_val("parent_name");
seller_api.php:        $has_pad       = $this->get_in_int_val("has_pad");
seller_api.php:        $next_revisit_time     = strtotime($this->get_in_str_val("next_revisit_time"));
seller_api.php:        $user_desc     = $this->get_in_str_val("user_desc");
seller_api.php:        // $stu_test_ipad_flag    = $this->get_in_str_val("stu_test_ipad_flag");
seller_api.php:        $stu_score_info        = $this->get_in_str_val("stu_score_info");
seller_api.php:        //$parent_info_list = $this->get_in_str_val("parent_info_list");
seller_api.php:        $db_grade=$this->t_student_info->get_grade($userid);
seller_api.php:            if($this->t_order_info->has_1v1_order($userid)) {
seller_api.php:                return $this->output_err("有合同了,不能修改年级");
seller_api.php:        $this->t_student_info->field_update_list($userid,[
seller_api.php:        $this->t_seller_student_new->field_update_list($userid,[
seller_api.php:        $this->t_student_init_info->field_update_list($userid,[
seller_api.php:        $this->t_test_lesson_subject->update_subject_and_textbook($userid,$subject,$textbook);
seller_api.php:                $parentid = $this->t_parent_child->check_parent_exists_info($parent_type,$userid);
seller_api.php:                    $this->t_parent_info->field_update_list($parentid,[
seller_api.php:                    return $this->output_err("家长手机必须先注册!");
seller_api.php:        /*  $par_name      = $this->get_in_str_val("par_name");
seller_api.php:        $has_pad       = $this->get_in_int_val("has_pad");
seller_api.php:        $next_revisit_time     = $this->get_in_str_val("next_revisit_time");
seller_api.php:        $stu_test_ipad_flag    = $this->get_in_str_val("stu_test_ipad_flag");
seller_api.php:        $stu_score_info        = $this->get_in_str_val("stu_score_info");
seller_api.php:        $this->cache_del_student_nick($userid);
seller_api.php:        $db_grade=$this->t_student_info->get_grade($userid);
seller_api.php:            if($this->t_order_info->has_1v1_order($userid)) {
seller_api.php:                return $this->output_err("有合同了,不能修改年级");
seller_api.php:        $this->t_student_info->field_update_list($userid,$stu_arr);
seller_api.php:        if (!$this->t_seller_student_new->get_first_revisit_time($userid))  {
seller_api.php:             $this->t_book_revisit->add_book_revisit($phone , $revisite_info, $this->get_account());
seller_api.php:        $this->t_seller_student_new->field_update_list($userid,$ss_arr);
seller_api.php:            $require_count=$this->t_test_lesson_subject_require->get_count_by_test_lesson_subject_id($test_lesson_subject_id );
seller_api.php:                return $this->output_err("已有试听申请,不能修改科目");
seller_api.php:            if($this->t_test_lesson_subject->check_subject($userid,$subject)){
seller_api.php:                return $this->output_err("已经有该科目了" );
seller_api.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,$tt_arr);
seller_api.php:            $this->t_test_lesson_subject->set_seller_student_status( $test_lesson_subject_id, $seller_student_status,  $this->get_account() );
seller_api.php:        return $this->output_succ();
seller_api.php:        $page_num = $this->get_in_page_num();
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $phone = $this->t_student_info->get_phone($userid);
seller_api.php:        $revisit_list = $this->t_book_revisit->get_rev_info_by_phone_adminid_new($phone,$page_num);
seller_api.php:        return $this->output_api_ret_info($revisit_list);
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $phone = $this->t_student_info->get_phone($userid);
seller_api.php:        $operator_note = trim($this->get_in_str_val("operator_note"));
seller_api.php:        $sys_operator = $this->get_in_str_val("sys_operator");
seller_api.php:        $this->t_book_revisit->row_insert([
seller_api.php:        return $this->output_succ();
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $list = $this->t_lesson_info->get_stu_test_lesson_info_for_api($userid);
seller_api.php:         return $this->output_succ([
seller_api.php:        $ret_info=$c->get_free_seller_list_data();
seller_api.php:                $item["stu_nick"] = $this->t_student_info->get_nick($item["userid"]);
seller_api.php:            $item["stu_nick"] = $this->t_student_info->get_nick($item["userid"]);
seller_api.php:        return $this->output_api_ret_info($ret_info);
seller_api.php:        $ret_arr=$c->get_new_list_data();
seller_api.php:                $item["stu_nick"] = $this->t_student_info->get_nick($item["userid"]);
seller_api.php:        return $this->output_succ([
seller_api.php:        $ret_arr = $c->test_lesson_no_order_list_data();
seller_api.php:                $item["stu_nick"] = $this->t_student_info->get_nick($item["userid"]);
seller_api.php:        return $this->output_succ([
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $ret_info = $this->t_student_info->get_user_init_info_for_api($userid);
seller_api.php:            $ret_info["next_revisit_time"] =  date("Y-m-d H:i",$ret_info["next_revisit_time"]);
seller_api.php:            $this->change_and_unset_field($ret_info,"xingetedian","stu_character_info");
seller_api.php:            $this->change_and_unset_field($ret_info,"grade","s_grade");
seller_api.php:            $this->change_and_unset_field($ret_info,"realname","s_realname");
seller_api.php:            $this->change_and_unset_field($ret_info,"gender","s_gender");
seller_api.php:            $this->change_and_unset_field($ret_info,"address","s_address");
seller_api.php:            $this->change_and_unset_field($ret_info,"phone","s_phone");
seller_api.php:            $this->change_and_unset_field($ret_info,"birth","s_birth");
seller_api.php:            $this->change_and_unset_field($ret_info,"school","s_school");
seller_api.php:        $parent_info_list = $this->t_parent_child->get_stu_parent_info_list($userid);
seller_api.php:        $course_list = $this->t_test_lesson_subject->get_user_course_list($userid);
seller_api.php:        $subject_info_list = $this->t_student_init_info->get_subject_info_list($userid);
seller_api.php:        $this->change_and_unset_field($subject_info_list,"subject_info","user_desc");
seller_api.php:        $parent_except_info_list =  $this->t_student_init_info->get_parent_except_info_list($userid);
seller_api.php:        return $this->output_succ([
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $subject_shuxue = $this->get_in_int_val("subject_shuxue");
seller_api.php:        $subject_yingyu = $this->get_in_int_val("subject_yingyu");
seller_api.php:        $subject_yuwen = $this->get_in_int_val("subject_yuwen");
seller_api.php:        $subject_wuli = $this->get_in_int_val("subject_wuli");
seller_api.php:        $subject_huaxue = $this->get_in_int_val("subject_huaxue");
seller_api.php:        $subject_info = $this->get_in_str_val("subject_info");
seller_api.php:        $class_top = $this->get_in_str_val("class_top");
seller_api.php:        $grade_top = $this->get_in_str_val("grade_top");
seller_api.php:        $order_info = $this->get_in_str_val("order_info");
seller_api.php:        $teacher = $this->get_in_str_val("teacher");
seller_api.php:        $teacher_info = $this->get_in_str_val("teacher_info");
seller_api.php:        $test_lesson_info = $this->get_in_str_val("test_lesson_info");
seller_api.php:        $mail_addr = $this->get_in_str_val("mail_addr");
seller_api.php:        $parent_other_require = $this->get_in_str_val("parent_other_require");
seller_api.php:        $lesson_plan = $this->get_in_str_val("lesson_plan");
seller_api.php:        $has_fapiao = $this->get_in_int_val("has_fapiao");
seller_api.php:        $except_lesson_count = $this->get_in_int_val("except_lesson_count");
seller_api.php:        $week_lesson_num = $this->get_in_int_val("week_lesson_num");
seller_api.php:            return $this->output_err("每周课次不能为0");
seller_api.php:            return $this->output_err("每次课时不能为0");
seller_api.php:        $this->t_seller_student_new->field_update_list($userid,[
seller_api.php:        $ret = $this->t_student_init_info->field_get_value($userid,"userid");
seller_api.php:            $this->t_student_init_info->field_update_list($userid,[
seller_api.php:            $init_info_pdf_url  = $this->t_student_info->get_init_info_pdf_url($userid);
seller_api.php:                $this->t_student_info->field_update_list($userid,["init_info_pdf_url"=>1]);
seller_api.php:            $this->t_student_init_info->row_insert([
seller_api.php:            $this->t_student_info->field_update_list($userid,["init_info_pdf_url"=>1]);
seller_api.php:        return $this->output_succ();
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $test_lesson_subject_id = $this->get_in_int_val("test_lesson_subject_id");
seller_api.php:        $ret_info = $this->t_student_info->get_user_info_for_api($userid);
seller_api.php:            $ret_info["next_revisit_time"] =  date("Y-m-d H:i",$ret_info["next_revisit_time"]);
seller_api.php:        $parent_info_list = $this->t_parent_child->get_stu_parent_info_list($userid);
seller_api.php:        $course_list = $this->t_test_lesson_subject->get_user_course_list($userid);
seller_api.php:        $test_lesson_require_info_list = $this->t_seller_student_new->get_test_lesson_require_info_for_api($userid,$test_lesson_subject_id);
seller_api.php:            $test_lesson_require_info_list["stu_request_test_lesson_time"] = date('Y-m-d H:i',$test_lesson_require_info_list["stu_request_test_lesson_time"]);
seller_api.php:        return $this->output_succ([
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $stu_test_ipad_flag = $this->get_in_int_val("stu_test_ipad_flag");
seller_api.php:        //$user_desc = $this->get_in_str_val("user_desc");
seller_api.php:        $stu_request_test_lesson_time = strtotime($this->get_in_str_val("stu_request_test_lesson_time"));
seller_api.php:        // $stu_request_test_lesson_time = strtotime(date("2017-01-24 12:00"));
seller_api.php:        $seller_student_status = $this->get_in_int_val("seller_student_status");
seller_api.php:        $stu_request_test_lesson_demand = $this->get_in_str_val("stu_request_test_lesson_demand");
seller_api.php:        $stu_test_lesson_level = $this->get_in_int_val("stu_test_lesson_level");
seller_api.php:        $test_lesson_subject_id = $this->get_in_int_val("test_lesson_subject_id");
seller_api.php:        $require_id = $this->get_in_int_val("require_id");
seller_api.php:        $accept_flag = $this->t_test_lesson_subject_require->get_accept_flag($require_id );
seller_api.php:        $this->t_seller_student_new->field_update_list($userid,[
seller_api.php:            $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
seller_api.php:            $origin_info=$this->t_student_info->get_origin($userid);
seller_api.php:            $test_stu_grade=isset($test_stu_grade)?$test_stu_grade:-1;
seller_api.php:            $test_stu_request_test_lesson_demand = $this->t_test_lesson_subject->get_stu_request_test_lesson_demand($test_lesson_subject_id);
seller_api.php:            $ret=$this->t_test_lesson_subject_require->add_require(
seller_api.php:                $this->get_account_id()
seller_api.php:                , $this->get_account() ,
seller_api.php:                return $this->output_err("当前该同学的申请请求 还没处理完毕,不可新建");
seller_api.php:                return $this->output_succ();
seller_api.php:            $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
seller_api.php:        return $this->output_succ();
seller_api.php:        $lessonid= $this->get_in_lessonid();
seller_api.php:        $stu_performance = $this->t_lesson_info->get_performance_stu_by_lessonid($lessonid);
seller_api.php:        return $this->output_succ([
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $parent_info_list = $this->t_parent_child->get_stu_parent_info_list($userid);
seller_api.php:        return $this->output_succ([
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $parent_type= $this->get_in_int_val("parent_type");
seller_api.php:        $parent_name= $this->get_in_str_val("parent_name");
seller_api.php:        $parent_phone= $this->get_in_str_val("parent_phone");
seller_api.php:        $parent_email= $this->get_in_str_val("parent_email");
seller_api.php:        $parent_info = $this->t_parent_info->get_parentid_by_phone($parent_phone);
seller_api.php:        $this->t_parent_info->field_update_list($parentid,[
seller_api.php:        $this->t_parent_child->field_update_list_2($parentid,$userid,["parent_type"=>$parent_type]);
seller_api.php:        return $this->output_succ();
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $parent_phone= $this->get_in_str_val("parent_phone");
seller_api.php:        $parent_info = $this->t_parent_info->get_parentid_by_phone($parent_phone);
seller_api.php:        $this->t_parent_info->row_delete($parentid);
seller_api.php:        $this->t_parent_child->row_delete_2($parentid,$userid);
seller_api.php:        $this->t_user_info->row_delete($parentid);
seller_api.php:        $this->t_phone_to_user->row_delete($parent_phone);
seller_api.php:        return $this->output_succ();
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $parent_type= $this->get_in_int_val("parent_type");
seller_api.php:        $parent_name= $this->get_in_str_val("parent_name");
seller_api.php:        $parent_phone= $this->get_in_str_val("parent_phone");
seller_api.php:        $parent_email= $this->get_in_str_val("parent_email");
seller_api.php:        $parentid = $this->t_user_info->add_parent_info();
seller_api.php:        $this->t_phone_to_user->row_insert([
seller_api.php:        $this->t_parent_info->row_insert([
seller_api.php:        $this->t_parent_child->row_insert([
seller_api.php:        return $this->output_succ();
seller_api.php:        $page_num              = $this->get_in_page_num();
seller_api.php:        $assign_type = $this->get_in_int_val("assign_type",0);
seller_api.php:        $ret_info = $this->t_test_lesson_subject->get_seller_student_assign_info($page_num,$assign_type);
seller_api.php:        return $this->output_api_ret_info($ret_info);
seller_api.php:        list($start_time,$end_time)= $this->get_in_date_range(date("Y-m-01",time(NULL) ) ,0 );
seller_api.php:        $year_start = strtotime(date("Y-01-01",time()));
seller_api.php:        $adminid=$this->get_account_id();
seller_api.php:        $self_top_info =$this->t_tongji_seller_top_info->get_admin_top_list( $adminid,  $start_time );
seller_api.php:        $arr_ave = $this->get_seller_ave_info();
seller_api.php:        $self_top_trend_info =$this->t_tongji_seller_top_info->get_admin_top_trend_list( $adminid,  $year_start );
seller_api.php:        $seller_person_info= $this->t_order_info->get_1v1_order_seller_list($start_time,$end_time);
seller_api.php:        $seller_person_info_new= $this->t_order_info->get_1v1_order_new_seller_list($start_time,$end_time);
seller_api.php:        $group_list      = $this->t_order_info->get_1v1_order_seller_list_group($start_time,$end_time);
seller_api.php:        return $this->output_succ([
seller_api.php:         list($start_time,$end_time)= $this->get_in_date_range(date("Y-m-01",time(NULL) ) ,0 );
seller_api.php:         $success_test_lesson_count_list = $this->t_test_lesson_subject_require->get_success_test_lesson_count_list_all($start_time,$end_time);
seller_api.php:         $order_count_list = $this->t_order_info->get_order_count_list_all($start_time,$end_time);
seller_api.php:         $order_person_count_list = $this->t_order_info->get_order_person_count_list_all($start_time,$end_time);
seller_api.php:         $assign_count_list = $this->t_seller_student_new->get_assign_count_list_all($start_time,$end_time);
seller_api.php:         $lesson_plan_list = $this->t_test_lesson_subject_sub_list->get_lesson_count_list_all($start_time,$end_time);
seller_api.php:        $test_lesson_subject_id= $this->get_in_int_val("test_lesson_subject_id");
seller_api.php:        $seller_student_status= $this->get_in_int_val("e_seller_student_status");
seller_api.php:        $db_tt_item=$this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"seller_student_status");
seller_api.php:            $account_id = $this->get_account_id();
seller_api.php:            $num = $this->t_test_lesson_subject->get_except_contract_num($account_id);
seller_api.php:                return $this->output_err("待签约人员已满额,请等待!" );
seller_api.php:            $this->t_test_lesson_subject->set_seller_student_status( $test_lesson_subject_id, $seller_student_status,  $this->get_account() );
seller_api.php:        return $this->output_succ();
seller_api.php:        $userid= $this->get_in_userid();
seller_api.php:        $account_id = $this->get_account_id();
seller_api.php:        $account=$this->get_account();
seller_api.php:        $test_lesson_subject_id = $this->get_in_int_val("test_lesson_subject_id");
seller_api.php:        $test_subject_free_type = $this->get_in_int_val("test_subject_free_type");
seller_api.php:        $test_subject_free_reason = $this->get_in_int_val("test_subject_free_reason");
seller_api.php:        $this->t_seller_student_new->set_no_hold_admin($hold_flag, $userid,  $account_id);
seller_api.php:        $hold_count=$this->t_seller_student_new->get_hold_count($account_id);
seller_api.php:                $this->output_succ("保留太少,不能操作");
seller_api.php:        $phone=$this->t_seller_student_new->field_get_value($userid,"phone");
seller_api.php:        $ret = $ret_update = $this->t_book_revisit->add_book_revisit(
seller_api.php:        $rr = $this->t_seller_student_new->set_no_hold_free($account_id);
seller_api.php:            $this->t_test_subject_free_list->row_insert([
seller_api.php:        return $this->output_succ();
seller_api.php:        return $c->seller_add_contract_new();
seller_api.php:        return $c->set_no_accpect();
seller_api.php:        return $c->seller_student_add_subject();
seller_api.php:        return $c->del_contract();
seller_api.php:        return $c->get_stu_performance_for_seller();
seller_student_new2.php:        $this-> check_in_not_has_and_set("publish_flag",-1);
seller_student_new2.php:        return $this->tmk_student_list();
seller_student_new2.php:        $tmk_adminid =$this->get_account_id();
seller_student_new2.php:        $this->set_in_value("tmk_adminid", $tmk_adminid);
seller_student_new2.php:        return $this->tmk_student_list_ex();
seller_student_new2.php:        $this->set_in_value("tmk_adminid",  -2);
seller_student_new2.php:        return $this->tmk_student_list_ex();
seller_student_new2.php:        list($start_time,$end_time, $opt_date_str)=$this->get_in_date_range(
seller_student_new2.php:            -30,0, 1, [
seller_student_new2.php:        $origin             = trim($this->get_in_str_val('origin', ''));
seller_student_new2.php:        $page_num           = $this->get_in_page_num();
seller_student_new2.php:        $userid             = $this->get_in_userid(-1);
seller_student_new2.php:        $admin_revisiterid  = $this->get_in_int_val("admin_revisiterid",-1);
seller_student_new2.php:        $tmk_student_status = $this->get_in_int_val('tmk_student_status', -1, E\Etmk_student_status::class);
seller_student_new2.php:        $subject            = $this->get_in_subject(-1);
seller_student_new2.php:        $has_pad            = $this->get_in_int_val("has_pad", -1, E\Epad_type::class);
seller_student_new2.php:        $grade              = $this->get_in_grade();
seller_student_new2.php:        $phone_name         = trim($this->get_in_str_val("phone_name"));
seller_student_new2.php:        $publish_flag       = $this->get_in_e_boolean(1,"publish_flag");
seller_student_new2.php:        $seller_student_stutus= $this->get_in_enum_val(E\Eseller_student_status::class,-1);
seller_student_new2.php:        $check_need_jump_flag= $nick || $phone || ($userid != -1 ) ;
seller_student_new2.php:        $tmk_adminid =$this->get_in_int_val("tmk_adminid");
seller_student_new2.php:        $ret_info=$this->t_seller_student_new->get_tmk_student_list (
seller_student_new2.php:            \App\Helper\Utils::unixtime2date_for_item($item, "tmk_next_revisit_time","", "Y-m-d H:i" );
seller_student_new2.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid","admin_revisiter_nick");
seller_student_new2.php:            $this->cache_set_item_account_nick($item,"sub_assign_adminid_2","sub_assign_admin_2_nick");
seller_student_new2.php:            $this->cache_set_item_teacher_nick($item);
seller_student_new2.php:            $this->cache_set_item_account_nick($item,"tmk_set_seller_adminid","tmk_set_seller_adminid_nick");
seller_student_new2.php:            $this->cache_set_item_account_nick($item,"tmk_adminid","tmk_admin_nick");
seller_student_new2.php:        return $this->pageView(__METHOD__,$ret_info);
seller_student_new2.php:        return $this->test_lesson_plan_list_jx();
seller_student_new2.php:        $adminid = $this->get_account_id();
seller_student_new2.php:        $this->set_in_value("accept_adminid",$adminid);
seller_student_new2.php:        $this->set_in_value("is_jw",1);
seller_student_new2.php:        $this->set_in_value("cur_page","test_lesson_plan_list_jx");
seller_student_new2.php:        return $this->test_lesson_plan_list();
seller_student_new2.php:        $adminid = $this->get_account_id();
seller_student_new2.php:            $adminid=-1;
seller_student_new2.php:        $this->set_in_value("limit_require_send_adminid",$adminid);
seller_student_new2.php:        $this->set_in_value("limit_require_flag",1);
seller_student_new2.php:        return $this->test_lesson_plan_list();
seller_student_new2.php:        $adminid = $this->get_account_id();
seller_student_new2.php:            $adminid=-1;
seller_student_new2.php:        $this->set_in_value("limit_require_send_adminid",$adminid);
seller_student_new2.php:        $this->set_in_value("limit_require_flag",1);
seller_student_new2.php:        return $this->test_lesson_plan_list();
seller_student_new2.php:        $adminid = $this->get_account_id();
seller_student_new2.php:            $adminid=-1;
seller_student_new2.php:        $this->set_in_value("limit_require_send_adminid",$adminid);
seller_student_new2.php:        $this->set_in_value("limit_require_flag",1);
seller_student_new2.php:        return $this->test_lesson_plan_list();
seller_student_new2.php:        $cur_page = $this->get_in_str_val("cur_page");
seller_student_new2.php:        list($start_time,$end_time,$opt_date_str) = $this->get_in_date_range(0, 7, 1, [
seller_student_new2.php:        $adminid      = $this->get_account_id();
seller_student_new2.php:        $account_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
seller_student_new2.php:        $grade                      = $this->get_in_grade();
seller_student_new2.php:        $subject                    = $this->get_in_subject();
seller_student_new2.php:        $test_lesson_student_status = $this->get_in_int_val('test_lesson_student_status', -1,E\Eseller_student_status::class);
seller_student_new2.php:        $lessonid                   = $this->get_in_lessonid(-1);
seller_student_new2.php:        $page_num                   = $this->get_in_page_num();
seller_student_new2.php:        $userid                     = $this->get_in_userid(-1);
seller_student_new2.php:        $accept_flag                = $this->get_in_int_val("accept_flag", -2, E\Eset_boolean::class);
seller_student_new2.php:        $success_flag               = $this->get_in_int_val("success_flag", -1, E\Eset_boolean::class);
seller_student_new2.php:        $teacherid                  = $this->get_in_teacherid(-1);
seller_student_new2.php:        $jw_teacher                 = $this->get_in_int_val("jw_teacher",-1);
seller_student_new2.php:        $is_test_user               = $this->get_in_int_val("is_test_user",0, E\Eboolean::class);
seller_student_new2.php:        $jw_test_lesson_status      = $this->get_in_int_val("jw_test_lesson_status",-1,E\Ejw_test_lesson_status::class);
seller_student_new2.php:        $require_admin_type   = $this->get_in_int_val("require_admin_type", -1,E\Eaccount_role::class);
seller_student_new2.php:        $require_adminid      = $this->get_in_int_val("require_adminid",-1);
seller_student_new2.php:        $require_assign_flag  = $this->get_in_int_val("require_assign_flag",-1);
seller_student_new2.php:        $seller_groupid_ex    = $this->get_in_str_val('seller_groupid_ex', "");
seller_student_new2.php:        $require_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
seller_student_new2.php:        $tmk_adminid                = $this->get_in_int_val("tmk_adminid",-1);
seller_student_new2.php:        $seller_require_change_flag = $this->get_in_int_val("seller_require_change_flag",-1);
seller_student_new2.php:        $ass_test_lesson_type       = $this->get_in_int_val("ass_test_lesson_type",-1, E\Eass_test_lesson_type::class);
seller_student_new2.php:        $test_lesson_fail_flag      = $this->get_in_int_val("test_lesson_fail_flag", -1, E\Etest_lesson_fail_flag::class);
seller_student_new2.php:        $adminid_right              = $this->get_seller_adminid_and_right();
seller_student_new2.php:        $accept_adminid             = $this->get_in_int_val("accept_adminid",-1);
seller_student_new2.php:        $is_jw                      = $this->get_in_int_val("is_jw",0);
seller_student_new2.php:        $is_ass_tran                = $this->get_in_int_val("is_ass_tran",0);
seller_student_new2.php:        $limit_require_flag         = $this->get_in_int_val("limit_require_flag",-1);
seller_student_new2.php:        $limit_require_send_adminid = $this->get_in_int_val("limit_require_send_adminid",-1);
seller_student_new2.php:        $require_id                 = $this->get_in_int_val("require_id",-1);
seller_student_new2.php:        $has_1v1_lesson_flag        = $this->get_in_int_val("has_1v1_lesson_flag",-1,E\Eboolean::class);
seller_student_new2.php:        $ret_info = $this->t_test_lesson_subject_require->get_plan_list(
seller_student_new2.php:            $this->cache_set_item_teacher_nick($item);
seller_student_new2.php:            $this->cache_set_item_account_nick($item,"confirm_adminid","confirm_admin_nick");
seller_student_new2.php:            $this->cache_set_item_account_nick($item,"tmk_adminid","tmk_admin_nick");
seller_student_new2.php:            $this->cache_set_item_account_nick($item, "cur_require_adminid", "require_admin_nick");
seller_student_new2.php:            $this->cache_set_item_account_nick($item, "limit_require_adminid", "limit_require_account");
seller_student_new2.php:            $this->cache_set_item_account_nick($item, "limit_require_send_adminid", "limit_require_send_account");
seller_student_new2.php:            $this->cache_set_item_teacher_nick($item, "limit_require_teacherid", "limit_require_tea_nick");
seller_student_new2.php:                $item['require_change_lesson_time_str'] = date("Y-m-d H:i",$item['require_change_lesson_time']);
seller_student_new2.php:                $item['seller_require_change_time_str'] = date("Y-m-d H:i",$item['seller_require_change_time']);
seller_student_new2.php:                $item['accept_account'] = $this->t_manager_info->get_account($item['accept_adminid']);
seller_student_new2.php:            $item["cur_require_adminid_role"] = $this->t_manager_info->get_account_role($item["cur_require_adminid"]);
seller_student_new2.php:            $item["limit_plan_lesson_reason"] = $this->t_teacher_info->get_limit_plan_lesson_reason($item["limit_require_teacherid"]);
seller_student_new2.php:        $adminid           = $this->get_account_id();
seller_student_new2.php:        $admin_work_status = $this->t_manager_info->get_admin_work_status($adminid);
seller_student_new2.php:        $jw_teacher_list = $this->t_manager_info->get_jw_teacher_list_new();
seller_student_new2.php:        return $this->pageView(__METHOD__,$ret_info,[
seller_student_new2.php:        list($start_time,$end_time) = $this->get_in_date_range(-10, 30 );
seller_student_new2.php:        $page_num = $this->get_in_page_num();
seller_student_new2.php:        $ret_info = $this->t_lesson_info->get_error_test_lesson_list( $page_num, $start_time,$end_time);
seller_student_new2.php:            $this->cache_set_item_student_nick($item);
seller_student_new2.php:            $this->cache_set_item_teacher_nick($item);
seller_student_new2.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student_new2.php:        $this->set_in_value("require_adminid",$this->get_account_id() );
seller_student_new2.php:        $this->set_in_value("cur_page","ass_test_lesson_list" );
seller_student_new2.php:        $this->set_in_value("is_ass_tran",1);
seller_student_new2.php:        return $this->test_lesson_plan_list();
seller_student_new2.php:        $this->set_in_value("require_adminid",$this->get_account_id() );
seller_student_new2.php:        $this->set_in_value("cur_page","ass_test_lesson_list_tran" );
seller_student_new2.php:        $this->set_in_value("is_ass_tran",2);
seller_student_new2.php:        return $this->test_lesson_plan_list();
seller_student_new2.php:        return $this->test_lesson_detail_list();
seller_student_new2.php:        list($start_time,$end_time )= $this->get_in_date_range_day(0, 0);
seller_student_new2.php:        $page_num=$this->get_in_page_num();
seller_student_new2.php:        $lesson_flag=$this->get_in_int_val("lesson_flag",-1);
seller_student_new2.php:        $ret_info=$this->t_test_lesson_subject_require->test_lesson_list($page_num,$start_time,$end_time,$lesson_flag);
seller_student_new2.php:            $this->cache_set_item_student_nick($item);
seller_student_new2.php:            $this->cache_set_item_teacher_nick($item );
seller_student_new2.php:            $this->cache_set_item_account_nick($item,"require_adminid","require_admin_nick" );
seller_student_new2.php:        return $this->pageView(__METHOD__, $ret_info );
seller_student_new2.php:        $adminid=$this->get_in_int_val("adminid",-1);
seller_student_new2.php:        $seller_new_count_type = $this-> get_in_int_val("seller_new_count_type",-1, E\Eseller_new_count_type::class);
seller_student_new2.php:        $page_num              = $this->get_in_page_num();
seller_student_new2.php:        $ret_info=$this->t_seller_new_count->get_list($page_num,$adminid,$seller_new_count_type);
seller_student_new2.php:            $this->cache_set_item_account_nick($item);
seller_student_new2.php:                $value_ex_str="操作者:".  $this->cache_get_account_nick($item["value_ex"]) ;
seller_student_new2.php:        return $this->pageView(__METHOD__, $ret_info );
seller_student_new2.php:        $adminid=$this->get_in_int_val("adminid",-1);
seller_student_new2.php:        $ret_info=$this->t_seller_new_count->get_admin_list_get_count($adminid);
seller_student_new2.php:        $admin_map=$this->t_seller_new_count->get_admin_list_count($adminid);
seller_student_new2.php:            $item["left_count"]= @$item["count"]-@$item["get_count"];
seller_student_new2.php:            $this->cache_set_item_account_nick($item);
seller_student_new2.php:        $ret_info=\App\Helper\Common::gen_admin_member_data($ret_info['list'],[],0, strtotime( date("Y-m-01",time() )   ));
seller_student_new2.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info( $ret_info ));
seller_student_new2.php:        $adminid=$this->get_in_int_val("adminid",-1);
seller_student_new2.php:        list($start_time, $end_time) = $this->get_in_date_range_week(0);
seller_student_new2.php:        $this->set_in_value('group_adminid',$this->get_account_id());
seller_student_new2.php:        $group_adminid = $this->get_in_int_val("group_adminid",-1);
seller_student_new2.php:            $groupid       = $this->t_admin_group_name->get_groupid_by_master_adminid($group_adminid);
seller_student_new2.php:            $mark_user_map = $this->t_admin_group_user->get_user_map($groupid);
seller_student_new2.php:        $ret_info  = $this->t_seller_new_count->get_admin_list_get_count_new($adminid_list);
seller_student_new2.php:        $admin_map = $this->t_seller_new_count->get_admin_list_count_new($adminid_list);
seller_student_new2.php:            $item["left_count"] = @$item["count"]-@$item["get_count"];
seller_student_new2.php:            $this->cache_set_item_account_nick($item);
seller_student_new2.php:        $ret_list=\App\Helper\Common::gen_admin_member_data($ret_list,[],0, strtotime( date("Y-m-01",$start_time)));
seller_student_new2.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($ret_list));
seller_student_new2.php:        $admin_revisiterid=$this->get_in_int_val("admin_revisiterid",-1);
seller_student_new2.php:        $page_num              = $this->get_in_page_num();
seller_student_new2.php:        $page_count        = $this->get_in_page_count();
seller_student_new2.php:        $global_tq_called_flag = $this->get_in_int_val("global_tq_called_flag", -1 , E\Etq_called_flag::class);
seller_student_new2.php:        $seller_student_status = $this->get_in_int_val("seller_student_status", -1 , E\Eseller_student_status::class);
seller_student_new2.php:        $ret_info=$this->t_seller_student_new->get_no_call_to_free_list($page_num,$page_count,$admin_revisiterid, $global_tq_called_flag,  $seller_student_status  );
seller_student_new2.php:            $this->cache_set_item_student_nick($item);
seller_student_new2.php:        return $this->pageView(__METHOD__, $ret_info );
seller_student_new2.php:        $requireid   = $this->get_in_str_val("requireid");
seller_student_new2.php:        $grab_status = $this->get_in_int_val("grab_status",-1);
seller_student_new2.php:        if($requireid=="" || $grab_status==-1){
seller_student_new2.php:            return $this->output_err("请确认是否选择申请及其所要改变状态!");
seller_student_new2.php:        $ret = $this->t_test_lesson_subject_require->set_grab_status($requireid,$grab_status);
seller_student_new2.php:            return $this->output_err("抢单状态更改失败!请重试!");
seller_student_new2.php:        return $this->output_succ();
seller_student_new2.php:        $subject = $this->get_in_enum_list(E\Esubject::class);
seller_student_new2.php:        $list = $this->t_test_lesson_subject_require->get_grab_test_lesson_list($subject,1);
seller_student_new2.php:        return $this->pageView(__METHOD__, $list );
seller_student_new2.php:        $origin=$this->get_in_str_val("origin");
seller_student_new2.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
seller_student_new2.php:        $userid= $this->get_in_userid(-1);
seller_student_new2.php:        $page_info= $this->get_in_page_info();
seller_student_new2.php:        list($start_time,$end_time )=$this->get_in_date_range(-30,1);
seller_student_new2.php:        $ret_info=$this->t_seller_student_origin->get_origin_user_list($page_info, $start_time, $end_time,$userid,$origin,$origin_ex);
seller_student_new2.php:        return $this->pageView(__METHOD__,$ret_info);
seller_student_new2.php:        $page_info= $this->get_in_page_info();
seller_student_new2.php:        list($start_time,$end_time )=$this->get_in_date_range(0,0,0,[],1);
seller_student_new2.php:        $teacherid=$this->get_in_int_val("teacherid",-1);
seller_student_new2.php:        $ret_info  = $this->t_test_lesson_require_teacher_list->get_test_lesson_require_teacher_info($page_info,$start_time,$end_time,$teacherid);
seller_student_new2.php:            $this->cache_set_item_account_nick($item, "cur_require_adminid", "require_admin_nick");
seller_student_new2.php:                    $name = $this->t_teacher_info->get_realname($val);
seller_student_new2.php:            $item["realname"] = $this->t_teacher_info->get_realname($item["teacherid"]);
seller_student_new2.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student_new2.php:        $this->switch_tongji_database();
seller_student_new2.php:        $start_time = strtotime("2017-06-19");
seller_student_new2.php:        $page_info = $this->get_in_page_info();
seller_student_new2.php:        $account_id = $this->get_account_id();
seller_student_new2.php:            $account_id=-1;
seller_student_new2.php:        $require_adminid = $this->get_in_int_val("require_adminid",$account_id);
seller_student_new2.php:        $ret_info = $this->t_test_lesson_subject_sub_list->get_ass_require_test_lesson_info($page_info,$start_time,$require_adminid);
seller_student_new.php:    //分配例子--主管
seller_student_new.php:        $adminid=$this->get_account_id();
seller_student_new.php:        $self_groupid=$this->t_admin_group_name->get_groupid_by_master_adminid($adminid);
seller_student_new.php:            return $this->error_view(["你不是销售主管"]);
seller_student_new.php:        $this->set_in_value("self_groupid", $self_groupid );
seller_student_new.php:        $this->set_in_value("sub_assign_adminid_2",$adminid );
seller_student_new.php:        if (!$this->check_in_has( "admin_revisiterid")) {
seller_student_new.php:            $this->set_in_value("admin_revisiterid", 0);
seller_student_new.php:        return $this->assign_sub_adminid_list();
seller_student_new.php:        $this->set_in_value("has_pad", E\Epad_type::V_10 );
seller_student_new.php:        $this->set_in_value("sub_assign_adminid_2", -1);
seller_student_new.php:        return $this->assign_sub_adminid_list();
seller_student_new.php:        // $this->set_in_value("filter_flag", 1);
seller_student_new.php:        return $this->output_succ();
seller_student_new.php:        // return $this->assign_sub_adminid_list();
seller_student_new.php:        $self_groupid=$this->get_in_int_val("self_groupid",-1);
seller_student_new.php:        list($start_time,$end_time,$opt_date_str)= $this->get_in_date_range(
seller_student_new.php:            -30*6, 0, 0, [
seller_student_new.php:            =$this->get_in_order_by_str( );
seller_student_new.php:        $userid            = $this->get_in_userid(-1);
seller_student_new.php:        $origin            = trim($this->get_in_str_val('origin', ''));
seller_student_new.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
seller_student_new.php:        $grade             = $this->get_in_el_grade();
seller_student_new.php:        $subject           = $this->get_in_subject(-1);
seller_student_new.php:        $phone_location    = trim($this->get_in_str_val('phone_location', ''));
seller_student_new.php:        $admin_revisiterid = $this->get_in_int_val('admin_revisiterid', -1);
seller_student_new.php:        $tq_called_flag    = $this->get_in_int_val("tq_called_flag", -1,E\Etq_called_flag::class);
seller_student_new.php:        $global_tq_called_flag = $this->get_in_int_val("global_tq_called_flag", -1,E\Etq_called_flag::class);
seller_student_new.php:        $seller_student_status = $this->get_in_e_seller_student_status(-1);
seller_student_new.php:        $page_num              = $this->get_in_page_num();
seller_student_new.php:        $page_count            = $this->get_in_page_count();
seller_student_new.php:        $has_pad               = $this->get_in_int_val("has_pad", -1, E\Epad_type::class);
seller_student_new.php:        $sub_assign_adminid_2  = $this->get_in_int_val("sub_assign_adminid_2", 0);
seller_student_new.php:        $origin_assistantid    = $this->get_in_int_val("origin_assistantid",-1  );
seller_student_new.php:        $tmk_adminid           = $this->get_in_int_val("tmk_adminid",-1, "");
seller_student_new.php:        $account_role     = $this->get_in_enum_list(E\Eaccount_role::class, -1 );
seller_student_new.php:        $origin_level          = $this-> get_in_el_origin_level();
seller_student_new.php:        $seller_student_sub_status = $this->get_in_enum_val(E\Eseller_student_sub_status::class,-1);
seller_student_new.php:        $tmk_student_status        = $this->get_in_int_val("tmk_student_status", -1, E\Etmk_student_status::class);
seller_student_new.php:        $seller_resource_type      = $this->get_in_int_val("seller_resource_type",0, E\Eseller_resource_type::class);
seller_student_new.php:        $sys_invaild_flag  =$this->get_in_e_boolean(-1,"sys_invaild_flag");
seller_student_new.php:        $publish_flag  = $this->get_in_e_boolean(1,"publish_flag");
seller_student_new.php:        $seller_level = $this->get_in_el_seller_level();
seller_student_new.php:        $admin_del_flag  = $this->get_in_e_boolean(-1 ,"admin_del_flag");
seller_student_new.php:        $wx_invaild_flag  =$this->get_in_e_boolean(-1,"wx_invaild_flag");
seller_student_new.php:        $do_filter = $this->get_in_e_boolean(-1,'filter_flag');
seller_student_new.php:        $this->t_seller_student_new->switch_tongji_database();
seller_student_new.php:        $ret_info = $this->t_seller_student_new->get_assign_list(
seller_student_new.php:            $this->cache_set_item_account_nick($item,"sub_assign_adminid_2","sub_assign_admin_2_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid","admin_revisiter_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"origin_assistantid","origin_assistant_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"tmk_adminid","tmk_admin_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"competition_call_adminid","competition_call_admin_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"require_adminid","require_admin_nick");
seller_student_new.php:            $unallot_info=$this->t_test_lesson_subject->get_unallot_info_sub_assign_adminid_2($sub_assign_adminid_2);
seller_student_new.php:            $unallot_info=$this->t_test_lesson_subject->get_unallot_info( );
seller_student_new.php:        return $this->pageView(__METHOD__,$ret_info,[
seller_student_new.php:        $status_list_str = $this->get_in_str_val("status_list_str");
seller_student_new.php:        $no_jump         = $this->get_in_int_val("no_jump",0);
seller_student_new.php:        $this->set_filed_for_js("account_seller_level", session("seller_level" ) );
seller_student_new.php:        list($start_time,$end_time,$opt_date_str)= $this->get_in_date_range(
seller_student_new.php:            -180, 0, 4, [
seller_student_new.php:        $adminid_list          = $this->get_in_str_val("adminid_list");
seller_student_new.php:        $origin_assistant_role = $this->get_in_int_val("origin_assistant_role",-1,E\Eaccount_role::class  );
seller_student_new.php:        $origin                = trim($this->get_in_str_val('origin', ''));
seller_student_new.php:        $page_num              = $this->get_in_page_num();
seller_student_new.php:        $userid                = $this->get_in_userid(-1);
seller_student_new.php:        $seller_student_status = $this->get_in_int_val('seller_student_status', -1, E\Eseller_student_status::class);
seller_student_new.php:        $seller_groupid_ex     = $this->get_in_str_val('seller_groupid_ex', "");
seller_student_new.php:        $require_adminid_list  = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
seller_student_new.php:        $phone_location        = trim($this->get_in_str_val('phone_location', ''));
seller_student_new.php:        $page_count            = $this->get_in_int_val("page_count",10);
seller_student_new.php:        $require_admin_type    = $this->get_in_int_val("require_admin_type",-1);
seller_student_new.php:        $subject               = $this->get_in_subject(-1);
seller_student_new.php:        $has_pad               = $this->get_in_int_val("has_pad", -1, E\Epad_type::class);
seller_student_new.php:        $seller_level   = $this->get_in_el_seller_level();
seller_student_new.php:        $tq_called_flag              = $this->get_in_int_val("tq_called_flag", -1,E\Etq_called_flag::class);
seller_student_new.php:        $seller_resource_type        = $this->get_in_int_val("seller_resource_type",-1, E\Eseller_resource_type::class);
seller_student_new.php:        $origin_assistantid          = $this->get_in_int_val("origin_assistantid",-1  );
seller_student_new.php:        $origin_userid = $this->get_in_int_val("origin_userid",-1  );
seller_student_new.php:        $admin_revisiterid           = $this->get_account_id();
seller_student_new.php:        $admin_revisiterid           = $this->get_in_int_val( "admin_revisiterid", $admin_revisiterid );
seller_student_new.php:        $success_flag                = $this->get_in_int_val("success_flag", -1, E\Eset_boolean::class);
seller_student_new.php:        $seller_require_change_flag  = $this->get_in_int_val("seller_require_change_flag",-1);
seller_student_new.php:        $end_class_flag              = $this->get_in_int_val("end_class_flag",-1);
seller_student_new.php:        $group_seller_student_status = $this->get_in_enum_val(E\Egroup_seller_student_status::class,-1);
seller_student_new.php:        $tmk_student_status          = $this->get_in_e_tmk_student_status(-1);
seller_student_new.php:        $phone_name                  = trim($this->get_in_str_val("phone_name"));
seller_student_new.php:        $grade = -1;
seller_student_new.php:        $check_need_jump_flag= $nick || $phone || ($userid != -1 ) ;
seller_student_new.php:        $ret_info = $this->t_seller_student_new->get_seller_list(
seller_student_new.php:        $notify_lesson_check_end_time=strtotime(date("Y-m-d", $now+86400*2));
seller_student_new.php:        $next_day=$notify_lesson_check_end_time-86400;
seller_student_new.php:        $notify_lesson_check_start_time=$now - 3600;
seller_student_new.php:            \App\Helper\Utils::unixtime2date_for_item($item, "lesson_start","", "Y-m-d H:i");
seller_student_new.php:            \App\Helper\Utils::unixtime2date_for_item($item, "next_revisit_time", "", "Y-m-d H:i");
seller_student_new.php:            \App\Helper\Utils::unixtime2date_for_item($item, "confirm_time", "", "Y-m-d H:i");
seller_student_new.php:            $item["last_revisit_msg_sub"]=mb_substr($item["last_revisit_msg"], 0, 40, "utf-8");
seller_student_new.php:            $item["user_desc_sub"]=mb_substr($item["user_desc"], 0, 40, "utf-8");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"confirm_adminid","confirm_admin_nick");
seller_student_new.php:            $this->cache_set_item_teacher_nick($item);
seller_student_new.php:            $this->cache_set_item_account_nick($item,"origin_assistantid","origin_assistant_nick");
seller_student_new.php:            $this->cache_set_item_student_nick($item,"origin_userid","origin_user_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid","admin_revisiter_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"accept_adminid","accept_admin_nick");
seller_student_new.php:        $count_info =$this->t_seller_student_new->get_seller_count_list(
seller_student_new.php:        $phone=trim($this->get_in_phone());
seller_student_new.php:        $page_num= $this-> get_in_page_num();
seller_student_new.php:        $ret_info= $this->t_test_lesson_subject->get_list_by_phone($page_num,$phone );
seller_student_new.php:            $this->cache_set_item_account_nick($item,"sub_assign_adminid_2", "sub_assign_admin_2_nick" );
seller_student_new.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid", "admin_revisiter_nick" );
seller_student_new.php:                $this->t_test_lesson_subject->field_update_list($item["test_lesson_subject_id"],[
seller_student_new.php:        return $this->pageView(__METHOD__,$ret_info);
seller_student_new.php:        $this->switch_tongji_database();
seller_student_new.php:        $cur_page       = $this->get_in_int_val("cur_page");
seller_student_new.php:        $page_hide_list = $this->get_page_hide_list($cur_page);
seller_student_new.php:        $ret_info = $this->seller_student_list_data();
seller_student_new.php:        $adminid = $this->get_account_id();
seller_student_new.php:        $start_time = strtotime(date("Y-m-01",strtotime(date("Y-m-01",time()))-86400));
seller_student_new.php:        $self_top_info =$this->t_tongji_seller_top_info->get_admin_top_list( $adminid,  $start_time );
seller_student_new.php:        $seller_master_list = $this->t_admin_group_name->get_all_master_adminid_list(2);
seller_student_new.php:        $this->set_filed_for_js("jack_flag",$adminid);
seller_student_new.php:        $this->set_filed_for_js("admin_seller_level", session("seller_level" ) );
seller_student_new.php:        return $this->pageView(__METHOD__,$ret_info, [
seller_student_new.php:        if ($status_list_str==-1) {
seller_student_new.php:        $this->set_in_value("status_list_str",$status_list_str) ;
seller_student_new.php:        $this->set_in_value("cur_page","$id") ;
seller_student_new.php:        return $this->seller_student_list();
seller_student_new.php:        return $this->seller_student_list_ex(10000, -1);
seller_student_new.php:        return $this->seller_student_list_ex(0,"0,2");
seller_student_new.php:        if (!$this->check_in_has("seller_student_status") ) {
seller_student_new.php:            $this->set_in_value("seller_student_status",  100);
seller_student_new.php:        return $this->seller_student_list_ex(103,"100,103");
seller_student_new.php:        return $this->seller_student_list_ex(101,"101,102");
seller_student_new.php:        return $this->seller_student_list_ex(110,"110,120");
seller_student_new.php:        return $this->seller_student_list_ex(200);
seller_student_new.php:        return $this->seller_student_list_ex(1);
seller_student_new.php:        //$this->set_in_value("date_type", 5 ); //上课时间
seller_student_new.php:        return $this->seller_student_list_ex(210);
seller_student_new.php:        return $this->seller_student_list_ex(220);
seller_student_new.php:        return $this->seller_student_list_ex(290);
seller_student_new.php:        return $this->seller_student_list_ex(301, "300,301,302,420");
seller_student_new.php:        $this->set_in_value("tmk_flag",1);
seller_student_new.php:        return $this->no_called_list();
seller_student_new.php:        $seller_level=$this->t_manager_info->get_seller_level($this->get_account_id() );
seller_student_new.php:            || $this->check_power( E\Epower::V_TEST)
seller_student_new.php:        //list($start_time,$end_time)= $this->get_in_date_range(-7,0 );
seller_student_new.php:        $page_num   = $this->get_in_page_num();
seller_student_new.php:        $grade=$this->get_in_grade(-1);
seller_student_new.php:        $has_pad=$this->get_in_has_pad(-1);
seller_student_new.php:        $subject=$this->get_in_subject(-1);
seller_student_new.php:        $origin=trim($this->get_in_str_val("origin",""));
seller_student_new.php:        $t_flag=$this->get_in_int_val("t_flag", 0);
seller_student_new.php:        $adminid=$this->get_account_id();
seller_student_new.php:        $phone=$this->get_in_phone();
seller_student_new.php:            $ret_info= $this->t_seller_student_new->get_new_list($page_num, $now-30*3*86400 ,$now, $grade, $has_pad, $subject,$origin,$phone,$adminid ,$t_flag );
seller_student_new.php:        $max_day_count=$this->t_manager_info->get_max_get_new_user_count($adminid,$v1,$v2);
seller_student_new.php:        $count_info=$this->t_seller_new_count->get_now_count_info($adminid);
seller_student_new.php:        $ret_arr["left_count"] =  $max_day_count-$cur_count;
seller_student_new.php:        $this->set_in_value("t_flag",1);
seller_student_new.php:        return $this->get_new_list();
seller_student_new.php:        $ret_arr       = $this->get_new_list_data();
seller_student_new.php:        $seller_level  = $this->t_manager_info->get_seller_level($this->get_account_id() );
seller_student_new.php:        $this->set_filed_for_js("seller_level", $seller_level);
seller_student_new.php:        return $this->pageView(__METHOD__, $ret_info,[
seller_student_new.php:        //list($start_time,$end_time)= $this->get_in_date_range(-7,0 );
seller_student_new.php:        $page_num   = $this->get_in_page_num();
seller_student_new.php:        $this->get_in_int_val("tmk_flag",0);
seller_student_new.php:        $grade=$this->get_in_grade(-1);
seller_student_new.php:        $has_pad=$this->get_in_has_pad(-1);
seller_student_new.php:        $subject=$this->get_in_subject(-1);
seller_student_new.php:        $origin=trim($this->get_in_str_val("origin",""));
seller_student_new.php:        $ret_info= $this->t_seller_student_new->get_no_called_list($page_num, $this->get_account_id(), $grade, $has_pad, $subject,$origin );
seller_student_new.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student_new.php:        $page_num = $this->get_in_page_num();
seller_student_new.php:        list($start_time,$end_time) = $this->get_in_date_range(-80,0 );
seller_student_new.php:        $grade                      = $this->get_in_grade(-1);
seller_student_new.php:        $phone                      = trim($this->get_in_phone());
seller_student_new.php:        $adminid  = $this->get_account_id();
seller_student_new.php:        $seller_level = $this->t_manager_info->get_seller_level( $adminid);
seller_student_new.php:        $last_count          = $level_limit_count - $json_ret['opt_count'];
seller_student_new.php:       $ret_info = $this->t_test_lesson_subject->get_test_lesson_lost_user_list(
seller_student_new.php:        $ret_arr = $this->test_lesson_no_order_list_data();
seller_student_new.php:        return $this->pageView(__METHOD__, $ret_info, [
seller_student_new.php:        $this->set_in_value("origin_assistantid",$this->get_account_id());
seller_student_new.php:        $this->set_in_value("admin_revisiterid",-1);
seller_student_new.php:        $this->set_in_value("cur_page",10001);
seller_student_new.php:        $this->check_in_not_has_and_set("date_type",0);
seller_student_new.php:        return $this->seller_student_list();
seller_student_new.php:        return $this->ass_seller_student_list();
seller_student_new.php:        if (!$this->check_in_has("origin_assistantid") ) {
seller_student_new.php:            $this->set_in_value("origin_assistantid",-2); //是转介绍
seller_student_new.php:        $this->set_in_value("admin_revisiterid",-1);
seller_student_new.php:        $this->set_in_value("cur_page",10002);
seller_student_new.php:        $adminid = $this->get_account_id();
seller_student_new.php:        $list    = $this->t_admin_group_user->get_userid_list_by_master_adminid($adminid);
seller_student_new.php:        $this->set_in_value("adminid_list", $adminid_list);
seller_student_new.php:        return $this->seller_student_list();
seller_student_new.php:        if (!$this->check_in_has("origin_assistantid") ) {
seller_student_new.php:            $this->set_in_value("origin_assistantid", -2); //是转介绍
seller_student_new.php:        $this->set_in_value("admin_revisiterid", -1 );
seller_student_new.php:        $this->set_in_value("cur_page",10002);
seller_student_new.php:        return $this->seller_student_list();
seller_student_new.php:        $hold_flag=$this->get_in_int_val("hold_flag",0, E\Eboolean::class );
seller_student_new.php:        $phone_name = trim($this->get_in_str_val("phone_name"));
seller_student_new.php:        $page_num              = $this->get_in_page_num();
seller_student_new.php:        $seller_student_status = $this->get_in_int_val('seller_student_status', -1, E\Eseller_student_status::class);
seller_student_new.php:        $subject               = $this->get_in_subject(-1);
seller_student_new.php:        $grade = $this->get_in_grade();
seller_student_new.php:        $page_count        = $this->get_in_page_count();
seller_student_new.php:        $admin_revisiterid=$this->get_account_id();
seller_student_new.php:        $ret_info=$this->t_seller_student_new->get_hold_list($page_num,$page_count,$admin_revisiterid,$hold_flag, $subject, $grade, $seller_student_status,$nick,$phone );
seller_student_new.php:        $seller_level=$this->t_manager_info->get_seller_level($admin_revisiterid);
seller_student_new.php:        return $this->pageView(__METHOD__,$ret_info,[
seller_student_new.php:            "hold_cur_count"  => $this->t_seller_student_new->get_hold_count($admin_revisiterid) ,
seller_student_new.php:        list($start_time,$end_time)= $this->get_in_date_range(-80,0 );
seller_student_new.php:        $page_num   = $this->get_in_page_num();
seller_student_new.php:        $phone_name = trim($this->get_in_str_val("phone_name"));
seller_student_new.php:        $grade=$this->get_in_grade(-1);
seller_student_new.php:        $has_pad=$this->get_in_has_pad(-1);
seller_student_new.php:        $subject=$this->get_in_subject(-1);
seller_student_new.php:        $origin=trim($this->get_in_str_val("origin",""));
seller_student_new.php:        $this->t_seller_student_new->switch_tongji_database();
seller_student_new.php:        $ret_info= $this->t_seller_student_new->get_free_seller_list($page_num,  $start_time, $end_time , $this->get_account_id(), $grade, $has_pad, $subject,$origin,$nick,$phone);
seller_student_new.php:        $ret_info=$this->get_free_seller_list_data();
seller_student_new.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student_new.php:        $accountid=$this->get_account_id();
seller_student_new.php:        $key="wiki_".md5("asdfa-$accountid-".rand() );
seller_student_new.php:        \App\Helper\Common::redis_set($key, $this->get_account() );
seller_student_new.php:        $this->get_in_str_val("wiki_key",$key);
seller_student_new.php:        return $this->pageView(__METHOD__, null);
seller_student_new.php:        return $this->pageView(__METHOD__, null);
seller_student_new.php:        $cur_require_adminid=$this->get_in_int_val("cur_require_adminid",-1);
seller_student_new.php:        $this->get_in_int_val("hide_cur_require_adminid",0);
seller_student_new.php:        list($start_time, $end_time)=$this->get_in_date_range(-30,0);
seller_student_new.php:        $page_num          = $this->get_in_page_num();
seller_student_new.php:        $origin_userid_flag = $this->get_in_enum_val(E\Eboolean::class , -1,"origin_userid_flag" );
seller_student_new.php:        $order_flag = $this->get_in_enum_val(E\Eboolean::class , -1 ,"order_flag");
seller_student_new.php:        $test_lesson_fail_flag = $this->get_in_enum_val(E\Etest_lesson_order_fail_flag::class , -1 );
seller_student_new.php:        $userid=$this->get_in_userid(-1 );
seller_student_new.php:        $ret_info=$this->t_test_lesson_subject_require->get_order_fail_list($page_num,$start_time, $end_time, $cur_require_adminid,$origin_userid_flag,$order_flag,$test_lesson_fail_flag,$userid);
seller_student_new.php:            $this->cache_set_item_student_nick($item);
seller_student_new.php:            $this->cache_set_item_teacher_nick($item);
seller_student_new.php:            $this->cache_set_item_account_nick ($item,"cur_require_adminid",
seller_student_new.php:            \App\Helper\Utils::unixtime2date_for_item($item,"lesson_start","","Y-m-d H:i");
seller_student_new.php:        return $this->pageView(__METHOD__,$ret_info);
seller_student_new.php:        return $this->test_lesson_order_fail_list_seller();
seller_student_new.php:        $this->set_in_value("cur_require_adminid", $this->get_account_id());
seller_student_new.php:        $this->set_in_value("hide_cur_require_adminid",1);
seller_student_new.php:        return $this->test_lesson_order_fail_list();
seller_student_new.php:        $phone=$this->get_in_phone();
seller_student_new.php:        $url_post = "https://api.weixin.qq.com/cgi-bin/qrcode/create?access_token=".$token;
seller_student_new.php:        return $this->curl_get($ticket_post);
seller_student_new.php:        $url_get = "https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=".urlencode($ticket_post);
seller_student_new.php:        $self_groupid          = $this->get_in_int_val("self_groupid",-1);
seller_student_new.php:        $userid                = $this->get_in_userid(-1);
seller_student_new.php:        $page_num              = $this->get_in_page_num();
seller_student_new.php:        $global_tq_called_flag = $this->get_in_el_tq_called_flag("-1", "global_tq_called_flag");
seller_student_new.php:        list($start_time,$end_time) = $this->get_in_date_range(-120,1);
seller_student_new.php:        $max_end_time= strtotime(date( "Y-m-d" ))  -1*86400;
seller_student_new.php:        $seller_student_status      = $this->get_in_int_val('seller_student_status', -1, E\Eseller_student_status::class);
seller_student_new.php:        $ret_info = $this->t_seller_student_new->get_tmk_list( $start_time, $end_time, $seller_student_status, $page_num,$global_tq_called_flag );
seller_student_new.php:        $real_page_num = $ret_info["page_info"]["page_num"]-1;
seller_student_new.php:            $this->cache_set_item_account_nick($item,"sub_assign_adminid_2","sub_assign_admin_2_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid","admin_revisiter_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"origin_assistantid","origin_assistant_nick");
seller_student_new.php:            $this->cache_set_item_account_nick($item,"tmk_adminid","tmk_admin_nick");
seller_student_new.php:            $unallot_info=$this->t_test_lesson_subject->get_unallot_info_sub_assign_adminid_2($sub_assign_adminid_2);
seller_student_new.php:            $unallot_info=$this->t_test_lesson_subject->get_unallot_info( );
seller_student_new.php:        return $this->pageView(__METHOD__,$ret_info,[
seller_student_new.php:        return $this->deal_new_user();
seller_student_new.php:        $adminid = $this->get_account_id();
seller_student_new.php:            return $this->error_view(["请到 抢新学生 获取新例子! "]);
seller_student_new.php:        $this->set_filed_for_js("userid", $userid);
seller_student_new.php:        $test_lesson_subject_id = $this->t_test_lesson_subject->get_test_lesson_subject_id($userid);
seller_student_new.php:        $this->set_filed_for_js("test_lesson_subject_id", $test_lesson_subject_id);
seller_student_new.php:        $this->set_filed_for_js("account_seller_level", session("seller_level" ) );
seller_student_new.php:        $ret_info=$this->t_seller_student_new->get_seller_list( 1, -1, "", $userid );
seller_student_new.php:            return $this->error_view(["请到 抢新学生 获取新例子! "]);
seller_student_new.php:        $this->set_filed_for_js("phone", $user_info["phone"]);
seller_student_new.php:            return $this->error_view(["请到 抢新学生 获取新例子 "]);
seller_student_new.php:        $this->cache_set_item_account_nick($user_info, "admin_revisiterid", "admin_revisiter_nick" );
seller_student_new.php:        return $this->pageView(
seller_student.php:        $start_date = $this->get_in_str_val('start_date', date('Y-m-d', time(null)-30*86400));
seller_student.php:        $end_date   = $this->get_in_str_val('end_date', date('Y-m-d', time(null)+86400));
seller_student.php:        $origin     = trim($this->get_in_str_val('origin', ''));
seller_student.php:        $grade      = $this->get_in_grade();
seller_student.php:        $subject    = $this->get_in_subject();
seller_student.php:        $phone      = trim($this->get_in_str_val('phone', ''));
seller_student.php:        $page_num   = $this->get_in_page_num();
seller_student.php:        $admin_revisiterid=$this->get_account_id();
seller_student.php:        $ret_info=$this->t_seller_student_info_sub->get_list($admin_revisiterid, $phone, $origin, $start_date_s, $end_date_s, $grade, $subject, $page_num);
seller_student.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student.php:        return $this->student_list();
seller_student.php:        $this->set_in_value("group_master_flag",1) ;
seller_student.php:        $adminid=$this->get_account_id() ;
seller_student.php:        $this->set_in_value("sub_assign_adminid",$adminid );
seller_student.php:        $self_groupid=$this->t_admin_group_name->get_groupid_by_master_adminid($adminid);
seller_student.php:        $this->set_in_value("self_groupid", $self_groupid );
seller_student.php:        return $this->student_list();
seller_student.php:        list($start_time,$end_time,$opt_date_str)= $this->get_in_date_range(
seller_student.php:            -3, 0, 0, [
seller_student.php:        $this->get_in_int_val("self_groupid", -1);
seller_student.php:        $group_master_flag = $this->get_in_int_val("group_master_flag");
seller_student.php:        $origin            = trim($this->get_in_str_val('origin', ''));
seller_student.php:        $grade             = $this->get_in_grade();
seller_student.php:        $subject           = $this->get_in_subject();
seller_student.php:        $phone             = trim($this->get_in_str_val('phone', ''));
seller_student.php:        $nick              = trim($this->get_in_str_val('nick', ''));
seller_student.php:        $phone_location    = trim($this->get_in_str_val('phone_location', ''));
seller_student.php:        $admin_revisiterid = $this->get_in_int_val('admin_revisiterid', -1);
seller_student.php:        $status            = $this->get_in_int_val('status', -1);
seller_student.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
seller_student.php:        $page_num          = $this->get_in_page_num();
seller_student.php:        $page_count        = $this->get_in_page_count();
seller_student.php:        $has_pad                 = $this->get_in_int_val("has_pad", -1);
seller_student.php:        $ass_adminid_flag        = $this->get_in_int_val("ass_adminid_flag",-1,E\Eboolean::class);
seller_student.php:        $tq_called_flag          = $this->get_in_int_val("tq_called_flag",-1,E\Etq_called_flag::class);
seller_student.php:        $admin_assign_time_flag  = $this->get_in_int_val("admin_assign_time_flag",-1,E\Eboolean::class);
seller_student.php:        $seller_resource_type    = $this->get_in_int_val("seller_resource_type",-1);
seller_student.php:        $test_lesson_cancel_flag = $this->get_in_int_val("test_lesson_cancel_flag", -1, E\Etest_lesson_cancel_flag::class );
seller_student.php:        $sub_assign_adminid      = $this->get_in_int_val("sub_assign_adminid", -1);
seller_student.php:            $number = ($page_num["page_num"]-1)*$page_count+1;
seller_student.php:        $this->t_seller_student_info->switch_tongji_database();
seller_student.php:        $ret_info = $this->t_seller_student_info->get_list(
seller_student.php:            $ret_unallot = $this->t_seller_student_info->group_master_get_unallot($start_time, $end_time,$sub_assign_adminid);
seller_student.php:            $ret_unset_admin_revisiterid = $this->t_seller_student_info->group_master_get_unset_admin_revisiterid($start_time, $end_time,$sub_assign_adminid);
seller_student.php:            $ret_unallot = $this->t_seller_student_info->get_unallot($start_time, $end_time);
seller_student.php:            $ret_unset_admin_revisiterid = $this->t_seller_student_info->get_unset_admin_revisiterid($start_time, $end_time);
seller_student.php:            $this->cache_set_item_student_nick($item,"origin_userid","origin_user_nick");
seller_student.php:            $item["admin_revisiterid_nick"] = $this->cache_get_account_nick($item["admin_revisiterid"]);
seller_student.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid", "admin_revisiter_nick");
seller_student.php:            $this->cache_set_item_account_nick($item,"sub_assign_adminid", "sub_assign_admin_nick");
seller_student.php:            $this->cache_set_item_account_nick($item,"ass_adminid","ass_admin_nick");
seller_student.php:            $item["teacher_nick"]=$this->cache_get_teacher_nick($item["teacherid"]);
seller_student.php:                $item["money_all"]="--";
seller_student.php:        return $this->pageView(__METHOD__, $ret_info,["unallot"=>$ret_unallot['unallot_all'],"unset_admin_revisiterid"=>$ret_unset_admin_revisiterid['unset_all']]);
seller_student.php:        $adminid = $this->get_account_id();
seller_student.php:        $count=$this->t_seller_student_info-> get_no_call_count($adminid);
seller_student.php:        return $this->output_succ(["count" => $count]);
seller_student.php:        $callerid       = $this->get_in_str_val("callerid");
seller_student.php:        $origin         = trim($this->get_in_str_val('origin', ''));
seller_student.php:        $phone          = trim($this->get_in_str_val('phone', $callerid));
seller_student.php:        $status         = $this->get_in_int_val('status', -1);
seller_student.php:        $page_num       = $this->get_in_page_num();
seller_student.php:        $phone_location = trim($this->get_in_str_val('phone_location', ''));
seller_student.php:        $subject        = $this->get_in_subject();
seller_student.php:        $origin_ex      = $this->get_in_str_val("origin_ex");
seller_student.php:        $has_pad              = $this->get_in_int_val("has_pad", -1);
seller_student.php:        $ass_adminid_flag     = $this->get_in_int_val("ass_adminid_flag",-1,E\Eboolean::class);
seller_student.php:        $seller_resource_type = $this->get_in_int_val("seller_resource_type",-1);
seller_student.php:        list($start_time,$end_time,$opt_time_str)= $this->get_in_date_range(
seller_student.php:            -30, 0, 4, [
seller_student.php:        $adminid            = $this->get_account_id();
seller_student.php:        $next_revisit_count = $this->t_seller_student_info->get_today_next_revisit_count($adminid);
seller_student.php:        $require_count      = $this->t_seller_student_info->get_require_count($adminid);
seller_student.php:        $return_back_count  = $this->t_seller_student_info->get_return_back_count($adminid);
seller_student.php:        $notify_lesson_info = $this->t_seller_student_info->get_notify_lesson_info($this->get_account_id());
seller_student.php:        $notify_lesson_check_end_time=strtotime(date("Y-m-d", $now+86400*2));
seller_student.php:        $next_day=$notify_lesson_check_end_time-86400;
seller_student.php:        $notify_lesson_check_start_time=$now-3600;
seller_student.php:        $this->t_seller_student_info->switch_tongji_database();
seller_student.php:        $ret_info=$this->t_seller_student_info->get_list($page_num, 10, $adminid, $status, $phone, $origin, $opt_time_str, $start_time, $end_time, -1, $subject, $phone_location, $origin_ex, $nick, $has_pad,$ass_adminid_flag,-1,-1, $seller_resource_type);
seller_student.php:            \App\Helper\Utils::unixtime2date_for_item($item, "last_revisit_time", "", "Y-m-d H:i");
seller_student.php:            \App\Helper\Utils::unixtime2date_for_item($item, "next_revisit_time", "", "Y-m-d H:i");
seller_student.php:            \App\Helper\Utils::unixtime2date_for_item($item, "st_application_time", "", "Y-m-d H:i");
seller_student.php:            \App\Helper\Utils::unixtime2date_for_item($item, "admin_assign_time", "", "Y-m-d H:i");
seller_student.php:            $item["last_revisit_msg_sub"]=mb_substr($item["last_revisit_msg"], 0, 8, "utf-8");
seller_student.php:            $item["user_desc_sub"]=mb_substr($item["user_desc"], 0, 6, "utf-8");
seller_student.php:            $item["teacher_nick"]=$this->cache_get_teacher_nick($item["teacherid"]);
seller_student.php:            $this->cache_set_item_account_nick($item,"ass_adminid","ass_admin_nick");
seller_student.php:            $this->cache_set_item_student_nick($item,"origin_userid","origin_user_nick");
seller_student.php:        return $this->pageView(
seller_student.php:        $key1       = $this->get_in_str_val('key1', '');
seller_student.php:        $key2       = $this->get_in_str_val('key2', '');
seller_student.php:        $key3       = $this->get_in_str_val('key3', '');
seller_student.php:        $key4       = $this->get_in_str_val('key4', '');
seller_student.php:        $value      = trim($this->get_in_str_val('value', ''));
seller_student.php:        $origin_level = $this->get_in_int_val('origin_level',-1);
seller_student.php:        $page_num   = $this->get_in_page_num();
seller_student.php:        $this->get_in_int_val("key1_filed_hide");
seller_student.php:        $ret_info=$this->t_origin_key->get_channel_manage($page_num, $key1, $key2, $key3, $key4, $value,$origin_level);
seller_student.php:        $key1_list=$this->t_origin_key->get_key_list("", "", "", "key1");
seller_student.php:        $key2_list=$this->t_origin_key->get_key_list($key1, "", "", "key2");
seller_student.php:        $key3_list=$this->t_origin_key->get_key_list($key1, $key2, "", "key3");
seller_student.php:        $key4_list=$this->t_origin_key->get_key_list($key1, $key2, $key3, "key4");
seller_student.php:            $item["create_time_str"] = date("Y-m-d",$item["create_time"]);
seller_student.php:        return $this->pageView(
seller_student.php:        $this->set_filed_for_js("key1_filed_hide",1);
seller_student.php:        return  $this->channel_manage();
seller_student.php:        $this->set_in_value("key1","BD");
seller_student.php:        return  $this->channel_manage_key1();
seller_student.php:        $this->set_in_value("key1","优学帮");
seller_student.php:        return  $this->channel_manage_key1();
seller_student.php:        $value_map=$this->t_origin_key->get_list();
seller_student.php:                    "key_class" => $key_class."-".$cur_key_index,
seller_student.php:            $data["level"]="l-0";
seller_student.php:                $data["level"]="l-1";
seller_student.php:                    $data["level"]="l-2";
seller_student.php:                        $data["level"]="l-3";
seller_student.php:                            $data["level"]="l-4";
seller_student.php:        $start_time      = $this->get_in_unixtime_from_str(
seller_student.php:            date("Y-m-1", (time(null)-86400*7))
seller_student.php:        $end_time      = $this->get_in_unixtime_from_str(
seller_student.php:            date("Y-m-d", (time(null)+86400))
seller_student.php:        $contract_type   =  $this->get_in_int_val("contract_type", -1);
seller_student.php:        $contract_status = -2;
seller_student.php:        $config_courseid = -1;
seller_student.php:        $studentid       = $this->get_in_studentid(-1);
seller_student.php:        $check_money_flag = $this->get_in_int_val("check_money_flag", -1);
seller_student.php:        $page_num        = $this->get_in_page_num();
seller_student.php:        $test_list=$this->t_lesson_info->get_test_listen_info($start_time, $end_time);
seller_student.php:        $rev_info=$this->t_seller_student_info->get_channel_statistics($start_time, $end_time, "", "");
seller_student.php:        $ret_list=$this->t_order_info-> get_order_list_for_origin(
seller_student.php:            $ret_list["list"]= $this->gen_origin_data($list);
seller_student.php:        return $this->Pageview(__METHOD__, $ret_list);
seller_student.php:        list($start_time,$end_time )= $this->get_in_date_range(-30, 1);
seller_student.php:        $origin = trim($this->get_in_str_val('origin', ""));
seller_student.php:        $origin_ex = trim($this->get_in_str_val('origin_ex', ""));
seller_student.php:        $admin_revisiterid = $this->get_in_int_val("admin_revisiterid", -1);
seller_student.php:        $groupid = $this->get_in_int_val("groupid",-1);
seller_student.php:        if($groupid == -1){
seller_student.php:            $adminid_arr = $this->t_admin_group_user->get_userid_arr($groupid);
seller_student.php:        $ret_info=$this->t_seller_student_info->get_channel_statistics($start_time, $end_time, $origin, $origin_ex, $admin_revisiterid,$adminid_list);
seller_student.php:        $ret_info["list"]= $this->gen_origin_data($ret_info["list"]);
seller_student.php:                @$f_item["money_all"]="--";
seller_student.php:                @$f_item["first_money"]="--";
seller_student.php:        $data_list=$this->t_seller_student_info->get_channel_statistics_2($start_time, $end_time, $origin, $origin_ex, $admin_revisiterid,$adminid_list);
seller_student.php:            $area_name=substr($a_item["phone_location"], 0, -6);
seller_student.php:        $group_list= $this->t_admin_group_name->get_group_list(2);
seller_student.php:        return $this->pageView(
seller_student.php:        $start_date = $this->get_in_str_val('start_date', date('Y-m-d', time(null)-30*86400));
seller_student.php:        $end_date   = $this->get_in_str_val('end_date', date('Y-m-d', time(null)+86400));
seller_student.php:        $origin = trim($this->get_in_str_val('origin', ""));
seller_student.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
seller_student.php:        $page_num   = $this->get_in_page_num();
seller_student.php:        $ret_info=$this->t_seller_student_info->get_channel_summary($page_num, $start_time, $end_time, $origin, $origin_ex);
seller_student.php:            $item["effective"]    = $item["all_count"]-$item["no_call"]-$item["invalid_count"]-$item["not_connect"];
seller_student.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student.php:            =$this->get_in_order_by_str($order_field_arr ,"account desc");
seller_student.php:        $group_list=$this->t_admin_group_name->get_group_list(2);
seller_student.php:        $groupid=$this->get_in_int_val("groupid", -1);
seller_student.php:        list($start_time,$end_time,$opt_date_str)= $this->get_in_date_range(
seller_student.php:            date("Y-m-01") , 0, 4, [
seller_student.php:        $origin_ex           = $this->get_in_str_val("origin_ex");
seller_student.php:        $ret_info=$this->t_seller_student_info->get_seller_count($opt_date_str, $start_time, $end_time,$origin_ex,$groupid);
seller_student.php:            $item["valid_count"]=$item["call_count"]-  $item["invalid_count"]-$item["no_connect"];
seller_student.php:            $item["account"]=$this->cache_get_account_nick($item["admin_revisiterid"]);
seller_student.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info),["group_list"=>$group_list,"data_ex_list"=>$ret_info]);
seller_student.php:        $acc  = $this->get_account();
seller_student.php:            $ret_id = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
seller_student.php:                $id = $this->t_teacher_lecture_appointment_info->add_all_info(
seller_student.php:        return $this->output_succ(["data"=> $arr_id]);
seller_student.php:                    if ($file->isValid()) {
seller_student.php:                        $tmpName = $file ->getFileName();
seller_student.php:                        $realPath = $file ->getRealPath();
seller_student.php:                        $original_name=$file->getClientOriginalName();
seller_student.php:                        $objPHPExcel = $objReader->load($realPath);
seller_student.php:                        $objPHPExcel->setActiveSheetIndex(0);
seller_student.php:                        $arr=$objPHPExcel->getActiveSheet()->toArray();
seller_student.php:                                $this->t_seller_student_info->add_or_add_to_sub(
seller_student.php:                    if ($file->isValid()) {
seller_student.php:                        $tmpName = $file ->getFileName();
seller_student.php:                        $realPath = $file ->getRealPath();
seller_student.php:                        $original_name=$file->getClientOriginalName();
seller_student.php:                        $objPHPExcel = $objReader->load($realPath);
seller_student.php:                        $objPHPExcel->setActiveSheetIndex(0);
seller_student.php:                        $arr=$objPHPExcel->getActiveSheet()->toArray();
seller_student.php:                                $this->t_seller_student_info->add_or_add_to_sub(
seller_student.php:                    if ($file->isValid()) {
seller_student.php:                        $tmpName = $file ->getFileName();
seller_student.php:                        $realPath = $file -> getRealPath();
seller_student.php:                        $objPHPExcel = $objReader->load($obj_file);
seller_student.php:                        $objPHPExcel->setActiveSheetIndex(0);
seller_student.php:                        $arr=$objPHPExcel->getActiveSheet()->toArray();
seller_student.php:                                $this->t_seller_student_info->add_or_add_to_sub(
seller_student.php:        $phone   = $this->get_in_str_val('phone', '');
seller_student.php:        $op_note = $this->get_in_str_val('op_note', '');
seller_student.php:            return outputJson(array('ret' => -1, 'info' => '回访记录不能为空'));
seller_student.php:        $ret_add = $this->t_seller_student_info->update_book_revisit($phone, $op_note, $sys_operator);
seller_student.php:            return outputJson(array('ret' => -1, 'info' => '系统错误'));
seller_student.php:        $status       = $this->get_in_int_val("status");
seller_student.php:        $phone   = $this->get_in_str_val('phone', '');
seller_student.php:        $old_status=$this->t_seller_student_info->get_status($phone);
seller_student.php:            $account=$this->get_account();
seller_student.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
seller_student.php:                $this->get_in_phone_ex(),
seller_student.php:        $ret_add = $this->t_seller_student_info->update_status($phone, $status);
seller_student.php:            return outputJson(array('ret' => -1, 'info' => '系统错误'));
seller_student.php:        $id           = $this->get_in_int_val("id", "");
seller_student.php:        $nick         = $this->get_in_str_val("nick", "");
seller_student.php:        $subject      = $this->get_in_subject();
seller_student.php:        $grade        = $this->get_in_grade();
seller_student.php:        $user_desc    = $this->get_in_str_val("user_desc", "");
seller_student.php:        $st_application_nick = $this->get_in_str_val("st_application_nick");
seller_student.php:        $status=$this->get_in_int_val("status" ,0);
seller_student.php:        $ass_adminid= $this->get_in_int_val("ass_adminid");
seller_student.php:        $admin_revisiterid= $this->get_in_int_val("admin_revisiterid",0);
seller_student.php:        $st_demand = $this->get_in_str_val("st_demand");
seller_student.php:        $userid = $this->get_in_userid();
seller_student.php:        $set_self_flag=$this->get_in_int_val("set_self_flag",0);
seller_student.php:            $admin_revisiterid= $this->get_account_id();
seller_student.php:        $origin        = $this->get_in_str_val("origin", "");
seller_student.php:        $phone=$this->get_in_phone_ex();
seller_student.php:        $ret = $this->t_seller_student_info->add_or_add_to_sub($nick, $phone, $grade, $origin, $subject, $has_pad, $trial_type, $qq, "",0, true, $admin_revisiterid,$st_application_time, $st_application_nick, $st_demand,$status,$ass_adminid,0,$userid );
seller_student.php:        return $this->output_bool_ret($ret);
seller_student.php:        $phone = $this->get_in_phone();
seller_student.php:        $ret = $this->t_seller_student_info->delete_student($phone);
seller_student.php:        return $this->output_succ();
seller_student.php:        $phone_list_str    = trim($this->get_in_str_val('phone_list', ''));
seller_student.php:        $sub_assign_adminid= $this->get_in_int_val('sub_assign_adminid');
seller_student.php:        $new_admin_nick= $this->cache_get_account_nick($sub_assign_adminid);
seller_student.php:            $old_admin_revisiterid=$this->t_seller_student_info->get_admin_revisiterid($phone);
seller_student.php:            $this->t_book_revisit->add_book_revisit($book_phone, "分配 小组长[$new_admin_nick]", "系统");
seller_student.php:            $ret_seller = $this->t_seller_student_info->field_update_list($phone,[
seller_student.php:                return $this->output_err("");
seller_student.php:        $phone_list_str    = trim($this->get_in_str_val('phone_list', ''));
seller_student.php:        $admin_revisiterid = $this->get_in_int_val('admin_revisiterid');
seller_student.php:        $new_admin_nick= $this->cache_get_account_nick($admin_revisiterid);
seller_student.php:            $old_admin_revisiterid=$this->t_seller_student_info->get_admin_revisiterid($phone);
seller_student.php:                $old_admin_nick=$this->cache_get_account_nick($old_admin_revisiterid);
seller_student.php:                $this->t_book_revisit->add_book_revisit($book_phone, "设置 负责人[$old_admin_nick]=>[$new_admin_nick]", "系统");
seller_student.php:                $this->t_book_revisit->add_book_revisit($book_phone, "设置 负责人[$new_admin_nick]", "系统");
seller_student.php:            $ret_seller = $this->t_seller_student_info->set_seller_info($phone, $admin_revisiterid,$st_application_nick);
seller_student.php:                return $this->output_err("");
seller_student.php:        $phone   = $this->get_in_str_val('phone', '');
seller_student.php:        $op_note = trim($this->get_in_str_val('op_note', ''));
seller_student.php:        $status  = $this->get_in_int_val('status', 0);
seller_student.php:        $note    = $this->get_in_str_val('note', 0);
seller_student.php:        $adminid = $this->get_account_id();
seller_student.php:        $account = $this->get_account();
seller_student.php:        $cancel_flag= $this->get_in_int_val("cancel_flag");
seller_student.php:        $cancel_reason= $this->get_in_str_val("cancel_reason");
seller_student.php:        $old_status=$this->t_seller_student_info->get_status($phone);
seller_student.php:                return $this->output_err("课程取消后,不能修改状态");
seller_student.php:            $ret_update = $this->t_book_revisit->add_book_revisit($this->get_in_phone_ex(), $op_note, $account);
seller_student.php:                return outputJson(array('ret' => -1, 'info' => '系统错误'));
seller_student.php:                $st_application_nick=$this->t_seller_student_info->get_st_application_nick($phone);
seller_student.php:                $this->t_manager_info->send_wx_todo_msg($st_application_nick,"来自:". $account
seller_student.php:            $lessonid=$this->t_seller_student_info->get_st_arrange_lessonid($phone);
seller_student.php:            $lesson_start= $this->t_lesson_info->get_lesson_start($lessonid);
seller_student.php:            $cancel_teacherid= $this->t_lesson_info->get_teacherid($lessonid);
seller_student.php:                $userid= $this->t_lesson_info->get_userid($lessonid);
seller_student.php:                $this->t_test_lesson_log_list->update_test_lesson_status(
seller_student.php:                $this->t_seller_student_info->field_update_list($phone,[
seller_student.php:                $this->t_lesson_info-> delete_test_lesson($lessonid);
seller_student.php:                $this->t_lesson_info->field_update_list($lessonid,[
seller_student.php:                    "confirm_adminid"   =>  $this->get_account_id(),
seller_student.php:            $this->t_seller_student_info->field_update_list($phone,[
seller_student.php:                "cancel_adminid" => $this->get_account_id(),
seller_student.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
seller_student.php:                $this->get_in_phone_ex(),
seller_student.php:        $this->t_seller_student_info->set_first_revisite_time($phone);
seller_student.php:        $this->t_seller_student_info->set_revisit_info($phone, $status, $note, $op_note);
seller_student.php:            $lessonid=$this->t_seller_student_info->get_st_arrange_lessonid($phone);
seller_student.php:                $lesson_start = $this->t_lesson_info->get_lesson_start($lessonid);
seller_student.php:                $lesson_end   = $this->t_lesson_info->get_lesson_start($lessonid);
seller_student.php:                $date_str = date("m月d日 H:i", $lesson_start)."-".date("H:i", $lesson_end);
seller_student.php:                    "public_telphone" => "400-169-3070",
seller_student.php:        $phone          = $this->get_in_str_val('phone', '');
seller_student.php:        $next_revisit_time = $this->get_in_str_val('next_revisit_time', 0);
seller_student.php:        $ret_info = $this->t_seller_student_info->field_update_list(
seller_student.php:        $old_phone   = $this->get_in_str_val('old_phone', '');
seller_student.php:        $grade       = $this->get_in_int_val('grade', 0);
seller_student.php:        $subject     = $this->get_in_int_val('subject', 0);
seller_student.php:        $pad         = $this->get_in_int_val('pad', 0);
seller_student.php:        $nick        = $this->get_in_str_val('nick', "");
seller_student.php:        $origin = $this->get_in_str_val('origin', "");
seller_student.php:        $user_desc =trim($this->get_in_str_val('user_desc', ""));
seller_student.php:        $from_type= $this->get_in_int_val('from_type');
seller_student.php:        $ret_info = $this->t_seller_student_info->update_student_news($grade, $subject, $pad, $nick, $old_phone, $from_type,$user_desc);
seller_student.php:        $this->t_seller_student_info->reset_origin_and_log($old_phone, $origin, $this->get_account());
seller_student.php:        $phone          = $this->get_in_str_val('phone', '');
seller_student.php:        $ret_info = $this->t_seller_student_info->get_show_student_info($phone);
seller_student.php:        $phone          = $this->get_in_phone();
seller_student.php:        $st_class_time  = $this->get_in_str_val("st_class_time");
seller_student.php:        $st_from_school = $this->get_in_str_val("st_from_school");
seller_student.php:        $st_demand      = $this->get_in_str_val("st_demand");
seller_student.php:        $status=$this->t_seller_student_info->get_status($phone);
seller_student.php:            return $this->output_err("已不能设置了");
seller_student.php:        $old_status=$this->t_seller_student_info->get_status($phone);
seller_student.php:            $account=$this->get_account();
seller_student.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
seller_student.php:                $this->get_in_phone_ex(),
seller_student.php:        $this->t_seller_student_info->update_test_lesson_info($phone, $this->get_account(), $st_class_time_s, $st_from_school, $st_demand);
seller_student.php:        $phone = $this->get_in_phone();
seller_student.php:        $row=$this->t_seller_student_info->field_get_list($phone, "*");
seller_student.php:        $userid        = $this->get_in_userid();
seller_student.php:        $phone         = $this->get_in_phone();
seller_student.php:        $grade         = $this->get_in_grade();
seller_student.php:        $subject       = $this->get_in_subject();
seller_student.php:        $address       = $this->get_in_str_val("address");
seller_student.php:        $has_pad       = $this->get_in_int_val("has_pad");
seller_student.php:        $gender        = $this->get_in_int_val("gender");
seller_student.php:        $user_desc     = $this->get_in_str_val("user_desc");
seller_student.php:        $status        = $this->get_in_int_val("status");
seller_student.php:        $stu_nick      = $this->get_in_str_val("stu_nick");
seller_student.php:        $par_nick      = $this->get_in_str_val("par_nick");
seller_student.php:        $editionid     = $this->get_in_int_val("editionid");
seller_student.php:        $school        = $this->get_in_str_val("school");
seller_student.php:        $revisite_info = trim($this->get_in_str_val("revisite_info"));
seller_student.php:        $next_revisit_time     = $this->get_in_str_val("next_revisit_time");
seller_student.php:        $st_class_time         = $this->get_in_str_val("st_class_time");
seller_student.php:        $st_demand             = $this->get_in_str_val("st_demand");
seller_student.php:        $stu_score_info        = $this->get_in_str_val("stu_score_info");
seller_student.php:        $stu_test_lesson_level = $this->get_in_str_val("stu_test_lesson_level");
seller_student.php:        $stu_test_ipad_flag    = $this->get_in_str_val("stu_test_ipad_flag");
seller_student.php:        $stu_character_info    = $this->get_in_str_val("stu_character_info");
seller_student.php:        $stu_request_test_lesson_time_info = $this->get_in_str_val("stu_request_test_lesson_time_info");
seller_student.php:        $stu_request_lesson_time_info      = $this->get_in_str_val("stu_request_lesson_time_info");
seller_student.php:        $has_pad = $this->get_in_str_val("has_pad");
seller_student.php:        $old_status=$this->t_seller_student_info->get_status($phone);
seller_student.php:            $account=$this->get_account();
seller_student.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
seller_student.php:                $this->get_in_phone_ex(),
seller_student.php:        $this->cache_del_student_nick($userid);
seller_student.php:        if ( ! $this->t_student_info->get_assistantid($userid) ) {
seller_student.php:        $this->t_student_info->field_update_list($userid, $set_arr);
seller_student.php:        $this->t_seller_student_info->field_update_list(
seller_student.php:            $ret_update = $this->t_book_revisit->add_book_revisit($this->get_in_phone_ex(), $revisite_info, $this->get_account());
seller_student.php:                return $this->output_err("系统错误");
seller_student.php:        $this->t_seller_student_info->set_first_revisite_time($phone);
seller_student.php:        $this->t_seller_student_info->set_revisit_info($phone, $status, $user_desc, $revisite_info);
seller_student.php:        return $this->output_succ();
seller_student.php:        $phone   = $this->get_in_phone();
seller_student.php:        $userid  = $this->get_in_userid();
seller_student.php:        $seller  = $this->t_seller_student_info->field_get_list($phone, "*");
seller_student.php:        $student = $this->t_student_info->field_get_list($userid, "*");
seller_student.php:            'Y-m-d H:i'
seller_student.php:            $ret["address"]=substr($seller["phone_location"], 0, -6);
seller_student.php:        $ret["st_class_time"]    = \App\Helper\Utils::unixtime2date($seller["st_class_time"], 'Y-m-d H:i');
seller_student.php:        list($start_time,$end_time, $opt_date_str)=$this->get_in_date_range(
seller_student.php:            -7, 0, 1, [
seller_student.php:        $origin              = trim($this->get_in_str_val('origin', ''));
seller_student.php:        $grade               = $this->get_in_grade();
seller_student.php:        $subject             = $this->get_in_subject();
seller_student.php:        $phone               = trim($this->get_in_str_val('phone', ''));
seller_student.php:        $st_application_nick = $this->get_in_str_val('st_application_nick', "");
seller_student.php:        $status              = $this->get_in_int_val('status', -3);
seller_student.php:        $from_type           = $this->get_in_int_val('from_type', -1);
seller_student.php:        $st_arrange_lessonid = $this->get_in_int_val('st_arrange_lessonid', -1);
seller_student.php:        $page_num            = $this->get_in_page_num();
seller_student.php:        $origin_ex           = $this->get_in_str_val("origin_ex");
seller_student.php:        $userid              = $this->get_in_userid(-1);
seller_student.php:        $teacherid           = $this->get_in_teacherid(-1);
seller_student.php:        $confirm_flag        = $this->get_in_int_val("confirm_flag",-1);
seller_student.php:        $require_user_type   = $this->get_in_int_val("require_user_type",-1);
seller_student.php:        $test_lesson_cancel_flag = $this->get_in_int_val("test_lesson_cancel_flag", -1, E\Etest_lesson_cancel_flag::class );
seller_student.php:        $ass_adminid_flag        = $this->get_in_int_val("ass_adminid_flag",-1,E\Eboolean::class);
seller_student.php:        $id_start = ($page_num["page_num"]-1)*10;
seller_student.php:        $time     = strtotime("2016-10-15");
seller_student.php:        $ret_info = $this->t_seller_student_info->test_lesson_get_list(
seller_student.php:                $this->t_seller_student_info->field_update_list( $item["phone"], [
seller_student.php:            $this->cache_set_item_account_nick($item,"cancel_adminid","cancel_admin_nick" );
seller_student.php:            $this->cache_set_item_teacher_nick($item, "assigned_teacherid", "assigned_teacher_nick");
seller_student.php:            $this->cache_set_item_teacher_nick($item, "cancel_teacherid", "cancel_teacher_nick");
seller_student.php:            $item["teacher_nick"]=$this->cache_get_teacher_nick($item["teacherid"]);
seller_student.php:                    $item['st_test_paper_str'] = "老师已下载".date("Y-m-d H:i",$download_time);
seller_student.php:            $item["admin_revisiterid_nick"] = $this->cache_get_account_nick($item["admin_revisiterid"]);
seller_student.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student.php:        $this->set_in_value("st_application_nick",$this->get_account() );
seller_student.php:        return $this->test_lesson_list();
seller_student.php:        $userid             = $this->get_in_userid(-1);
seller_student.php:        $teacherid          = $this->get_in_teacherid(-1);
seller_student.php:        $del_flag = $this->get_in_int_val("del_flag", 0);
seller_student.php:        $phone = trim($this->get_in_phone());
seller_student.php:        $subject            = $this->get_in_subject(-1);
seller_student.php:        $st_application_id  = $this->get_in_int_val("st_application_id", -1);
seller_student.php:        $test_lesson_status = $this->get_in_int_val("test_lesson_status", -1);
seller_student.php:        list($start_time,$end_time, $date_type_str)= $this->get_in_date_range(
seller_student.php:            -7, 0, 1, [
seller_student.php:        $page_num           = $this->get_in_page_num();
seller_student.php:        $ret_list           = $this->t_test_lesson_log_list->get_log_list($page_num, $userid, $start_time, $end_time, $teacherid, $st_application_id, $subject, $phone, $test_lesson_status, $del_flag, $date_type_str);
seller_student.php:            $this->cache_set_item_student_nick($item);
seller_student.php:            $this->cache_set_item_teacher_nick($item, "teacherid");
seller_student.php:            $this->cache_set_item_account_nick($item, "test_lesson_bind_adminid", "test_lesson_bind_admin_nick");
seller_student.php:            $this->cache_set_item_account_nick($item, "st_application_id", "st_application_nick");
seller_student.php:        return $this->Pageview(__METHOD__, $ret_list);
seller_student.php:        $phone=$this->get_in_phone();
seller_student.php:        $st_arrange_lessonid =$this->get_in_int_val("st_arrange_lessonid", 0);
seller_student.php:        $test_lesson_bind_adminid=$this->get_account_id();
seller_student.php:        $test_lesson_info=$this->t_lesson_info->field_get_list($st_arrange_lessonid, "*");
seller_student.php:            return $this->output_err("要试听课才行!". $test_lesson_info["lesson_type"] ."!");
seller_student.php:        $seller_student_info=$this->t_seller_student_info->field_get_list($phone, "*");
seller_student.php:            return $this->output_err("科目不对!,请到排课中修改科目");
seller_student.php:            return $this->output_err("年级不对!,请到排课中修改年级");
seller_student.php:            return $this->output_err("已经排过了,而且已上课,不能重新绑定");
seller_student.php:            return $this->output_err("课程取消,不能重新绑定");
seller_student.php:        if($this->t_test_lesson_log_list->check_test_lesson_existed(
seller_student.php:            return $this->output_err("请修改时间,之前已经有同一时间的课程了, 或者已经绑定了");
seller_student.php:        $row=$this->t_lesson_info->field_get_list($st_arrange_lessonid, "lesson_start,lesson_end,teacherid");
seller_student.php:        $this->t_seller_student_info->reset_status_and_log($phone, E\Ebook_status::V_TEST_LESSON_SET_LESSON, $this->get_account());
seller_student.php:        $this->t_seller_student_info->field_update_list(
seller_student.php:        $origin=$this->t_seller_student_info->get_origin($phone);
seller_student.php:        $this->t_lesson_info->field_update_list(
seller_student.php:        $this->t_test_lesson_log_list->add_log($phone);
seller_student.php:            $st_application_nick=$this->t_seller_student_info->get_st_application_nick($phone);
seller_student.php:            $nick=$this->t_seller_student_info->get_nick($phone);
seller_student.php:            $admin_info=$this->t_manager_info-> get_info_by_account($st_application_nick);
seller_student.php:                $tea_nick=$this->cache_get_teacher_nick($row["teacherid"]);
seller_student.php:                $this->t_manager_info->send_wx_todo_msg($st_application_nick,"来自:". $this->get_account()
seller_student.php:        return $this->output_succ();
seller_student.php:        $phone=$this->get_in_phone();
seller_student.php:        $st_test_paper =$this->get_in_str_val("st_test_paper", "");
seller_student.php:        $this->t_seller_student_info->field_update_list(
seller_student.php:        $phone=$this->get_in_phone();
seller_student.php:        if ($this->t_seller_student_info->check_phone_existed($phone)) {
seller_student.php:                $phone=$tmp. "-".$i;
seller_student.php:                    return $this->output_err("ERROR");
seller_student.php:            } while ($this->t_seller_student_info->check_phone_existed($phone));
seller_student.php:        $this->t_seller_student_info->add_test_user($this->get_account(), $phone);
seller_student.php:        $key1 = trim($this->get_in_str_val('key1', ''));
seller_student.php:        $key2 = trim($this->get_in_str_val('key2', ''));
seller_student.php:        $key3 = trim($this->get_in_str_val('key3', ''));
seller_student.php:        $key4 = trim($this->get_in_str_val('key4', ''));
seller_student.php:        $value = trim($this->get_in_str_val('value', ''));
seller_student.php:        $origin_level = $this->get_in_int_val('origin_level');
seller_student.php:        $this->t_origin_key->add_origin_key($key1, $key2, $key3, $key4, $value,$origin_level,$create_time);
seller_student.php:        $key1 = trim($this->get_in_str_val('key1', ''));
seller_student.php:        $key2 = trim($this->get_in_str_val('key2', ''));
seller_student.php:        $key3 = trim($this->get_in_str_val('key3', ''));
seller_student.php:        $key4 = trim($this->get_in_str_val('key4', ''));
seller_student.php:        $value = trim($this->get_in_str_val('value', ''));
seller_student.php:        $old_value = trim($this->get_in_str_val('old_value', ''));
seller_student.php:        $origin_level = $this->get_in_int_val('origin_level');
seller_student.php:        $db_value= $this->t_origin_key-> get_origin_key_value ($key1, $key2,$key3,$key4 );
seller_student.php:            return $this->output_err("$key1, $key2,$key3,$key4 => 已经绑定到 $db_value, 换个key4试试");
seller_student.php:        $ret_info=$this->t_origin_key->edit_origin_key($old_value, $key1, $key2, $key3, $key4, $value,$origin_level);
seller_student.php:        return $this->output_succ();
seller_student.php:        $key1 = trim($this->get_in_str_val('key1', ''));
seller_student.php:        $key2 = trim($this->get_in_str_val('key2', ''));
seller_student.php:        $key3 = trim($this->get_in_str_val('key3', ''));
seller_student.php:        $key4 = trim($this->get_in_str_val('key4', ''));
seller_student.php:        $origin_level = $this->get_in_int_val('origin_level');
seller_student.php:        $ret_info=$this->t_origin_key->edit_origin_level_batch( $key1, $key2, $key3, $key4, $origin_level);
seller_student.php:        return $this->output_succ();
seller_student.php:        $value = $this->get_in_str_val('value', '');
seller_student.php:        $row=$this->t_origin_key->field_get_list($value, "*");
seller_student.php:        $value = $this->get_in_str_val('value', '');
seller_student.php:        $this->t_origin_key->delete_origin_key($value);
seller_student.php:        $page_num   = $this->get_in_page_num();
seller_student.php:        $ret_info=$this->t_origin_key->get_key1_info($page_num);
seller_student.php:        $telphone = $this->get_in_str_val('telphone');
seller_student.php:        $ret_info= $this->t_seller_student_info->get_seller_info($telphone);
seller_student.php:        $telphone = $this->get_in_str_val('telphone');
seller_student.php:        $origin   = $this->get_in_str_val('origin');
seller_student.php:        $seller   = $this->get_in_int_val('seller');
seller_student.php:        $userid = $this->t_student_info->get_userid_by_appstore($telphone);
seller_student.php:        $this->t_student_info->update_originid_app($userid, $origin, $seller);
seller_student.php:        $seller_student_id=$this->get_in_str_val("seller_student_id");
seller_student.php:        $page_num=$this->get_in_page_num();
seller_student.php:        $seller_student_info=$this->t_seller_student_info->get_test_lesson_info($seller_student_id);
seller_student.php:            return $this->error_view(
seller_student.php:            $this->cache_set_item_teacher_nick($seller_student_info, "assigned_teacherid", "assigned_teacher_nick");
seller_student.php:            \App\Helper\Utils::unixtime2date_for_item($seller_student_info, "st_class_time", "", "Y-m-d H:i");
seller_student.php:            //$ret_info=$this->t_test_lesson_assign_teacher->get_list_by_seller_student_id($page_num,$seller_student_id);
seller_student.php:            $this->t_teacher_closest-> gen_top_to_test_lesson(
seller_student.php:            $ret_info=$this->t_test_lesson_assign_teacher->get_list_by_seller_student_id($page_num, $seller_student_id);
seller_student.php:                $this->cache_set_item_teacher_nick($item);
seller_student.php:                $this->cache_set_item_account_nick($item, "assign_adminid", "assign_admin_nick");
seller_student.php:            return $this->pageView(__METHOD__, $ret_info, ["seller_student_info"=>$seller_student_info]);
seller_student.php:        $id                = $this->get_in_id();
seller_student.php:        $seller_student_id = $this->get_in_int_val("seller_student_id");
seller_student.php:        $openid           = $this->get_in_str_val("openid");
seller_student.php:        $url="https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=$token";
seller_student.php:            $this->t_test_lesson_assign_teacher->field_update_list(
seller_student.php:                "assign_adminid"   => $this->get_account_id(),
seller_student.php:            return $this->output_succ();
seller_student.php:            return $this->output_err("发送失败:".json_encode($ret));
seller_student.php:        $id=$this->get_in_id();
seller_student.php:        $test_lesson_status=$this->get_in_int_val("test_lesson_status");
seller_student.php:        $reason=$this->get_in_str_val("reason");
seller_student.php:        $del_flag=$this->get_in_int_val("del_flag");
seller_student.php:        $this->t_test_lesson_log_list->field_update_list(
seller_student.php:        return $this->output_succ();
seller_student.php:        $userid=$this->get_in_userid(0);
seller_student.php:        $phone=$this->get_in_phone();
seller_student.php:        $this->t_seller_student_info->field_update_list(
seller_student.php:        return $this->output_succ();
seller_student.php:        $lessonid=$this->get_in_int_val("lessonid");
seller_student.php:        $require_id = $this->t_test_lesson_subject_sub_list->get_require_id($lessonid);
seller_student.php:        $stu_info   = $this->t_test_lesson_subject_require->get_stu_performance_for_seller($require_id);
seller_student.php:            $stu_info=$this->t_seller_student_info->get_stu_performance_for_seller($lessonid);
seller_student.php:        //list($start_time,$end_time)= $this->get_in_date_range(-7,0 );
seller_student.php:        $page_num   = $this->get_in_page_num();
seller_student.php:        $grade=$this->get_in_grade(-1);
seller_student.php:        $has_pad=$this->get_in_has_pad(-1);
seller_student.php:        $subject=$this->get_in_subject(-1);
seller_student.php:        $origin=trim($this->get_in_str_val("origin",""));
seller_student.php:        $ret_info= $this->t_seller_student_info->get_no_called_list($page_num, $this->get_account_id(), $grade, $has_pad, $subject,$origin );
seller_student.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student.php:        $adminid= $this->get_account_id();
seller_student.php:        $seller_level=  $this->t_manager_info->get_seller_level( $adminid);
seller_student.php:            return $this->output_err(-1,["info"=>"请先设置咨询师等级"]);
seller_student.php:            return $this->output_err(-1,["info"=>"对不起,您本周的名额已达上限"]);
seller_student.php:        $userid=$this->get_in_userid();
seller_student.php:        $info=$this->t_student_info->field_get_list($userid,"*");
seller_student.php:        $admin_revisiterid= $this->get_account_id();
seller_student.php:        $this->t_seller_student_info->add_or_add_to_sub($nick,$phone,$grade,$origin,$subject,$has_pad,$trial_type,$qq,$user_desc,$add_time,$add_to_main_flag,$admin_revisiterid,$st_application_time,$st_application_nick,$st_demand,$status,$ass_adminid,$seller_resource_type);
seller_student.php:        $this->t_student_info->field_update_list($userid,[
seller_student.php:            "last_revisit_adminid"    => $this->get_account_id(),
seller_student.php:        return $this->output_succ();
seller_student.php:        $phone =$this->get_in_phone();
seller_student.php:        $no_call_count=$this->t_seller_student_info->get_no_call_count($this->get_account_id());
seller_student.php:            return $this->output_err("你已经有50个未回访的用户了,先去回访吧:<");
seller_student.php:        $admin_assign_time= $this->t_seller_student_info->get_admin_assign_time($phone);
seller_student.php:        $status= $this->t_seller_student_info->get_status($phone);
seller_student.php:        if ($admin_assign_time > $now-4*86400
seller_student.php:            return $this->output_err("已经被抢了");
seller_student.php:        $this->t_seller_student_info->field_update_list($phone,[
seller_student.php:            "admin_revisiterid" => $this->get_account_id() ,
seller_student.php:        $account= $this->get_account();
seller_student.php:        $ret_update = $this->t_book_revisit->add_book_revisit(
seller_student.php:            $this->get_in_phone_ex(),
seller_student.php:        return $this->output_succ();
seller_student.php:        $end_time              = time(NULL)-60*86400;
seller_student.php:        $start_time            = $end_time-240*86400;
seller_student.php:        $page_num              = $this->get_in_page_num();
seller_student.php:        $grade                 = $this->get_in_grade(-1);
seller_student.php:        $adminid= $this->get_account_id();
seller_student.php:        $seller_level=  $this->t_manager_info->get_seller_level( $adminid);
seller_student.php:        $last_count = $level_limit_count - $json_ret['opt_count'];
seller_student.php:        $ret_info= $this->t_student_info->get_test_lesson_lost_user_list( $page_num,$grade,$start_time,$end_time, $can_reset_seller_flag,false);
seller_student.php:        return $this->pageView(__METHOD__, $ret_info, [
seller_student.php:        list($start_time,$end_time)= $this->get_in_date_range(
seller_student.php:        $page_num= $this->get_in_page_num();
seller_student.php:        $ret_info=$this->t_lesson_info -> get_no_binding_test_lesson_list ( $page_num, $start_time,$end_time);
seller_student.php:            $this->cache_set_item_student_nick($item);
seller_student.php:            $this->cache_set_item_teacher_nick($item);
seller_student.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student.php:        list($start_time,$end_time) = $this->get_in_date_range(-90,0);
seller_student.php:        $ass_adminid = $this->get_in_int_val("ass_adminid", -1);
seller_student.php:        $page_num    = $this->get_in_page_num();
seller_student.php:        $ret_info=$this->t_seller_student_info->ass_get_list( $page_num ,$start_time,$end_time ,$ass_adminid );
seller_student.php:            $this->cache_set_item_account_nick($item,"ass_adminid","ass_admin_nick");
seller_student.php:            $this->cache_set_item_student_nick($item,"origin_userid","origin_user_nick");
seller_student.php:            $this->cache_set_item_account_nick($item, "admin_revisiterid", "admin_revisiterid_nick" );
seller_student.php:        return $this->pageView(__METHOD__, $ret_info);
seller_student.php:        $this->set_in_value("ass_adminid", $this->get_account_id() );
seller_student.php:        return $this->ass_add_student_list();
seller_student.php:        $this->set_in_value("ass_adminid", $this->get_account_id() );
seller_student.php:        return $this->ass_add_student_list();
seller_student.php:        $phone = $this->get_in_str_val("phone");
seller_student.php:        $ret_info = $this->t_seller_student_info->get_seller_student_info($phone);
seller_student.php:            return $this->output_err(-1,["info"=>"该学生没有期待试听时间!"]);
seller_student.php:        $teacher_list = $this->t_teacher_closest->get_test_lesson_teacher_list($ret_info['subject'],$ret_info['grade']);
seller_student.php:            return $this->output_err(-1,["info"=>"没有该年级,学科的老师!"]);
seller_student.php:        $day        = date("Y-m-d",$stu_time);
seller_student.php:        $check_teacher_list = $this->check_teacher_list($teacher_list,$day,$start_hour,$end_hour);
seller_student.php:        return $this->output_succ(["data"=>$check_teacher_list,"stu_info"=>$ret_info]);
seller_student.php:                $teacher_info['tea_nick']  = $this->cache_get_teacher_nick($val['teacherid']);
seller_student.php:        $phone        = $this->get_in_str_val("phone");
seller_student.php:        $grade        = $this->get_in_int_val("grade");
seller_student.php:        $subject      = $this->get_in_int_val("subject");
seller_student.php:        $stu_time     = $this->get_in_str_val("stu_time");
seller_student.php:        $lesson_start = $this->get_in_str_val("lesson_start");
seller_student.php:        $lesson_end   = $this->get_in_str_val("lesson_end");
seller_student.php:        $teacherid    = $this->get_in_int_val("teacherid");
seller_student.php:            return $this->output_err("课程时间不能为空!");
seller_student.php:        $ret_row=$this->t_lesson_info->check_teacher_time_free($teacherid,0,$start_time,$end_time);
seller_student.php:            return $this->output_err("<div>有现存的老师课程与该课程时间冲突！"
seller_student.php:            return $this->output_err("课程时间出错,请检查学生预约时间");
seller_student.php:        $real_phone = explode("-",$phone);
seller_student.php:        $userid     = $this->t_student_info->get_userid_by_phone($real_phone[0]);
seller_student.php:            return $this->output_err("用户未注册!");
seller_student.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
seller_student.php:        $lessonid     = $this->t_lesson_info->add_lesson(0,0,$userid,0,2,$teacherid,0,
seller_student.php:            $adminid=$this->get_account_id();
seller_student.php:            $this->t_seller_student_info->field_update_list($phone,[
seller_student.php:            return $this->output_succ();
seller_student.php:            return $this->output_err("添加失败,请重试");
small_class.php:        $teacherid   = $this->get_in_int_val("teacherid",-1);
small_class.php:        $assistantid = $this->get_in_int_val("assistantid",-1);
small_class.php:        $start_time  = $this->get_in_str_val('start_time',date('Y-m-d', time()-86400*7));
small_class.php:        $end_time    = $this->get_in_str_val('end_time',date('Y-m-d', time()+86400));
small_class.php:        $courseid    = $this->get_in_courseid(-1);
small_class.php:        $page_num    = $this->get_in_page_num();
small_class.php:        $group_flag  = $this->get_in_str_val("group_flag");
small_class.php:        $ret_info = $this->t_course_order->get_courses_ex($teacherid,$assistantid,$course_type,$start_time_s,$end_time_s
small_class.php:            $item["stu_current"] = $this->t_small_class_user->get_small_class_user_count($item["courseid"]);
small_class.php:        return $this->pageView(__METHOD__,$ret_info ,[
small_class.php:        $assistantid=$this->t_assistant_info->get_assistantid($this->get_account());
small_class.php:            $assistantid = -1;
small_class.php:        $this->set_in_value("assistantid", $assistantid);
small_class.php:        $this->set_in_value("group_flag","assistant");
small_class.php:        return $this->index();
small_class.php:        $courseid=$this->get_in_str_val("courseid");
small_class.php:        $lessonid = $this->get_in_lessonid(-1);
small_class.php:        $page_num = $this->get_in_page_num();
small_class.php:        $ret_list = $this->t_lesson_info->get_lesson_list_new($courseid,$lessonid,$page_num);
small_class.php:            return $this->error_view(
small_class.php:                $item["teacher_nick"]   = $this->cache_get_teacher_nick( $item["teacherid"]);
small_class.php:                $item["assistant_nick"] = $this->cache_get_assistant_nick( $item["assistantid"]);
small_class.php:                $item["lesson_time"]    = date("Y-m-d H:i", $item['lesson_start']) . '-' . date("H:i", $item['lesson_end']);
small_class.php:        return $this->pageView(__METHOD__, $ret_list);
small_class.php:        return $this->lesson_list_new();
small_class.php:        $lessonid  = $this->get_in_lessonid();
small_class.php:        $page_num  = $this->get_in_page_num();
small_class.php:        $ret_list=$this->t_small_lesson_info->small_class_get_lesson_student_list(
small_class.php:            return $this->error_view(
small_class.php:                $item["student_nick"] = $this->cache_get_student_nick($item["studentid"]);
small_class.php:        return $this->pageView(__METHOD__, $ret_list);
small_class.php:        return $this->student_list_new();
small_class.php:        $config_courseid = $this->get_in_int_val("courseid");
small_class.php:        $count= $this->t_order_info->count_config_courseid($config_courseid);
small_class.php:        $courseid = $this->get_in_int_val('courseid');
small_class.php:        $ret = $this->t_course_order->update_course($courseid);
small_class.php:        $type = $this->get_in_int_val('type',0);
small_class.php:        $ret_list = $this->t_pic_manage_info->get_teacher_clothes_list($type);
small_class.php:        $teacherid = $this->get_in_int_val('teacherid',0);
small_class.php:        $lessonid  = $this->get_in_int_val('lessonid',0);
small_class.php:            $ret_info = $this->t_teacher_info->field_get_list($teacherid,'gender,clothes');
small_class.php:            $ret_info = $this->t_lesson_info->get_teacher_clothes_info($lessonid,$teacherid);
small_class.php:        $id = $this->get_in_int_val('id');
small_class.php:        $ret_info = $this->t_pic_manage_info->get_url($id);
small_class.php:        $lessonid  = $this->get_in_int_val('lessonid',0);
small_class.php:        $teacherid = $this->get_in_int_val('teacherid',0);
small_class.php:        $clothes   = $this->get_in_int_val('clothes',0);
small_class.php:        $all_type  = $this->get_in_str_val('all_type','');
small_class.php:            $ret = $this->t_teacher_info->field_update_list($teacherid,$set_field_arr);
small_class.php:            $ret = $this->t_lesson_info->set_teacher_clothes($lessonid,$clothes);
small_class.php:            $ret= $this->t_lesson_info->field_update_list($lessonid,$set_field_arr);
small_class.php:        $courseid     = $this->get_in_int_val("courseid");
small_class.php:        $userid       = $this->get_in_int_val("userid");
small_class.php:        $is_change    = $this->get_in_int_val("is_change");
small_class.php:        $old_courseid = $this->get_in_int_val("old_courseid");
small_class.php:            return $this->output_err("用户或小班课id出错!");
small_class.php:        $phone = $this->t_student_info->get_phone($userid);
small_class.php:            return $this->output_err("用户不存在!");
small_class.php:            $new_lessonid = $this->t_lesson_info->get_lessonid_list($courseid,0);
small_class.php:            $this->t_small_lesson_info->start_transaction();
small_class.php:                $ret = $this->t_small_lesson_info->check_user($new_val['lessonid'],$userid);
small_class.php:                    $new_insert_ret = $this->t_small_lesson_info->row_insert([
small_class.php:                    $this->check_succ($new_insert_ret,"加入学生出错!");
small_class.php:            $new_ret = $this->t_small_class_user->check_user($courseid,$userid);
small_class.php:                $new_insert_ret = $this->t_small_class_user->row_insert([
small_class.php:                $this->check_succ($new_insert_ret,"加入课程时出错!");
small_class.php:            $old_lessonid = $this->t_lesson_info->get_lessonid_list($old_courseid,0);
small_class.php:                $ret = $this->t_small_lesson_info->check_user($old_val['lessonid'],$userid);
small_class.php:                    $del_ret=$this->t_small_lesson_info->row_delete_2($old_val['lessonid'],$userid);
small_class.php:                $this->check_succ($del_ret,"移除学生出错!");
small_class.php:            $old_ret = $this->t_small_class_user->check_user($old_courseid,$userid);
small_class.php:                $del_ret=$this->t_small_class_user->row_delete_2($old_courseid,$userid);
small_class.php:                $this->check_succ($del_ret,"移除学生课程出错!");
small_class.php:        $this->t_small_class_user->commit();
small_class.php:        return $this->output_succ();
small_class.php:                $this->t_small_class_user->rollback();
small_class.php:                return $this->output_succ($err_info);
ss_deal2.php:        $adminid= $this->get_account_id();
ss_deal2.php:        $userid= $this->get_in_userid();
ss_deal2.php:        $tq_called_flag= $this->t_seller_student_new->get_tq_called_flag($old_userid);
ss_deal2.php:            return $this->output_err("当前例子还未拨通!");
ss_deal2.php:        return $this->output_succ();
ss_deal2.php:        $page_info = $this->get_in_page_info();
ss_deal2.php:        $userid= $this->get_in_userid();
ss_deal2.php:        $ret_info= $this->t_test_subject_free_list->get_list_by_userid($page_info, $userid );
ss_deal2.php:            $this->cache_set_item_account_nick($item);
ss_deal2.php:        return $this->output_ajax_table ($ret_info);
ss_deal2.php:        $page_info = $this->get_in_page_info();
ss_deal2.php:        list($start_time, $end_time) = $this->get_in_date_range(0,0);
ss_deal2.php:        $opt_type_str                = $this->get_in_str_val("opt_type_str");
ss_deal2.php:        $key1 = $this->get_in_str_val("key1");
ss_deal2.php:        $key2 = $this->get_in_str_val("key2");
ss_deal2.php:        $key3 = $this->get_in_str_val("key3");
ss_deal2.php:        $key4 = $this->get_in_str_val("key4");
ss_deal2.php:        $ret_info= $this->t_seller_student_new ->get_origon_list( $page_info, $start_time, $end_time,$opt_type_str, $origin_ex) ;
ss_deal2.php:        return $this->output_ajax_table ($ret_info);
ss_deal2.php:        $userid=$this->get_in_userid();
ss_deal2.php:        $this->t_seller_student_new->row_delete($userid);
ss_deal2.php:        $this->t_test_lesson_subject->del_by_userid( $userid );
ss_deal2.php:        return $this->output_succ() ;
ss_deal2.php:        $userid=$this->get_in_userid();
ss_deal2.php:        $this->t_seller_student_new->reset_sys_invaild_flag($userid);
ss_deal2.php:        return $this->output_succ() ;
ss_deal2.php:        $page_info = $this->get_in_page_info();
ss_deal2.php:        list($start_time, $end_time) = $this->get_in_date_range(0,0);
ss_deal2.php:        $opt_type_str                = $this->get_in_str_val("opt_type_str");
ss_deal2.php:        $key1 = $this->get_in_str_val("key1");
ss_deal2.php:        $key2 = $this->get_in_str_val("key2");
ss_deal2.php:        $key3 = $this->get_in_str_val("key3");
ss_deal2.php:        $key4 = $this->get_in_str_val("key4");
ss_deal2.php:        $this->t_seller_student_new->switch_tongji_database();
ss_deal2.php:        $ret_info= $this->t_seller_student_new->get_origon_list_bd2( $page_info, $start_time, $end_time,$opt_type_str, $origin_ex) ;
ss_deal2.php:        return $this->output_ajax_table ($ret_info);
ss_deal2.php:        $tmk_adminid = $this->get_in_int_val('tmk_adminid');
ss_deal2.php:        $start_time  = strtotime($this->get_in_str_val('start_time'));
ss_deal2.php:        $end_time    = strtotime($this->get_in_str_val('end_time'));
ss_deal2.php:        $ret = $this->t_seller_student_new->get_tmk_assign_time_by_adminid($tmk_adminid, $start_time, $end_time);
ss_deal2.php:            $item['nick'] = $this->t_student_info->get_nick($item['userid']);
ss_deal2.php:        return $this->output_succ(['data'=>$ret]);
ss_deal2.php:        $orderid  = $this->get_in_int_val("orderid");
ss_deal2.php:        $mail_code_url = $this->get_in_str_val("mail_url");
ss_deal2.php:        // $this->t_order_info->field_update_list($orderid,[
ss_deal2.php:        return $this->output_succ(['data'=>$mail_code_url]);
ss_deal.php:        return $this->get_in_int_val("test_lesson_subject_id",$default_value);
ss_deal.php:        return $this->get_in_int_val("require_id");
ss_deal.php:        $phone    = $this->get_in_phone();
ss_deal.php:        $origin   = $this->get_in_str_val("origin");
ss_deal.php:        $grade    = $this->get_in_grade();
ss_deal.php:        $subject  = $this->get_in_subject();
ss_deal.php:        $tmk_flag = $this->get_in_int_val("tmk_flag", 0);
ss_deal.php:            return $this->output_err("电话号码长度不对");
ss_deal.php:        $userid=$this->t_phone_to_user->get_userid_by_phone($phone);
ss_deal.php:        if ($this->t_test_lesson_subject->check_subject($userid,$subject))  {
ss_deal.php:            return $this->output_err("已经有了这个科目的例子了,不能增加");
ss_deal.php:        $userid=$this->t_seller_student_new->book_free_lesson_new("",$phone,$grade,$origin,$subject,0);
ss_deal.php:            $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:                "tmk_adminid"  => $this->get_account_id(),
ss_deal.php:                $account=$this->get_account();
ss_deal.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid_list_str= $this->get_in_str_val("userid_list");
ss_deal.php:        $origin_level= $this->get_in_e_origin_level();
ss_deal.php:            return $this->output_err("还没选择例子");
ss_deal.php:        $this->t_seller_student_new->set_level_b($userid_list, $origin_level );
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $opt_type=$this->get_in_opt_type(0);
ss_deal.php:        $opt_adminid=$this->get_in_int_val("opt_adminid", 0);
ss_deal.php:        $userid_list_str= $this->get_in_str_val("userid_list");
ss_deal.php:            return $this->output_err("还没选择例子");
ss_deal.php:        $account=$this->get_account();
ss_deal.php:            $this->t_seller_student_new->free_to_new_user($userid,$account);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $opt_type=$this->get_in_opt_type(0);
ss_deal.php:        $origin=$this->get_in_str_val("origin");
ss_deal.php:        if (!$this->check_account_in_arr(["jim","amanda"]))  {
ss_deal.php:            return $this->output_err("没有权限");
ss_deal.php:        $userid_list_str= $this->get_in_str_val("userid_list");
ss_deal.php:            return $this->output_err("还没选择例子");
ss_deal.php:        $this->t_student_info->update_origin_list($userid_list,$origin) ;
ss_deal.php:        return $this->output_succ();
ss_deal.php:            return $this->output_err("还没选择例子");
ss_deal.php:        $this->t_seller_student_new->set_admin_info(
ss_deal.php:            $opt_type, $userid_list,  $opt_adminid, $this->get_account_id() );
ss_deal.php:        $account=$this->get_account();
ss_deal.php:        $opt_account=$this->t_manager_info->get_account($opt_adminid);
ss_deal.php:            $phone=$this->t_seller_student_new->get_phone($userid);
ss_deal.php:                $ret_update = $this->t_book_revisit->add_book_revisit(
ss_deal.php:                $this->t_id_opt_log->add(E\Edate_id_log_type::V_SELLER_ASSIGNED_COUNT
ss_deal.php:                $ret_update = $this->t_book_revisit->add_book_revisit(
ss_deal.php:                $ret_update = $this->t_book_revisit->add_book_revisit(
ss_deal.php:        $opt_type=$this->get_in_opt_type(0);
ss_deal.php:        $opt_adminid=$this->get_in_int_val("opt_adminid", 0);
ss_deal.php:        $userid_list_str= $this->get_in_str_val("userid_list");
ss_deal.php:            return $this->output_err("还没选择例子");
ss_deal.php:        $account=$this->get_account();
ss_deal.php:        $opt_account=$this->t_manager_info->get_account($opt_adminid);
ss_deal.php:        $this->t_manager_info->send_wx_todo_msg( $opt_account ,"来自:".$account, "分配给你". count($userid_list)."个例子"  );
ss_deal.php:            $this->t_seller_student_new->set_admin_info_new(
ss_deal.php:                $opt_type, $userid,  $opt_adminid, $this->get_account_id(), $opt_account, $account  );
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $accept_adminid=$this->get_in_int_val("accept_adminid", 0);
ss_deal.php:        $require_id_list_str= $this->get_in_str_val("require_id_list");
ss_deal.php:            return $this->output_err("还没选择课");
ss_deal.php:        $require_assign_adminid=$this->get_account_id();
ss_deal.php:            $this->t_test_lesson_subject_require->field_update_list($require_id,["require_assign_adminid"=>$require_assign_adminid,"require_assign_time"=>$require_assign_time,"accept_adminid"=>$accept_adminid]);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid= $this->get_in_userid();
ss_deal.php:        $test_lesson_subject_id = $this->get_in_test_lesson_subject_id();
ss_deal.php:        $student = $this->t_student_info->field_get_list($userid, "*");
ss_deal.php:            return $this->
ss_deal.php:        //$this->t_admin_group->
ss_deal.php:        $ss_item = $this->t_seller_student_new->field_get_list($userid,"*");
ss_deal.php:        $tt_item = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"*");
ss_deal.php:            'Y-m-d H:i'
ss_deal.php:        $ret["stu_request_test_lesson_time"]    = \App\Helper\Utils::unixtime2date($tt_item["stu_request_test_lesson_time"], 'Y-m-d H:i');
ss_deal.php:        return $this->output_succ(["data" => $ret ]);
ss_deal.php:        $userid                         = $this->get_in_userid();
ss_deal.php:        $phone                          = $this->get_in_phone();
ss_deal.php:        $test_lesson_subject_id         = $this->get_in_test_lesson_subject_id();
ss_deal.php:        $stu_nick                       = $this->get_in_str_val("stu_nick");
ss_deal.php:        $editionid                      = $this->get_in_int_val("editionid");
ss_deal.php:        $school                         = $this->get_in_str_val("school");
ss_deal.php:        $stu_request_test_lesson_time   = $this->get_in_str_val("stu_request_test_lesson_time");
ss_deal.php:        $stu_request_test_lesson_demand = $this->get_in_str_val("stu_request_test_lesson_demand");
ss_deal.php:        $ass_test_lesson_type    = $this->get_in_int_val("ass_test_lesson_type");
ss_deal.php:        $origin_userid = $this->get_in_int_val("origin_userid");
ss_deal.php:        $require_id = $this->get_in_int_val("require_id");
ss_deal.php:        $this->t_student_info->field_update_list($userid,$stu_arr);
ss_deal.php:        $ret= $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,$tt_arr);
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,$require_arr);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid                 = $this->get_in_userid();
ss_deal.php:        $phone                  = $this->get_in_phone();
ss_deal.php:        $test_lesson_subject_id = $this->get_in_test_lesson_subject_id();
ss_deal.php:        $grade         = $this->get_in_grade();
ss_deal.php:        $gender        = $this->get_in_int_val("gender");
ss_deal.php:        $address       = $this->get_in_str_val("address");
ss_deal.php:        $stu_nick      = $this->get_in_str_val("stu_nick");
ss_deal.php:        $par_nick      = $this->get_in_str_val("par_nick");
ss_deal.php:        $editionid     = $this->get_in_int_val("editionid");
ss_deal.php:        $school        = $this->get_in_str_val("school");
ss_deal.php:        $has_pad       = $this->get_in_int_val("has_pad");
ss_deal.php:        $user_desc     = $this->get_in_str_val("user_desc");
ss_deal.php:        $next_revisit_time     = $this->get_in_str_val("next_revisit_time");
ss_deal.php:        $stu_test_ipad_flag    = $this->get_in_str_val("stu_test_ipad_flag");
ss_deal.php:        $stu_score_info        = $this->get_in_str_val("stu_score_info");
ss_deal.php:        $stu_character_info    = $this->get_in_str_val("stu_character_info");
ss_deal.php:        $seller_student_sub_status= $this->get_in_int_val("seller_student_sub_status");
ss_deal.php:        $subject       = $this->get_in_subject();
ss_deal.php:        $seller_student_status = $this->get_in_int_val("seller_student_status");
ss_deal.php:        $stu_request_test_lesson_time = $this->get_in_str_val("stu_request_test_lesson_time");
ss_deal.php:        $stu_request_test_lesson_time_info = $this->get_in_str_val("stu_request_test_lesson_time_info");
ss_deal.php:        $stu_request_lesson_time_info      = $this->get_in_str_val("stu_request_lesson_time_info");
ss_deal.php:        $stu_request_test_lesson_demand    = $this->get_in_str_val("stu_request_test_lesson_demand");
ss_deal.php:        $stu_test_lesson_level = $this->get_in_str_val("stu_test_lesson_level");
ss_deal.php:        $revisite_info = trim($this->get_in_str_val("revisite_info"));
ss_deal.php:        $db_tt_item=$this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"subject,seller_student_status, stu_request_test_lesson_time ");
ss_deal.php:            return $this->output_err("预约-未排课，不能修改时间,可以取消");
ss_deal.php:        $this->cache_del_student_nick($userid);
ss_deal.php:        $db_grade=$this->t_student_info->get_grade($userid);
ss_deal.php:            if($this->t_order_info->has_1v1_order($userid)) {
ss_deal.php:                return $this->output_err("有合同了,不能修改年级");
ss_deal.php:        $this->t_student_info->field_update_list($userid,$stu_arr);
ss_deal.php:        if($db_grade!= $grade && !$this->t_order_info->has_1v1_order($userid)){
ss_deal.php:            $this->t_book_revisit->row_insert([
ss_deal.php:                "sys_operator"  =>$this->get_account()
ss_deal.php:            $this->t_field_modified_list->row_insert([
ss_deal.php:                "adminid"        =>$this->get_account_id(),
ss_deal.php:        if (!$this->t_seller_student_new->get_first_revisit_time($userid))  {
ss_deal.php:            $this->t_book_revisit->add_book_revisit($phone , $revisite_info, $this->get_account());
ss_deal.php:        $this->t_seller_student_new->field_update_list($userid,$ss_arr);
ss_deal.php:            $require_count=$this->t_test_lesson_subject_require->get_count_by_test_lesson_subject_id($test_lesson_subject_id );
ss_deal.php:                return $this->output_err("已有试听申请,不能修改科目");
ss_deal.php:            if($this->t_test_lesson_subject->check_subject($userid,$subject)){
ss_deal.php:                return $this->output_err("已经有该科目了" );
ss_deal.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,$tt_arr);
ss_deal.php:            $this->t_test_lesson_subject->set_seller_student_status( $test_lesson_subject_id, $seller_student_status,  $this->get_account() );
ss_deal.php:            $this->t_student_info->field_update_list($userid,[
ss_deal.php:        $current_require_id  =  $this->t_test_lesson_subject->get_current_require_id($test_lesson_subject_id);
ss_deal.php:            $this->t_test_lesson_subject_require->field_update_list($current_require_id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $test_lesson_subject_id= $this->get_in_test_lesson_subject_id();
ss_deal.php:        $seller_student_status= $this->get_in_e_seller_student_status();
ss_deal.php:        $wx_invaild_flag= $this->get_in_int_val("wx_invaild_flag");
ss_deal.php:        $db_tt_item=$this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"*");
ss_deal.php:        $db_seller_student_new = $this->t_seller_student_new->get_userid_row($db_tt_item['userid']);
ss_deal.php:            $this->t_test_lesson_subject->set_seller_student_status( $test_lesson_subject_id,$seller_student_status,$this->get_account() );
ss_deal.php:            $this->t_seller_student_new->field_update_list( $db_seller_student_new["userid"],$arrwx);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $test_lesson_subject_id=$this->get_in_test_lesson_subject_id();
ss_deal.php:        $stu_test_paper=$this->get_in_str_val("stu_test_paper");
ss_deal.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $test_lesson_subject_id = $this->get_in_test_lesson_subject_id();
ss_deal.php:        $userid= $this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
ss_deal.php:        $stu_test_ipad_flag  = $this->get_in_int_val("stu_test_ipad_flag");
ss_deal.php:        $not_test_ipad_reason = $this->get_in_str_val("not_test_ipad_reason");
ss_deal.php:        $curl_stu_request_test_lesson_time = $this->t_test_lesson_subject->get_stu_request_test_lesson_time($test_lesson_subject_id);
ss_deal.php:        $test_stu_request_test_lesson_demand = $this->t_test_lesson_subject->get_stu_request_test_lesson_demand($test_lesson_subject_id);
ss_deal.php:        $this->t_seller_student_new->field_update_list($userid,['stu_test_ipad_flag'=>$stu_test_ipad_flag,'not_test_ipad_reason'=>$not_test_ipad_reason]);
ss_deal.php:        $test_stu_grade = $this->get_in_int_val("test_stu_grade");
ss_deal.php:        $origin_info=$this->t_student_info->get_origin($userid);
ss_deal.php:        $ret=$this->t_test_lesson_subject_require->add_require(
ss_deal.php:            $this->get_account_id()
ss_deal.php:            , $this->get_account() ,
ss_deal.php:            $lesson_info= $this-> t_test_lesson_subject_require->get_test_lesson_subject_lesson_info($test_lesson_subject_id);
ss_deal.php:                $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
ss_deal.php:                return $this->output_err("当前该同学的申请请求 还没处理完毕,不可新建, 状态更新:未排课!, 请刷新界面 ");
ss_deal.php:                return $this->output_err("当前该同学的申请请求 还没处理完毕,不可新建");
ss_deal.php:            return $this->output_succ();
ss_deal.php:        $require_admin_nick=$this->cache_get_account_nick($require_adminid );
ss_deal.php:        $old_time=\App\Helper\Utils::unixtime2date($old_time, "Y-m-d H:i" );
ss_deal.php:        $new_time=\App\Helper\Utils::unixtime2date($new_time, "Y-m-d H:i"  );
ss_deal.php:        $old_teacher_nick=$this->cache_get_teacher_nick($old_teacherid );
ss_deal.php:        $new_teacher_nick=$this->cache_get_teacher_nick($new_teacherid );
ss_deal.php:        $this->t_manager_info->send_wx_todo_msg_by_adminid($set_lesson_adminid,"课程调整");
ss_deal.php:        $page_num = $this->get_in_page_num();
ss_deal.php:        $userid   = $this->get_in_userid();
ss_deal.php:        $ret_list = $this->t_order_info->get_order_list($page_num, 0,0xFFFFFFFF, -2, -2 ,$userid, -1, -1, false, -1 );
ss_deal.php:            $this->cache_set_item_student_nick($item );
ss_deal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
ss_deal.php:        return $this->output_succ(["data"=> $ret_list]);
ss_deal.php:        $userid=$this->get_in_userid();
ss_deal.php:        $ret_list=$this->t_seller_student_origin->get_user_rejoin_list($userid );
ss_deal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
ss_deal.php:        return $this->output_succ(["data"=> $ret_list]);
ss_deal.php:        $page_num = $this->get_in_page_num();
ss_deal.php:        $adminid  = $this->get_account_id();
ss_deal.php:        $ret_list = $this->t_seller_new_count->get_list($page_num,$adminid,-1);
ss_deal.php:            $this->cache_set_item_account_nick($item);
ss_deal.php:                $value_ex_str="操作者:".  $this->cache_get_account_nick($item["value_ex"]) ;
ss_deal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
ss_deal.php:        return $this->output_succ(["data"=> $ret_list]);
ss_deal.php:        $page_num=$this->get_in_page_num();
ss_deal.php:        $userid = $this->get_in_userid();
ss_deal.php:             //,$phone, $nick ,$origin_assistant_role,$success_flag,$seller_require_change_flag=-1, $adminid_list="" ,$group_seller_student_status =-1
ss_deal.php:        $ret_list=$this->t_seller_student_new ->get_seller_list  ($page_num, -1,"",$userid,-1,"","add_time", 0, 0, -1,-1,"",-1,-1, -1, -1, "","",-1, -1 );
ss_deal.php:        return $this->output_succ(["data"=> $ret_list]);
ss_deal.php:        $page_num=$this->get_in_page_num();
ss_deal.php:        $test_lesson_subject_id = $this->get_in_test_lesson_subject_id( -1);
ss_deal.php:        $userid = $this->get_in_userid();
ss_deal.php:        $ret_list=$this->t_test_lesson_subject_require->get_list_by_test_lesson_subject_id($page_num,$test_lesson_subject_id,$userid);
ss_deal.php:            $this->cache_set_item_teacher_nick($item);
ss_deal.php:            $this->cache_set_item_account_nick($item,"confirm_adminid", "confirm_admin_nick");
ss_deal.php:            $this->cache_set_item_account_nick($item,"accept_adminid", "accept_admin_nick");
ss_deal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
ss_deal.php:        return $this->output_succ(["data"=> $ret_list]);
ss_deal.php:        $require_id = $this->get_in_require_id();
ss_deal.php:        $fail_reason = $this->get_in_str_val("fail_reason");
ss_deal.php:        $tr_item=$this->t_test_lesson_subject_require->field_get_list($require_id ,"current_lessonid, test_lesson_subject_id");
ss_deal.php:            $lesson_start=$this->t_lesson_info->get_lesson_start($lessonid);
ss_deal.php:            if ( time(NULL) > $lesson_start - 4*3600  )  {
ss_deal.php:                return $this->output_err("已排课,课前4小时不能驳回");
ss_deal.php:            $this->t_test_lesson_subject_sub_list->set_lesson_del($this->get_account_id(),
ss_deal.php:        $old_accept_adminid =$this->t_test_lesson_subject_require->get_accept_adminid($require_id);
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
ss_deal.php:            //'accept_adminid'=> $this->get_account_id(),
ss_deal.php:        $this->t_test_lesson_subject_require->set_test_lesson_status($require_id, E\Eseller_student_status::V_110, $this->get_account());
ss_deal.php:        $this->t_test_lesson_subject->set_seller_student_status($test_lesson_subject_id,
ss_deal.php:                                                                E\Eseller_student_status::V_110, $this->get_account());
ss_deal.php:            $require_adminid=$this->t_test_lesson_subject->get_require_adminid($test_lesson_subject_id);
ss_deal.php:            $userid=$this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
ss_deal.php:            $phone=$this->t_seller_student_new->get_phone($userid);
ss_deal.php:            $nick=$this->t_student_info ->get_nick($userid);
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($require_adminid ,"来自:".$this->get_account()
ss_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($old_accept_adminid ,
ss_deal.php:                                                                    "来自:".$this->get_account()
ss_deal.php:                                                                    ,"驳回--[$phone][$nick] 理由:$fail_reason","","");
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id   = $this->get_in_require_id();
ss_deal.php:        $teacherid    = $this->get_in_teacherid();
ss_deal.php:        $grade        = $this->get_in_grade();
ss_deal.php:        $lesson_start = $this->get_in_str_val('lesson_start');
ss_deal.php:            return $this->output_err("请填写完整!");
ss_deal.php:            return $this->output_err("课程开始时间过早!");
ss_deal.php:        $old_teacherid = $this->get_in_str_val('old_teacherid');
ss_deal.php:        $old_lesson_start = $this->get_in_str_val('old_lesson_start');
ss_deal.php:            $rr = $this->get_teacher_grade_freeze_limit_info($teacherid,$lesson_start,$grade,$require_id);
ss_deal.php:        $test_lesson_subject_id=$this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
ss_deal.php:        $tt_item=$this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"subject, grade, userid ");
ss_deal.php:        $current_lessonid=$this->t_test_lesson_subject_require->get_current_lessonid($require_id);
ss_deal.php:            return $this->output_err("还没有排课!");
ss_deal.php:        $old_success_flag=$this->t_test_lesson_subject_sub_list->get_success_flag($current_lessonid);
ss_deal.php:            return $this->output_err("课程已确认,不能修改!");
ss_deal.php:        $ret_row1 = $this->t_lesson_info->check_student_time_free(
ss_deal.php:            //$this->t_lesson_info->row_delete($lessonid);
ss_deal.php:            return $this->output_err(
ss_deal.php:        $ret_row2=$this->t_lesson_info->check_teacher_time_free(
ss_deal.php:            //$this->t_lesson_info->row_delete($lessonid);
ss_deal.php:            return $this->output_err(
ss_deal.php:        $teacher_info=$this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
ss_deal.php:        $lesson_row= $this->t_lesson_info->field_get_list($current_lessonid,"courseid,teacherid,lesson_start ");
ss_deal.php:            return $this->output_err("没有换老师或时间!");
ss_deal.php:                return $this->output_err("课前4小时不能换老师");
ss_deal.php:                if( abs( $lesson_start -$lesson_row["lesson_start"]) <2*3600 ){
ss_deal.php:                    return $this->output_err("课前4小时不能换时间");
ss_deal.php:        $this->t_test_lesson_subject_sub_list->set_lesson_del(
ss_deal.php:            $this->get_account_id(),
ss_deal.php:        $lessonid=$this->t_lesson_info->add_lesson(
ss_deal.php:        $this->t_homework_info->add(
ss_deal.php:        $this->t_test_lesson_subject_sub_list->row_insert([
ss_deal.php:            "set_lesson_adminid"  => $this->get_account_id(),
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id , [
ss_deal.php:        $this->t_test_lesson_subject_require->set_test_lesson_status(
ss_deal.php:            $require_id, E\Eseller_student_status::V_210 , $this->get_account() );
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id   = $this->get_in_require_id();
ss_deal.php:        $limit_require_teacherid  = $this->get_in_int_val('limit_require_teacherid');
ss_deal.php:        $limit_require_lesson_start  = $this->get_in_str_val('limit_require_lesson_start');
ss_deal.php:        $require_adminid = $this->get_in_int_val('require_adminid');
ss_deal.php:        $grade = $this->get_in_int_val('grade');
ss_deal.php:        $subject = $this->get_in_int_val('subject');
ss_deal.php:        $account_role = $this->get_in_int_val('account_role');
ss_deal.php:        $is_green_flag = $this->get_in_int_val('is_green_flag');
ss_deal.php:        $limit_require_reason  = $this->get_in_str_val('limit_require_reason');
ss_deal.php:            $master_adminid = $this->t_admin_group_user->get_main_master_adminid($require_adminid);
ss_deal.php:            $master_adminid_list = $this->t_admin_main_group_name->get_maste_admin_name(3,"教务排课");
ss_deal.php:        $rr = $this->get_seller_limit_require_info($limit_require_teacherid,$limit_require_lesson_start,$grade,$subject,$account_role,$master_adminid,$is_green_flag);
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
ss_deal.php:            "limit_require_adminid" =>$this->get_account_id(),
ss_deal.php:        $realname = $this->t_teacher_info->get_realname($limit_require_teacherid);
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($master_adminid,$realname."老师申请解限老师并排课","限课特殊申请通知","申请理由:".$limit_require_reason."
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid (72,$realname."老师申请解限老师并排课","限课特殊申请通知","申请理由:".$limit_require_reason."
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($master_adminid,$realname."老师申请解限老师并排课","限课特殊申请通知","申请理由:".$limit_require_reason."
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid (72,$realname."老师申请解限老师并排课","限课特殊申请通知","申请理由:".$limit_require_reason."
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id   = $this->get_in_require_id();
ss_deal.php:        $limit_accept_flag = $this->get_in_int_val('limit_accept_flag');
ss_deal.php:        $limit_info = $this->t_test_lesson_subject_require->field_get_list($require_id,"limit_require_adminid,limit_require_send_adminid,limit_require_teacherid");
ss_deal.php:        $tea_nick = $this->t_teacher_info->get_realname($limit_info["limit_require_teacherid"]);
ss_deal.php:        $send_nick = $this->t_manager_info->get_account($limit_info["limit_require_send_adminid"]);
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($limit_info["limit_require_adminid"],$tea_nick."老师的限课特殊申请审核通过","限课特殊申请审核通过通知","系统会在十分钟内根据教研审核情况自动处理,请及时确认!","http://admin.yb1v1.com/seller_student_new2/test_lesson_plan_list?require_id=".$require_id);
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid (72,$tea_nick."老师的限课特殊申请审核通过","限课特殊申请审核通过通知","系统会在十分钟内根据教研审核情况自动处理,请及时确认!","http://admin.yb1v1.com/seller_student_new2/test_lesson_plan_list?require_id=".$require_id);
ss_deal.php:             $this->t_manager_info->send_wx_todo_msg_by_adminid ($limit_info["limit_require_adminid"],$tea_nick."老师的限课特殊申请被驳回","限课特殊申请驳回通知",$tea_nick."老师由于教学质量或者态度存在较大问题,故排课被驳回,请更换其他老师","http://admin.yb1v1.com/seller_student_new2/test_lesson_plan_list?require_id=".$require_id);
ss_deal.php:             $this->t_manager_info->send_wx_todo_msg_by_adminid (72,$tea_nick."老师的限课特殊申请被驳回","限课特殊申请驳回通知",$tea_nick."老师由于教学质量或者态度存在较大问题,故排课被驳回,请更换其他老师","http://admin.yb1v1.com/seller_student_new2/test_lesson_plan_list?require_id=".$require_id);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id   = $this->get_in_require_id();
ss_deal.php:        $teacherid    = $this->get_in_teacherid();
ss_deal.php:        $lesson_start = $this->get_in_str_val('lesson_start');
ss_deal.php:        $grade        = $this->get_in_int_val('grade');
ss_deal.php:        $db_lessonid = $this->t_test_lesson_subject_require->get_current_lessonid($require_id);
ss_deal.php:            return $this->output_err("已经排课过了!,可以换老师&时间");
ss_deal.php:            return $this->output_err("请填写完整!");
ss_deal.php:            return $this->output_err("课程开始时间过早!");
ss_deal.php:        $rr = $this->get_teacher_grade_freeze_limit_info($teacherid,$lesson_start,$grade,$require_id);
ss_deal.php:        $test_lesson_subject_id=$this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
ss_deal.php:        $tt_item = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"subject,grade,userid");
ss_deal.php:        $ret_row1 = $this->t_lesson_info->check_student_time_free($userid,0,$lesson_start,$lesson_end);
ss_deal.php:            return $this->output_err(
ss_deal.php:        $ret_row2 = $this->t_lesson_info->check_teacher_time_free($teacherid,0,$lesson_start,$lesson_end);
ss_deal.php:            return $this->output_err(
ss_deal.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
ss_deal.php:        $courseid     = $this->t_course_order->add_course_info_new($orderid,$userid,$grade,$subject,100,2,0,1,1,0,$teacherid);
ss_deal.php:        $lessonid     = $this->t_lesson_info->add_lesson(
ss_deal.php:        $this->t_homework_info->add(
ss_deal.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
ss_deal.php:        $this->t_test_lesson_subject_sub_list->row_insert([
ss_deal.php:            "set_lesson_adminid" => $this->get_account_id(),
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
ss_deal.php:        $this->t_test_lesson_subject_require->set_test_lesson_status(
ss_deal.php:            $require_id,E\Eseller_student_status::V_210,$this->get_account());
ss_deal.php:        $this->t_lesson_info->reset_lesson_list($courseid);
ss_deal.php:        $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:        $require_info = $this->t_test_lesson_subject_require->field_get_list($require_id,"test_lesson_subject_id,accept_adminid");
ss_deal.php:        $this->t_test_lesson_subject->field_update_list($require_info["test_lesson_subject_id"],[
ss_deal.php:            $require_adminid  = $this->t_test_lesson_subject->get_require_adminid($test_lesson_subject_id);
ss_deal.php:            $userid           = $this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
ss_deal.php:            $phone            = $this->t_seller_student_new->get_phone($userid);
ss_deal.php:            $nick             = $this->t_student_info ->get_nick($userid);
ss_deal.php:            $teacher_nick     = $this->cache_get_teacher_nick($teacherid);
ss_deal.php:            $require_phone    = $this->t_manager_info->get_phone($require_adminid);
ss_deal.php:            $stu_request_info = $this->t_test_lesson_subject->get_stu_request($lessonid);
ss_deal.php:            $require_admin_nick = $this->cache_get_account_nick($require_adminid);
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg(
ss_deal.php:                $require_admin_nick,"来自:".$this->get_account()
ss_deal.php:            $parentid = $this->t_student_info->get_parentid($userid);
ss_deal.php:            $this->t_parent_info->send_wx_todo_msg($parentid,"课程反馈","您的试听课已预约成功!", "上课时间[$lesson_time_str]","http://wx-parent.leo1v1.com/wx_parent/index", "点击查看详情" );
ss_deal.php:             * 模板ID   : rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o
ss_deal.php:            $wx_openid        = $this->t_teacher_info->get_wx_openid($teacherid);
ss_deal.php:            $template_id      = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
ss_deal.php:            $data['keyword3'] = date("Y-m-d H:i",time());
ss_deal.php:        return $this->output_succ();
ss_deal.php:                return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:                        return $this->output_err(
ss_deal.php:        $stu_grade_range = $this->get_grade_range($stu_info['grade']);
ss_deal.php:            return $this->output_err("学生年级与老师年级范围不匹配!");
ss_deal.php:            return $this->output_err("学生科目与老师科目不匹配!");
ss_deal.php:        $from_parent_order_type = $this->get_in_int_val("from_parent_order_type");
ss_deal.php:        $parent_order_id        = $this->get_in_int_val("parent_order_id");
ss_deal.php:        $lesson_total           = $this->get_in_int_val("lesson_total");
ss_deal.php:        $order_require_flag     = $this->get_in_int_val("order_require_flag");
ss_deal.php:        $order_require_reason   = $this->get_in_str_val("order_require_reason");
ss_deal.php:        $to_userid  = $this->get_in_int_val("to_userid");
ss_deal.php:        $from_parent_order_lesson_count  = $this->get_in_int_val("from_parent_order_lesson_count");
ss_deal.php:        $tt_item=$this->t_order_info->field_get_list($parent_order_id,"userid,grade,subject,competition_flag");
ss_deal.php:            return $this->output_err("没有找到上级合同");
ss_deal.php:            $origin_userid=$this->t_student_info->get_origin_userid($userid);
ss_deal.php:                return $this->output_err("没有找到对应的转介绍人");
ss_deal.php:            if ($find_userid= $this->t_order_info-> check_order_origin_userid( $userid )) {
ss_deal.php:                return $this->output_err("已经创建过转介绍合同了! userid=[$find_userid]");
ss_deal.php:            $grade = $this->t_student_info->get_grade($userid);
ss_deal.php:            if($this->t_lesson_info-> get_succ_test_lesson_count($userid)>1) {
ss_deal.php:                return $this->output_err("多次试听,不能  24小时内签单 -赠送合同了 ");
ss_deal.php:            if($this->t_order_info->check_order_free_to_self($parent_order_id,$from_parent_order_type)) {
ss_deal.php:                return $this->output_err("该新签合同已经有 24小时内签单 -赠送合同了!");
ss_deal.php:            $parent_order_lesson_count=$this->t_order_info->field_get_value($parent_order_id, "lesson_total*default_lesson_count/100");
ss_deal.php:                return $this->output_err("不足90课时,不能赠送! ");
ss_deal.php:                return $this->output_err("请选择被赠人");
ss_deal.php:            $grade = $this->t_student_info->get_grade($userid);
ss_deal.php:            if($this->t_order_info->check_order_free_to_self($parent_order_id)) {
ss_deal.php:                return $this->output_err("该新签合同已经有赠送合同了!");
ss_deal.php:        $sys_operator           = $this->get_account();
ss_deal.php:        $orderid=$this->t_order_info->add_contract(
ss_deal.php:            $this->t_flow->add_flow(
ss_deal.php:                $this->get_account_id(),$order_require_reason, $orderid);
ss_deal.php:                $this->t_flow->add_flow(
ss_deal.php:                    $this->get_account_id(),$order_require_reason, $orderid);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $grade=$this->get_in_grade() ;
ss_deal.php:        $competition_flag= $this->get_in_int_val("competition_flag");
ss_deal.php:        $lesson_count= $this->get_in_int_val("lesson_count")/100;
ss_deal.php:        $order_promotion_type= $this->get_in_int_val("order_promotion_type");
ss_deal.php:        $contract_type = $this->get_in_int_val("contract_type");
ss_deal.php:        $account = $this->get_account();
ss_deal.php:        $require_id =$this->get_in_require_id();
ss_deal.php:        $userid= $this->t_test_lesson_subject_require->get_userid($require_id);
ss_deal.php:        //$before_lesson_count = $this->t_order_info->get_order_all_lesson_count($userid, $account )/100;
ss_deal.php:        return $this->output_succ(["data"=>$ret]);
ss_deal.php:        $require_id = $this->get_in_require_id("require_id");
ss_deal.php:        $competition_flag       = $this->get_in_int_val('competition_flag');
ss_deal.php:        $lesson_total           = $this->get_in_int_val("lesson_total");
ss_deal.php:        $price                  = $this->get_in_int_val("price")*100;
ss_deal.php:        $discount_price         = $this->get_in_int_val("discount_price")*100;
ss_deal.php:        $discount_reason        = $this->get_in_str_val("discount_reason");
ss_deal.php:        $need_receipt           = $this->get_in_int_val('need_receipt');
ss_deal.php:        $title                  = $this->get_in_str_val('title', "" );
ss_deal.php:        $requirement            = $this->get_in_str_val('requirement');
ss_deal.php:        $from_test_lesson_id = $this->get_in_int_val("from_test_lesson_id");
ss_deal.php:        $order_require_flag = $this->get_in_int_val("order_require_flag");
ss_deal.php:        $contract_type          = $this->get_in_enum_val(E\Econtract_type::class, 0);
ss_deal.php:        $sys_operator           = $this->get_account();
ss_deal.php:        $userid= $this->get_in_userid();
ss_deal.php:        $grade= $this->get_in_grade();
ss_deal.php:        $subject= $this->get_in_subject();
ss_deal.php:        $origin= $this->get_in_str_val("origin");
ss_deal.php:            $test_lesson_subject_id= $this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
ss_deal.php:            $origin  = $this->t_test_lesson_subject_require->get_origin($require_id);
ss_deal.php:            $tt_item = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"userid,grade,subject");
ss_deal.php:        $orderid=$this->t_order_info->add_contract($sys_operator,  $userid , $origin, $competition_flag,$contract_type,$grade,$subject,$lesson_total,$price ,  $discount_price ,$discount_reason , $need_receipt, $title ,$requirement, $from_test_lesson_id );
ss_deal.php:            $this->t_flow->add_flow(
ss_deal.php:                $this->get_account_id(),"特殊折扣",$orderid);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id = $this->get_in_require_id("require_id");
ss_deal.php:        $competition_flag       = $this->get_in_int_val('competition_flag');
ss_deal.php:        $lesson_total           = $this->get_in_int_val("lesson_total");
ss_deal.php:        $discount_reason        = $this->get_in_str_val("discount_reason");
ss_deal.php:        $title                  = trim($this->get_in_str_val('title', "" ));
ss_deal.php:        $order_require_flag = $this->get_in_int_val("order_require_flag");
ss_deal.php:        $contract_type          = $this->get_in_enum_val(E\Econtract_type::class);
ss_deal.php:        $order_promotion_type = $this->get_in_enum_val(E\Eorder_promotion_type::class);
ss_deal.php:        $promotion_spec_discount = $this->get_in_int_val("promotion_spec_discount");
ss_deal.php:        $promotion_spec_present_lesson = $this->get_in_int_val("promotion_spec_present_lesson");
ss_deal.php:        $test_lesson_subject_id         = $this->get_in_int_val("test_lesson_subject_id");
ss_deal.php:        $seller_student_status         = $this->get_in_int_val("seller_student_status");
ss_deal.php:        $contract_from_type = $this->get_in_e_contract_from_type();
ss_deal.php:        $sys_operator           = $this->get_account();
ss_deal.php:        $userid= $this->get_in_userid();
ss_deal.php:        $grade= $this->get_in_grade();
ss_deal.php:        $subject= $this->get_in_subject();
ss_deal.php:        $origin= $this->get_in_str_val("origin");
ss_deal.php:            $test_lesson_subject_id= $this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
ss_deal.php:            $origin  = $this->t_test_lesson_subject_require->get_origin($require_id);
ss_deal.php:            $tt_item = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"userid,grade,subject");
ss_deal.php:            $grade   = $this->t_student_info->get_grade($userid)*1;
ss_deal.php:            $from_test_lesson_id = $this->t_test_lesson_subject_require->get_current_lessonid($require_id);
ss_deal.php:            $from_test_lesson_id=$this->t_test_lesson_subject_require->add_require_and_lessonid(
ss_deal.php:                $this->get_account_id()
ss_deal.php:                , $this->get_account() , $test_lesson_subject_id,$origin,$seller_student_status) ;
ss_deal.php:        $account = $this->get_account();
ss_deal.php:        //$before_lesson_count= $this->t_order_info->get_order_all_lesson_count($userid, $account);
ss_deal.php:        $promotion_spec_discount= $this->get_in_int_val("promotion_spec_discount");
ss_deal.php:        $promotion_spec_present_lesson= $this->get_in_int_val("promotion_spec_present_lesson");
ss_deal.php:        $orderid=$this->t_order_info->add_contract(
ss_deal.php:            $this->t_flow->add_flow(
ss_deal.php:                $this->get_account_id(),"特殊折扣",$orderid);
ss_deal.php:            $this->t_order_info->add_contract_contract_type_1(
ss_deal.php:                $this->get_account(),
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id=$this->get_in_require_id();
ss_deal.php:        $item=$this->t_test_lesson_subject_require->get_test_lesson_info( $require_id);
ss_deal.php:        return $this->output_succ(["data"=> $item] );
ss_deal.php:        $test_lesson_subject_id=$this->get_in_test_lesson_subject_id();
ss_deal.php:        $item=$this->t_test_lesson_subject->get_add_user_order_info($test_lesson_subject_id);
ss_deal.php:            return $this->output_err("有试听课，不能未听报") ;
ss_deal.php:        return $this->output_succ(["data"=> $item] );
ss_deal.php:        $userid      = $this->get_in_userid();
ss_deal.php:        $is_ass_flag = $this->get_in_int_val("is_ass_flag");
ss_deal.php:        $item = $this->t_student_info->field_get_list($userid,"userid,nick,phone,grade,origin");
ss_deal.php:            $item["origin"] = "助教-". $this->get_account();
ss_deal.php:        return $this->output_succ(["data"=> $item] );
ss_deal.php:        $require_id = $this->get_in_require_id();
ss_deal.php:        $stu_info = $this->t_test_lesson_subject_require->get_stu_performance_for_seller($require_id);
ss_deal.php:        return $this->output_succ(["data"=>$stu_info]);
ss_deal.php:        $require_id   = $this->get_in_require_id();
ss_deal.php:        $success_flag = $this->get_in_str_val("success_flag");
ss_deal.php:        $fail_reason  = $this->get_in_str_val("fail_reason");
ss_deal.php:        $test_lesson_fail_flag    = $this->get_in_str_val("test_lesson_fail_flag");
ss_deal.php:        $fail_greater_4_hour_flag = $this->get_in_str_val("fail_greater_4_hour_flag");
ss_deal.php:        $lessonid = $this->t_test_lesson_subject_require->get_current_lessonid($require_id);
ss_deal.php:        $this->t_test_lesson_subject_sub_list->field_update_list($lessonid,[
ss_deal.php:            "confirm_adminid"  =>  $this->get_account_id(),
ss_deal.php:        $this->t_lesson_info->field_update_list($lessonid,[
ss_deal.php:        $lesson_info      = $this->t_lesson_info->field_get_list($lessonid,"userid,teacherid,lesson_start,lesson_end");
ss_deal.php:        $phone            = $this->t_seller_student_new->get_phone($lesson_info["userid"]);
ss_deal.php:        $nick             = $this->cache_get_student_nick($lesson_info["userid"]);
ss_deal.php:        $lesson_start_str = \App\Helper\Utils::unixtime2date($lesson_info["lesson_start"],'m-d H:i');
ss_deal.php:        $teacher_nick = $this->cache_get_teacher_nick($teacherid);
ss_deal.php:            $this->t_test_lesson_subject_require->set_test_lesson_status(
ss_deal.php:                E\Eseller_student_status::V_120 , $this->get_account() );
ss_deal.php:            $set_lesson_adminid = $this->t_test_lesson_subject_sub_list->get_set_lesson_adminid($lessonid);
ss_deal.php:            $teacher_phone      = $this->t_teacher_info->get_phone($lesson_info["teacherid"]);
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid(
ss_deal.php:                "来自:".$this->get_account(),
ss_deal.php:                "课程取消--[$phone][$nick],老师[$teacher_nick][$teacher_phone] 上课时间[ $lesson_start_str]","","");
ss_deal.php:                 * 试听取消-不付工资2-14
ss_deal.php:                 * 通知老师课程取消-付工资2-14
ss_deal.php:            $openid = $this->t_teacher_info->get_wx_openid($lesson_info["teacherid"]);
ss_deal.php:                //$template_id = "YKGjtHUG20pS9RGBmTWm8_wYx4f30amrGv-F5NnBk8w";
ss_deal.php:            $this->t_test_lesson_subject_require->set_test_lesson_status(
ss_deal.php:                E\Eseller_student_status::V_290 , $this->get_account() );
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $page_num=$this->get_in_page_num();
ss_deal.php:        $require_id = $this->get_in_require_id();
ss_deal.php:        $ret_list=$this->t_test_lesson_subject_require->get_lesson_list_by_require_id($page_num,$require_id);
ss_deal.php:            $this->cache_set_item_teacher_nick($item);
ss_deal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
ss_deal.php:        return $this->output_succ(["data"=> $ret_list]);
ss_deal.php:        $userid    = $this->get_in_userid();
ss_deal.php:        $subject   = $this->get_in_subject();
ss_deal.php:        $ass_test_lesson_type    = $this->get_in_int_val("ass_test_lesson_type");
ss_deal.php:        $green_channel_teacherid = $this->get_in_int_val("green_channel_teacherid");
ss_deal.php:        $stu_request_test_lesson_time = strtotime($this->get_in_str_val('stu_request_test_lesson_time'));
ss_deal.php:        $grade  = $this->get_in_int_val("grade");
ss_deal.php:        $stu_request_test_lesson_demand  = $this->get_in_str_val("stu_request_test_lesson_demand");
ss_deal.php:        $grade=isset($grade)?$grade:$this->t_student_info->get_grade($userid);
ss_deal.php:        $phone = $this->t_seller_student_new->get_phone($userid);
ss_deal.php:            $phone=$this->t_student_info->get_phone($userid);
ss_deal.php:            $this->t_seller_student_new->row_insert([
ss_deal.php:        // $grade = $this->t_student_info->get_grade($userid);
ss_deal.php:        $test_lesson_subject_id= $this->t_test_lesson_subject->check_and_add_ass_subject(
ss_deal.php:            $this->get_account_id(),$userid,$grade,$subject,$ass_test_lesson_type);
ss_deal.php:        $origin="助教-".E\Eass_test_lesson_type::get_desc( $ass_test_lesson_type);
ss_deal.php:        $this->t_test_lesson_subject->field_update_list(
ss_deal.php:        $curl_stu_request_test_lesson_time = $this->t_test_lesson_subject->get_stu_request_test_lesson_time($test_lesson_subject_id);
ss_deal.php:        $test_stu_request_test_lesson_demand = $this->t_test_lesson_subject->get_stu_request_test_lesson_demand($test_lesson_subject_id);
ss_deal.php:        $ret=$this->t_test_lesson_subject_require->add_require(
ss_deal.php:            $this->get_account_id(),
ss_deal.php:            $this->get_account(),
ss_deal.php:            return $this->output_err("当前该同学的申请请求 还没处理完毕,不可新建");
ss_deal.php:            $require_id = $this->t_test_lesson_subject->get_current_require_id($test_lesson_subject_id);
ss_deal.php:            $this->t_test_lesson_subject_require->field_update_list($require_id,[
ss_deal.php:            return $this->output_succ();
ss_deal.php:        $require_id=$this->get_in_require_id();
ss_deal.php:        $accept_flag=$this->t_test_lesson_subject_require->get_accept_flag($require_id);
ss_deal.php:            return $this->output_err("教务已处理,不能删除");
ss_deal.php:        if ($this->t_test_lesson_subject_sub_list->get_count_by_require_id($require_id)>0) {
ss_deal.php:            return $this->output_err("数据有误1");
ss_deal.php:        $test_lesson_subject_id=$this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
ss_deal.php:        if ($this->t_test_lesson_subject->get_current_require_id($test_lesson_subject_id) != $require_id){
ss_deal.php:            return $this->output_err("数据有误2");
ss_deal.php:        $this->t_test_lesson_subject_require->row_delete($require_id);
ss_deal.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $test_lesson_subject_id= $this->get_in_test_lesson_subject_id();
ss_deal.php:        $userid=$this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
ss_deal.php:        $admin_assign_time= $this->t_seller_student_new->get_admin_assign_time($userid);
ss_deal.php:        if ($admin_assign_time > $now-60
ss_deal.php:            \App\Helper\Utils::logger(" XXXx  $admin_assign_time > $now -60");
ss_deal.php:            return $this->output_err("已经被抢了");
ss_deal.php:        $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:            "tmk_adminid"          => $this->get_account_id()  ,
ss_deal.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
ss_deal.php:        $phone=$this->t_seller_student_new->get_phone($userid);
ss_deal.php:        $account= $this->get_account();
ss_deal.php:        $ret_update = $this->t_book_revisit->add_book_revisit(
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $test_lesson_subject_id= $this->get_in_test_lesson_subject_id();
ss_deal.php:        $userid=$this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
ss_deal.php:        $new_flag=$this->get_in_int_val("new_flag",0);
ss_deal.php:        $free_flag=$this->get_in_int_val("free_flag",0);
ss_deal.php:        $adminid=$this->get_account_id();
ss_deal.php:        $ssn_info= $this->t_seller_student_new->field_get_list($userid,"admin_assign_time,has_pad");
ss_deal.php:        if ($admin_assign_time > $now-60) { //
ss_deal.php:            return $this->output_err("11已经被抢了");
ss_deal.php:                if(!$this->t_seller_student_new->check_admin_add($adminid,$get_count,$max_day_count )){
ss_deal.php:                    return $this->output_err("目前你持有的例子数[$get_count]>=最高上限[$max_day_count]");
ss_deal.php:                if (!$this->t_seller_new_count->check_and_add_new_count($adminid,"获取新例子"))  {
ss_deal.php:                    return $this->output_err("今天的配额,已经用完了");
ss_deal.php:            $this->t_id_opt_log->add(E\Edate_id_log_type::V_SELLER_GET_NEW_COUNT
ss_deal.php:                if(!$this->t_seller_student_new->check_admin_add($adminid,$get_count,$max_day_count )){
ss_deal.php:                    return $this->output_err("目前你持有的例子数[$get_count]>=最高上限[$max_day_count]");
ss_deal.php:                $this->t_id_opt_log->add(E\Edate_id_log_type::V_SELLER_GET_HISTORY_COUNT
ss_deal.php:                $no_call_count=$this->t_seller_student_new->get_no_call_count($this->get_account_id());
ss_deal.php:                    return $this->output_err("你已经有50个未回访的用户了,先去回访吧:<");
ss_deal.php:        $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:            "admin_revisiterid" => $this->get_account_id() ,
ss_deal.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
ss_deal.php:            "require_adminid" => $this->get_account_id(),
ss_deal.php:        $this->t_seller_student_new->set_up_adminid_info($userid, $this->get_account_id());
ss_deal.php:        $phone=$this->t_seller_student_new->get_phone($userid);
ss_deal.php:        $account= $this->get_account();
ss_deal.php:        $ret_update = $this->t_book_revisit->add_book_revisit(
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $phone         = trim($this->get_in_phone());
ss_deal.php:        $subject       = $this->get_in_subject();
ss_deal.php:        $origin_userid = $this->get_in_int_val("origin_userid");
ss_deal.php:        $origin_assistantid = $this->get_in_int_val("origin_assistantid");
ss_deal.php:        $grade         = $this->get_in_grade();
ss_deal.php:        $nick = $this->get_in_str_val("nick");
ss_deal.php:        $userid=$this->t_phone_to_user->get_userid_by_phone($phone);
ss_deal.php:        if ($userid && $this->t_seller_student_new->get_phone($userid)) {
ss_deal.php:            $admin_nick=$this->cache_get_account_nick(
ss_deal.php:                $this->t_seller_student_new->get_admin_revisiterid($userid)
ss_deal.php:            return $this->output_err("系统中已有这个人的账号了,销售负责人:$admin_nick");
ss_deal.php:            if ($this->t_test_lesson_subject->check_subject($userid,$subject))  {
ss_deal.php:                return $this->output_err("已经有了这个科目的例子了,不能增加");
ss_deal.php:        $adminid=$this->get_account_id();
ss_deal.php:        $userid=$this->t_seller_student_new->book_free_lesson_new(
ss_deal.php:        $this->t_student_info->field_update_list($userid,[
ss_deal.php:        $account= $this->get_account();
ss_deal.php:        $origin_assistant_nick = $this->cache_get_account_nick($origin_assistantid);
ss_deal.php:        $origin_nick=$this->cache_get_student_nick($origin_userid);
ss_deal.php:        $this->t_book_revisit->add_book_revisit(
ss_deal.php:        //$admin_revisiterid= $this->t_order_info-> get_last_seller_by_userid($origin_userid);
ss_deal.php:            $this->t_seller_student_new->set_admin_info(0,[$userid],$admin_revisiterid,$admin_revisiterid);
ss_deal.php:            $nick=$this->t_student_info->get_nick($userid);
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid($admin_revisiterid,"转介绍","学生[$nick][$phone]","","/seller_student_new/seller_student_list_all?userid=$userid");
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $test_lesson_subject_id = $this->get_in_test_lesson_subject_id();
ss_deal.php:        $userid                 = $this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
ss_deal.php:        $this->t_test_lesson_subject->row_delete($test_lesson_subject_id);
ss_deal.php:        $this->t_seller_student_origin->del_by_userid($userid);
ss_deal.php:        $subejct_count=$this->t_test_lesson_subject->get_count_by_userid($userid);
ss_deal.php:            $this->t_seller_student_new->row_delete($userid);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        //list($start_time,$end_time)=$this->get_in_date_range(-60,30);
ss_deal.php:        $adminid=$this->get_account_id();
ss_deal.php:        $no_call_count=$this->t_seller_student_new->get_tq_no_call_count($adminid);
ss_deal.php:        $fail_count=$this->t_seller_student_new->get_fail_count_from_require($adminid);
ss_deal.php:        $today_next_revisit_count=$this->t_seller_student_new->get_next_revisit_count($adminid);
ss_deal.php:        $row_item=$this->t_seller_student_new-> get_lesson_status_count($adminid );
ss_deal.php:        return $this->output_succ($row_item);
ss_deal.php:        $require_id = $this->get_in_require_id();
ss_deal.php:        $notify_flag= $this->get_in_int_val("notify_flag");
ss_deal.php:        $this->t_test_lesson_subject_require-> set_notify_lesson_flag( $require_id, $notify_flag, $this->get_account());
ss_deal.php:        return $this->output_succ();
ss_deal.php:        if ($file->isValid()) {
ss_deal.php:            $realPath = $file -> getRealPath();
ss_deal.php:            (new common_new()) ->upload_from_xls_data( $realPath);
ss_deal.php:        if ($file->isValid()) {
ss_deal.php:            $realPath = $file -> getRealPath();
ss_deal.php:            $objPHPExcel = $objReader->load($realPath);
ss_deal.php:            $objPHPExcel->setActiveSheetIndex(0);
ss_deal.php:            $arr=$objPHPExcel->getActiveSheet()->toArray();
ss_deal.php:                // $val[-1] = strlen($val[1]);
ss_deal.php:                $this->t_psychological_teacher_time_list->row_insert([
ss_deal.php:            //(new common_new()) ->upload_from_xls_data( $realPath);
ss_deal.php:        if ($file->isValid()) {
ss_deal.php:            $realPath = $file -> getRealPath();
ss_deal.php:            $objPHPExcel = $objReader->load($realPath);
ss_deal.php:            $objPHPExcel->setActiveSheetIndex(0);
ss_deal.php:            $arr=$objPHPExcel->getActiveSheet()->toArray();
ss_deal.php:            $this->t_teacher_info->field_update_list(240314,["limit_plan_lesson_reason"=>$aa]);
ss_deal.php:                    $id = $this->t_teacher_lecture_appointment_info->get_id_by_phone($v[0]);
ss_deal.php:                        $this->t_teacher_lecture_appointment_info->field_update_list($id,[
ss_deal.php:            //(new common_new()) ->upload_from_xls_data( $realPath);
ss_deal.php:        $userid=$this->get_in_userid();
ss_deal.php:        $adminid= $this->get_account_id();
ss_deal.php:        $add_time = $this->t_test_subject_free_list->get_add_time("userid","adminid");
ss_deal.php:            return $this->output_err(-1,["info"=>"该例子是您废除的!请另行选择"]);
ss_deal.php:        $seller_level=  $this->t_manager_info->get_seller_level( $adminid);
ss_deal.php:            return $this->output_err(-1,["info"=>"对不起,您本月的配额已达上限"]);
ss_deal.php:        $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:        $this->t_test_lesson_subject-> set_other_admin_init($userid,$adminid );
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid= $this->get_in_userid();
ss_deal.php:        $subject= $this->get_in_subject();
ss_deal.php:        $grade=$this->t_student_info->get_grade($userid);
ss_deal.php:        if($this->t_test_lesson_subject->check_subject($userid,$subject)) {
ss_deal.php:            return $this->output_err("已经有[".E\Esubject::get_desc($subject)."]的扩课了" );
ss_deal.php:        $this->t_test_lesson_subject->row_insert([
ss_deal.php:            "require_adminid"  => $this->get_account_id(),
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $adminid=$this->get_account_id();
ss_deal.php:        $next_revisit_count = $this->t_seller_student_new->get_today_next_revisit_count($adminid);
ss_deal.php:        $require_info     = $this->t_test_lesson_subject->get_require_and_return_back_count($adminid);
ss_deal.php:        $notify_lesson_info = $this->t_test_lesson_subject_require->get_notify_lesson_info($adminid);
ss_deal.php:        $row_item=$this->t_seller_student_new-> get_lesson_status_count($adminid );
ss_deal.php:        $no_confirm_count = $this->t_test_lesson_subject_require->get_no_confirm_count($adminid);
ss_deal.php:        $end_class_stu_num = $this->t_seller_student_new->get_end_class_stu_num($adminid);
ss_deal.php:        return $this->output_succ(
ss_deal.php:        $userid             = $this->get_in_userid();
ss_deal.php:        $test_lesson_subject_id= $this->get_in_test_lesson_subject_id();
ss_deal.php:        $nick               = $this->get_in_str_val("nick");
ss_deal.php:        $grade              = $this->get_in_grade();
ss_deal.php:        $subject            = $this->get_in_subject();
ss_deal.php:        $tmk_student_status = $this->get_in_int_val("tmk_student_status");
ss_deal.php:        $tmk_next_revisit_time_str= $this->get_in_str_val("tmk_next_revisit_time");
ss_deal.php:        $tmk_desc          = $this->get_in_str_val("tmk_desc");
ss_deal.php:        $item=$this->t_seller_student_new->field_get_list($userid,"tmk_next_revisit_time,tmk_student_status,phone ");
ss_deal.php:            $account=$this->get_account();
ss_deal.php:             $this->t_book_revisit->add_book_revisit(
ss_deal.php:                $this->t_test_lesson_subject->set_seller_student_status($test_lesson_subject_id,0, $this->get_account());
ss_deal.php:                $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:                $this->t_manager_info->send_wx_todo_msg( "李子璇","来自:$account" , "TMK 有效:$phone"  );
ss_deal.php:        $this->t_student_info->field_update_list($userid,[
ss_deal.php:        $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:        $admin_revisiterid=$this->t_seller_student_new->get_admin_revisiterid($userid);
ss_deal.php:            $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $orderid       = $this->get_in_int_val("orderid");
ss_deal.php:        $contract_type = $this->get_in_int_val("contract_type");
ss_deal.php:            $orderid=$this->t_order_info->get_parent_order_id($orderid);
ss_deal.php:                return $this->output_err("没有数据");
ss_deal.php:        $ret_list=$this->t_order_info->get_relation_order_list($orderid);
ss_deal.php:            $this->cache_set_item_student_nick($item );
ss_deal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
ss_deal.php:        return $this->output_succ(["data"=> $ret_list]);
ss_deal.php:        $require_id = $this->get_in_require_id();
ss_deal.php:        $seller_require_change_type  = $this->get_in_int_val("seller_require_change_type");
ss_deal.php:        $require_lesson_time=$this->get_in_str_val("require_change_lesson_time");
ss_deal.php:        $old_lesson_start=$this->get_in_str_val("old_lesson_start");
ss_deal.php:            return $this->output_err("课程时间不能晚于当前时间!");
ss_deal.php:        $userid = $this->get_in_int_val("userid");
ss_deal.php:        $nick  = $this->get_in_str_val("nick");
ss_deal.php:        $teacherid =  $this->get_in_int_val("teacherid");
ss_deal.php:        $now = date("Y-m-d");
ss_deal.php:        $lessonid = $this->t_test_lesson_subject_require->get_current_lessonid($require_id);
ss_deal.php:        $ret = $this->check_lesson_clash($teacherid,$userid,$lessonid,$lesson_start,$lesson_end);
ss_deal.php:        $set_lesson_adminid = $this->t_test_lesson_subject_sub_list->get_set_lesson_adminid_by_require_id($require_id);
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,["seller_require_change_type"=>$seller_require_change_type,"require_change_lesson_time"=>$require_change_lesson_time,"seller_require_change_time"=>$seller_require_change_time,"seller_require_change_flag"=>1]);
ss_deal.php:        $this->t_manager_info->send_wx_todo_msg_by_adminid ($set_lesson_adminid,$this->get_account(),"申请更改试听课时间","学生:".$nick."的试听课时间需由".$old_lesson_start."改至".$require_lesson_time,"seller_student_new2/test_lesson_plan_list?date_type=5&opt_date_type=1&start_time=".$now."&end_time=".$now."&grade=-1&subject=-1&test_lesson_student_status=-1&lessonid=undefined&userid=".$userid."&teacherid=-1&success_flag=-1&require_admin_type=-1&require_adminid=".$this->get_account_id()."&tmk_adminid=-1&is_test_user=0&test_lesson_fail_flag=-1&accept_flag=-1&seller_groupid_ex=&seller_require_change_flag=1&ass_test_lesson_type=-1");
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id =  $this->get_in_int_val("require_id");
ss_deal.php:        $lesson_start = strtotime($this->get_in_str_val("lesson_start"));
ss_deal.php:        $teacherid =  $this->get_in_int_val("teacherid");
ss_deal.php:        //$userid = $this->get_in_int_val("userid");
ss_deal.php:        $old_lessonid = $this->get_in_int_val("lessonid");
ss_deal.php:            return $this->output_err("请填写完整!");
ss_deal.php:            return $this->output_err("课程开始时间过早!");
ss_deal.php:        $test_lesson_subject_id=$this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
ss_deal.php:        $tt_item = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"subject, grade, userid ");
ss_deal.php:        $ret_row1 = $this->t_lesson_info->check_student_time_free(
ss_deal.php:            return $this->output_err(
ss_deal.php:        $ret_row2=$this->t_lesson_info->check_teacher_time_free(
ss_deal.php:            return $this->output_err(
ss_deal.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
ss_deal.php:        $courseid = $this->t_course_order->add_course_info_new($orderid,$userid,$grade,$subject,100,2,0,1,1,0,$teacherid);
ss_deal.php:        $lessonid = $this->t_lesson_info->add_lesson(
ss_deal.php:        $this->t_homework_info->add(
ss_deal.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
ss_deal.php:        $this->t_test_lesson_subject_sub_list->row_insert([
ss_deal.php:            "set_lesson_adminid"  => $this->get_account_id(),
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id , [
ss_deal.php:        $this->t_test_lesson_subject_require->set_test_lesson_status(
ss_deal.php:            $require_id, E\Eseller_student_status::V_210 , $this->get_account() );
ss_deal.php:        $this->t_lesson_info->reset_lesson_list($courseid);
ss_deal.php:        $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:        $require_info = $this->t_test_lesson_subject_require->field_get_list($require_id,"test_lesson_subject_id,accept_adminid");
ss_deal.php:        $this->t_test_lesson_subject->field_update_list( $require_info["test_lesson_subject_id"],["history_accept_adminid"=>$require_info["accept_adminid"]]);
ss_deal.php:            $require_adminid = $this->t_test_lesson_subject->get_require_adminid($test_lesson_subject_id);
ss_deal.php:            $userid          = $this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
ss_deal.php:            $phone           = $this->t_seller_student_new->get_phone($userid);
ss_deal.php:            $nick            = $this->t_student_info ->get_nick($userid);
ss_deal.php:            $teacher_nick = $this->cache_get_teacher_nick($teacherid);
ss_deal.php:            $require_admin_nick = $this->cache_get_account_nick($require_adminid);
ss_deal.php:            $this->t_manager_info->send_wx_todo_msg(
ss_deal.php:                $require_admin_nick,"来自:".$this->get_account()
ss_deal.php:        $this->t_test_lesson_subject_sub_list->field_update_list($old_lessonid,["success_flag"=>2,"fail_greater_4_hour_flag"=>0,"test_lesson_fail_flag"=>103]);
ss_deal.php:        $this->t_lesson_info->field_update_list($old_lessonid,["lesson_del_flag"=>1]);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id =  $this->get_in_int_val("require_id");
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,["seller_require_change_flag"=>3]);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $hold_flag=$this->get_in_int_val("hold_flag");
ss_deal.php:        $userid_list_str= $this->get_in_str_val("userid_list");
ss_deal.php:            return $this->output_err("还没选择例子");
ss_deal.php:        $this->t_seller_student_new->  set_hold_admin_list (
ss_deal.php:            $hold_flag, $userid_list,   $this->get_account_id() );
ss_deal.php:        //$account=$this->get_account();
ss_deal.php:        //$opt_account=$this->t_manager_info->get_account($opt_adminid);
ss_deal.php:            $phone=$this->t_seller_student_new->get_phone($userid);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $hold_flag=$this->get_in_int_val("hold_flag");
ss_deal.php:        $userid_list_str= $this->get_in_str_val("userid_list");
ss_deal.php:            return $this->output_err("还没选择例子");
ss_deal.php:        $account= $this->get_account();
ss_deal.php:            $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:            $this->t_test_lesson_subject->clean_seller_info($userid );
ss_deal.php:            $phone= $this->t_seller_student_new->get_phone($userid);
ss_deal.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
ss_deal.php:                "操作者:$account 状态: HISTORY_2_NEW 公海 -> 新例子 ",
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $admin_revisiterid=$this->get_account_id();
ss_deal.php:        $this->t_seller_student_new->set_all_hold($admin_revisiterid );
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $admin_revisiterid=$this->get_account_id();
ss_deal.php:        $account=$this->get_account();
ss_deal.php:        $hold_count=$this->t_seller_student_new->get_hold_count($admin_revisiterid);
ss_deal.php:                $this->output_succ("保留太少,不能操作");
ss_deal.php:        $user_list=$this->t_seller_student_new->get_no_hold_list($admin_revisiterid);
ss_deal.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
ss_deal.php:            $this->t_test_subject_free_list ->row_insert([
ss_deal.php:        $this->t_seller_student_new->set_no_hold_free($admin_revisiterid );
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $page_num = $this->get_in_page_num();
ss_deal.php:        $userid   = $this->get_in_userid();
ss_deal.php:        $teacherid = $this->get_in_teacherid();
ss_deal.php:        $ret_list = $this->t_course_order-> get_all_list($page_num,$userid, $teacherid );
ss_deal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
ss_deal.php:        return $this->output_succ(["data"=> $ret_list]);
ss_deal.php:        $courseid=$this->get_in_courseid();
ss_deal.php:        $lessonid=$this->get_in_lessonid();
ss_deal.php:        $this->t_course_order-> clean_ass_from_test_lesson_id($lessonid);
ss_deal.php:        $this->t_course_order->field_update_list($courseid,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $opt_adminid=$this->get_in_int_val("opt_adminid");
ss_deal.php:        $count=$this->get_in_int_val("count");
ss_deal.php:        list($start_time,$end_time) = $this->get_in_date_range_day(0);
ss_deal.php:        if ( !$this->check_power( E\Epower::V_SELLER_ADD_NEW_STUDENT )  ) {
ss_deal.php:            return $this->output_err("没有权限");
ss_deal.php:        $this->t_seller_new_count->add($start_time,$end_time-1,E\Eseller_new_count_type::V_ADMIN,$count,$opt_adminid,$this->get_account_id());
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $test_lesson_subject_id=$this->get_in_test_lesson_subject_id();
ss_deal.php:        $reason = $this->get_in_str_val("reason");
ss_deal.php:        $this->t_flow->add_flow(
ss_deal.php:            $this->get_account_id(),$reason,$test_lesson_subject_id );
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $adminid=$this->get_account_id();
ss_deal.php:        $role = $this->t_manager_info->get_account_role($adminid);
ss_deal.php:            return $this->output_err("非教务人员不能进行此操作!");
ss_deal.php:        $admin_work_status = $this->t_manager_info->get_admin_work_status($adminid);
ss_deal.php:            $this->t_manager_info->field_update_list($adminid,["admin_work_status"=>1]);
ss_deal.php:            $this->t_manager_info->field_update_list($adminid,["admin_work_status"=>0]);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id = $this->get_in_int_val("require_id");
ss_deal.php:        $jw_test_lesson_status = $this->get_in_int_val("jw_test_lesson_status");
ss_deal.php:            $this->t_test_lesson_subject_require->field_update_list($require_id,["jw_test_lesson_status"=>2]);
ss_deal.php:            $this->t_test_lesson_subject_require->field_update_list($require_id,["jw_test_lesson_status"=>0]);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
ss_deal.php:        $phone   = $this->get_in_str_val("phone");
ss_deal.php:        $id_list = json_decode($this->get_in_str_val("id_list"),true);
ss_deal.php:            $this->t_teacher_lecture_appointment_info->field_update_list($item,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $id = $this->get_in_int_val("id");
ss_deal.php:        $lecture_revisit_type= $this->get_in_int_val("lecture_revisit_type");
ss_deal.php:        $ret = $this->t_teacher_lecture_appointment_info->field_update_list($id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $id = $this->get_in_int_val("id");
ss_deal.php:        $lecture_appointment_status= $this->get_in_int_val("lecture_appointment_status");
ss_deal.php:        $reference = trim($this->get_in_str_val("reference"));
ss_deal.php:        $phone     = trim($this->get_in_str_val("phone"));
ss_deal.php:        $email     = trim($this->get_in_str_val("email"));
ss_deal.php:        $old_phone = $this->t_teacher_lecture_appointment_info->get_phone($id);
ss_deal.php:            $check_flag = $this->t_teacher_lecture_appointment_info->check_is_exist(0,$phone);
ss_deal.php:                return $this->output_err("新手机号已存在！无法更改为此手机号！");
ss_deal.php:            $check_flag = $this->t_teacher_lecture_info->check_is_exists($old_phone);
ss_deal.php:                return $this->output_err("旧手机已经提交过试讲，无法更改手机号！");
ss_deal.php:        $ret = $this->t_teacher_lecture_appointment_info->field_update_list($id,[
ss_deal.php:            return $this->output_err("更新失败！请重试!");
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $id_list_str= $this->get_in_str_val("id_list");
ss_deal.php:        $lecture_appointment_status= $this->get_in_int_val("lecture_appointment_status");
ss_deal.php:            $this->t_teacher_lecture_appointment_info->field_update_list($id,["lecture_appointment_status"=>$lecture_appointment_status]);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $id_list = json_decode($this->get_in_str_val("id_list"),true);
ss_deal.php:            $this->t_teacher_lecture_appointment_info->row_delete($item);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $id = $this->get_in_int_val("id");
ss_deal.php:        $this->t_teacher_lecture_appointment_info->row_delete($id);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $answer_begin_time            = strtotime($this->get_in_str_val("answer_begin_time"));
ss_deal.php:        $answer_end_time              = strtotime($this->get_in_str_val("answer_end_time"));
ss_deal.php:        $custom                       = $this->get_in_str_val("custom");
ss_deal.php:        $name                         = $this->get_in_str_val("name");
ss_deal.php:        $phone                        = $this->get_in_str_val("phone");
ss_deal.php:        $email                        = $this->get_in_str_val("email");
ss_deal.php:        $grade_ex                     = $this->get_in_str_val("grade_ex");
ss_deal.php:        $subject_ex                   = $this->get_in_str_val("subject_ex");
ss_deal.php:        $textbook                     = $this->get_in_str_val("textbook");
ss_deal.php:        $school                       = $this->get_in_str_val("school");
ss_deal.php:        $teacher_type                 = $this->get_in_str_val("teacher_type");
ss_deal.php:        $self_introduction_experience = trim($this->get_in_str_val("self_introduction_experience"));
ss_deal.php:        $reference                    = $this->get_in_str_val("reference");
ss_deal.php:        $lecture_appointment_status   = $this->get_in_int_val("lecture_appointment_status");
ss_deal.php:        $lecture_appointment_origin   = $this->get_in_int_val("lecture_appointment_origin");
ss_deal.php:        $acc                          = $this->get_account();
ss_deal.php:        $ret = $this->t_teacher_lecture_appointment_info->add_all_info(
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id = $this->get_in_int_val("require_id");
ss_deal.php:        $green_channel_teacherid = $this->get_in_int_val("green_channel_teacherid");
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $teacherid      = $this->get_in_int_val("teacherid");
ss_deal.php:        $is_freeze      = $this->get_in_int_val("is_freeze");
ss_deal.php:        $seller_require_flag      = $this->get_in_int_val("seller_require_flag",0);
ss_deal.php:        $grade_range     = $this->get_in_int_val("grade_range",0);
ss_deal.php:        $freeze_reason  = trim($this->get_in_str_val("freeze_reason"));
ss_deal.php:        $freeze_adminid = $this->get_account_id();
ss_deal.php:        $tea_nick       = $this->t_teacher_info->get_realname($teacherid);
ss_deal.php:        $not_grade      = $this->t_teacher_info->get_not_grade($teacherid);
ss_deal.php:        $account = $this->get_account();
ss_deal.php:                $not_grade=$this->get_not_grade_new($grade_range,$not_grade);
ss_deal.php:            $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:            $this->t_teacher_record_list->row_insert([
ss_deal.php:            //$template_id      = "5LlhjLrrbKZV0fOaKk-cSngCnlXWeYLBp_DjSu6JbKw";
ss_deal.php:            $data['keyword2'] = date("Y-m-d H:i",time());
ss_deal.php:            $account_id     = $this->get_account_id();
ss_deal.php:            $freeze_adminid = $this->t_teacher_info->get_freeze_adminid($teacherid);
ss_deal.php:            $del_flag = $this->t_manager_info->get_del_flag($freeze_adminid);
ss_deal.php:                return $this->output_err("您没有权限进行该操作!");
ss_deal.php:            $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:            $this->t_teacher_record_list->row_insert([
ss_deal.php:            //$template_id      = "5LlhjLrrbKZV0fOaKk-cSngCnlXWeYLBp_DjSu6JbKw";
ss_deal.php:            $data['keyword2'] = date("Y-m-d H:i",time());
ss_deal.php:        $openid = $this->t_teacher_info->get_wx_openid($teacherid);
ss_deal.php:            $phone     = $this->t_teacher_info->get_phone($teacherid);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $teacherid      = $this->get_in_int_val("teacherid");
ss_deal.php:        $freeze_type     = $this->get_in_int_val("freeze_type");
ss_deal.php:        $freeze_reason  = trim($this->get_in_str_val("freeze_reason"));
ss_deal.php:        $tea_nick       = $this->t_teacher_info->get_realname($teacherid);
ss_deal.php:        $freeze_adminid = $this->get_account_id();
ss_deal.php:        $account = $this->get_account();
ss_deal.php:        $seller_require_flag      = $this->get_in_int_val("seller_require_flag",0);
ss_deal.php:            $not_grade= $this->get_teacher_all_grade($teacherid);
ss_deal.php:            $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:            $this->t_teacher_record_list->row_insert([
ss_deal.php:            $data['keyword2'] = date("Y-m-d H:i",time());
ss_deal.php:            $account_id     = $this->get_account_id();
ss_deal.php:            $freeze_adminid = $this->t_teacher_info->get_freeze_adminid($teacherid);
ss_deal.php:            $del_flag = $this->t_manager_info->get_del_flag($freeze_adminid);
ss_deal.php:                return $this->output_err("您没有权限进行该操作!");
ss_deal.php:            $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:            $this->t_teacher_record_list->row_insert([
ss_deal.php:            //$template_id      = "5LlhjLrrbKZV0fOaKk-cSngCnlXWeYLBp_DjSu6JbKw";
ss_deal.php:            $data['keyword2'] = date("Y-m-d H:i",time());
ss_deal.php:        $openid = $this->t_teacher_info->get_wx_openid($teacherid);
ss_deal.php:            $phone     = $this->t_teacher_info->get_phone($teacherid);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $teacherid      = $this->get_in_int_val("teacherid");
ss_deal.php:        $is_freeze      = $this->get_in_int_val("is_freeze");
ss_deal.php:        $seller_require_flag      = $this->get_in_int_val("seller_require_flag",0);
ss_deal.php:        $grade_range     = $this->get_in_int_val("grade_range",0);
ss_deal.php:        $freeze_reason  = trim($this->get_in_str_val("freeze_reason"));
ss_deal.php:        $freeze_adminid = $this->get_account_id();
ss_deal.php:        $tea_nick       = $this->t_teacher_info->get_realname($teacherid);
ss_deal.php:        $not_grade      = $this->t_teacher_info->get_not_grade($teacherid);
ss_deal.php:        $account = $this->get_account();
ss_deal.php:        $grade_str = $this->get_detail_grade($grade_range);
ss_deal.php:                $not_grade=$this->get_not_grade_new($grade_range,$not_grade,true);
ss_deal.php:            $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:            $this->t_teacher_record_list->row_insert([
ss_deal.php:            $data['keyword2'] = date("Y-m-d H:i",time());
ss_deal.php:                $not_grade=$this->get_not_grade_new($grade_range,$not_grade,false);
ss_deal.php:            $account_id     = $this->get_account_id();
ss_deal.php:            $freeze_adminid = $this->t_teacher_info->get_freeze_adminid($teacherid);
ss_deal.php:            $del_flag = $this->t_manager_info->get_del_flag($freeze_adminid);
ss_deal.php:                return $this->output_err("您没有权限进行该操作!");
ss_deal.php:            $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:                $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:            $this->t_teacher_record_list->row_insert([
ss_deal.php:            //$template_id      = "5LlhjLrrbKZV0fOaKk-cSngCnlXWeYLBp_DjSu6JbKw";
ss_deal.php:            $data['keyword2'] = date("Y-m-d H:i",time());
ss_deal.php:        $openid = $this->t_teacher_info->get_wx_openid($teacherid);
ss_deal.php:            $phone     = $this->t_teacher_info->get_phone($teacherid);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $require_id                  = $this->get_in_require_id();
ss_deal.php:        $test_lesson_order_fail_flag = $this->get_in_int_val("test_lesson_order_fail_flag");
ss_deal.php:        $test_lesson_order_fail_desc = $this->get_in_str_val("test_lesson_order_fail_desc");
ss_deal.php:        $test_lesson_subject_id=$this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
ss_deal.php:        $userid= $this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
ss_deal.php:            return $this->output_err("这个数据有问题!");
ss_deal.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
ss_deal.php:        $phone=$this->t_seller_student_new->get_phone($userid);
ss_deal.php:        $account=$this->get_account();
ss_deal.php:        $ret_update = $this->t_book_revisit->add_book_revisit(
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $orderid= $this->get_in_int_val("orderid");
ss_deal.php:        $get_packge_flag= $this->get_in_int_val("get_packge_flag");
ss_deal.php:        if(!$this->check_account_in_arr(["jim","谭桂连","佟肖"])) {
ss_deal.php:            return $this->output_err("没有权限");
ss_deal.php:        $this->t_order_info->field_update_list($orderid,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $phone=$this->get_in_str_val("phone","");
ss_deal.php:        $admin_info=$this->t_manager_info->field_get_list(  $this->get_account_id(),"*");
ss_deal.php:                return $this->output_err( "天润拨打出错:". $ret_arr["res"] . ":". @$error_code_conf[$ret_arr["res"] ] );
ss_deal.php:                return $this->output_succ();
ss_deal.php:            if ($this->get_account_role() == E\Eaccount_role::V_1  ) {
ss_deal.php:            if ($this->get_account()=="zore" ) {
ss_deal.php:            //if ( $this->  )
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $subject         = $this->get_in_int_val("subject");
ss_deal.php:        $video_subject   = $this->get_in_int_val("video_subject");
ss_deal.php:        $grade           = $this->get_in_int_val("grade");
ss_deal.php:        $grade_part_ex   = $this->get_in_int_val("grade_part_ex");
ss_deal.php:        $identity        = $this->get_in_int_val("identity");
ss_deal.php:        $teacherid       = $this->get_in_int_val("teacherid");
ss_deal.php:        $url             = $this->get_in_str_val("url");
ss_deal.php:        $create_type     = $this->get_in_int_val("create_time");
ss_deal.php:        $tea_qua         = $this->get_in_int_val("tea_qua");
ss_deal.php:        $tra             = $this->get_in_int_val("tra");
ss_deal.php:        $send_reason     = trim($this->get_in_str_val("send_reason"));
ss_deal.php:        $class_content   = trim($this->get_in_str_val("class_content"));
ss_deal.php:        $send_teacherid  = $this->get_in_int_val("send_teacherid");
ss_deal.php:        $lesson_start    = $this->get_in_int_val("lesson_start");
ss_deal.php:        $teacher_info    = $this->t_teacher_info->field_get_list($teacherid,"realname,create_time,identity");
ss_deal.php:        $day             = ceil((time()-$teacher_info["create_time"])/86400);
ss_deal.php:        $acc             = $this->get_account();
ss_deal.php:        $send_num  = $this->t_good_video_send_list->get_video_send_num($lstart,$lend,$video_subject);
ss_deal.php:           return $this->output_err("本月该科目视频推送已到上线！");
ss_deal.php:             * 模板ID   : rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o
ss_deal.php:             $template_id   = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";//old
ss_deal.php:            $data['keyword3'] = date("Y-m-d H:i",$lesson_start);
ss_deal.php:            $openid = $this->t_teacher_info->get_wx_openid($send_teacherid);
ss_deal.php:                $this->t_good_video_send_list->row_insert([
ss_deal.php:                return $this->output_err("该老师未绑定账号!");
ss_deal.php:            $teacherid_list = $this->t_teacher_info->get_tea_info_by_subject_and_identity($subject,$identity,$grade_part_ex);
ss_deal.php:            if($create_type==-1){
ss_deal.php:                $tea_create= $this->t_teacher_info->get_tea_info_by_create_type($create_type,$teacherid_list);
ss_deal.php:            if($tea_qua==-1){
ss_deal.php:                $tea_qua_list= $this->t_teacher_info->get_tea_info_by_tea_qua($tea_qua,$tea_create);
ss_deal.php:            $teacherid_arr = $this->t_lesson_info->get_have_ten_test_lesson_teacher_list_ss($tea_qua_list);
ss_deal.php:            if($tra==-1){
ss_deal.php:                    $ret = $this->t_lesson_info->get_thirty_lesson_order_info_by_teacherid($item["teacherid"]);
ss_deal.php:                     * 模板ID   : rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o
ss_deal.php:                     $template_id      = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";//old
ss_deal.php:                    $data['keyword3'] = date("Y-m-d H:i",$lesson_start);
ss_deal.php:                $this->t_good_video_send_list->row_insert([
ss_deal.php:                return $this->output_err("该条件下没有老师!");
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $subject         = $this->get_in_int_val("subject");
ss_deal.php:        $grade_part_ex   = $this->get_in_int_val("grade_part_ex");
ss_deal.php:        $identity        = $this->get_in_int_val("identity");
ss_deal.php:        $url             = $this->get_in_str_val("url");
ss_deal.php:        $create_type     = $this->get_in_int_val("create_time");
ss_deal.php:        $tea_qua         = $this->get_in_int_val("tea_qua");
ss_deal.php:        $tra             = $this->get_in_int_val("tra");
ss_deal.php:        $first_sentence  = $this->get_in_str_val("first_sentence");
ss_deal.php:        $end_sentence    = $this->get_in_str_val("end_sentence");
ss_deal.php:        $keyword1        = $this->get_in_str_val("keyword1");
ss_deal.php:        $keyword2        = $this->get_in_str_val("keyword2");
ss_deal.php:        $keyword3        = $this->get_in_str_val("keyword3");
ss_deal.php:        $template_type     = $this->get_in_int_val("template_type");
ss_deal.php:        $send_teacherid  = $this->get_in_int_val("send_teacherid");
ss_deal.php:        $acc= $this->get_account();
ss_deal.php:                 * 模板ID   : rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o
ss_deal.php:                $template_id      = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";//old
ss_deal.php:                $openid = $this->t_teacher_info->get_wx_openid($send_teacherid);
ss_deal.php:            $this->t_send_wx_template_record_list->row_insert([
ss_deal.php:            $teacherid_list = $this->t_teacher_info->get_tea_info_by_subject_and_identity($subject,$identity,$grade_part_ex);
ss_deal.php:            if($create_type==-1){
ss_deal.php:                $tea_create= $this->t_teacher_info->get_tea_info_by_create_type($create_type,$teacherid_list);
ss_deal.php:            if($tea_qua==-1){
ss_deal.php:                $tea_qua_list= $this->t_teacher_info->get_tea_info_by_tea_qua($tea_qua,$tea_create);
ss_deal.php:            $teacherid_arr = $this->t_lesson_info->get_have_ten_test_lesson_teacher_list_ss($tea_qua_list);
ss_deal.php:            if($tra==-1){
ss_deal.php:                    $ret = $this->t_lesson_info->get_thirty_lesson_order_info_by_teacherid($item["teacherid"]);
ss_deal.php:                        $openid = $this->t_teacher_info->get_wx_openid($val);
ss_deal.php:                         * 模板ID   : rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o
ss_deal.php:                         $template_id      = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";//old
ss_deal.php:                        $openid = $this->t_teacher_info->get_wx_openid($val);
ss_deal.php:                $this->t_send_wx_template_record_list->row_insert([
ss_deal.php:                return $this->output_err("该条件下没有老师!");
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $teacherid = $this->get_in_int_val("teacherid");
ss_deal.php:        $lessonid = $this->get_in_int_val("lessonid");
ss_deal.php:        $lesson_time = $this->get_in_int_val("lesson_time");
ss_deal.php:        $account = $this->get_account();
ss_deal.php:        $this->t_teacher_cancel_lesson_list->row_insert([
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $teacherid = $this->get_in_int_val("teacherid");
ss_deal.php:        $lesson_hold_flag = $this->get_in_int_val("lesson_hold_flag");
ss_deal.php:        $lesson_hold_flag_acc = $this->get_account();
ss_deal.php:        $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $teacherid = $this->get_in_int_val("teacherid");
ss_deal.php:        $research_note = $this->get_in_str_val("research_note");
ss_deal.php:        $this->t_teacher_info->field_update_list($teacherid,["research_note"=>$research_note]);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $id = $this->get_in_int_val("id");
ss_deal.php:        $data = $this->t_teacher_lecture_info->field_get_list($id,"*");
ss_deal.php:        return $this->output_succ(["data"=>$data]);
ss_deal.php:        $userid         = $this->get_in_int_val("userid");
ss_deal.php:        $id         = $this->get_in_int_val("id");
ss_deal.php:        $start_time     = strtotime($this->get_in_str_val("start_time"));
ss_deal.php:        $ass_renw_flag  = $this->get_in_int_val("ass_renw_flag");
ss_deal.php:        $renw_price     = $this->get_in_int_val("renw_price");
ss_deal.php:        $renw_week      = $this->get_in_int_val("renw_week");
ss_deal.php:        $no_renw_reason = $this->get_in_str_val("no_renw_reason");
ss_deal.php:        $this->t_month_ass_warning_student_info->field_update_list($id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid         = $this->get_in_int_val("userid");
ss_deal.php:        $id         = $this->get_in_int_val("id");
ss_deal.php:        $start_time     = strtotime($this->get_in_str_val("start_time"));
ss_deal.php:        $ass_renw_flag  = $this->get_in_int_val("ass_renw_flag");
ss_deal.php:        $renw_price     = $this->get_in_int_val("renw_price");
ss_deal.php:        $renw_week      = $this->get_in_int_val("renw_week");
ss_deal.php:        $no_renw_reason = trim($this->get_in_str_val("no_renw_reason"));
ss_deal.php:             return $this->output_err("不续费原因不能为空!");
ss_deal.php:            return $this->output_err("计划续费周不能为空!");
ss_deal.php:        $ass_renw_flag_old= $this->t_month_ass_warning_student_info->get_ass_renw_flag($id);
ss_deal.php:             return $this->output_err("不能设置为未设置状态");
ss_deal.php:        $this->t_month_ass_warning_student_info->field_update_list($id,[
ss_deal.php:            $this->t_month_ass_warning_student_info->field_update_list($id,[
ss_deal.php:            $this->t_ass_warning_renw_flag_modefiy_list->row_insert([
ss_deal.php:                "adminid"               =>$this->get_account_id(),
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid         = $this->get_in_int_val("userid");
ss_deal.php:        $id         = $this->get_in_int_val("id");
ss_deal.php:        $start_time     = strtotime($this->get_in_str_val("start_time"));
ss_deal.php:        $master_renw_flag  = $this->get_in_int_val("master_renw_flag");
ss_deal.php:        $master_no_renw_reason = $this->get_in_str_val("master_no_renw_reason");
ss_deal.php:        $this->t_month_ass_warning_student_info->field_update_list($id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid         = $this->get_in_int_val("userid");
ss_deal.php:        $id         = $this->get_in_int_val("id");
ss_deal.php:        $start_time     = strtotime($this->get_in_str_val("start_time"));
ss_deal.php:        $master_renw_flag  = $this->get_in_int_val("master_renw_flag");
ss_deal.php:        $master_no_renw_reason = $this->get_in_str_val("master_no_renw_reason");
ss_deal.php:        $this->t_month_ass_warning_student_info->field_update_list($id,[
ss_deal.php:            $this->t_month_ass_warning_student_info->field_update_list($id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $start_date = \App\Helper\Utils::unixtime2date($now-3*60*60 ,"Y-m-d H:i:s");
ss_deal.php:        $end_date   = \App\Helper\Utils::unixtime2date($now,"Y-m-d H:i:s");
ss_deal.php:        $phone= $this->get_in_phone();
ss_deal.php:        $count=$cmd->load_data($start_date,$end_date,$phone);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $start_date = \App\Helper\Utils::unixtime2date($now-60*60 ,"Y-m-d H:i:s");
ss_deal.php:        $end_date  = \App\Helper\Utils::unixtime2date($now,"Y-m-d H:i:s");
ss_deal.php:        $phone=$this->get_in_phone();
ss_deal.php:        $ytx_account= $this->get_in_str_val("ytx_account","liyou2");
ss_deal.php:            $ytx_phone= $this->t_manager_info->get_tquin( $this->get_account_id() );
ss_deal.php:        $count=$cmd->load_data( $ytx_account,$start_date,$end_date,-1,$phone );
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid         = $this->get_in_int_val("userid");
ss_deal.php:        $week_lesson_num          = $this->get_in_int_val("week_lesson_num");
ss_deal.php:        $except_lesson_count          = $this->get_in_int_val("except_lesson_count");
ss_deal.php:        $this->t_student_init_info->field_update_list($userid,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid_list[0]           = $this->get_in_int_val("user_id");
ss_deal.php:        $seller_status            = $this->get_in_int_val("seller_status");
ss_deal.php:        $opt_adminid              = $this->get_account_id();
ss_deal.php:        $ret = $this->t_test_subject_free_list->set_tel_state($userid_list[0],$opt_adminid);
ss_deal.php:            $this->set_admin_id_ex($userid_list, $opt_adminid, $opt_type);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid           = $this->get_in_int_val("userid");
ss_deal.php:        $list = $this->t_student_info->get_stu_test_lesson_suject_info($userid);
ss_deal.php:        return $this->output_succ(["data"=>$list]);
ss_deal.php:        $courseid           = $this->get_in_int_val("courseid");
ss_deal.php:        $list = $this->t_course_order->get_course_order_info_new($courseid);
ss_deal.php:        return $this->output_succ(["data"=>$list]);
ss_deal.php:        $adminid= $this->get_in_adminid();
ss_deal.php:            $this->t_seller_student_new->clean_by_admin_revisiterid($adminid );
ss_deal.php:        return  $this->output_succ();
ss_deal.php:        $userid= $this->get_in_userid();
ss_deal.php:        $adminid= $this ->get_account_id();
ss_deal.php:        //$this->t_seller_student_new->get_sell
ss_deal.php:        $old_row_data= $this->t_seller_student_new->field_get_list($old_userid,"competition_call_time, competition_call_adminid, admin_revisiterid ,tq_called_flag ");
ss_deal.php:             &&  $now- $old_row_data["competition_call_time"] < 3600  ) {
ss_deal.php:            return $this->output_err("有新例子tq未拨打",["need_deal_cur_user_flag" =>true]);
ss_deal.php:        if(!$this->t_seller_student_new->check_admin_add($adminid,$get_count,$max_day_count )){
ss_deal.php:            return $this->output_err("目前你持有的例子数[$get_count]>=最高上限[$max_day_count]");
ss_deal.php:        if (!$this->t_seller_new_count->get_free_new_count_id($adminid,"获取新例子"))  {
ss_deal.php:            return $this->output_err("今天的配额,已经用完了");
ss_deal.php:        $row_data= $this->t_seller_student_new->field_get_list($userid,"competition_call_time, competition_call_adminid, admin_revisiterid ");
ss_deal.php:            return $this->output_err("已经被人抢了1");
ss_deal.php:        if ( $competition_call_adminid != $adminid &&  $now- $competition_call_time  < 3600  ) { //
ss_deal.php:            return $this->output_err("已经被人抢了2");
ss_deal.php:        $this->t_test_subject_free_list ->row_insert([
ss_deal.php:        $this->t_seller_student_new->field_update_list($userid,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $teacherid                = $this->get_in_int_val("teacherid");
ss_deal.php:        $limit_plan_lesson_type   = $this->get_in_int_val("limit_plan_lesson_type");
ss_deal.php:        $seller_require_flag      = $this->get_in_int_val("seller_require_flag",0);
ss_deal.php:        $is_limit_old             = $this->get_in_int_val("is_limit_old",1);
ss_deal.php:        $limit_plan_lesson_reason = trim($this->get_in_str_val("limit_plan_lesson_reason"));
ss_deal.php:        $account                  = $this->get_account();
ss_deal.php:        $account_id = $this->get_account_id();
ss_deal.php:        $tea_nick = $this->cache_get_teacher_nick($teacherid);
ss_deal.php:        $limit_account = $this->t_teacher_info->field_get_value($teacherid,"limit_plan_lesson_account");
ss_deal.php:        $not_grade_limit_old       = $this->t_teacher_info->field_get_value($teacherid,"not_grade_limit");
ss_deal.php:        $grade_range     = $this->get_in_int_val("grade_range",0);
ss_deal.php:        $grade_detail = $this->get_detail_grade($grade_range);
ss_deal.php:            return $this->output_err("没有权限!");
ss_deal.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:            $this->t_teacher_info->field_update_list($teacherid,[
ss_deal.php:            $this->t_teacher_record_list->row_insert([
ss_deal.php:                    $this->t_manager_info->send_wx_todo_msg_by_adminid ($ss,"理优监课组","老师限制排课更改",$tea_nick."老师,".$grade_detail."限制排课由一周限排".$old_type."节,改为".$rr.",操作人:".$account,"");
ss_deal.php:                $data['keyword2'] = date("Y-m-d H:i",time());
ss_deal.php:                 * 模板名称 : 限制老师排课通知2-14
ss_deal.php:                $data['keyword2'] = date("Y-m-d H:i",time());
ss_deal.php:                 * 模板名称 : 解除排课限制通知2-14
ss_deal.php:            $openid = $this->t_teacher_info->get_wx_openid($teacherid);
ss_deal.php:                $phone = $this->t_teacher_info->get_phone($teacherid);
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $page_num     = $this->get_in_page_num();
ss_deal.php:        $lesson_time  = $this->get_in_int_val("lesson_time");
ss_deal.php:        $teacherid_arr = $this->t_lesson_info->get_test_lesson_num_by_free_time_new($lesson_time,$end_time);
ss_deal.php:        $subject      = $this->get_in_int_val("subject");
ss_deal.php:        $grade        = $this->get_in_int_val("grade");
ss_deal.php:        $this->t_teacher_info->switch_tongji_database();
ss_deal.php:        $ret_info     = $this->t_teacher_info->get_all_usefull_teacher_list($page_num,$teacherid_arr,$subject,$grade,$lstart,$lend);
ss_deal.php:                $item["week_left_num"]=$item["limit_plan_lesson_type"]-$item["week_lesson_num"];
ss_deal.php:                $ret_num = $this->t_lesson_info->check_teacher_have_test_lesson_pre_week($item["teacherid"],time());
ss_deal.php:                    $item["week_left_num"]=$item["limit_week_lesson_num"]-$item["week_lesson_num"];
ss_deal.php:                    $item["week_left_num"]=6-$item["week_lesson_num"];
ss_deal.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
ss_deal.php:        $userid    = $this->get_in_userid();
ss_deal.php:        $teacherid  = $this->get_in_int_val("teacherid");
ss_deal.php:        $subject  = $this->get_in_int_val("subject");
ss_deal.php:        $page_num     = $this->get_in_page_num();
ss_deal.php:        $ret_info   = $this->t_test_lesson_subject_require->get_all_kk_require_list($page_num,$userid,$teacherid,$subject);
ss_deal.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
ss_deal.php:        $sid = $this->get_in_int_val('sid');
ss_deal.php:        $grade = $this->t_student_info->get_stu_grade_by_sid($sid);
ss_deal.php:        $accept_adminid_nick = $this->get_in_str_val('accept_adminid_nick');
ss_deal.php:        $accept_adminid = $this->t_manager_info->get_id_by_account($accept_adminid_nick);
ss_deal.php:        $this->set_in_value('accept_adminid',$accept_adminid);
ss_deal.php:        return $this->do_complaint_assign();
ss_deal.php:        $assign_adminid   = $this->get_account_id();
ss_deal.php:        $complaint_id     = $this->get_in_int_val('complaint_id');
ss_deal.php:        $assign_remarks   = $this->get_in_str_val('ass_remark');
ss_deal.php:        $accept_adminid   = $this->get_in_str_val('accept_adminid');
ss_deal.php:        // $accept_adminid_nick = $this->get_in_str_val('accept_adminid_nick');
ss_deal.php:        // $accept_adminid = $this->t_manager_info->get_id_by_account($accept_adminid_nick);
ss_deal.php:        $time_date        = date('Y-m-d H:i:s',time(NULL));
ss_deal.php:        $ret = $this->t_complaint_assign_info->row_insert([
ss_deal.php:        $complaint_info_arr  = $this->t_complaint_info->get_complaint_info_by_id($complaint_id);
ss_deal.php:            $this->t_complaint_info->field_update_list($complaint_id,[
ss_deal.php:            $assign_nick = $this->t_manager_info->get_ass_master_nick($assign_adminid);
ss_deal.php:            $qc_item = $this->t_manager_info->get_wx_openid($accept_adminid);
ss_deal.php:            $wx->send_template_msg($qc_item,$template_id,$data_msg ,$url);
ss_deal.php:            return $this->output_succ();
ss_deal.php:        $complaint_id = $this->get_in_int_val('complaint_id');
ss_deal.php:        $complaint_remark = $this->t_complaint_assign_info->get_remark_by_complaintid($complaint_id);
ss_deal.php:        return $this->output_succ(["data" => $complaint_remark ]);
ss_deal.php:        $deal_info          = $this->get_in_str_val('deal_info');
ss_deal.php:        $suggest_info       = $this->get_in_str_val('suggest_info');
ss_deal.php:        $complaint_state    = $this->get_in_int_val('complaint_state');
ss_deal.php:        $complaint_id       = $this->get_in_int_val('complaint_id');
ss_deal.php:        $deal_adminid       = $this->get_account_id();
ss_deal.php:        $deal_account       = $this->get_account();
ss_deal.php:        $account_type       = $this->get_in_int_val('account_type');
ss_deal.php:        $this->t_complaint_deal_info->del_row_by_complaint_id($complaint_id);
ss_deal.php:        $ret = $this->t_complaint_deal_info->row_insert([
ss_deal.php:        $complaint_info = $this->t_complaint_info->get_complaint_info_by_id($complaint_id);
ss_deal.php:        $add_time        = date('Y-m-d,h:i:s',$complaint_info["add_time"]);
ss_deal.php:        $deal_time_date  = date('Y-m-d h:i:s',$complaint_info['deal_time']);
ss_deal.php:           $re = $this->t_complaint_info->field_update_list($complaint_id,[
ss_deal.php:                    // 理优在线教育  // 8GYohyn1V6dmhuEB6ZQauz5ZtmqnnJFy-ETM8yesU3I
ss_deal.php:                    $parent_nick   = $this->cache_get_parent_nick($complaint_info["userid"] );
ss_deal.php:                    $parent_openid = $this->t_parent_info->get_wx_openid_by_parentid($complaint_info["userid"]);
ss_deal.php:                    $time_date = date('Y-m-d h:i:m',time(NULL));
ss_deal.php:                    $template_id = "8GYohyn1V6dmhuEB6ZQauz5ZtmqnnJFy-ETM8yesU3I";//投诉结果通知
ss_deal.php:                    $ret_parent=$wx->send_template_msg($parent_openid,$template_id,$data_msg ,$url);
ss_deal.php:                    $teacher_nick     = $this->cache_get_teacher_nick($complaint_info["userid"] );
ss_deal.php:                    $teacher_openid   = $this->t_teacher_info->get_wx_openid_by_teacherid($complaint_info["userid"]);
ss_deal.php:                   tK_q5C8q1Iqp7qY2KXKuRQ6-jvlj59Kc8ddB4chIstI
ss_deal.php:                $template_id = "tK_q5C8q1Iqp7qY2KXKuRQ6-jvlj59Kc8ddB4chIstI";//投诉反馈通知
ss_deal.php:                    $wx->send_template_msg($qc_item,$template_id,$data_msg ,$url);
ss_deal.php:                $director_wx_list = $this->t_complaint_assign_info->get_director_wx_openid($complaint_id,$deal_adminid);
ss_deal.php:                        $ret_director = $wx->send_template_msg($wx_item['wx_openid'],$template_id,$data_msg ,$url);
ss_deal.php:            return $this->output_succ();
ss_deal.php:        $complaint_id    =  $this->get_in_int_val('complaint_id');
ss_deal.php:        $assign_adminid  =  $this->get_in_int_val('assign_adminid');
ss_deal.php:        $accept_adminid  =  $this->get_in_int_val('accept_adminid');
ss_deal.php:        $re = $this->t_complaint_assign_info->deal_reject($complaint_id,$assign_adminid,$accept_adminid);
ss_deal.php:            return $this->output_succ();
ss_deal.php:            return $this->output_err();
ss_deal.php:        $id    =  $this->get_in_int_val('id');
ss_deal.php:        $teacher_info = $this->t_test_lesson_require_teacher_list->get_teacher_info($id);
ss_deal.php:            $name = $this->t_teacher_info->get_realname($val);
ss_deal.php:        return $this->output_succ(["data"=>$data]);
ss_deal.php:        $id = $this-> get_in_int_val('id');
ss_deal.php:        $teacherid_list = \App\Helper\Utils::json_decode_as_int_array( $this->get_in_str_val("teacherid_list"));
ss_deal.php:        $this->t_test_lesson_require_teacher_list->field_update_list($id,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $userid               = $this->get_account_id();
ss_deal.php:        $complaint_info       = $this->get_in_str_val('complaint_info');
ss_deal.php:        $complained_adminid   = $this->get_in_int_val('complained_adminid');
ss_deal.php:        $complained_adminid_type = $this->get_in_int_val('complained_adminid_type');
ss_deal.php:        $complained_adminid_nick = $this->get_in_str_val('complained_adminid_nick');
ss_deal.php:        $ret = $this->t_complaint_info->row_insert([
ss_deal.php:            return $this->output_succ();
ss_deal.php:            return $this->output_err();
ss_deal.php:        $complaint_id = $this->get_in_int_val('complaint_id');
ss_deal.php:        $ass_info = $this->t_complaint_assign_info->get_ass_log($complaint_id);
ss_deal.php:            $item['ass_date'] = \App\Helper\Utils::unixtime2date($item['assign_time'],'Y-m-d H:i');
ss_deal.php:            $item['assign_str'] = $this->t_manager_info->get_ass_master_nick($item['assign_adminid']);
ss_deal.php:            $item['accept_str'] = $this->t_manager_info->get_ass_master_nick($item['accept_adminid']);
ss_deal.php:        return $this->output_succ(['data'=>$ass_info]);
ss_deal.php:        $ret = $this->t_admin_group_name->get_group_admin_name();
ss_deal.php:        return $this->output_succ(['list'=>$ret]);
ss_deal.php:        $complaint_id = $this->get_in_int_val('complaint_id');
ss_deal.php:        $ret = $this->t_complaint_info->row_delete($complaint_id);
ss_deal.php:            return $this->output_succ();
ss_deal.php:            return $this->output_err();
ss_deal.php:        $orderid = $this->get_in_int_val('orderid');
ss_deal.php:        $reject_info = $this->t_student_cc_to_cr->get_reject_log_by_orderid($orderid);
ss_deal.php:                $item['reject_date'] = \App\Helper\Utils::unixtime2date($item['reject_time'],'Y-m-d H:i');
ss_deal.php:                $item['ass_id_str'] = $this->t_manager_info->get_ass_master_nick($item['ass_id']);
ss_deal.php:        return $this->output_succ(['data'=>$reject_info]);
ss_deal.php:        $orderid           = $this->get_in_int_val('orderid');
ss_deal.php:        $lesson_weeks      = $this->get_in_int_val('lesson_weeks');
ss_deal.php:        $lesson_duration   = $this->get_in_int_val('lesson_duration');
ss_deal.php:        $receive_addr   = $this->get_in_str_val('receive_addr');
ss_deal.php:        $addressee      = $this->get_in_str_val('addressee');
ss_deal.php:        $receive_phone  = $this->get_in_str_val('receive_phone');
ss_deal.php:        $is_submit      = $this->get_in_int_val('is_submit');
ss_deal.php:        $applicant = $this->get_account_id();
ss_deal.php:        $ret = $this->t_order_info->field_update_list($orderid,[
ss_deal.php:            return $this->output_succ();
ss_deal.php:            return $this->output_err('合同信息输入失败!请联系系统管理人员!');
ss_deal.php:        $orderid         = $this->get_in_int_val('orderid');
ss_deal.php:        $main_send_admin = $this->get_in_str_val('main_send_admin');
ss_deal.php:        $mail_send_time  = strtotime($this->get_in_str_val('mail_send_time',0));
ss_deal.php:        $mail_code       = $this->get_in_str_val('mail_code');
ss_deal.php:        $is_send_flag    = $this->get_in_int_val('is_send_flag');
ss_deal.php:        $mail_code_url   = $this->get_in_str_val('mail_code_url','0');
ss_deal.php:        $ret = $this->t_order_info->field_update_list($orderid,[
ss_deal.php:        return $this->output_succ();
ss_deal.php:        $orderid = $this->get_in_int_val('orderid');
ss_deal.php:        $applicant = $this->t_order_info->get_app_by_orderid($orderid);
ss_deal.php:            $student_info = $this->t_order_info->get_contract_pdf_by_orderid($orderid);
ss_deal.php:                $student_info["app_time"],'Y-m-d H:i');
ss_deal.php:            $student_info = $this->t_order_info->get_student_info_by_orderid($orderid);
ss_deal.php:        return $this->output_succ(['data'=>$student_info]);
ss_deal.php:        $orderid = $this->get_in_int_val('orderid');
ss_deal.php:        $contract_mail_info = $this->t_order_info->get_contract_mail_by_orderid($orderid);
ss_deal.php:                $contract_mail_info["mail_send_time"],'Y-m-d H:i');
ss_deal.php:        return $this->output_succ(['data'=>$contract_mail_info]);
stu_app.php:        $type      = $this->get_in_int_val('type',-1);
stu_app.php:        $time_type = $this->get_in_int_val('time_type',-1);
stu_app.php:        $page_num  = $this->get_in_page_num();
stu_app.php:        $ret_info = $this->t_pic_manage_info->get_pic_info_list($type,$time_type,$page_num);
stu_app.php:        return $this->pageView(__METHOD__,$ret_info,array(),[
stu_app.php:        $id = $this->get_in_int_val('id',-1);
stu_app.php:        $ret_info = $this->t_pic_manage_info->field_get_list($id,'*');
stu_app.php:        $opt_type  = $this->get_in_str_val('opt_type','');
stu_app.php:        $id        = $this->get_in_int_val('id',-1);
stu_app.php:        $name      = $this->get_in_str_val('name','');
stu_app.php:        $type      = $this->get_in_int_val('type',-1);
stu_app.php:        $time_type = $this->get_in_int_val('time_type',-1);
stu_app.php:        $url       = $this->get_in_str_val('url','');
stu_app.php:        $ret_info=$this->t_pic_manage_info->add_pic_info($opt_type,$id,$name,$type,$time_type,$url);
stu_app.php:        $id = $this->get_in_int_val('id',-1);
stu_app.php:        $ret_info=$this->t_pic_manage_info->row_delete($id);
stu_manage.php:        $sid    = $this->get_in_int_val("sid");
stu_manage.php:        $ret_db = $this->t_student_info->get_stu_all_info($sid);
stu_manage.php:            return $this->output_err("出错") ;
stu_manage.php:        $ass_admind = $this->t_manager_info->get_ass_adminid($aid);
stu_manage.php:        $ass_group_info = $this->t_admin_group_name->get_group_id_by_aid($ass_admind);
stu_manage.php:            $master_adminid_name = $this->t_manager_info->get_ass_master_nick($ass_group_info['master_adminid']);
stu_manage.php:        $ret_channel=$this->t_user_info->get_reg_channel( $ret_db['userid']);
stu_manage.php:            'assistant_nick'    => $this->cache_get_assistant_nick($ret_db["assistantid"]) ,
stu_manage.php:            'seller_admin_nick' => $this->cache_get_account_nick( $ret_db["seller_adminid"]),
stu_manage.php:            'seller_phone' => $this->t_manager_info->get_phone(  $ret_db["seller_adminid"] ),
stu_manage.php:        $data_list  = [] ;//$this->t_order_info->get_order_info($sid);
stu_manage.php:            $item["teacher_nick"]   = $this->cache_get_teacher_nick($item["teacherid"]);
stu_manage.php:            $item["assistant_nick"] = $this->cache_get_assistant_nick($item["assistantid"]);
stu_manage.php:            \App\Helper\Utils::unixtime2date_for_item($item,"pay_time","", "Y-m-d H:i" );
stu_manage.php:            \App\Helper\Utils::unixtime2date_for_item($item,"order_time","", "Y-m-d H:i" );
stu_manage.php:            $item["left_lesson_count"] = $item["lesson_count"] - $item ["finish_lesson_count"];
stu_manage.php:        $small_lesson_list=$this->t_small_class_user->get_small_class_list_by_userid ($sid);
stu_manage.php:            $s_item["teacher_nick"]=$this->cache_get_teacher_nick($s_item["teacherid"]);
stu_manage.php:            $s_item["assistant_nick"]=$this->cache_get_assistant_nick($s_item["assistantid"]);
stu_manage.php:        $open_lesson_list=$this->t_open_lesson_user->get_open_list_from_userid($sid);
stu_manage.php:            $o_item["teacher_nick"]   = $this->cache_get_teacher_nick($o_item["teacherid"]);
stu_manage.php:            $o_item["assistant_nick"] = $this->cache_get_assistant_nick($o_item["assistantid"]);
stu_manage.php:        return $this->pageView(__METHOD__,null,[
stu_manage.php:        $this->sid=$this->get_in_sid();
stu_manage.php:        static::$page_self_view_data["_sid"]= $this->sid;
stu_manage.php:        static::$page_self_view_data["_stu_nick"]= $this->cache_get_student_nick($this->sid);
stu_manage.php:        $account_role = $this->get_account_role();
stu_manage.php:        $all_flag     = $this->get_in_int_val("all_flag",0);
stu_manage.php:        $order_list   = $this->t_course_order->get_order_list($this->sid);
stu_manage.php:        $courseid     = -1;
stu_manage.php:            if ($courseid==-1) {
stu_manage.php:            $o_item["left_lesson_count"]=sprintf("%.1f",($lesson_total-$o_item["finish_lesson_count"])/100);
stu_manage.php:            $o_item["title"] = $this->cache_get_teacher_nick($o_item["teacherid"])."-未上课时:"
stu_manage.php:                             .$o_item["left_lesson_count"]."-".E\Econtract_type::get_desc($o_item["course_type"])."-"
stu_manage.php:                             .E\Egrade::get_desc( $o_item["grade"] )."-"
stu_manage.php:        $courseid=$this->get_in_courseid($courseid);
stu_manage.php:        $ret_info= $this->t_lesson_info->get_lessons_available($this->sid,$courseid,$all_flag, 1, 100000);
stu_manage.php:            $item["teacher_nick"] = $this->cache_get_teacher_nick($item["teacherid"]);
stu_manage.php:            $item["confirm_admin_nick"] = $this->cache_get_account_nick($item["confirm_adminid"]);
stu_manage.php:        return $this->pageView(__METHOD__,$ret_info,[
stu_manage.php:        $assistantid=$this->get_in_assistantid();
stu_manage.php:        if (!$this->check_account_in_arr(["cora","fly","jim","alan","qichenchong","jack","michael"])) {
stu_manage.php:            return $this->output_err("没有权限");
stu_manage.php:        $noti_account=$this->t_assistant_info->get_account_by_id($assistantid);
stu_manage.php:        $nick = $this->cache_get_student_nick( $this->sid );
stu_manage.php:            //$noti_account=$this->t_assistant_info->get_account_by_id($assistantid);
stu_manage.php:            $ret=$this->t_manager_info->send_wx_todo_msg($noti_account, $this->get_account() ,$header_msg,$msg ,$url);
stu_manage.php:                return $this->output_err("发送WX通知失败,请确认[$noti_account]有绑定微信");
stu_manage.php:        $this->t_student_info->field_update_list($this->sid,[
stu_manage.php:        $this->t_lesson_info->set_user_assistantid( $this->sid,$assistantid  );
stu_manage.php:        $this->t_course_order->set_user_assistantid( $this->sid,$assistantid  );
stu_manage.php:        $seller_adminid = $this->t_seller_student_new->get_admin_revisiterid($this->sid);
stu_manage.php:        $ass_adminid = $this->t_assistant_info->get_adminid_by_assistand($assistantid);
stu_manage.php:        $wx_id = $this->t_manager_info->get_wx_id($ass_adminid);
stu_manage.php:        $this->t_manager_info->send_wx_todo_msg_by_adminid ($seller_adminid,"通知人:理优教育","学生分配助教通知","您好,学生".$nick."已经分配给助教".$noti_account."老师,助教微信号为:".$wx_id,"");
stu_manage.php:        return $this->output_succ();
stu_manage.php:        $teacherid = $this->get_in_teacherid();
stu_manage.php:        $lessonid  = $this->get_in_lessonid();
stu_manage.php:        $db_teacherid=$this->t_lesson_info->get_teacherid($lessonid);
stu_manage.php:        $lesson_type=$this->t_lesson_info->get_lesson_type($lessonid);
stu_manage.php:        $status=$this->t_lesson_info->get_lesson_status($lessonid);
stu_manage.php:            return $this->output_err(" 试听课 不能修改老师，你可以删除这条记录");
stu_manage.php:        $teacher_info=$this->t_teacher_info->field_get_list($teacherid,"*");
stu_manage.php:            $this->t_lesson_info->field_update_list($lessonid,[
stu_manage.php:            $this->t_homework_info->field_update_list($lessonid,[
stu_manage.php:        $sid               = $this->get_in_sid();
stu_manage.php:        $page_num          = $this->get_in_page_num();
stu_manage.php:        $lesson_account_list = $this->t_user_lesson_account->get_list_by_userid($sid);
stu_manage.php:        $lesson_account_id=-1;
stu_manage.php:            if ($lesson_account_id==-1 ) {
stu_manage.php:        $lesson_account_id = $this->get_in_int_val('lesson_account_id',$lesson_account_id);
stu_manage.php:        $ret_info=$this->t_user_lesson_account_lesson-> get_list($lesson_account_id,$page_num);
stu_manage.php:            $lal_item["teacher_nick"]= $this->cache_get_teacher_nick($lal_item["teacherid"]);
stu_manage.php:            $lal_item["assistant_nick"]= $this->cache_get_assistant_nick($lal_item["assistantid"]);
stu_manage.php:        return $this->pageView(__METHOD__,$ret_info,["lesson_account_list" => $lesson_account_list ]);
stu_manage.php:        $sid               = $this->get_in_int_val('sid',-1);
stu_manage.php:        $page_num          = $this->get_in_page_num();
stu_manage.php:        $lesson_account_list = $this->t_user_lesson_account->get_list_by_userid($sid);
stu_manage.php:        $lesson_account_id=-1;
stu_manage.php:            if ($lesson_account_id==-1 ) {
stu_manage.php:        $lesson_account_id = $this->get_in_int_val('lesson_account_id',$lesson_account_id);
stu_manage.php:            $ret_info=$this->t_user_lesson_account_log->  get_list_by_lesson_account_id($lesson_account_id,$page_num);
stu_manage.php:        $this->assign("lesson_account_list",$lesson_account_list);
stu_manage.php:        $this->setPageData($ret_info);
stu_manage.php:        $this->display(__METHOD__);
stu_manage.php:        $start_time = $this->get_in_str_val('start_time',date('Y-m-d', time()-86400*7));
stu_manage.php:        $end_time   = $this->get_in_str_val('end_time',date('Y-m-d', time()+86400));
stu_manage.php:        $ret_lesson = $this->t_lesson_info->get_lesson_list_info($this->sid,$start_time_s,$end_time_s);
stu_manage.php:            $tea_nick             = $this->t_teacher_info->get_nick($value['teacherid']);
stu_manage.php:            $stu_nick             = $this->t_student_info->get_nick($value['userid']);
stu_manage.php:            $value['lesson_time'] = date('Y-m-d H:i',$value['lesson_start'])."-".date('H:i',$value['lesson_end']);
stu_manage.php:        $js_values_str=$this->get_js_g_args($args);
stu_manage.php:        return $this->view(__METHOD__,[
stu_manage.php:        $studentid = $this->get_in_int_val("studentid",0);
stu_manage.php:        $parentid = $this->t_student_info->get_parentid($studentid);
stu_manage.php:        $phone    = $this->t_parent_info->get_phone($parentid);
stu_manage.php:        $studentid = $this->get_in_int_val("studentid",0);
stu_manage.php:        $phone     = trim($this->get_in_int_val("phone",0));
stu_manage.php:        $parent_info = $this->t_parent_info->get_parentid_by_phone($phone);
stu_manage.php:            $this->t_user_info->start_transaction();
stu_manage.php:            $parentid = $this->t_user_info->user_reg(md5("123456"),"后台注册",0);
stu_manage.php:                $ret = $this->t_phone_to_user->row_insert([
stu_manage.php:                    $parent_ret = $this->t_parent_info->row_insert([
stu_manage.php:                    $this->t_parent_info->commit();
stu_manage.php:                $this->t_phone_to_user->roll_back();
stu_manage.php:                return $this->output_err("生成家长账号失败!请重试!");
stu_manage.php:            $check_flag = $this->t_parent_child->check_has_parent($parentid,$studentid);
stu_manage.php:                //$this->t_parent_info->send_wx_todo_msg($parentid,"确认课时","sadfaafa  ","ttt1");
stu_manage.php:            $this->t_parent_child->start_transaction();
stu_manage.php:            $ret_info = $this->t_parent_child->set_student_parent($parentid,$studentid);
stu_manage.php:                $parent_name = $this->t_parent_info->get_nick($parentid);
stu_manage.php:                $ret_info    = $this->t_student_info->field_update_list($studentid,[
stu_manage.php:                $this->t_parent_child->rollback();
stu_manage.php:                return  $this->output_err("绑定关系失败！");
stu_manage.php:                $this->t_parent_child->commit();
stu_manage.php:                return $this->output_succ();
stu_manage.php:        return $this->output_succ();
stu_manage.php:        $start_date = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-30*86400 ));
stu_manage.php:        $end_date   = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
stu_manage.php:        $origin = trim($this->get_in_str_val('origin',""));
stu_manage.php:        $origin_ex = trim($this->get_in_str_val('origin_ex',""));
stu_manage.php:        $page_num   = $this->get_in_page_num();
stu_manage.php:        $ret_info=$this->t_seller_student_info->get_channel_statistics( $page_num,$start_time,$end_time,$origin ,$origin_ex );
stu_manage.php:        $ret_info["list"]= $this->gen_origin_data($ret_info["list"]);
stu_manage.php:                $f_item["money_all"]="--";
stu_manage.php:                $f_item["first_money"]="--";
stu_manage.php:        return $this->pageView(__METHOD__,$ret_info);
stu_manage.php:        $userid   = $this->get_in_int_val("userid");
stu_manage.php:        $courseid = $this->get_in_int_val("courseid");
stu_manage.php:            $lesson_total = $this->t_order_info->get_user_lesson_total($userid);
stu_manage.php:            $assigned_lesson_count=$this->t_course_order->get_user_assigned_lesson_count($userid);
stu_manage.php:            $lesson_cost  = $this->t_course_order->get_user_lesson_cost($userid);
stu_manage.php:            $lesson_left  = $lesson_total-$lesson_cost+$assigned_lesson_count;
stu_manage.php:            $lesson_total = $this->t_course_order->get_user_lesson_total($courseid);
stu_manage.php:            $assigned_lesson_count=$this->t_course_order->get_assigned_lesson_count($courseid);
stu_manage.php:            $lesson_cost  = $this->t_lesson_info->get_user_lesson_cost_by_courseid($courseid);
stu_manage.php:            $lesson_left  = $lesson_total-$assigned_lesson_count/100-$lesson_cost;
stu_manage.php:        $userid               = $this->get_in_int_val("userid");
stu_manage.php:        $teacherid            = $this->get_in_int_val("teacherid");
stu_manage.php:        $courseid             = $this->get_in_int_val("courseid");
stu_manage.php:        $subject              = $this->get_in_int_val("subject");
stu_manage.php:        $lesson_total         = $this->get_in_int_val("lesson_total");
stu_manage.php:        $default_lesson_count = $this->get_in_int_val("default_lesson_count");
stu_manage.php:            $assigned=$this->t_course_order->get_assigned_lesson_count($courseid);
stu_manage.php:            $ret=$this->t_course_order->field_update_list($courseid,[
stu_manage.php:        $stu_info = $this->t_student_info->get_student_simple_info($userid);
stu_manage.php:        $ret      = $this->t_course_order->row_insert([
stu_manage.php:        $lessonid = $this->get_in_int_val("lessonid");
stu_manage.php:        $grade    = $this->get_in_int_val("grade");
stu_manage.php:        $subject  = $this->get_in_int_val("subject");
stu_manage.php:        $type     = $this->get_in_str_val("type");
stu_manage.php:            $ret_info = $this->t_lesson_info->field_get_list($lessonid,"grade,subject");
stu_manage.php:            $ret_info = $this->t_lesson_info->field_update_list($lessonid,[
stu_manage.php:        $courseid = $this->get_in_courseid();
stu_manage.php:             return $this->stu_error_view([
stu_manage.php:        $all_flag = $this->get_in_int_val("all_flag",0);
stu_manage.php:        $ret_info = $this->t_lesson_info->get_lessons_available($this->sid,$courseid,$all_flag, 1, 100000);
stu_manage.php:            $this->cache_set_item_teacher_nick($item);
stu_manage.php:            $item["confirm_admin_nick"] = $this->cache_get_account_nick($item["confirm_adminid"]);
stu_manage.php:            $item['lesson_diff'] = $item['lesson_end']-$item['lesson_start'];
stu_manage.php:        return $this->pageView(__METHOD__,$ret_info);
stu_manage.php:        $teacherid = $this->get_in_int_val('teacherid',-1);
stu_manage.php:        $userid    = $this->sid;
stu_manage.php:        return $this->pageView(__METHOD__, $ret_info,["userid"=>$userid]);
stu_manage.php:        $userid           = $this->sid;
stu_manage.php:        $competition_flag = $this->get_in_int_val("competition_flag");
stu_manage.php:        $lesson_total            = $this->t_order_info->get_user_lesson_total($userid,$competition_flag);
stu_manage.php:        $lesson_refund           = $this->t_order_refund->get_user_lesson_refund($userid,$competition_flag);
stu_manage.php:        $g_assigned_lesson_count = $this->t_course_order->get_user_assigned_lesson_count($userid,$competition_flag);
stu_manage.php:        $lesson_split            = $this->t_order_info->get_user_split_total($userid,$competition_flag);
stu_manage.php:        $lesson_left             = $lesson_total-$lesson_refund-$lesson_split;
stu_manage.php:            $list = $this->t_course_order->get_list($userid,-1,$competition_flag);
stu_manage.php:            $item["left_lesson_count"]      = ($assigned_lesson_count-$item["finish_lesson_count"])/100;
stu_manage.php:            $this->cache_set_item_teacher_nick($item);
stu_manage.php:            $this->cache_set_item_assistant_nick($item);
stu_manage.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($list),[
stu_manage.php:            "unassigned_lesson_count" => sprintf("%.1f", $lesson_left-$g_assigned_lesson_count),
stu_manage.php:        $sid              = $this->sid;
stu_manage.php:        $type             = $this->get_in_int_val("type",1);
stu_manage.php:        $competition_flag = $this->get_in_int_val("competition_flag");
stu_manage.php:        $page_num         = $this->get_in_page_num("page_num");
stu_manage.php:        $order_sum  = $this->t_order_info->get_user_order_list_sum($sid,$competition_flag);
stu_manage.php:        $lesson_sum = $this->t_lesson_info->get_user_lesson_list_sum($sid,$competition_flag);
stu_manage.php:        $order_left = $order_sum-$lesson_sum;
stu_manage.php:        //$lesson_info = $this->get_order_lesson_info_list($sid,$competition_flag,$type);
stu_manage.php:        $lesson_list = $this->t_order_lesson_list->order_lesson_list($sid,$competition_flag,$page_num);
stu_manage.php:            $val['lesson_time']  = date("Y-m-d H:i",$val['lesson_start'])."-".date("H:i",$val['lesson_end']);
stu_manage.php:            $val['tea_nick']     = $this->cache_get_teacher_nick($val['teacherid']);
stu_manage.php:        return $this->pageView(__METHOD__, $lesson_list, [
stu_manage.php:        $sid              = $this->sid;
stu_manage.php:        $type             = $this->get_in_int_val("type",2);
stu_manage.php:        // $competition_flag = $this->get_in_int_val("competition_flag");
stu_manage.php:        $orderid_arr = $this->t_order_info->get_order_info_by_userid($sid);
stu_manage.php:        $competition_flag = $this->get_in_int_val("competition_flag",$default_competition_flag);
stu_manage.php:        $order_list = $this->t_order_info->order_info_list($sid,$competition_flag);
stu_manage.php:            $val['hand_over_view'] = $this->t_student_cc_to_cr->get_post_time_by_orderid($val['orderid']);
stu_manage.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($order_list));
stu_manage.php:        $order_list  = $this->t_order_info->get_user_order_list($sid,$competition_flag);
stu_manage.php:        $lesson_list = $this->t_lesson_info->get_user_lesson_list($sid,$competition_flag);
stu_manage.php:            if($lesson_total>0 && $i<$length-1){
stu_manage.php:                for($lesson_cost=0;$lesson_cost<$lesson_total && $i<=$length-1;$i++){
stu_manage.php:                        $lesson_list[$i-1]['orderid'] .= ",".$val['orderid'];
stu_manage.php:                        $lesson_list[$i-1]['lesson_count'] .= " / ".$val['orderid']."扣了".$left_lesson_count."课时";
stu_manage.php:                        $lesson['lessonid']     = $lesson_list[$i-1]['lessonid'];
stu_manage.php:                    $lesson_time   = date("m-d H:i",$lesson_list[$i]['lesson_start'])."~"
stu_manage.php:                    $lesson_list[$i]['tea_nick']     = $this->cache_get_teacher_nick($lesson_list[$i]['teacherid']);
stu_manage.php:                        $left_lesson_count   = $lesson_cost-$lesson_total;
stu_manage.php:                        $cost_lesson_count   = $lesson_count-$left_lesson_count;
stu_manage.php:            $val['order_left']=$val['lesson_total']-$val['lesson_cost'];
stu_manage.php:        $userid=$this->sid;
stu_manage.php:        $row=$this->t_student_init_info->field_get_list($userid,"*");
stu_manage.php:            $this->t_student_init_info->row_insert(["userid" => $userid]);
stu_manage.php:            $row=$this->t_student_init_info->field_get_list($userid,"*");
stu_manage.php:        $stu_info        = $this->t_student_info->field_get_list($userid,"*");
stu_manage.php:        $seller_stu_info = $this->t_seller_student_info->get_user_init_info( $stu_info["phone"] );
stu_manage.php:        \App\Helper\Utils::unixtime2date_for_item($row,"call_time","", "Y-m-d H:i");
stu_manage.php:        return $this->pageView(__METHOD__,null,
stu_manage.php:                                   "show_post_flag"=> $this->check_power(E\Epower::V_POST_STU_INIT_INFO ),
stu_manage.php:        // return $this->error_view(
stu_manage.php:        //         "交接单已移动至新版,请在[合同消耗信息]-[新建交接单] 中查看!"
stu_manage.php:        $userid=$this->sid;
stu_manage.php:        $row=$this->t_student_init_info->field_get_list($userid,"*");
stu_manage.php:            $this->t_student_init_info->row_insert(["userid" => $userid]);
stu_manage.php:            $row=$this->t_student_init_info->field_get_list($userid,"*");
stu_manage.php:        $stu_info        = $this->t_student_info->field_get_list($userid,"*");
stu_manage.php:        $seller_stu_info = $this->t_seller_student_info->get_user_init_info( $stu_info["phone"] );
stu_manage.php:        \App\Helper\Utils::unixtime2date_for_item($row,"call_time","", "Y-m-d H:i");
stu_manage.php:        return $this->pageView(__METHOD__,null,
stu_manage.php:                                   "show_post_flag"=> $this->check_power(E\Epower::V_POST_STU_INIT_INFO ),
stu_manage.php:        $orderid = $this->get_in_int_val('orderid');
stu_manage.php:            return $this->stu_error_view(
stu_manage.php:        $row     = $this->t_student_cc_to_cr->get_stu_info_by_orderid($orderid);
stu_manage.php:        $is_show_submit = $this->get_in_int_val('is_show_submit',0);
stu_manage.php:        $state_arr = $this->t_student_cc_to_cr->get_last_id_reject_flag_by_orderid($orderid);
stu_manage.php:            $userid  = $this->t_order_info->get_userid($orderid);
stu_manage.php:            $stu_info        = $this->t_student_info->field_get_list($userid,"*");
stu_manage.php:            $seller_stu_info = $this->t_seller_student_info->get_user_init_info( $stu_info["phone"] );
stu_manage.php:            \App\Helper\Utils::unixtime2date_for_item($row,"call_time","", "Y-m-d H:i");
stu_manage.php:            \App\Helper\Utils::unixtime2date_for_item($row,"first_lesson_time","", "Y-m-d H:i");
stu_manage.php:            \App\Helper\Utils::unixtime2date_for_item($row,"reject_time","", "Y-m-d H:i");
stu_manage.php:            $row['ass_nick'] = $this->t_manager_info->get_account($row['ass_id']);
stu_manage.php:        return $this->pageView(__METHOD__,null,
stu_manage.php:                                   "show_post_flag"=> $this->check_power(E\Epower::V_POST_STU_INIT_INFO ),
stu_manage.php:        $page_num   = $this->get_in_page_num();
stu_manage.php:        $userid   =  $this->get_in_sid();
stu_manage.php:        $ret_info = $this->t_book_revisit->get_book_revisit($page_num,$userid);
stu_manage.php:            $item["revisit_time"] = date("Y-m-d H:i:s",$item["revisit_time"]);
stu_manage.php:        return $this->pageView(__METHOD__,$ret_info );
stu_manage.php:        $page_num   = $this->get_in_page_num();
stu_manage.php:        $userid   =  $this->get_in_sid();
stu_manage.php:        $is_warning_flag         = $this->get_in_int_val("is_warning_flag",-1);
stu_manage.php:        $ret_info = $this->t_revisit_info->get_revisit_list($page_num,$userid,$is_warning_flag);
stu_manage.php:            if ($now-$item["revisit_time"] >1*86400 && (preg_match("/saas.yxjcloud.com/", $item["record_url"] )|| preg_match("/121.196.236.95/", $item["record_url"] ) ) ){
stu_manage.php:            $item["url"] = substr($item["warning_deal_url"],$num,$num_url-1);
stu_manage.php:            $item["master_adminid"] = $this->t_admin_group_user->get_master_adminid_by_adminid($item["uid"]);
stu_manage.php:        $adminid = $this->get_account_id();
stu_manage.php:        return $this->pageView(__METHOD__,$ret_info,[
stu_manage.php:        $courseid = $this->get_in_int_val("courseid");
stu_manage.php:        $type     = $this->get_in_int_val("type");
stu_manage.php:        $courseid = $this->get_in_int_val("courseid");
stu_manage.php:        $subject  = $this->get_in_int_val("subject");
stu_manage.php:            return $this->output_err("此课程不存在");
stu_manage.php:            return $this->output_err("更改的科目错误");
stu_manage.php:            $subject = $this->t_course_order->get_subject($courseid);
stu_manage.php:            $ret=$this->t_course_order->field_update_list($courseid,[
stu_manage.php:                $ret=$this->t_lesson_info->set_subject_by_courseid($courseid,$subject);
stu_manage.php:            return $this->output_err("更改出错,请重试");
stu_manage.php:            return $this->output_succ($ret);
stu_manage.php:        $page_num   = $this->get_in_page_num();
stu_manage.php:        $userid   =  $this->get_in_sid();
stu_manage.php:        $ret_info = $this->t_lesson_info->test_lesson_list($page_num,$userid, -1);
stu_manage.php:            $item["teacher_nick"]= $this->cache_get_teacher_nick($item["teacherid"]);
stu_manage.php:        return $this->pageView(__METHOD__,$ret_info);
stu_manage.php:        $courseid         = $this->get_in_int_val("courseid");
stu_manage.php:        $week_comment_num = $this->get_in_int_val("week_comment_num");
stu_manage.php:        $this->t_course_order->start_transaction();
stu_manage.php:        $ret = $this->t_course_order->field_update_list($courseid,[
stu_manage.php:            $this->t_course_order->rollback();
stu_manage.php:            return $this->output_err("更新课程包出错！请重试！");
stu_manage.php:        $lesson_num=$this->t_lesson_info->get_course_lesson_num($courseid);
stu_manage.php:            $ret = $this->t_lesson_info->set_lesson_week_comment_num($courseid,$week_comment_num);
stu_manage.php:                $this->t_course_order->rollback();
stu_manage.php:                return $this->output_err("更新课程出错！请重试！");
stu_manage.php:        $this->t_course_order->commit();
stu_manage.php:        return $this->output_succ();
stu_manage.php:        $courseid     = $this->get_in_int_val("courseid");
stu_manage.php:        $enable_video = $this->get_in_int_val("enable_video");
stu_manage.php:        $this->t_course_order->start_transaction();
stu_manage.php:        $ret = $this->t_course_order->field_update_list($courseid,[
stu_manage.php:            $this->t_course_order->rollback();
stu_manage.php:            return $this->output_err("更新课程包出错！请重试！");
stu_manage.php:        $lesson_num = $this->t_lesson_info->get_course_lesson_num($courseid);
stu_manage.php:            $ret = $this->t_lesson_info->set_lesson_enable_video($courseid,$enable_video);
stu_manage.php:                $this->t_course_order->rollback();
stu_manage.php:                return $this->output_err("更新课程出错！请重试！");
stu_manage.php:        $this->t_course_order->commit();
stu_manage.php:        return $this->output_succ();
stu_manage.php:        $userid= $this->sid;
stu_manage.php:        $phone= $this->t_student_info->get_phone ($userid);
stu_manage.php:        $orderid = $this->get_in_int_val('orderid');
stu_manage.php:        $sid     = $this->get_in_int_val('sid');
stu_manage.php:            return $this->stu_error_view(
stu_manage.php:        $adminid = $this->get_account_id();
stu_manage.php:        $is_master           = $this->t_admin_group_name->check_is_master($is_ass,$adminid);
stu_manage.php:        $assistantid         = $this->t_student_info->get_assistantid_by_userid($sid);
stu_manage.php:        $this->set_in_value('is_show_submit',1);
stu_manage.php:        $row     = $this->t_student_cc_to_cr->get_stu_info_by_orderid($orderid);
stu_manage.php:        $is_show_submit = $this->get_in_int_val('is_show_submit',0);
stu_manage.php:            $userid  = $this->t_order_info->get_userid($orderid);
stu_manage.php:            $stu_info        = $this->t_student_info->field_get_list($userid,"*");
stu_manage.php:            $seller_stu_info = $this->t_seller_student_info->get_user_init_info( $stu_info["phone"] );
stu_manage.php:            \App\Helper\Utils::unixtime2date_for_item($row,"call_time","", "Y-m-d H:i");
stu_manage.php:            \App\Helper\Utils::unixtime2date_for_item($row,"first_lesson_time","", "Y-m-d H:i");
stu_manage.php:        return $this->pageView(__METHOD__,null,[
stu_manage.php:            "show_post_flag" => $this->check_power(E\Epower::V_POST_STU_INIT_INFO ),
stu_manage.php:        $userid = $this->sid;
stu_manage.php:        $page_info=$this->get_in_page_info();
stu_manage.php:        $ret_info=$this->t_student_score_info->get_list($page_info,$userid);
stu_manage.php:            \App\Helper\Utils::unixtime2date_for_item($item,"stu_score_time","","Y-m-d");
stu_manage.php:            $this->cache_set_item_account_nick($item,"create_adminid","create_admin_nick" );
stu_manage.php:        return $this->pageView(__METHOD__, $ret_info);
stu_manage.php:        $userid       = $this->sid;
stu_manage.php:        $dymanic_flag = $this->get_in_int_val("dymanic_flag",-1);
stu_manage.php:        $page_info    = $this->get_in_page_info();
stu_manage.php:        $ret_info = $this->t_user_login_log->login_list($page_info,$userid,$dymanic_flag);
stu_manage.php:            $this->cache_set_item_student_nick($item);
stu_manage.php:        return $this->pageView(__METHOD__,$ret_info);
supervisor.php:        $courseid = $this->get_in_int_val('courseid',0);
supervisor.php:            outputJson(array('ret' => -1, 'info' => '无法获取服务器信息'));
supervisor.php:        $lessonid = $this->get_in_int_val('lessonid',0);
supervisor.php:        $ret = $this->lesson_manage_model->get_contact_for_lesson($lessonid);
supervisor.php:        $lessonid     = $this->get_in_int_val('lessonid',-1);
supervisor.php:        $userid       = $this->get_in_int_val('userid',-1);
supervisor.php:        $server_type  = $this->get_in_int_val('server_type',-1);
supervisor.php:        $teacherid    = $this->get_in_int_val('teacher_id',-1);
supervisor.php:        $stu_id       = $this->get_in_int_val('stu_id',-1);
supervisor.php:        $lesson_start = $this->get_in_int_val('lesson_start',0);
supervisor.php:        $lesson_end   = $this->get_in_int_val('lesson_end',0);
supervisor.php:        $ret_arr=$this->lesson_manage_model->get_lesson_log($lessonid,$userid,$server_type
supervisor.php:        return "current_monitor_list-$date-$st_application_nick-$userid-$teacherid-$run_flag";
supervisor.php:        $this->set_in_value("st_application_nick", $this->get_account() );
supervisor.php:        $this->set_in_value("require_adminid", $this->get_account_id() );
supervisor.php:        $this->set_in_value("run_flag",-1);
supervisor.php:        return $this->monitor();
supervisor.php:        $this->set_in_value("assistantid", $this->t_assistant_info->get_assistantid($this->get_account()) );
supervisor.php:        $this->set_in_value("run_flag",-1);
supervisor.php:        return $this->monitor();
supervisor.php:        $date                = $this->get_in_str_val('date',date('Y-m-d', time(NULL)));
supervisor.php:        $st_application_nick = $this->get_in_str_val('st_application_nick',"");
supervisor.php:        $require_adminid     = $this->get_in_int_val('require_adminid', -1 );
supervisor.php:        $userid              = $this->get_in_userid(-1);
supervisor.php:        $teacherid           = $this->get_in_teacherid(-1);
supervisor.php:        $run_flag            = $this->get_in_int_val("run_flag",1);
supervisor.php:        $assistantid         = $this->get_in_assistantid(-1);
supervisor.php:        $ret_info    = $this->t_lesson_info->get_lesson_condition_list(
supervisor.php:        $monitor_key = $this->session_gen_key($date,$st_application_nick,$userid,$teacherid,$run_flag) ;
supervisor.php:        $adminid          = $this->get_account_id();
supervisor.php:        $self_groupid     = $this->t_admin_group_user->get_groupid_by_adminid(2 , $adminid );
supervisor.php:        $get_self_adminid = $this->t_admin_group_name->get_master_adminid($self_groupid);
supervisor.php:            $server_map = $this->gen_server_map($ret_info['list']);
supervisor.php:            $item['lesson_time'] = date('H:i',$item['lesson_start'])."-".date('H:i',$item['lesson_end']);
supervisor.php:            $this->cache_set_item_assistant_nick($item);
supervisor.php:            $this->cache_set_item_teacher_nick($item);
supervisor.php:            $this->cache_set_item_student_nick($item);
supervisor.php:        return $this->pageView(__METHOD__,$ret_info,[
supervisor.php:        $ret = $this->lesson_manage_model->get_current_lessons();
supervisor.php:        $server_map = $this->gen_server_map($ret);
supervisor.php:                $item['current_server'] = $this->g_config['default_server']['id'];
supervisor.php:            list($item["last_server_ip"],$item["teacher_server_list"])=$this->lesson_manage_model->get_lesson_webrtc_log_by_teacherid($lessonid,$teacherid,$real_begin_time);
supervisor.php:                         "webrtc_xmpp_server_list" => $this->config->get_webrtc_xmpp_server_list() ));
supervisor.php:        $date = $this->get_in_str_val('date', date('Y-m-d', time(NULL)));
supervisor.php:        $st_application_nick = $this->get_in_str_val('st_application_nick',"");
supervisor.php:        $require_adminid = $this->get_in_int_val('require_adminid',-1);
supervisor.php:        $userid = $this->get_in_userid(-1);
supervisor.php:        $teacherid= $this->get_in_teacherid(-1);
supervisor.php:        $run_flag= $this->get_in_int_val("run_flag",-1);
supervisor.php:        $assistantid= $this->get_in_assistantid(-1);
supervisor.php:        $monitor_key=$this->session_gen_key($date,$st_application_nick,$userid,$teacherid,$run_flag);
supervisor.php:        $ret_info = $this->t_lesson_info->get_lesson_conditions($start_time,$end_time, $st_application_nick,$userid,$teacherid,$run_flag,$assistantid,$require_adminid );
supervisor.php:                $item['lesson_condition'] = $this->gen_empty_cond();
supervisor.php:        return $this->output_succ( [
supervisor.php:        $page_num = $this->get_in_int_val('page_num', -1);
supervisor.php:        $ret_info = $this->lesson_manage_model->get_going_lesson_condition_list($page_num);
supervisor.php:        $server_map = $this->gen_server_map($ret_info['list']);
supervisor.php:        $num = ($page_num-1)*5+1;
supervisor.php:                'lesson_time' => date('Y-m-d H:i' ,$value['lesson_start']) . " - " . date('H:i', $value['lesson_end']),
supervisor.php:        $this->setTplPageInfo($s_url, $ret_info['total_num'] ,  20, $page_num);
supervisor.php:        $this->tpl->assign('page_num',$page_num);
supervisor.php:        $this->tpl->assign('condition_arr', $condition_arr);
supervisor.php://        $this->tpl->display('going_monitor.html');
supervisor.php:        $this->display(__METHOD__);
supervisor.php:        $date = $this->get_in_str_val('date', date('Y-m-d', time(NULL)));
supervisor.php:        $tea_nick = $this->get_in_str_val('tea_nick', "");
supervisor.php:        $page_num = $this->get_in_int_val('page_num', -1);
supervisor.php:        $ret = $this->lesson_manage_model->get_going_lesson_conditions($page_num);
supervisor.php:                $cond_list[$i]['lesson_condition'] = $this->gen_empty_cond();
supervisor.php:        $type         = $this->get_in_int_val('type',0);
supervisor.php:        $lessonid_str = $this->get_in_str_val('update_lessonid','');
supervisor.php:        //$ret_info = $this->t_lesson_info->update_server_type($type,$lessonid);
supervisor.php:        $date       = $this->get_in_str_val("date");
supervisor.php:        $ret_list   = $this->lesson_manage_model->get_users_jion_lesson($start_time,$end_time);
supervisor.php:        $lessonid         = $this->get_in_int_val('lessonid',0);
supervisor.php:        $error_info       = $this->get_in_str_val('error_info','');
supervisor.php:        $error_info_other = $this->get_in_str_val('error_info_other','');
supervisor.php:        $ret_info =$this->t_error_info->add_errror_info($lessonid);
supervisor.php:        $date                = $this->get_in_str_val('date',date('Y-m-d', time(NULL)));
supervisor.php:        $st_application_nick = $this->get_in_str_val('st_application_nick',"");
supervisor.php:        $require_adminid     = $this->get_in_int_val('require_adminid', -1 );
supervisor.php:        $userid              = $this->get_in_userid(-1);
supervisor.php:        $teacherid           = $this->get_in_teacherid(-1);
supervisor.php:        $run_flag            = $this->get_in_int_val("run_flag",1);
supervisor.php:        $assistantid         = $this->get_in_assistantid(-1);
supervisor.php:        $lessonid            = $this->get_in_int_val('lessonid');
supervisor.php:        $ret_info = $this->t_lesson_info->get_lesson_info_by_lessonid($lessonid);
supervisor.php:        $adminid          = $this->get_account_id();
supervisor.php:        $self_groupid     = $this->t_admin_group_user->get_groupid_by_adminid(2 , $adminid );
supervisor.php:        $get_self_adminid = $this->t_admin_group_name->get_master_adminid($self_groupid);
supervisor.php:            $server_map = $this->gen_server_map($ret_info['list']);
supervisor.php:        $info=$this->t_lesson_info_b2-> get_info_for_monitor($lessonid);
supervisor.php:        $this->cache_set_item_account_nick($info, "cur_require_adminid", "cur_require_admin_nick");
supervisor.php:            $item['lesson_time'] = date('H:i',$item['lesson_start'])."-".date('H:i',$item['lesson_end']);
supervisor.php:            $this->cache_set_item_assistant_nick($item);
supervisor.php:            $this->cache_set_item_teacher_nick($item);
supervisor.php:            $this->cache_set_item_student_nick($item);
supervisor.php:        $ret_arr_log=$this->t_lesson_opt_log->get_lesson_log_by_pool($lessonid,$userid,$server_type
supervisor.php:        $log_num_str = $this->t_lesson_info->get_lesson_conditions_by_lessonid($lessonid);
supervisor.php:        return $this->pageView(__METHOD__,$ret_info,["self_groupid"=>$self_groupid,'stu_info'=>$info,"is_group_leader_flag"=>$is_group_leader_flag,'log_lists'=>$ret_list_log]);
table_manage.php:        return $this->get_table("",$set_utf8)->gen_sql( "`%s`.`%s`", $db_name,$table_name );
table_manage.php:        $this->get_in_str_val($field_name);
table_manage.php:        $db_name=$this->get_in_str_val("db_name","db_weiyi");
table_manage.php:        $table_name=$this->get_in_str_val("table_name", "t_student_info");
table_manage.php:        $id1=trim($this->get_in_str_val("id1"));
table_manage.php:        $id2=trim($this->get_in_str_val("id2"));
table_manage.php:        $table=$this->$table_name;
table_manage.php:        $id1_name=$table->field_id1_name;
table_manage.php:        $id2_name=$table->field_id2_name;
table_manage.php:            $row=$table->field_get_list($id1,"*");
table_manage.php:            $row=$table->field_get_list_2($id1,$id2,"*");
table_manage.php:            $db_table_name=$this-> get_db_table_name( $db_name,$table_name ,false);
table_manage.php:            $table_1=$this->get_table($db_name);
table_manage.php:            $sql=$table_1->gen_sql( "show FULL COLUMNS  FROM %s" ,$db_table_name );
table_manage.php:            $field_list=$table_1->main_get_list($sql,function($item){
table_manage.php:        return $this->pageView(__METHOD__,$ret_info,[
table_manage.php:        $start_time = $this->get_in_start_time_from_str( date("Y-m-d", time( ) -7*86400) );
table_manage.php:        $end_time   = $this->get_in_end_time_from_str( date("Y-m-d", time( ) +86400) );
table_manage.php:        $adminid = $this->get_in_int_val("adminid",-1);
table_manage.php:        $sql_str = $this->get_in_str_val("sql_str","");
table_manage.php:        $page_num= $this->get_in_page_num();
table_manage.php:        $ret_info=$this->t_opt_table_log->get_list($page_num,$start_time,$end_time,$adminid,$sql_str);
table_manage.php:            $item["admin_nick"]=$this->cache_get_account_nick($item["adminid"]);
table_manage.php:        return $this->pageView(__METHOD__,$ret_info );
table_manage.php:        $db_name=$this->get_in_str_val("db_name","db_weiyi");
table_manage.php:        $table_name=$this->get_in_str_val("table_name", $config_arr[$db_name]);
table_manage.php:        $table=$this->get_table($db_name);
table_manage.php:        $db_table_name=$this-> get_db_table_name( $db_name,$table_name );
table_manage.php:        $sql=$table->gen_sql( " select TABLE_NAME,TABLE_COMMENT from  information_schema.TABLES where TABLE_SCHEMA='%s' and TABLE_NAME <> 't_opt_table_log' " ,$db_name);
table_manage.php:        $table_list=$table->main_get_list($sql);
table_manage.php:        $sql=$table->gen_sql( "show FULL COLUMNS  FROM %s" ,$db_table_name );
table_manage.php:        $list=$table->main_get_list($sql);
table_manage.php:        $create_row=$table->main_get_row("show create table $db_table_name");
table_manage.php:        return $this->pageView(__METHOD__,$ret_info,[
table_manage.php:        $db_name    = $this->get_in_str_val("db_name","db_weiyi");
table_manage.php:        $table_name = $this->get_in_str_val("table_name","t_student_info");
table_manage.php:        $comment    = $this->get_in_str_val("comment","");
table_manage.php:        $table=$this->get_table($db_name);
table_manage.php:        $sql=$table->gen_sql(
table_manage.php:            [$this-> get_db_table_name( $db_name,$table_name )], $comment);
table_manage.php:        $table->main_update($sql);
table_manage.php:        $db_name    = $this->get_in_str_val("db_name","db_weiyi");
table_manage.php:        $table_name = $this->get_in_str_val("table_name","t_student_info");
table_manage.php:        $comment    = $this->get_in_str_val("comment","");
table_manage.php:        $field = $this->get_in_str_val("field","");
table_manage.php:        $table=$this->get_table($db_name);
table_manage.php:        $db_table_name=$this-> get_db_table_name( $db_name,$table_name );
table_manage.php:        $sql= $table->gen_sql( "show create table %s",  [$db_table_name] );
table_manage.php:        $arr=$table->main_get_row($sql);
table_manage.php:                                         sprintf( " COMMENT '%s' " , $table->ensql($comment) ),
table_manage.php:                                         sprintf( " COMMENT '%s' " , $table->ensql($comment) ),
table_manage.php:            $sql=$table->gen_sql(
table_manage.php:            $table->main_update($sql);
table_manage.php:        $table = $this->t_student_info;
table_manage.php:            $table->main_get_value(  "set names utf8" );
table_manage.php:        return $this->view(__METHOD__);
table_manage.php:        $db_name=$this->get_in_str_val("db_name","");
table_manage.php:        $table_name=$this->get_in_str_val("table_name", "");
table_manage.php:        $id1=trim($this->get_in_str_val("id1"));
table_manage.php:        $id2=trim($this->get_in_str_val("id2"));
table_manage.php:        $field=trim($this->get_in_str_val("field"));
table_manage.php:        $value=trim($this->get_in_str_val("value"));
table_manage.php:        $table=$this->$table_name;
table_manage.php:        $id1_name=$table->field_id1_name;
table_manage.php:        $id2_name=$table->field_id2_name;
table_manage.php:            $ret=$table->row_delete($id1);
table_manage.php:            $ret=$table->row_delete_2($id1,$id2);
table_manage.php:        $this->t_opt_table_log->row_insert([
table_manage.php:            \App\Models\t_opt_table_log::C_adminid=> $this->get_account_id(),
table_manage.php:            \App\Models\t_opt_table_log::C_sql_str => $table->last_sql ,
table_manage.php:        $db_name=$this->get_in_str_val("db_name","db_weiyi");
table_manage.php:        $table_name=$this->get_in_str_val("table_name", "t_student_info");
table_manage.php:        $id1=trim($this->get_in_str_val("id1"));
table_manage.php:        $id2=trim($this->get_in_str_val("id2"));
table_manage.php:        $field=trim($this->get_in_str_val("field"));
table_manage.php:        $value=trim($this->get_in_str_val("value"));
table_manage.php:        $table=$this->$table_name;
table_manage.php:        $id1_name=$table->field_id1_name;
table_manage.php:        $id2_name=$table->field_id2_name;
table_manage.php:            $ret=$table->field_update_list($id1,[
table_manage.php:            $ret=$table->field_update_list_2($id1,$id2,[
table_manage.php:        $this->t_opt_table_log->row_insert([
table_manage.php:            \App\Models\t_opt_table_log::C_adminid=> $this->get_account_id(),
table_manage.php:            \App\Models\t_opt_table_log::C_sql_str => $table->last_sql ,
table_manage.php:        dd($client->__getFunctions());
table_manage.php:        $ret=$client->getVisitorInfoByPhone($adminuin, $adminpassword, "", $phone);
table_manage.php:            $startTime="2016-08-01 00:00:00";
table_manage.php:            $endTime="2016-08-02 00:00:00";
table_manage.php:            $ret=$client->getPhoneRecordByClient("" ,  $adminuin, "" ,  $adminpassword, "" , "" ,  "",  $startTime,  $endTime,  "");
table_manage.php:                $this->t_tq_call_info->add(
table_manage.php:        $db_name=$this->get_in_str_val("db_name","db_weiyi");
table_manage.php:        $sql = $this->get_in_str_val("sql");
table_manage.php:        return $this->pageView(__METHOD__, null);
taobao_manage.php:     * 接口 $this->tbShop->taobao_tae_items_select() 返回 code 27 无效Session解决方法
taobao_manage.php:        $this->tbShop = new \TaobaoShop($tbConfig['appKey'],$tbConfig['secretKey'],$tbConfig['sessionKey'],$tbConfig['name']);
taobao_manage.php:        $page_num    = $this->get_in_int_val("page_num",1);
taobao_manage.php:        $select_type = $this->tbShop->taobao_sellercats_list();
taobao_manage.php:        $this->update_taobao_type_list($select_type);
taobao_manage.php:                $this->get_taobao_tae_items_select($val['cid'],$page_num,$open_iid_list);
taobao_manage.php:            $this->t_taobao_item->reset_taobao_status();
taobao_manage.php:                $this->t_taobao_item->field_update_list($item,[
taobao_manage.php:        return $this->output_succ();
taobao_manage.php:        $ret_info = $this->tbShop->taobao_tae_items_select($cid,$page_num);
taobao_manage.php:            $this->get_taobao_tae_item_select($cid,$page_num,$arr);
taobao_manage.php:            $this->t_taobao_type_list->reset_taobao_type_status();
taobao_manage.php:                $ret=$this->t_taobao_type_list->field_get_value($val['cid'],"count(1)");
taobao_manage.php:                    $this->t_taobao_type_list->row_insert([
taobao_manage.php:                    $this->t_taobao_type_list->field_update_list($val['cid'],[
taobao_manage.php:        return $this->output_succ($ret_info);
taobao_manage.php:        $cid  = $this->get_in_int_val('cid',0);
taobao_manage.php:        $type = $this->get_in_str_val('type',1);
taobao_manage.php:        $ret_info = $this->t_taobao_item->get_taobao_item_list($cid,$type);
taobao_manage.php:        return $this->output_succ($ret_list);
taobao_manage.php:        $flag=$this->get_in_int_val("flag");
taobao_manage.php:            $this->t_taobao_item->truncate_taobao();
taobao_manage.php:        $select_type = $this->tbShop->taobao_sellercats_list();
taobao_manage.php:        $this->t_taobao_item->reset_taobao_status();
taobao_manage.php:                $ret_info = $this->tbShop->taobao_tae_items_select($val['cid'],1);
taobao_manage.php:                    $this->taobao_job($taobao_list,$val['cid']);
taobao_manage.php:            $this->t_taobao_item->field_update_list($item,[
taobao_manage.php:            $time          = $this->t_taobao_item->get_last_modified($open_iid);
taobao_manage.php:                $cid_o = $this->t_taobao_item->get_cid($open_iid);
taobao_manage.php:                    $ret   = $this->t_taobao_item->field_update_list($open_iid,[
taobao_manage.php:                    $ret = $this->t_taobao_item->field_update_list($open_iid,[
taobao_manage.php:                $ret = $this->t_taobao_item->row_insert([
taobao_manage.php:        $type=$this->get_in_int_val("type",-1);
taobao_manage.php:        $ret_info = $this->t_taobao_type_list->get_taobao_type_list($type);
taobao_manage.php:        return $this->pageView(__METHOD__,$ret_info);
taobao_manage.php:        $cid  = $this->get_in_int_val("cid",0);
taobao_manage.php:        $type = $this->get_in_int_val("type",0);
taobao_manage.php:            $ret=$this->t_taobao_type_list->field_update_list($cid,[
taobao_manage.php:                return $this->output_succ();
taobao_manage.php:                return $this->output_err("设置失败!请重试!");
taobao_manage.php:            return $this->output_err("淘宝类别为空!请重试!");
taobao_manage.php:        $parent_cid = $this->get_in_int_val("parent_cid",-1);
taobao_manage.php:        $cid        = $this->get_in_int_val("cid",-1);
taobao_manage.php:        $status     = $this->get_in_int_val("status",-1);
taobao_manage.php:        $page_num   = $this->get_in_page_num();
taobao_manage.php:        $ret_info = $this->t_taobao_item->get_taobao_item_by_page($page_num,$cid,$status);
taobao_manage.php:                $val['last_modified_str'] = date("Y-m-d H:i",$val['last_modified']);
taobao_manage.php:        return $this->pageView(__METHOD__,$ret_info);
taobao_manage.php:        $type       = $this->get_in_int_val("type");
taobao_manage.php:        $open_iid   = $this->get_in_str_val("open_iid");
taobao_manage.php:        $product_id = $this->get_in_int_val("product_id");
taobao_manage.php:        $sort_order = $this->get_in_int_val("sort_order");
taobao_manage.php:            $ret=$this->t_taobao_item->get_taobao_item($open_iid);
taobao_manage.php:            return $this->output_succ(['data'=>$ret]);
taobao_manage.php:            $check_flag=$this->t_taobao_item->check_taobao_product($product_id);
taobao_manage.php:                return $this->output_err(-1,"此商品ID已存在!请重新确认!");
taobao_manage.php:                $ret = $this->t_taobao_item->field_update_list($open_iid,[
taobao_manage.php:                return $this->output_err(-1,"商品ID错误!");
taobao_manage.php:                return $this->output_err(-1,"插入失败!");
taobao_manage.php:            return $this->output_succ();
taobao_manage.php:            return $this->output_err(-1,"未知类型!");
taobao_manage.php:        $parent_cid=$this->get_in_int_val("parent_cid",-1);
taobao_manage.php:        if($parent_cid!=-1){
taobao_manage.php:            $ret = $this->t_taobao_type_list->get_taobao_select_list($parent_cid);
taobao_manage.php:        return $this->output_succ(['data'=>$ret]);
teacher_apply.php:        $cc_id = $this->get_account_id();
teacher_apply.php:        $this->set_in_value("cc_id",$cc_id);
teacher_apply.php:        return $this->teacher_apply_list();
teacher_apply.php:        $cc_id = $this->get_account_id();
teacher_apply.php:        $this->set_in_value("cc_id",$cc_id);
teacher_apply.php:        return $this->teacher_apply_list();
teacher_apply.php:        $page_num    = $this->get_in_page_num();
teacher_apply.php:        $page_info   = $this->get_in_page_info();
teacher_apply.php:        $cc_id       = $this->get_in_int_val("cc_id");
teacher_apply.php:        $ret_info    = $this->t_teacher_apply->get_teacher_apply_list($cc_id,$page_info);
teacher_apply.php:            $lesson_info = $this->t_lesson_info->get_lesson_info_by_lessonid_new('lessonid,lesson_type,lesson_name',array_column($ret_info['list'],'lessonid'));
teacher_apply.php:                $item['teacher_time'] = date('Y-m-d H:i:s',$item['teacher_time']);
teacher_apply.php:                $item['cc_time'] = date('Y-m-d H:i:s',$item['cc_time']);
teacher_apply.php:                $item['create_time'] = date('Y-m-d H:i:s',$item['create_time']);
teacher_apply.php:        return $this->pageView(__METHOD__,$ret_info);
teacher_apply.php:        // $stu_info_all = $task->t_student_info->get_ass_stu_info_new();
teacher_apply.php:        // $this->t_manager_info->send_wx_todo_msg("tom","sdfa","dfadf");
teacher_feedback.php:        if (!$this->check_in_has("assistantid")) {
teacher_feedback.php:            $this->set_in_value("assistantid",$this->t_assistant_info->get_assistantid($this->get_account()) );
teacher_feedback.php:        return $this->teacher_feedback_list();
teacher_feedback.php:        if (!$this->check_in_has("accept_adminid")) {
teacher_feedback.php:            $this->set_in_value("accept_adminid",$this->get_account_id());
teacher_feedback.php:        return $this->teacher_feedback_list();
teacher_feedback.php:        list($start_time,$end_time,$opt_date_type) = $this->get_in_date_range(-30,0,1,[
teacher_feedback.php:        $teacherid      = $this->get_in_int_val("teacherid",-1);
teacher_feedback.php:        $assistantid    = $this->get_in_int_val("assistantid",-1);
teacher_feedback.php:        $accept_adminid = $this->get_in_int_val("accept_adminid",-1);
teacher_feedback.php:        $lessonid       = $this->get_in_int_val("lessonid");
teacher_feedback.php:        $status         = $this->get_in_int_val("status",0);
teacher_feedback.php:        $feedback_type  = $this->get_in_int_val("feedback_type",-1);
teacher_feedback.php:        $page_num       = $this->get_in_page_num();
teacher_feedback.php:        $acc            = $this->get_account();
teacher_feedback.php:        $list = $this->t_teacher_feedback_list->get_teacher_feedback_list(
teacher_feedback.php:            \App\Helper\Utils::unixtime2date_for_item($tea_val,"lesson_start","_str","Y-m-d");
teacher_feedback.php:            $tea_val['month_start_str'] = \App\Helper\Utils::unixtime2date($tea_val['lesson_start'],"Y-m-01");
teacher_feedback.php:            $tea_val['lesson_time']     = date("Y-m-d H:i",$tea_val['lesson_start'])."-".date("H:i",$tea_val['lesson_end']);
teacher_feedback.php:            $tea_val['stu_nick']        = $this->cache_get_student_nick($tea_val['userid']);
teacher_feedback.php:        return $this->pageView(__METHOD__,$list,[
teacher_feedback.php:        $lessonid      = $this->get_in_int_val("lessonid");
teacher_feedback.php:        $feedback_type = $this->get_in_int_val("feedback_type");
teacher_feedback.php:            return $this->output_err("课程id或者反馈类型出错!");
teacher_feedback.php:        $lesson_info = $this->t_lesson_info->get_lesson_info($lessonid);
teacher_feedback.php:        return $this->output_succ(["data"=>$lesson_info]);
teacher_feedback.php:        $id            = $this->get_in_int_val("id");
teacher_feedback.php:        $lessonid      = $this->get_in_int_val("lessonid");
teacher_feedback.php:        $check_status  = $this->get_in_int_val("check_status");
teacher_feedback.php:        $check_time    = $this->get_in_int_val("check_time");
teacher_feedback.php:        $back_reason   = $this->get_in_str_val("back_reason");
teacher_feedback.php:        $feedback_type = $this->get_in_int_val("feedback_type");
teacher_feedback.php:            return $this->output_err("不存在该反馈记录!请刷新重试!");
teacher_feedback.php:                $lesson_info = $this->t_lesson_info->get_lesson_info($lessonid);
teacher_feedback.php:                $first_day   = strtotime(date("Y-m-01",time()));
teacher_feedback.php:                    $five_day  = strtotime(date("Y-m-05",time()));
teacher_feedback.php:                    $this->t_lesson_info->field_update_list($lessonid,$lesson_arr);
teacher_feedback.php:                    $ret = $this->t_teacher_money_list->row_insert([
teacher_feedback.php:                        "acc"        => $this->get_account(),
teacher_feedback.php:            return $this->output_err("反馈原因不能为空!");
teacher_feedback.php:        $ret = $this->t_teacher_feedback_list->field_update_list(["id"=>$id],[
teacher_feedback.php:            "sys_operator" => $this->get_account(),
teacher_feedback.php:                $teacherid = $this->t_lesson_info->get_teacherid($lessonid);
teacher_feedback.php:                $wx_openid = $this->t_teacher_info->get_wx_openid($teacherid);
teacher_feedback.php:            return $this->output_succ();
teacher_feedback.php:            return $this->output_err("审核失败,请刷新重试!");
teacher_feedback.php:        $id  = $this->get_in_int_val("id");
teacher_feedback.php:        $acc = $this->get_account();
teacher_feedback.php:            $ret = $this->t_teacher_feedback_list->delete_teacher_feedback_info($id);
teacher_feedback.php:            return $this->output_err("没有权限!");
teacher_feedback.php:        return $this->output_succ();
teacher_feedback.php:        $id            = $this->get_in_int_val("id");
teacher_feedback.php:        $feedback_type = $this->get_in_int_val("feedback_type");
teacher_feedback.php:        $ret = $this->t_teacher_feedback_list->field_update_list(["id"=>$id],[
teacher_feedback.php:            return $this->output_succ();
teacher_feedback.php:            return $this->output_err("更改失败!请重试!");
teacher_info_admin.php:        $this->teacherid=$this->get_in_teacherid();
teacher_info_admin.php:        static::$page_self_view_data["_teacherid"]= $this->teacherid;
teacher_info_admin.php:        static::$page_self_view_data["_teacher_nick"]= $this->cache_get_teacher_nick($this->teacherid);
teacher_info_admin.php:        $teacherid = $this->teacherid;
teacher_info_admin.php:        $tea_info  = $this->t_teacher_info->get_teacher_info_all($teacherid);
teacher_info_admin.php:                               ."-".substr(@$tea_info['birth'],4,2)
teacher_info_admin.php:                               ."-".substr(@$tea_info['birth'],6,2);
teacher_info_admin.php:            $tea_info['create_time'] = date('Y-m-d H:i:s',$tea_info['create_time']);
teacher_info_admin.php:        $adminid      = $this->get_account_id();
teacher_info_admin.php:        $account_role = $this->t_manager_info->get_account_role($adminid);
teacher_info_admin.php:        return $this->pageView(__METHOD__,null,[
teacher_info_admin.php:        $teacherid=$this->get_in_teacherid();
teacher_info_admin.php:        $tea_info  = $this->t_teacher_info->get_teacher_info_all($teacherid);
teacher_info_admin.php:        return $this->output_succ(["data"=>$tea_info]);
teacher_info_admin.php:        $tea_all_list = $this->t_teacher_info->get_teacher_list_new();
teacher_info_admin.php:        $teacherid     = $this->teacherid;
teacher_info_admin.php:        $free_time_new = $this->t_teacher_freetime_for_week->get_free_time_new($teacherid);
teacher_info_admin.php:        $test_lesson_list = $this->t_lesson_info->get_teacher_week_test_lesson_info($teacherid,$start_time,$end_time);
teacher_info_admin.php:            $val["week"] = intval(( $lesson_start-$date_week_test["sdate"])/86400)+1;
teacher_info_admin.php:        $common_lesson_config= $this->t_week_regular_course->get_lesson_info($teacherid,-1);
teacher_info_admin.php:            $arr=explode("-",$start_time);
teacher_info_admin.php:            // $day_start=$stime + ($week-1)*86400;
teacher_info_admin.php:            /*$item["start_time_ex"] = strtotime(date("Y-m-d", $day_start)." $start_time")*1000;
teacher_info_admin.php:            $item["end_time_ex"]   = strtotime(date("Y-m-d", $day_start)." $end_time")*1000;
teacher_info_admin.php:            $item["nick"]          = $this->cache_get_student_nick($item["userid"]);
teacher_info_admin.php:            $item["teacher"]       = $this->cache_get_teacher_nick($item["teacherid"]);*/
teacher_info_admin.php:        return  $this->output_succ( [ "data" =>$free_time_new,"lesson"=>$common_lesson_config,"test_lesson"=>$test_lesson_list ] );
teacher_info_admin.php:        $teacherid = $this->teacherid;
teacher_info_admin.php:        return $this->pageView(__METHOD__, $ret_info , [
teacher_info_admin.php:        $teacherid = $this->teacherid;
teacher_info_admin.php:        $free_time = $this->get_in_str_val("free_time");
teacher_info_admin.php:        $this->t_teacher_freetime_for_week->field_update_list($teacherid,[
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $teacherid              = $this->get_in_int_val("teacherid");
teacher_info_admin.php:        $nick                   = $this->get_in_str_val("nick");
teacher_info_admin.php:        $realname               = $this->get_in_str_val("realname");
teacher_info_admin.php:        $gender                 = $this->get_in_int_val("gender");
teacher_info_admin.php:        $birth                  = $this->get_in_str_val("birth");
teacher_info_admin.php:        $work_year              = $this->get_in_int_val("work_year");
teacher_info_admin.php:        // $is_good_flag           = $this->get_in_int_val("is_good_flag");
teacher_info_admin.php:        $phone                  = $this->get_in_int_val("phone");
teacher_info_admin.php:        /* $textbook_type          = $this->get_in_int_val("textbook_type");
teacher_info_admin.php:        $grade_part_ex          = $this->get_in_int_val("grade_part_ex");
teacher_info_admin.php:        $subject                = $this->get_in_int_val("subject");*/
teacher_info_admin.php:        $putonghua_is_correctly = $this->get_in_int_val("putonghua_is_correctly");
teacher_info_admin.php:        $email                  = $this->get_in_str_val("email");
teacher_info_admin.php:        $advantage              = $this->get_in_str_val("advantage");
teacher_info_admin.php:        $base_intro             = $this->get_in_str_val("base_intro");
teacher_info_admin.php:        $dialect_notes          = $this->get_in_str_val("dialect_notes");
teacher_info_admin.php:            if(preg_match('/^[1-9]\d{4,10}$/',$email)){
teacher_info_admin.php:                $pattern = "/^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/i";
teacher_info_admin.php:                        'ret' => -1,
teacher_info_admin.php:                'ret' => -1,
teacher_info_admin.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_info_admin.php:        $face = $this->get_in_str_val("face");
teacher_info_admin.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_info_admin.php:        $quiz_analyse = $this->get_in_str_val("quiz_analyse");
teacher_info_admin.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_info_admin.php:        $jianli = $this->get_in_str_val("jianli");
teacher_info_admin.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $teacherid = $this->get_in_teacherid();
teacher_info_admin.php:        return $this->pageView(__METHOD__, $ret_info);
teacher_info_admin.php:        $teacherid = $this->get_in_teacherid();
teacher_info_admin.php:        return $this->pageView(__METHOD__, $ret_info);
teacher_info_admin.php:        $teacherid   = $this->get_in_teacherid();
teacher_info_admin.php:        $start_date  = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL) ));
teacher_info_admin.php:        $end_date    = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400*7 ));
teacher_info_admin.php:        $lesson_type = $this->get_in_el_contract_type(-1, "lesson_type");
teacher_info_admin.php:        $page_num    = $this->get_in_page_num();
teacher_info_admin.php:        $lessonid    = $this->get_in_lessonid(-1);
teacher_info_admin.php:        #list($start_time,$end_time) = $this->get_in_date_range(-7,0);
teacher_info_admin.php:        $ret_info=$this->t_lesson_info_b2->get_teacher_lesson_list_new(  $page_num,$teacherid,$start_time,$end_time,$lesson_type,$lessonid);
teacher_info_admin.php:                $item["lesson_course_name"] = $this->cache_get_student_nick($item["userid"]);
teacher_info_admin.php:            $item['tea_comment_str']="<font color=red>-<font>";
teacher_info_admin.php:                    $tea_comment=$this->t_seller_student_info->get_lesson_content($item['lessonid']);
teacher_info_admin.php:                    $tea_comment=$this->t_lesson_info->get_stu_performance($item['lessonid']);
teacher_info_admin.php:                $ret_homework=$this->t_small_lesson_info->get_pdf_homework($item['lessonid']);
teacher_info_admin.php:            $item["pay_flag"] =-2;
teacher_info_admin.php:        return $this->pageView(__METHOD__,$ret_info);
teacher_info_admin.php:        $teacherid = $this->teacherid;
teacher_info_admin.php:        return $this->pageView(__METHOD__, $ret_info,['teacherid'=>$teacherid]);
teacher_info_admin.php:        $teacherid = $this->get_in_teacherid();
teacher_info_admin.php:        $timestamp = $this->get_in_int_val("timestamp");
teacher_info_admin.php:        $type      = $this->get_in_int_val("type",0);
teacher_info_admin.php:        $lesson_list=$this->t_lesson_info->get_teacher_lesson_info($teacherid,$start_time,$end_time);
teacher_info_admin.php:            $nick=$this->cache_get_student_nick($item["userid"]);
teacher_info_admin.php:        return $this->output_succ(["lesson_list"=>$lesson_list]);
teacher_info_admin.php:        $userid= $this->get_in_int_val("userid");
teacher_info_admin.php:        $phone=$this->t_student_info->get_phone($userid);
teacher_info_admin.php:        $row=$this->t_seller_student_info->field_get_list($phone, "*");
teacher_info_admin.php:        $teacherid     = $this->teacherid;
teacher_info_admin.php:        $page_num    = $this->get_in_page_num();
teacher_info_admin.php:        $ret_info = $this->t_teacher_assess->get_assess_info($teacherid,$page_num);
teacher_info_admin.php:            $item['assess_nick'] = $this->cache_get_account_nick($item['assess_adminid']);
teacher_info_admin.php:            $item['assess_time_str'] = date("Y-m-d H:i:s",$item["assess_time"]) ;
teacher_info_admin.php:        $assess_num = $this->t_teacher_info->field_get_value($teacherid,"assess_num");
teacher_info_admin.php:        return $this->pageView(__METHOD__,$ret_info,['assess_num'=>$assess_num]);
teacher_info_admin.php:        $teacherid= $this->get_in_int_val("teacherid");
teacher_info_admin.php:        $assess_time= $this->get_in_int_val("assess_time");
teacher_info_admin.php:        $ret = $this->t_teacher_assess->row_delete_2($teacherid,$assess_time);
teacher_info_admin.php:        $assess_num = $this->t_teacher_info->field_get_value($teacherid,"assess_num")-1;
teacher_info_admin.php:            $this->t_teacher_info->field_update_list($teacherid,["assess_num"=>$assess_num]);
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $teacherid= $this->get_in_int_val("teacherid");
teacher_info_admin.php:        $assess_res= $this->get_in_int_val("assess_res");
teacher_info_admin.php:        $content= trim($this->get_in_str_val("content"));
teacher_info_admin.php:        $advise_reason= trim($this->get_in_str_val("advise_reason"));
teacher_info_admin.php:        $assess_adminid=$this->get_account_id();
teacher_info_admin.php:        $ret = $this->t_teacher_assess->row_insert([
teacher_info_admin.php:        $assess_num = $this->t_teacher_info->field_get_value($teacherid,"assess_num")+1;
teacher_info_admin.php:            $this->t_teacher_info->field_update_list($teacherid,["assess_num"=>$assess_num]);
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $teacherid= $this->get_in_int_val("teacherid");
teacher_info_admin.php:        $assess_res= $this->get_in_int_val("assess_res");
teacher_info_admin.php:        $content= trim($this->get_in_str_val("content"));
teacher_info_admin.php:        $advise_reason= trim($this->get_in_str_val("advise_reason"));
teacher_info_admin.php:        $assess_time= $this->get_in_int_val("assess_time");
teacher_info_admin.php:        $ret = $this->t_teacher_assess->field_update_list_2($teacherid,$assess_time,[
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $create_time = $this->get_in_str_val("create_time");
teacher_info_admin.php:        $theme = $this->get_in_str_val("theme");
teacher_info_admin.php:        $summary = $this->get_in_str_val("summary");
teacher_info_admin.php:        $address = $this->get_in_str_val("address");
teacher_info_admin.php:        $moderator = $this->get_in_str_val("moderator");
teacher_info_admin.php:            return outputJson(array('ret' => -1, 'info' => '时间不能为空'));
teacher_info_admin.php:        $this->t_teacher_meeting_info->row_insert([
teacher_info_admin.php:        $ret_tea = $this->t_teacher_info->get_teacher_list_new();
teacher_info_admin.php:            $this->t_teacher_meeting_join_info->row_insert([
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $create_time = $this->get_in_str_val("create_time");
teacher_info_admin.php:        $theme = $this->get_in_str_val("theme");
teacher_info_admin.php:        $summary = $this->get_in_str_val("summary");
teacher_info_admin.php:        $address = $this->get_in_str_val("address");
teacher_info_admin.php:        $moderator = $this->get_in_str_val("moderator");
teacher_info_admin.php:        $id = $this->get_in_int_val("id");
teacher_info_admin.php:            return outputJson(array('ret' => -1, 'info' => '时间不能为空'));
teacher_info_admin.php:        $this->t_teacher_meeting_info->field_update_list($id,[
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $id = $this->get_in_int_val("id");
teacher_info_admin.php:        $this->t_teacher_meeting_info->row_delete($id);
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $id = $this->get_in_int_val("id");
teacher_info_admin.php:        $teacher_join_info = $this->get_in_str_val("teacher_join_info");
teacher_info_admin.php:        $this->t_teacher_meeting_info->field_update_list($id,['teacher_join_info'=>$teacher_join_info]);
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $join_info = $this->get_in_int_val("join_info");
teacher_info_admin.php:        $create_time = $this->get_in_str_val("create_time");
teacher_info_admin.php:        $teacherid_list = json_decode($this->get_in_str_val("teacherid_list"));
teacher_info_admin.php:            $this->t_teacher_meeting_join_info->field_update_list_2($item,$create_time,['join_info'=>$join_info]);
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $join_info = $this->get_in_int_val("join_info");
teacher_info_admin.php:        $create_time = $this->get_in_str_val("create_time");
teacher_info_admin.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_info_admin.php:        $this->t_teacher_meeting_join_info->field_update_list_2($teacherid,$create_time,['join_info'=>$join_info]);
teacher_info_admin.php:        return $this->output_succ();
teacher_info_admin.php:        $gender     = $this->get_in_int_val('gender',-1);
teacher_info_admin.php:        $nick_phone = trim($this->get_in_str_val('nick_phone',""));
teacher_info_admin.php:        $page_num     = $this->get_in_page_num();
teacher_info_admin.php:        $ret_info = $this->t_teacher_info->get_all_teacher_info_new($gender,$nick_phone,$page_num);
teacher_info_admin.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
teacher_info_new.php:// require_once (app_path("Libs/qiniu-7/src/Qiniu/functions.php"));
teacher_info_new.php:        $this->teacher_money = \App\Helper\Config::get_config("teacher_money");
teacher_info_new.php:        $teacherid   = $this->get_login_teacher();
teacher_info_new.php:        $userid      = $this->get_in_int_val("userid",-1);
teacher_info_new.php:        $start_date  = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL) ));
teacher_info_new.php:        $end_date    = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400*7 ));
teacher_info_new.php:        $lesson_type = $this->get_in_int_val('lesson_type',-1);
teacher_info_new.php:        $ret_info = $this->t_lesson_info->get_teacher_lesson_list_new(
teacher_info_new.php:            $trial_train_list = $this->t_lesson_info->get_trial_train_list($teacherid);
teacher_info_new.php:            $item['tea_comment_str'] = "<font color=red>-</font>";
teacher_info_new.php:                    $item['cc_id']= $this->t_assistant_info->get_adminid_by_assistand( $item['assistantid']);
teacher_info_new.php:                $item['ass_nick'] = $this->cache_get_assistant_nick($item['assistantid']);
teacher_info_new.php:                    $item["stu_nick"] = $this->cache_get_student_nick($item["userid"]);
teacher_info_new.php:                $this->check_tea_comment($item);
teacher_info_new.php:                $ret_homework = $this->t_small_lesson_info->get_pdf_homework($item['lessonid']);
teacher_info_new.php:                $from_lesson_info                       = $this->t_test_lesson_subject->get_from_lesson_info($from_lessonid);
teacher_info_new.php:                $item['stu_request_test_lesson_demand']="<font color=red>-</font>";
teacher_info_new.php:        $student_list = $this->t_lesson_info->get_student_list($teacherid,$start_time,$end_time);
teacher_info_new.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info_new.php:        $teacherid = $this->get_login_teacher();
teacher_info_new.php:        $page_num  = $this->get_in_page_num();
teacher_info_new.php:        $ret_info  = $this->t_teacher_apply->get_teacher_apply_list($teacherid,$page_num);
teacher_info_new.php:        $lesson_info = $this->t_lesson_info->get_lesson_info_by_lessonid('lessonid,assistantid,lesson_type,lesson_name,train_type',array_column($ret_info['list'],'lessonid'));
teacher_info_new.php:                            $item['ass_nick'] = $this->cache_get_assistant_nick($info['assistantid']);
teacher_info_new.php:                    $item['create_time'] = date('Y-m-d H:i:s',$item['create_time']);
teacher_info_new.php:        return $this->pageView(__METHOD__,$ret_info);
teacher_info_new.php:        $teacherid        = $this->get_login_teacher();
teacher_info_new.php:        $cc_id            = $this->get_in_int_val('cc_id',0);
teacher_info_new.php:        $stu_nick         = $this->get_in_str_val('stu_nick',0);
teacher_info_new.php:        $lesson_time      = $this->get_in_str_val('lesson_time',0);
teacher_info_new.php:        $lesson_type      = $this->get_in_int_val('lesson_type',0);
teacher_info_new.php:        $lessonid         = $this->get_in_int_val('lessonid', 0);
teacher_info_new.php:        $question_type    = $this->get_in_int_val('question_type', 0);
teacher_info_new.php:        $question_content = $this->get_in_str_val('question_content', '');
teacher_info_new.php:        $this->t_teacher_apply->row_insert([
teacher_info_new.php:        $this->send_wx_apply($cc_id,$question_type,$teacherid,$lesson_time,$question_content,$stu_nick);
teacher_info_new.php:        return $this->output_succ();
teacher_info_new.php:        $account = $this->t_manager_info->get_account_by_uid($cc_id);
teacher_info_new.php:        $question_type_str = $this->get_question_type_str($question_type);
teacher_info_new.php:        $teacher_nick = $this->t_teacher_info->get_nick($teacherid);
teacher_info_new.php:        $msg = "上课时间：".$lesson_time.";问题描述：".$question_content.";日期：".date("Y-m-d H:i:s",time()).";为保证试听质量，请您尽快回访处理。";
teacher_info_new.php:        return $this->send_curl_post($post_url);
teacher_info_new.php:        $id = $this->get_in_id();
teacher_info_new.php:        $teacher_flag=$this->get_in_int_val('teacher_flag',0);
teacher_info_new.php:            $this->t_teacher_apply->field_update_list($id,[
teacher_info_new.php:            $this->t_teacher_apply->field_update_list($id,[
teacher_info_new.php:        return $this->output_succ();
teacher_info_new.php:        $id=$this->get_in_id();
teacher_info_new.php:        $this->t_teacher_apply->row_delete($id);
teacher_info_new.php:        return $this->output_succ();
teacher_info_new.php:            $tea_comment = $this->t_seller_student_info->get_lesson_content($lesson_info['lessonid']);
teacher_info_new.php:                $tea_comment = $this->t_test_lesson_subject_require->get_lesson_content($lesson_info['lessonid']);
teacher_info_new.php:            $tea_comment = $this->t_lesson_info->get_stu_performance($lesson_info['lessonid']);
teacher_info_new.php:        $teacherid   = $this->get_login_teacher();
teacher_info_new.php:        $start_date  = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL) ));
teacher_info_new.php:        $end_date    = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400*7 ));
teacher_info_new.php:        $lesson_type = $this->get_in_int_val('lesson_type',-1);
teacher_info_new.php:        $page_num    = $this->get_in_page_num();
teacher_info_new.php:        $ret_info=$this->t_lesson_info->get_teacher_lesson_list($teacherid,$start_time,$end_time,$lesson_type_in_str, $page_num);
teacher_info_new.php:                $item["lesson_course_name"] = $this->cache_get_student_nick($item["userid"]);
teacher_info_new.php:                    $editionid = $this->t_student_info->get_editionid($item['userid']);
teacher_info_new.php:                $ret_homework = $this->t_small_lesson_info->get_pdf_homework($item['lessonid']);
teacher_info_new.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info_new.php:        $teacherid   = $this->get_login_teacher();
teacher_info_new.php:        return $this->pageView(__METHOD__, $ret_info);
teacher_info_new.php:        $teacherid   = $this->get_login_teacher();
teacher_info_new.php:        return $this->pageView(__METHOD__, $ret_info);
teacher_info_new.php:        $teacherid   = $this->get_login_teacher();
teacher_info_new.php:        $common_lesson_config= $this->t_teacher_freetime_for_week->get_common_lesson_config($teacherid);
teacher_info_new.php:            $arr=explode("-",$start_time);
teacher_info_new.php:            $day_start=$stime + ($week-1)*86400;
teacher_info_new.php:            $item["start_time_ex"] = strtotime(date("Y-m-d", $day_start)." $start_time")*1000;
teacher_info_new.php:            $item["end_time_ex"]   = strtotime(date("Y-m-d", $day_start)." $end_time")*1000;
teacher_info_new.php:            $item["nick"]          = $this->cache_get_student_nick($item["userid"]);
teacher_info_new.php:            $item["teacher"]       = $this->cache_get_teacher_nick($teacherid);
teacher_info_new.php:        return  $this->output_succ( [ "common_lesson_config" => $common_lesson_config] );
teacher_info_new.php:        $opt_type  = $this->get_in_str_val("opt_type");
teacher_info_new.php:        $teacherid = $this->get_login_teacher();
teacher_info_new.php:        $old_key    = $this->get_in_str_val("old_key");
teacher_info_new.php:        $start_time = $this->get_in_str_val("start_time");
teacher_info_new.php:        $end_time   = $this->get_in_str_val("end_time");
teacher_info_new.php:        $tea_type   = $this->get_in_int_val("tea_type",0);
teacher_info_new.php:        $freetime   = $this->get_in_int_val("freetime",0);
teacher_info_new.php:        $userid     = $this->get_in_userid();
teacher_info_new.php:        $teacher_in = $this->t_teacher_freetime_for_week->check_userid($teacherid);
teacher_info_new.php:            $this->t_teacher_freetime_for_week->add_regular_course($teacherid,$tea_type,$freetime);
teacher_info_new.php:        $common_lesson_config = $this->t_teacher_freetime_for_week->get_common_lesson_config($teacherid);
teacher_info_new.php:                return $this->output_err("请设置学生") ;
teacher_info_new.php:        $ret_db = $this->t_teacher_freetime_for_week->field_update_list($teacherid,[
teacher_info_new.php:        return $this->output_succ();
teacher_info_new.php:        $teacherid = $this->get_login_teacher();
teacher_info_new.php:        $timestamp = $this->get_in_int_val("timestamp");
teacher_info_new.php:        $type      = $this->get_in_int_val("type",0);
teacher_info_new.php:        $lesson_list=$this->t_lesson_info->get_teacher_lesson_info($teacherid,$start_time,$end_time);
teacher_info_new.php:            $nick=$this->cache_get_student_nick($item["userid"]);
teacher_info_new.php:        return $this->output_succ(["lesson_list"=>$lesson_list]);
teacher_info_new.php:        $lessonid = $this->get_in_int_val('lessonid',-1);
teacher_info_new.php:        $ret_info = $this->t_lesson_info->get_lesson_info($lessonid);
teacher_info_new.php:            $ret_info["lesson_course_name"] = $this->cache_get_student_nick($ret_info["userid"]);
teacher_info_new.php:        return $this->output_succ(["data"=>$ret_info]);
teacher_info_new.php:        $file_url = $this->get_in_str_val("file_url");
teacher_info_new.php:            return $this->output_err(array( 'info' => '文件名为空', 'file' => $file_url));
teacher_info_new.php:            return $this->output_succ( array('ret' => 0, 'info' => '成功', 'file' => $file_url));
teacher_info_new.php:            $new_url=$this->gen_download_url($file_url);
teacher_info_new.php:            return $this->output_succ(array('ret' => 0, 'info' => '成功',
teacher_info_new.php:        $base_url=$auth->privateDownloadUrl($file_url );
teacher_info_new.php:        $teacherid          = $this->get_login_teacher();
teacher_info_new.php:        $lessonid           = $this->get_in_lessonid();
teacher_info_new.php:        $lesson_name        = $this->get_in_str_val("lesson_name");
teacher_info_new.php:        $lesson_intro       = $this->get_in_str_val("lesson_intro");
teacher_info_new.php:        $tea_cw_url         = trim($this->get_in_str_val("tea_cw_url"));
teacher_info_new.php:        $stu_cw_url         = trim($this->get_in_str_val("stu_cw_url"));
teacher_info_new.php:        $issue_url          = trim($this->get_in_str_val("issue_url"));
teacher_info_new.php:        $pdf_question_count = trim($this->get_in_str_val("pdf_question_count"));
teacher_info_new.php:        $tea_more_cw_url    = trim($this->get_in_str_val("tea_more_cw_url"));
teacher_info_new.php:        $tea_cw_pic_flag    = $this->get_in_int_val("tea_cw_pic_flag");
teacher_info_new.php:        $old_tea_cw_time    = trim($this->get_in_str_val("old_tea_cw_time"));
teacher_info_new.php:        $old_stu_cw_time    = trim($this->get_in_str_val("old_stu_cw_time"));
teacher_info_new.php:        $old_issue_time     = trim($this->get_in_str_val("old_issue_time"));
teacher_info_new.php:        $old_tea_cw_url     = trim($this->get_in_str_val("old_tea_cw_url"));
teacher_info_new.php:        $db_teacherid = $this->t_lesson_info->get_teacherid($lessonid);
teacher_info_new.php:            $this->output_err("你不是该课程的老师");
teacher_info_new.php:        $this->t_lesson_info->field_update_list($lessonid,[
teacher_info_new.php:        $lesson_type=$this->t_lesson_info->get_lesson_type($lessonid);
teacher_info_new.php:            $ret = $this->t_small_lesson_info->update_pdf($lessonid,$issue_url,$work_status,$pdf_question_count,$issue_time);
teacher_info_new.php:            $ret = $this->t_homework_info->field_update_list($lessonid,[
teacher_info_new.php:            $this->send_curl_post($post_url);
teacher_info_new.php:        return $this->output_succ();
teacher_info_new.php:        $teacherid  = $this->get_login_teacher();
teacher_info_new.php:        $studentid  = -1;
teacher_info_new.php:        $year       = $this->get_in_int_val("year","2016");
teacher_info_new.php:        $month      = $this->get_in_int_val("month","11");
teacher_info_new.php:        $start_time = strtotime( "$year-$month-01");
teacher_info_new.php:        $end_time = strtotime("$year-$month-01");
teacher_info_new.php:        $old_list = $this->t_lesson_info->get_1v1_lesson_list_by_teacher($teacherid,$studentid,$start_time,$end_time);
teacher_info_new.php:                    "key_class" => $key_class."-".$cur_key_index,
teacher_info_new.php:        $data_map=[]; //studentid -> lesson_count_level -> row
teacher_info_new.php:            $diff=($item["lesson_end"]-$item["lesson_start"])/60;
teacher_info_new.php:                $item["lesson_count_err"]="background-color:red;";
teacher_info_new.php:                $data["level"]="l-0";
teacher_info_new.php:                    $data["stu_nick"]=$this->cache_get_student_nick($key1);
teacher_info_new.php:                    $data["level"]="l-1";
teacher_info_new.php:                        $data["level"]="l-2";
teacher_info_new.php:                            $data["level"]="l-3";
teacher_info_new.php:                            $data["lesson_count_level_str"]="-";
teacher_info_new.php:        return $this->Pageview(__METHOD__,$ret_list );
teacher_info_new.php:        return $this->view(__METHOD__);
teacher_info_new.php:        $teacherid   = $this->get_login_teacher();
teacher_info_new.php:            return $this->output_err("老师登陆信息错误，请退出重新登陆!");
teacher_info_new.php:        $tea_info=$this->t_teacher_info->get_teacher_info_all($teacherid);
teacher_info_new.php:        $tea_info['birth_str'] = substr(@$tea_info['birth'],0,4)."-"
teacher_info_new.php:                               .substr(@$tea_info['birth'],4,2)."-"
teacher_info_new.php:            $tea_info['create_time'] = date('Y-m-d H:i:s',$tea_info['create_time']);
teacher_info_new.php:        return $this->pageView(__METHOD__,null,['tea_info'=>$tea_info]);
teacher_info_new.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_info_new.php:        $face = $this->get_in_str_val("face");
teacher_info_new.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info_new.php:        return $this->output_succ();
teacher_info_new.php:        $teacherid     = $this->get_in_int_val("teacherid");
teacher_info_new.php:        $nick          = $this->get_in_str_val("nick");
teacher_info_new.php:        $realname      = $this->get_in_str_val("realname");
teacher_info_new.php:        $gender        = $this->get_in_int_val("gender");
teacher_info_new.php:        $birth         = $this->get_in_str_val("birth");
teacher_info_new.php:        $work_year     = $this->get_in_int_val("work_year");
teacher_info_new.php:        $phone         = $this->get_in_int_val("phone");
teacher_info_new.php:        $grade_part_ex = $this->get_in_int_val("grade_part_ex");
teacher_info_new.php:        $subject       = $this->get_in_int_val("subject");
teacher_info_new.php:        $putonghua_is_correctly = $this->get_in_int_val("putonghua_is_correctly");
teacher_info_new.php:        $email         = $this->get_in_str_val("email");
teacher_info_new.php:        $base_intro    = $this->get_in_str_val("base_intro");
teacher_info_new.php:        $dialect_notes = $this->get_in_str_val("dialect_notes");
teacher_info_new.php:            if(preg_match('/^[1-9]\d{4,10}$/',$email)){
teacher_info_new.php:                $pattern = "/^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/i";
teacher_info_new.php:                        'ret' => -1,
teacher_info_new.php:                'ret' => -1,
teacher_info_new.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info_new.php:        return $this->output_succ();
teacher_info_new.php:        $teacherid  = $this->get_login_teacher();
teacher_info_new.php:        $year       = $this->get_in_str_val("year","2017-1");
teacher_info_new.php:        if(!in_array($year,["2016-12","2017-1"])){
teacher_info_new.php:            $year = "2017-1";
teacher_info_new.php:        $start_time = strtotime("$year-01");
teacher_info_new.php:        $begin_time = strtotime("2016-12-01");
teacher_info_new.php:            return $this->Pageview(__METHOD__,$ret_list);
teacher_info_new.php:        $teacher_money_flag = $this->t_teacher_info->get_teacher_money_flag($teacherid);
teacher_info_new.php:        $teacher_money_type = $this->t_teacher_info->get_teacher_money_type($teacherid);
teacher_info_new.php:        $teacher_honor      = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,1);
teacher_info_new.php:        $teacher_trial      = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,2);
teacher_info_new.php:        $old_list           = $this->t_lesson_info->get_lesson_list_for_wages($teacherid,$start_time,$end_time);
teacher_info_new.php:            $start = strtotime("-1 month",strtotime(date("Y-m-01",$start_time)));
teacher_info_new.php:            $already_lesson_count = $this->t_lesson_info->get_teacher_last_month_lesson_count($teacherid,$start,$end);
teacher_info_new.php:                    "key_class" => $key_class."-".$cur_key_index,
teacher_info_new.php:                    $arr[$k]-=$v;
teacher_info_new.php:                        $lesson_count_level=$key==0?$i:($i-1);
teacher_info_new.php:            $diff = ($item["lesson_end"]-$item["lesson_start"])/60;
teacher_info_new.php:                $item["lesson_count_err"] = "background-color:red;";
teacher_info_new.php:            $item['lesson_full_reward'] = $this->get_lesson_full_reward($item['lesson_full_num']);
teacher_info_new.php:            $this->get_lesson_cost_info($item);
teacher_info_new.php:                    $item['pre_reward'] = $this->get_teacher_lesson_money($item['type'],$already_lesson_count);
teacher_info_new.php:                                   -$item['lesson_cost'];
teacher_info_new.php:                        $item["price"]        = $trial_base+$item['lesson_full_reward']-$item['lesson_cost'];
teacher_info_new.php:                $data["level"]="l-0";
teacher_info_new.php:                    $data["stu_nick"]=$this->cache_get_student_nick($key1);
teacher_info_new.php:                    $data["level"]="l-1";
teacher_info_new.php:                        $data["level"]="l-2";
teacher_info_new.php:                            $data["level"]="l-3";
teacher_info_new.php:                            $data["lesson_count_level_str"]="-";
teacher_info_new.php:                    $tax_price = $teacher_all_money-800;
teacher_info_new.php:                    $teacher_all_money -= $teacher_tax_money;
teacher_info_new.php:                $teacher_all_money -= $teacher_tax_money;
teacher_info_new.php:         $tax_price = $teacher_all_money-800;
teacher_info_new.php:         $teacher_all_money -= $teacher_tax_money;
teacher_info_new.php:        return $this->Pageview(__METHOD__,$ret_list,[
teacher_info_new.php:        $full_num = $this->teacher_money['lesson_full_num'];
teacher_info_new.php:            $lesson_full_reward = $this->teacher_money['lesson_full_reward']/100;
teacher_info_new.php:            $this->change_num=0;
teacher_info_new.php:            $this->late_num=0;
teacher_info_new.php:                $lesson_all_cost = $this->teacher_money['lesson_miss_cost']/100;
teacher_info_new.php:                if($this->change_num>=3){
teacher_info_new.php:                    $lesson_all_cost = $this->teacher_money['lesson_cost']/100;
teacher_info_new.php:                    $this->change_num++;
teacher_info_new.php:                    $lesson_info     = "本月第".$this->change_num."次换课";
teacher_info_new.php:            $lesson_cost = $this->teacher_money['lesson_cost']/100;
teacher_info_new.php:                        if($key=="deduct_come_late" && $this->late_num<3){
teacher_info_new.php:                            $this->late_num++;
teacher_info_new.php:        list($start_time,$end_time) = $this->get_in_date_range(date("Y-m-01",time()),0,0,[],3);
teacher_info_new.php:        $page_num  = $this->get_in_page_num();
teacher_info_new.php:        $teacherid = $this->get_login_teacher();
teacher_info_new.php:        $status    = $this->get_in_int_val("status",-1);
teacher_info_new.php:        $phone    = $this->t_teacher_info->get_phone($teacherid);
teacher_info_new.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info($page_num,$start_time,$end_time,$phone,$status);
teacher_info_new.php:                $item["answer_time"] = date("Y-m-d H:i:s",$item["answer_begin_time"])."-".date("H:i:s",$item["answer_end_time"]);
teacher_info_new.php:                    $item["confirm_time_str"] = date("Y-m-d H:i:s",$item['confirm_time']);
teacher_info_new.php:                if($item['status']=="-2"){
teacher_info_new.php:                    $item['name']  = mb_substr($item['name'],0,1,"utf-8")."老师";
teacher_info_new.php:            return $this->pageView(__METHOD__,[],[
teacher_info_new.php:        $all_info  = $this->t_teacher_lecture_appointment_info->get_lecture_count_info($start_time,$end_time,$phone);
teacher_info_new.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info_new.php:        $text       = $this->get_in_str_val("text");
teacher_info_new.php:        $time       = $this->get_in_str_val("time","0");
teacher_info_new.php:            $ret_info = $this->t_test_lesson_subject_require->grab_trial_lesson_list($require_id);
teacher_info_new.php:                $item['accept_account'] = $this->t_manager_info->get_name($item['accept_adminid']);
teacher_info_new.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info_new.php:        $teacherid    = $this->get_login_teacher();
teacher_info_new.php:        $require_id   = $this->get_in_int_val("require_id");
teacher_info_new.php:        $lesson_start = $this->get_in_str_val('lesson_start');
teacher_info_new.php:        $grade        = $this->get_in_int_val('grade');
teacher_info_new.php:        $db_lessonid=$this->t_test_lesson_subject_require->get_current_lessonid($require_id);
teacher_info_new.php:            return $this->output_err("此课程已被其他老师预约。");
teacher_info_new.php:            return $this->output_err("此课程的申请时间已超时!");
teacher_info_new.php:        $week_freeze_info = $this->t_teacher_info->field_get_list($teacherid,"is_freeze,is_week_freeze,week_freeze_time,lesson_hold_flag,is_test_user");
teacher_info_new.php:            return $this->output_err("您已被冻结，无法排课!");
teacher_info_new.php:            if($week_freeze_info["week_freeze_time"]>=($lstart-7*86400) && $week_freeze_info["week_freeze_time"]<($lend-7*86400)){
teacher_info_new.php:                return $this->output_err("您本周被冻结,下一周开始可以排课!");
teacher_info_new.php:        //     return $this->output_err("您已被限制排课!");
teacher_info_new.php:        $teacher_type_train_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,train_through_new");
teacher_info_new.php:            return $this->output_err("您培训未通过,暂不能排试听课!");
teacher_info_new.php:        $test_lesson_subject_id = $this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
teacher_info_new.php:        $tt_item = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"subject, grade, userid ");
teacher_info_new.php:        $teacher_subject = $this->t_teacher_info->field_get_list($teacherid,"subject,second_subject,third_subject,grade_part_ex,second_grade,third_grade,grade_start,grade_end,not_grade,not_grade_limit,limit_plan_lesson_type");
teacher_info_new.php:            $check_subject= $this->check_teacher_subject_and_grade(
teacher_info_new.php:            $check_subject=$this->check_teacher_grade_range_new($tt_item,$teacher_subject);
teacher_info_new.php:        $test_lesson_num = $this->t_lesson_info->get_limit_type_teacher_lesson_num($teacherid,$lstart,$lend);
teacher_info_new.php:            return $this->output_err(
teacher_info_new.php:        $limit_num_info = $this->t_teacher_info->field_get_list($teacherid,"limit_day_lesson_num,limit_week_lesson_num");
teacher_info_new.php:        $ret = $this->t_lesson_info->check_teacher_have_test_lesson_pre_week($teacherid,$lstart);
teacher_info_new.php:                return $this->output_err("您试听课一周限排".$limit_num_info["limit_week_lesson_num"]."节!");
teacher_info_new.php:                return $this->output_err("您是新入职老师,试听课一周限排6节!");
teacher_info_new.php:        $day_st    = date("Y-m-d",$lesson_start);
teacher_info_new.php:        $test_lesson_num_day = $this->t_lesson_info->get_limit_type_teacher_lesson_num($teacherid,$day_start,$day_end);
teacher_info_new.php:            return $this->output_err(
teacher_info_new.php:        $stu_free = $this->t_lesson_info->check_student_time_free($userid,0,$lesson_start,$lesson_end);
teacher_info_new.php:            return $this->output_err("有现存的学生课程与该课程时间冲突！请联系教务老师！");
teacher_info_new.php:        $tea_free=$this->t_lesson_info->check_teacher_time_free(
teacher_info_new.php:            return $this->output_err("您有一堂课和此课程冲突，无法排课!");
teacher_info_new.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
teacher_info_new.php:        $this->t_course_order->start_transaction();
teacher_info_new.php:        $courseid = $this->t_course_order->add_course_info_new($orderid,$userid,$grade,$subject,100,2,0,1,1,0,$teacherid);
teacher_info_new.php:        $lessonid = $this->t_lesson_info->add_lesson(
teacher_info_new.php:        $stu_free = $this->t_lesson_info->check_student_time_free($userid,$lessonid,$lesson_start,$lesson_end);
teacher_info_new.php:            $this->t_course_order->rollback();
teacher_info_new.php:            return $this->output_err("本节课已经被抢！请刷新页面重新查看！");
teacher_info_new.php:        $this->t_course_order->commit();
teacher_info_new.php:        $this->t_homework_info->add($courseid,0,$userid,$lessonid,$grade,$subject,$teacherid);
teacher_info_new.php:        $accept_adminid = $this->t_test_lesson_subject_require->get_accept_adminid($require_id);
teacher_info_new.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
teacher_info_new.php:        $this->t_test_lesson_subject_sub_list->row_insert([
teacher_info_new.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
teacher_info_new.php:        $account = $this->t_manager_info->get_account($accept_adminid);
teacher_info_new.php:        $this->t_test_lesson_subject_require->set_test_lesson_status(
teacher_info_new.php:        $this->t_lesson_info->reset_lesson_list($courseid);
teacher_info_new.php:        $this->t_seller_student_new->field_update_list($userid,[
teacher_info_new.php:            $require_adminid = $this->t_test_lesson_subject->get_require_adminid($test_lesson_subject_id);
teacher_info_new.php:            $userid          = $this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
teacher_info_new.php:            $phone           = $this->t_seller_student_new->get_phone($userid);
teacher_info_new.php:            $nick            = $this->t_student_info->get_nick($userid);
teacher_info_new.php:            $teacher_nick = $this->cache_get_teacher_nick($teacherid);
teacher_info_new.php:            $require_admin_nick = $this->t_manager_info->get_account($require_adminid);
teacher_info_new.php:            $this->send_curl_post($post_url);
teacher_info_new.php:        return $this->output_succ();
teacher_info_new.php:                return $this->output_err("请安排与老师科目相符合的课程!");
teacher_info_new.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                         return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_new.php:                return $this->output_err("该老师对应年级段已被冻结!");
teacher_info_new.php:        $stu_grade_range = $this->get_grade_range_new($stu_info['grade']);
teacher_info_new.php:            return $this->output_err("学生年级与老师年级范围不匹配!");
teacher_info_new.php:            return $this->output_err("学生科目与老师科目不匹配!");
teacher_info_new.php:            return $this->output_err("该老师对应年级段已被冻结!");
teacher_info_new.php:        $start_date      = $this->get_in_str_val("start_date",date("Y-m",time()));
teacher_info_new.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
teacher_info_new.php:        $last_start_time = strtotime("-1 month",$start_time);
teacher_info_new.php:        $last_end_time   = strtotime("-1 month",$end_time);
teacher_info_new.php:        $uid             = $this->get_login_teacher();
teacher_info_new.php:        $teacher_info     = $this->t_teacher_info->get_teacher_info_all($uid);
teacher_info_new.php:            $teacher_ref_num  = $this->t_teacher_info->get_teacher_ref_num($start_time,$teacher_ref_type);
teacher_info_new.php:        $check_date = "2017-6-1";
teacher_info_new.php:            $teaid_list    = $this->t_teacher_info->get_tea_list_by_ref_type($teacher_ref_type,$teacherid);
teacher_info_new.php:                    $reward_money     = $this->t_teacher_money_list->get_teacher_reward_money($tea_id,$start_time,$end_time,3);
teacher_info_new.php:            $tea_list = $this->t_lesson_info->get_tea_month_list($start_time,$end_time,trim($teacherid_str,","));
teacher_info_new.php:                        $this->t_lesson_info->get_teacher_last_month_lesson_count($tid,$last_start_time,$last_end_time);
teacher_info_new.php:                $this->get_lesson_cost_info($val);
teacher_info_new.php:                $money  = ($val['money']+$reward)*$lesson_count-$val['lesson_cost'];
teacher_info_new.php:        return $this->pageView(__METHOD__,$show_teacher_money,[
teacher_info_new.php:        $lessonid     = $this->get_in_int_val("lessonid");
teacher_info_new.php:        $start_date   = $this->get_in_str_val("start_date",date("Y-m-d H:i",time()));
teacher_info_new.php:        $ret = $this->t_lesson_info->field_update_list($lessonid,[
teacher_info_new.php:            return $this->output_err("更改失败!请重试!");
teacher_info_new.php:        return $this->output_succ();
teacher_info_new.php:        $msg            = $this->get_in_str_val('complaint_info');
teacher_info_new.php:        $teacherid      = $this->get_account_id();
teacher_info_new.php:        $ret_info_qc = $this->t_complaint_info->row_insert([
teacher_info_new.php:            $log_time_date = date('Y-m-d H:i:s',time(NULL));
teacher_info_new.php:            $opt_nick      = $this->cache_get_teacher_nick($teacherid);
teacher_info_new.php:                $this->send_teacher_msg($qc_item,$opt_nick,$msg);
teacher_info_new.php:            $teacher_openid   = $this->t_teacher_info->get_wx_openid_by_teacherid($teacherid);
teacher_info_new.php:            $ret = $wx->send_template_msg($teacher_openid,$template_id_teacher,$data ,$url);
teacher_info_new.php:            return $this->output_succ();
teacher_info_new.php:        $qc_log   =  $this->send_curl_post($post_url);
teacher_info.php://require_once (app_path("Libs/qiniu-7/src/Qiniu/functions.php") );
teacher_info.php:        $this->teacher_money = \App\Helper\Config::get_config("teacher_money");
teacher_info.php:        $teacherid   = $this->get_login_teacher();
teacher_info.php:        $userid      = $this->get_in_int_val("userid",-1);
teacher_info.php:        $start_date  = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL) ));
teacher_info.php:        $end_date    = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400*7 ));
teacher_info.php:        $lesson_type = $this->get_in_int_val('lesson_type',-1);
teacher_info.php:        $ret_info = $this->t_lesson_info_b2->get_teacher_lesson_list_www(
teacher_info.php:            $item['tea_comment_str'] = "<font color=red>-</font>";
teacher_info.php:                    $item['cc_id']= $this->t_assistant_info->get_adminid_by_assistand( $item['assistantid']);
teacher_info.php:                $item['ass_nick'] = $this->cache_get_assistant_nick($item['assistantid']);
teacher_info.php:                    $item["stu_nick"] = $this->cache_get_student_nick($item["userid"]);
teacher_info.php:                $this->check_tea_comment($item);
teacher_info.php:                $ret_homework = $this->t_small_lesson_info->get_pdf_homework($item['lessonid']);
teacher_info.php:                $from_lesson_info                       = $this->t_test_lesson_subject->get_from_lesson_info($from_lessonid);
teacher_info.php:                $item['stu_request_test_lesson_demand']="<font color=red>-</font>";
teacher_info.php:        $student_list = $this->t_lesson_info_b2->get_student_list($teacherid,$start_time,$end_time);
teacher_info.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info.php:        $teacherid = $this->get_login_teacher();
teacher_info.php:        $page_info = $this->get_in_page_info();
teacher_info.php:        $page_num  = $this->get_in_page_num();
teacher_info.php:        $ret_info  = $this->t_teacher_apply->get_teacher_apply_list($teacherid,$page_num);
teacher_info.php:                $item['ass_nick'] = $this->cache_get_assistant_nick($item['assistantid']);
teacher_info.php:                $item['create_time'] = date('Y-m-d H:i:s',$item['create_time']);
teacher_info.php:        return $this->pageView(__METHOD__,$ret_info);
teacher_info.php:        $teacherid          = $this->get_login_teacher();
teacher_info.php:        $cc_id              = $this->get_in_int_val('cc_id',0);
teacher_info.php:        $stu_nick           = $this->get_in_str_val('stu_nick',0);
teacher_info.php:        $lesson_time        = $this->get_in_str_val('lesson_time',0);
teacher_info.php:        $lesson_type        = $this->get_in_int_val('lesson_type',0);
teacher_info.php:        $lessonid           = $this->get_in_int_val('lessonid', 0);
teacher_info.php:        $set_lesson_adminid = $this->get_in_int_val('set_lesson_adminid', 0);
teacher_info.php:        $question_type      = $this->get_in_int_val('question_type', 0);
teacher_info.php:        $question_content   = $this->get_in_str_val('question_content', '');
teacher_info.php:        $this->t_teacher_apply->row_insert([
teacher_info.php:            $ret = $this->t_test_lesson_subject_sub_list->get_set_lesson_adminid_by_lessonid($lessonid);
teacher_info.php:        $this->send_wx_apply($adminid,$question_type,$teacherid,$lesson_time,$question_content,$stu_nick);
teacher_info.php:        return $this->output_succ();
teacher_info.php:        $account           = $this->t_manager_info->get_account_by_uid($adminid);
teacher_info.php:        $question_type_str = $this->get_question_type_str($question_type);
teacher_info.php:        $teacher_nick      = $this->t_teacher_info->get_nick($teacherid);
teacher_info.php:        return $this->send_curl_post($post_url);
teacher_info.php:        $id = $this->get_in_id();
teacher_info.php:        $teacher_flag=$this->get_in_int_val('teacher_flag',0);
teacher_info.php:            $this->t_teacher_apply->field_update_list($id,[
teacher_info.php:            $this->t_teacher_apply->field_update_list($id,[
teacher_info.php:        return $this->output_succ();
teacher_info.php:        $id=$this->get_in_id();
teacher_info.php:        $this->t_teacher_apply->row_delete($id);
teacher_info.php:        return $this->output_succ();
teacher_info.php:            $tea_comment = $this->t_seller_student_info->get_lesson_content($lesson_info['lessonid']);
teacher_info.php:                $tea_comment = $this->t_test_lesson_subject_require->get_lesson_content($lesson_info['lessonid']);
teacher_info.php:            $tea_comment = $this->t_lesson_info_b2->get_stu_performance($lesson_info['lessonid']);
teacher_info.php:        $teacherid   = $this->get_login_teacher();
teacher_info.php:        $start_date  = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL) ));
teacher_info.php:        $end_date    = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400*7 ));
teacher_info.php:        $lesson_type = $this->get_in_int_val('lesson_type',-1);
teacher_info.php:        $page_num    = $this->get_in_page_num();
teacher_info.php:        $ret_info=$this->t_lesson_info_b2->get_teacher_lesson_list($teacherid,$start_time,$end_time,$lesson_type_in_str, $page_num);
teacher_info.php:                $item["lesson_course_name"] = $this->cache_get_student_nick($item["userid"]);
teacher_info.php:                    $editionid = $this->t_student_info->get_editionid($item['userid']);
teacher_info.php:                $ret_homework = $this->t_small_lesson_info->get_pdf_homework($item['lessonid']);
teacher_info.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info.php:        $teacherid   = $this->get_login_teacher();
teacher_info.php:        return $this->pageView(__METHOD__, $ret_info);
teacher_info.php:        $teacherid   = $this->get_login_teacher();
teacher_info.php:        return $this->pageView(__METHOD__, $ret_info);
teacher_info.php:        $teacherid   = $this->get_login_teacher();
teacher_info.php:        $common_lesson_config= $this->t_teacher_freetime_for_week->get_common_lesson_config($teacherid);
teacher_info.php:            $arr=explode("-",$start_time);
teacher_info.php:            $day_start=$stime + ($week-1)*86400;
teacher_info.php:            $item["start_time_ex"] = strtotime(date("Y-m-d", $day_start)." $start_time")*1000;
teacher_info.php:            $item["end_time_ex"]   = strtotime(date("Y-m-d", $day_start)." $end_time")*1000;
teacher_info.php:            $item["nick"]          = $this->cache_get_student_nick($item["userid"]);
teacher_info.php:            $item["teacher"]       = $this->cache_get_teacher_nick($teacherid);
teacher_info.php:        return  $this->output_succ( [ "common_lesson_config" => $common_lesson_config] );
teacher_info.php:        $opt_type  = $this->get_in_str_val("opt_type");
teacher_info.php:        $teacherid = $this->get_login_teacher();
teacher_info.php:        $old_key    = $this->get_in_str_val("old_key");
teacher_info.php:        $start_time = $this->get_in_str_val("start_time");
teacher_info.php:        $end_time   = $this->get_in_str_val("end_time");
teacher_info.php:        $tea_type   = $this->get_in_int_val("tea_type",0);
teacher_info.php:        $freetime   = $this->get_in_int_val("freetime",0);
teacher_info.php:        $userid     = $this->get_in_userid();
teacher_info.php:        $teacher_in = $this->t_teacher_freetime_for_week->check_userid($teacherid);
teacher_info.php:            $this->t_teacher_freetime_for_week->add_regular_course($teacherid,$tea_type,$freetime);
teacher_info.php:        $common_lesson_config = $this->t_teacher_freetime_for_week->get_common_lesson_config($teacherid);
teacher_info.php:                return $this->output_err("请设置学生") ;
teacher_info.php:        $ret_db = $this->t_teacher_freetime_for_week->field_update_list($teacherid,[
teacher_info.php:        return $this->output_succ();
teacher_info.php:        $teacherid = $this->get_login_teacher();
teacher_info.php:        $timestamp = $this->get_in_int_val("timestamp");
teacher_info.php:        $type      = $this->get_in_int_val("type",0);
teacher_info.php:        $lesson_list=$this->t_lesson_info_b2->get_teacher_lesson_info($teacherid,$start_time,$end_time);
teacher_info.php:            $nick=$this->cache_get_student_nick($item["userid"]);
teacher_info.php:        return $this->output_succ(["lesson_list"=>$lesson_list]);
teacher_info.php:        $lessonid = $this->get_in_int_val('lessonid',-1);
teacher_info.php:        $ret_info = $this->t_lesson_info_b2->get_lesson_info_b2($lessonid);
teacher_info.php:            $ret_info["lesson_course_name"] = $this->cache_get_student_nick($ret_info["userid"]);
teacher_info.php:        return $this->output_succ(["data"=>$ret_info]);
teacher_info.php:        $file_url = $this->get_in_str_val("file_url");
teacher_info.php:            return $this->output_err(array( 'info' => '文件名为空', 'file' => $file_url));
teacher_info.php:            return $this->output_succ( array('ret' => 0, 'info' => '成功', 'file' => $file_url));
teacher_info.php:            $new_url=$this->gen_download_url($file_url);
teacher_info.php:            return $this->output_succ(array('ret' => 0, 'info' => '成功',
teacher_info.php:        $base_url=$auth->privateDownloadUrl($file_url );
teacher_info.php:        $teacherid          = $this->get_login_teacher();
teacher_info.php:        $lessonid           = $this->get_in_lessonid();
teacher_info.php:        $lesson_name        = $this->get_in_str_val("lesson_name");
teacher_info.php:        $lesson_intro       = $this->get_in_str_val("lesson_intro");
teacher_info.php:        $tea_cw_url         = trim($this->get_in_str_val("tea_cw_url"));
teacher_info.php:        $stu_cw_url         = trim($this->get_in_str_val("stu_cw_url"));
teacher_info.php:        $issue_url          = trim($this->get_in_str_val("issue_url"));
teacher_info.php:        $pdf_question_count = trim($this->get_in_str_val("pdf_question_count"));
teacher_info.php:        $tea_more_cw_url    = trim($this->get_in_str_val("tea_more_cw_url"));
teacher_info.php:        $tea_cw_pic_flag    = $this->get_in_int_val("tea_cw_pic_flag");
teacher_info.php:        $old_tea_cw_time    = trim($this->get_in_str_val("old_tea_cw_time"));
teacher_info.php:        $old_stu_cw_time    = trim($this->get_in_str_val("old_stu_cw_time"));
teacher_info.php:        $old_issue_time     = trim($this->get_in_str_val("old_issue_time"));
teacher_info.php:        $old_tea_cw_url     = trim($this->get_in_str_val("old_tea_cw_url"));
teacher_info.php:        $db_teacherid = $this->t_lesson_info_b2->get_teacherid($lessonid);
teacher_info.php:            $this->output_err("你不是该课程的老师");
teacher_info.php:        $this->t_lesson_info_b2->field_update_list($lessonid,[
teacher_info.php:        $lesson_type=$this->t_lesson_info_b2->get_lesson_type($lessonid);
teacher_info.php:            $ret = $this->t_small_lesson_info->update_pdf($lessonid,$issue_url,$work_status,$pdf_question_count,$issue_time);
teacher_info.php:            $ret = $this->t_homework_info->field_update_list($lessonid,[
teacher_info.php:            $this->send_curl_post($post_url);
teacher_info.php:        return $this->output_succ();
teacher_info.php:        $teacherid  = $this->get_login_teacher();
teacher_info.php:        $studentid  = -1;
teacher_info.php:        $year       = $this->get_in_int_val("year","2016");
teacher_info.php:        $month      = $this->get_in_int_val("month","11");
teacher_info.php:        $start_time = strtotime( "$year-$month-01");
teacher_info.php:        $end_time = strtotime("$year-$month-01");
teacher_info.php:        $old_list = $this->t_lesson_info_b2->get_1v1_lesson_list_by_teacher($teacherid,$studentid,$start_time,$end_time);
teacher_info.php:                    "key_class" => $key_class."-".$cur_key_index,
teacher_info.php:        $data_map=[]; //studentid -> lesson_count_level -> row
teacher_info.php:            $diff=($item["lesson_end"]-$item["lesson_start"])/60;
teacher_info.php:                $item["lesson_count_err"]="background-color:red;";
teacher_info.php:                $data["level"]="l-0";
teacher_info.php:                    $data["stu_nick"]=$this->cache_get_student_nick($key1);
teacher_info.php:                    $data["level"]="l-1";
teacher_info.php:                        $data["level"]="l-2";
teacher_info.php:                            $data["level"]="l-3";
teacher_info.php:                            $data["lesson_count_level_str"]="-";
teacher_info.php:        return $this->Pageview(__METHOD__,$ret_list );
teacher_info.php:        return $this->view(__METHOD__);
teacher_info.php:        $teacherid   = $this->get_login_teacher();
teacher_info.php:            return $this->output_err("老师登陆信息错误，请退出重新登陆!");
teacher_info.php:        $tea_info=$this->t_teacher_info->get_teacher_info_all($teacherid);
teacher_info.php:        $tea_info['birth_str'] = substr(@$tea_info['birth'],0,4)."-"
teacher_info.php:                               .substr(@$tea_info['birth'],4,2)."-"
teacher_info.php:            $tea_info['create_time'] = date('Y-m-d H:i:s',$tea_info['create_time']);
teacher_info.php:        return $this->pageView(__METHOD__,null,['tea_info'=>$tea_info]);
teacher_info.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_info.php:        $face = $this->get_in_str_val("face");
teacher_info.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info.php:        return $this->output_succ();
teacher_info.php:        $teacherid     = $this->get_in_int_val("teacherid");
teacher_info.php:        $nick          = $this->get_in_str_val("nick");
teacher_info.php:        $realname      = $this->get_in_str_val("realname");
teacher_info.php:        $gender        = $this->get_in_int_val("gender");
teacher_info.php:        $birth         = $this->get_in_str_val("birth");
teacher_info.php:        $work_year     = $this->get_in_int_val("work_year");
teacher_info.php:        $phone         = $this->get_in_int_val("phone");
teacher_info.php:        $grade_part_ex = $this->get_in_int_val("grade_part_ex");
teacher_info.php:        $subject       = $this->get_in_int_val("subject");
teacher_info.php:        $putonghua_is_correctly = $this->get_in_int_val("putonghua_is_correctly");
teacher_info.php:        $email         = $this->get_in_str_val("email");
teacher_info.php:        $base_intro    = $this->get_in_str_val("base_intro");
teacher_info.php:        $dialect_notes = $this->get_in_str_val("dialect_notes");
teacher_info.php:            if(preg_match('/^[1-9]\d{4,10}$/',$email)){
teacher_info.php:                $pattern = "/^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/i";
teacher_info.php:                        'ret' => -1,
teacher_info.php:                'ret' => -1,
teacher_info.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info.php:        return $this->output_succ();
teacher_info.php:        $teacherid  = $this->get_login_teacher();
teacher_info.php:        $year       = $this->get_in_str_val("year","2017-1");
teacher_info.php:        if(!in_array($year,["2016-12","2017-1"])){
teacher_info.php:            $year = "2017-1";
teacher_info.php:        $start_time = strtotime("$year-01");
teacher_info.php:        $begin_time = strtotime("2016-12-01");
teacher_info.php:            return $this->Pageview(__METHOD__,$ret_list);
teacher_info.php:        $teacher_money_flag = $this->t_teacher_info->get_teacher_money_flag($teacherid);
teacher_info.php:        $teacher_money_type = $this->t_teacher_info->get_teacher_money_type($teacherid);
teacher_info.php:        $teacher_honor      = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,1);
teacher_info.php:        $teacher_trial      = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,2);
teacher_info.php:        $old_list           = $this->t_lesson_info_b2->get_lesson_list_for_wages($teacherid,$start_time,$end_time);
teacher_info.php:            $start = strtotime("-1 month",strtotime(date("Y-m-01",$start_time)));
teacher_info.php:            $already_lesson_count = $this->t_lesson_info_b2->get_teacher_last_month_lesson_count($teacherid,$start,$end);
teacher_info.php:                    "key_class" => $key_class."-".$cur_key_index,
teacher_info.php:                    $arr[$k]-=$v;
teacher_info.php:                        $lesson_count_level=$key==0?$i:($i-1);
teacher_info.php:            $diff = ($item["lesson_end"]-$item["lesson_start"])/60;
teacher_info.php:                $item["lesson_count_err"] = "background-color:red;";
teacher_info.php:            $item['lesson_full_reward'] = $this->get_lesson_full_reward($item['lesson_full_num']);
teacher_info.php:            $this->get_lesson_cost_info($item);
teacher_info.php:                    $item['pre_reward'] = $this->get_teacher_lesson_money($item['type'],$already_lesson_count);
teacher_info.php:                                   -$item['lesson_cost'];
teacher_info.php:                        $item["price"]        = $trial_base+$item['lesson_full_reward']-$item['lesson_cost'];
teacher_info.php:                $data["level"]="l-0";
teacher_info.php:                    $data["stu_nick"]=$this->cache_get_student_nick($key1);
teacher_info.php:                    $data["level"]="l-1";
teacher_info.php:                        $data["level"]="l-2";
teacher_info.php:                            $data["level"]="l-3";
teacher_info.php:                            $data["lesson_count_level_str"]="-";
teacher_info.php:                    $tax_price = $teacher_all_money-800;
teacher_info.php:                    $teacher_all_money -= $teacher_tax_money;
teacher_info.php:                $teacher_all_money -= $teacher_tax_money;
teacher_info.php:         $tax_price = $teacher_all_money-800;
teacher_info.php:         $teacher_all_money -= $teacher_tax_money;
teacher_info.php:        return $this->Pageview(__METHOD__,$ret_list,[
teacher_info.php:        $full_num = $this->teacher_money['lesson_full_num'];
teacher_info.php:            $lesson_full_reward = $this->teacher_money['lesson_full_reward']/100;
teacher_info.php:            $this->change_num=0;
teacher_info.php:            $this->late_num=0;
teacher_info.php:                $lesson_all_cost = $this->teacher_money['lesson_miss_cost']/100;
teacher_info.php:                if($this->change_num>=3){
teacher_info.php:                    $lesson_all_cost = $this->teacher_money['lesson_cost']/100;
teacher_info.php:                    $this->change_num++;
teacher_info.php:                    $lesson_info     = "本月第".$this->change_num."次换课";
teacher_info.php:            $lesson_cost = $this->teacher_money['lesson_cost']/100;
teacher_info.php:                        if($key=="deduct_come_late" && $this->late_num<3){
teacher_info.php:                            $this->late_num++;
teacher_info.php:        list($start_time,$end_time) = $this->get_in_date_range(date("Y-m-01",time()),0,0,[],3);
teacher_info.php:        $page_num  = $this->get_in_page_num();
teacher_info.php:        $teacherid = $this->get_login_teacher();
teacher_info.php:        $status    = $this->get_in_int_val("status",-1);
teacher_info.php:        $phone    = $this->t_teacher_info->get_phone($teacherid);
teacher_info.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info_b1($page_num,$start_time,$end_time,$phone,$status);
teacher_info.php:                $item["answer_time"] = date("Y-m-d H:i:s",$item["answer_begin_time"])."-".date("H:i:s",$item["answer_end_time"]);
teacher_info.php:                    $item["confirm_time_str"] = date("Y-m-d H:i:s",$item['confirm_time']);
teacher_info.php:                if($item['status']=="-2"){
teacher_info.php:                    $item['name']  = mb_substr($item['name'],0,1,"utf-8")."老师";
teacher_info.php:           // return $this->pageView(__METHOD__,[],[
teacher_info.php:        $all_info  = $this->t_teacher_lecture_appointment_info->get_lecture_count_info($start_time,$end_time,$phone);
teacher_info.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info.php:        $text       = $this->get_in_str_val("text");
teacher_info.php:        $time       = $this->get_in_str_val("time","0");
teacher_info.php:            $ret_info = $this->t_test_lesson_subject_require->grab_trial_lesson_list($require_id);
teacher_info.php:                $item['accept_account'] = $this->t_manager_info->get_name($item['accept_adminid']);
teacher_info.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info.php:        $teacherid    = $this->get_login_teacher();
teacher_info.php:        $require_id   = $this->get_in_int_val("require_id");
teacher_info.php:        $lesson_start = $this->get_in_str_val('lesson_start');
teacher_info.php:        $grade        = $this->get_in_int_val('grade');
teacher_info.php:        $db_lessonid=$this->t_test_lesson_subject_require->get_current_lessonid($require_id);
teacher_info.php:            return $this->output_err("此课程已被其他老师预约。");
teacher_info.php:            return $this->output_err("此课程的申请时间已超时!");
teacher_info.php:        $week_freeze_info = $this->t_teacher_info->field_get_list($teacherid,"is_freeze,is_week_freeze,week_freeze_time,lesson_hold_flag,is_test_user");
teacher_info.php:            return $this->output_err("您已被冻结，无法排课!");
teacher_info.php:            if($week_freeze_info["week_freeze_time"]>=($lstart-7*86400) && $week_freeze_info["week_freeze_time"]<($lend-7*86400)){
teacher_info.php:                return $this->output_err("您本周被冻结,下一周开始可以排课!");
teacher_info.php:        //     return $this->output_err("您已被限制排课!");
teacher_info.php:        $teacher_type_train_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,train_through_new");
teacher_info.php:            return $this->output_err("您培训未通过,暂不能排试听课!");
teacher_info.php:        $test_lesson_subject_id = $this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
teacher_info.php:        $tt_item = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"subject, grade, userid ");
teacher_info.php:        $teacher_subject = $this->t_teacher_info->field_get_list($teacherid,"subject,second_subject,third_subject,grade_part_ex,second_grade,third_grade,grade_start,grade_end,not_grade,not_grade_limit,limit_plan_lesson_type");
teacher_info.php:            $check_subject= $this->check_teacher_subject_and_grade(
teacher_info.php:            $check_subject=$this->check_teacher_grade_range_new($tt_item,$teacher_subject);
teacher_info.php:        $test_lesson_num = $this->t_lesson_info_b2->get_limit_type_teacher_lesson_num($teacherid,$lstart,$lend);
teacher_info.php:            return $this->output_err(
teacher_info.php:        $limit_num_info = $this->t_teacher_info->field_get_list($teacherid,"limit_day_lesson_num,limit_week_lesson_num");
teacher_info.php:        $ret = $this->t_lesson_info_b2->check_teacher_have_test_lesson_pre_week($teacherid,$lstart);
teacher_info.php:                return $this->output_err("您试听课一周限排".$limit_num_info["limit_week_lesson_num"]."节!");
teacher_info.php:                return $this->output_err("您是新入职老师,试听课一周限排6节!");
teacher_info.php:        $day_st    = date("Y-m-d",$lesson_start);
teacher_info.php:        $test_lesson_num_day = $this->t_lesson_info_b2->get_limit_type_teacher_lesson_num($teacherid,$day_start,$day_end);
teacher_info.php:            return $this->output_err(
teacher_info.php:        $stu_free = $this->t_lesson_info_b2->check_student_time_free($userid,0,$lesson_start,$lesson_end);
teacher_info.php:            return $this->output_err("有现存的学生课程与该课程时间冲突！请联系教务老师！");
teacher_info.php:        $tea_free=$this->t_lesson_info_b2->check_teacher_time_free(
teacher_info.php:            return $this->output_err("您有一堂课和此课程冲突，无法排课!");
teacher_info.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
teacher_info.php:        $this->t_course_order->start_transaction();
teacher_info.php:        $courseid = $this->t_course_order->add_course_info_new($orderid,$userid,$grade,$subject,100,2,0,1,1,0,$teacherid);
teacher_info.php:        $lessonid = $this->t_lesson_info_b2->add_lesson(
teacher_info.php:        $stu_free = $this->t_lesson_info_b2->check_student_time_free($userid,$lessonid,$lesson_start,$lesson_end);
teacher_info.php:            $this->t_course_order->rollback();
teacher_info.php:            return $this->output_err("本节课已经被抢！请刷新页面重新查看！");
teacher_info.php:        $this->t_course_order->commit();
teacher_info.php:        $this->t_homework_info->add($courseid,0,$userid,$lessonid,$grade,$subject,$teacherid);
teacher_info.php:        $accept_adminid = $this->t_test_lesson_subject_require->get_accept_adminid($require_id);
teacher_info.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
teacher_info.php:        $this->t_test_lesson_subject_sub_list->row_insert([
teacher_info.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
teacher_info.php:        $account = $this->t_manager_info->get_account($accept_adminid);
teacher_info.php:        $this->t_test_lesson_subject_require->set_test_lesson_status(
teacher_info.php:        $this->t_lesson_info_b2->reset_lesson_list($courseid);
teacher_info.php:        $this->t_seller_student_new->field_update_list($userid,[
teacher_info.php:            $require_adminid = $this->t_test_lesson_subject->get_require_adminid($test_lesson_subject_id);
teacher_info.php:            $userid          = $this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
teacher_info.php:            $phone           = $this->t_seller_student_new->get_phone($userid);
teacher_info.php:            $nick            = $this->t_student_info->get_nick($userid);
teacher_info.php:            $teacher_nick = $this->cache_get_teacher_nick($teacherid);
teacher_info.php:            $require_admin_nick = $this->t_manager_info->get_account($require_adminid);
teacher_info.php:            $this->send_curl_post($post_url);
teacher_info.php:        return $this->output_succ();
teacher_info.php:                return $this->output_err("请安排与老师科目相符合的课程!");
teacher_info.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                         return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info.php:                return $this->output_err("该老师对应年级段已被冻结!");
teacher_info.php:        $stu_grade_range = $this->get_grade_range_new($stu_info['grade']);
teacher_info.php:            return $this->output_err("学生年级与老师年级范围不匹配!");
teacher_info.php:            return $this->output_err("学生科目与老师科目不匹配!");
teacher_info.php:            return $this->output_err("该老师对应年级段已被冻结!");
teacher_info.php:        $start_date      = $this->get_in_str_val("start_date",date("Y-m",time()));
teacher_info.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
teacher_info.php:        $last_start_time = strtotime("-1 month",$start_time);
teacher_info.php:        $last_end_time   = strtotime("-1 month",$end_time);
teacher_info.php:        $uid             = $this->get_login_teacher();
teacher_info.php:        $teacher_info     = $this->t_teacher_info->get_teacher_info_all($uid);
teacher_info.php:            $teacher_ref_num  = $this->t_teacher_info->get_teacher_ref_num($start_time,$teacher_ref_type);
teacher_info.php:        $check_date = "2017-6-1";
teacher_info.php:            $teaid_list    = $this->t_teacher_info->get_tea_list_by_ref_type($teacher_ref_type,$teacherid);
teacher_info.php:                    $reward_money     = $this->t_teacher_money_list->get_teacher_reward_money($tea_id,$start_time,$end_time,3);
teacher_info.php:            $tea_list = $this->t_lesson_info_b2->get_tea_month_list($start_time,$end_time,trim($teacherid_str,","));
teacher_info.php:                        $this->t_lesson_info_b2->get_teacher_last_month_lesson_count($tid,$last_start_time,$last_end_time);
teacher_info.php:                $this->get_lesson_cost_info($val);
teacher_info.php:                $money  = ($val['money']+$reward)*$lesson_count-$val['lesson_cost'];
teacher_info.php:             return $this->pageView(__METHOD__,$show_teacher_money,[
teacher_info.php:        return $this->pageView(__METHOD__,$show_teacher_money,[
teacher_info.php:        $lessonid     = $this->get_in_int_val("lessonid");
teacher_info.php:        $start_date   = $this->get_in_str_val("start_date",date("Y-m-d H:i",time()));
teacher_info.php:        $ret = $this->t_lesson_info_b2->field_update_list($lessonid,[
teacher_info.php:            return $this->output_err("更改失败!请重试!");
teacher_info.php:        return $this->output_succ();
teacher_info.php:        $msg            = $this->get_in_str_val('complaint_info');
teacher_info.php:        $teacherid      = $this->get_login_teacher();
teacher_info.php:        $ret_info_qc = $this->t_complaint_info->row_insert([
teacher_info.php:            $log_time_date = date('Y-m-d H:i:s',time(NULL));
teacher_info.php:            $opt_nick      = $this->cache_get_teacher_nick($teacherid);
teacher_info.php:                $this->send_teacher_msg($qc_item,$opt_nick,$msg);
teacher_info.php:            $teacher_openid   = $this->t_teacher_info->get_wx_openid_by_teacherid($teacherid);
teacher_info.php:            $ret = $wx->send_template_msg($teacher_openid,$template_id_teacher,$data ,$url);
teacher_info.php:            return $this->output_succ();
teacher_info.php:        $qc_log   =  $this->send_curl_post($post_url);
teacher_info_www.php:// require_once (app_path("Libs/qiniu-7/src/Qiniu/functions.php"));
teacher_info_www.php:        $this->teacher_money = \App\Helper\Config::get_config("teacher_money");
teacher_info_www.php:        $teacherid   = $this->get_login_teacher();
teacher_info_www.php:        $userid      = $this->get_in_int_val("userid",-1);
teacher_info_www.php:        $start_date  = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL) ));
teacher_info_www.php:        $end_date    = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400*7 ));
teacher_info_www.php:        $lesson_type = $this->get_in_int_val('lesson_type',-1);
teacher_info_www.php:        $ret_info = $this->t_lesson_info->get_teacher_lesson_list_new(
teacher_info_www.php:            $trial_train_list = $this->t_lesson_info->get_trial_train_list($teacherid);
teacher_info_www.php:            $item['tea_comment_str'] = "<font color=red>-</font>";
teacher_info_www.php:                    $item['cc_id']= $this->t_assistant_info->get_adminid_by_assistand( $item['assistantid']);
teacher_info_www.php:                $item['ass_nick'] = $this->cache_get_assistant_nick($item['assistantid']);
teacher_info_www.php:                    $item["stu_nick"] = $this->cache_get_student_nick($item["userid"]);
teacher_info_www.php:                $this->check_tea_comment($item);
teacher_info_www.php:                $ret_homework = $this->t_small_lesson_info->get_pdf_homework($item['lessonid']);
teacher_info_www.php:                $from_lesson_info                       = $this->t_test_lesson_subject->get_from_lesson_info($from_lessonid);
teacher_info_www.php:                $item['stu_request_test_lesson_demand']="<font color=red>-</font>";
teacher_info_www.php:        $student_list = $this->t_lesson_info->get_student_list($teacherid,$start_time,$end_time);
teacher_info_www.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info_www.php:        $teacherid = $this->get_login_teacher();
teacher_info_www.php:        $page_num  = $this->get_in_page_num();
teacher_info_www.php:        $ret_info  = $this->t_teacher_apply->get_teacher_apply_list($teacherid,$page_num);
teacher_info_www.php:        $lesson_info = $this->t_lesson_info->get_lesson_info_by_lessonid('lessonid,assistantid,lesson_type,lesson_name,train_type',array_column($ret_info['list'],'lessonid'));
teacher_info_www.php:                            $item['ass_nick'] = $this->cache_get_assistant_nick($info['assistantid']);
teacher_info_www.php:                    $item['create_time'] = date('Y-m-d H:i:s',$item['create_time']);
teacher_info_www.php:        return $this->pageView(__METHOD__,$ret_info);
teacher_info_www.php:        $teacherid        = $this->get_login_teacher();
teacher_info_www.php:        $cc_id            = $this->get_in_int_val('cc_id',0);
teacher_info_www.php:        $stu_nick         = $this->get_in_str_val('stu_nick',0);
teacher_info_www.php:        $lesson_time      = $this->get_in_str_val('lesson_time',0);
teacher_info_www.php:        $lesson_type      = $this->get_in_int_val('lesson_type',0);
teacher_info_www.php:        $lessonid         = $this->get_in_int_val('lessonid', 0);
teacher_info_www.php:        $question_type    = $this->get_in_int_val('question_type', 0);
teacher_info_www.php:        $question_content = $this->get_in_str_val('question_content', '');
teacher_info_www.php:        $this->t_teacher_apply->row_insert([
teacher_info_www.php:        $this->send_wx_apply($cc_id,$question_type,$teacherid,$lesson_time,$question_content,$stu_nick);
teacher_info_www.php:        return $this->output_succ();
teacher_info_www.php:        $account = $this->t_manager_info->get_account_by_uid($cc_id);
teacher_info_www.php:        $question_type_str = $this->get_question_type_str($question_type);
teacher_info_www.php:        $teacher_nick = $this->t_teacher_info->get_nick($teacherid);
teacher_info_www.php:        $msg = "上课时间：".$lesson_time.";问题描述：".$question_content.";日期：".date("Y-m-d H:i:s",time()).";为保证试听质量，请您尽快回访处理。";
teacher_info_www.php:        return $this->send_curl_post($post_url);
teacher_info_www.php:        $id = $this->get_in_id();
teacher_info_www.php:        $teacher_flag=$this->get_in_int_val('teacher_flag',0);
teacher_info_www.php:            $this->t_teacher_apply->field_update_list($id,[
teacher_info_www.php:            $this->t_teacher_apply->field_update_list($id,[
teacher_info_www.php:        return $this->output_succ();
teacher_info_www.php:        $id=$this->get_in_id();
teacher_info_www.php:        $this->t_teacher_apply->row_delete($id);
teacher_info_www.php:        return $this->output_succ();
teacher_info_www.php:            $tea_comment = $this->t_seller_student_info->get_lesson_content($lesson_info['lessonid']);
teacher_info_www.php:                $tea_comment = $this->t_test_lesson_subject_require->get_lesson_content($lesson_info['lessonid']);
teacher_info_www.php:            $tea_comment = $this->t_lesson_info->get_stu_performance($lesson_info['lessonid']);
teacher_info_www.php:        $teacherid   = $this->get_login_teacher();
teacher_info_www.php:        $start_date  = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL) ));
teacher_info_www.php:        $end_date    = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400*7 ));
teacher_info_www.php:        $lesson_type = $this->get_in_int_val('lesson_type',-1);
teacher_info_www.php:        $page_num    = $this->get_in_page_num();
teacher_info_www.php:        $ret_info=$this->t_lesson_info->get_teacher_lesson_list($teacherid,$start_time,$end_time,$lesson_type_in_str, $page_num);
teacher_info_www.php:                $item["lesson_course_name"] = $this->cache_get_student_nick($item["userid"]);
teacher_info_www.php:                    $editionid = $this->t_student_info->get_editionid($item['userid']);
teacher_info_www.php:                $ret_homework = $this->t_small_lesson_info->get_pdf_homework($item['lessonid']);
teacher_info_www.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info_www.php:        $teacherid   = $this->get_login_teacher();
teacher_info_www.php:        return $this->pageView(__METHOD__, $ret_info);
teacher_info_www.php:        $teacherid   = $this->get_login_teacher();
teacher_info_www.php:        return $this->pageView(__METHOD__, $ret_info);
teacher_info_www.php:        $teacherid   = $this->get_login_teacher();
teacher_info_www.php:        $common_lesson_config= $this->t_teacher_freetime_for_week->get_common_lesson_config($teacherid);
teacher_info_www.php:            $arr=explode("-",$start_time);
teacher_info_www.php:            $day_start=$stime + ($week-1)*86400;
teacher_info_www.php:            $item["start_time_ex"] = strtotime(date("Y-m-d", $day_start)." $start_time")*1000;
teacher_info_www.php:            $item["end_time_ex"]   = strtotime(date("Y-m-d", $day_start)." $end_time")*1000;
teacher_info_www.php:            $item["nick"]          = $this->cache_get_student_nick($item["userid"]);
teacher_info_www.php:            $item["teacher"]       = $this->cache_get_teacher_nick($teacherid);
teacher_info_www.php:        return  $this->output_succ( [ "common_lesson_config" => $common_lesson_config] );
teacher_info_www.php:        $opt_type  = $this->get_in_str_val("opt_type");
teacher_info_www.php:        $teacherid = $this->get_login_teacher();
teacher_info_www.php:        $old_key    = $this->get_in_str_val("old_key");
teacher_info_www.php:        $start_time = $this->get_in_str_val("start_time");
teacher_info_www.php:        $end_time   = $this->get_in_str_val("end_time");
teacher_info_www.php:        $tea_type   = $this->get_in_int_val("tea_type",0);
teacher_info_www.php:        $freetime   = $this->get_in_int_val("freetime",0);
teacher_info_www.php:        $userid     = $this->get_in_userid();
teacher_info_www.php:        $teacher_in = $this->t_teacher_freetime_for_week->check_userid($teacherid);
teacher_info_www.php:            $this->t_teacher_freetime_for_week->add_regular_course($teacherid,$tea_type,$freetime);
teacher_info_www.php:        $common_lesson_config = $this->t_teacher_freetime_for_week->get_common_lesson_config($teacherid);
teacher_info_www.php:                return $this->output_err("请设置学生") ;
teacher_info_www.php:        $ret_db = $this->t_teacher_freetime_for_week->field_update_list($teacherid,[
teacher_info_www.php:        return $this->output_succ();
teacher_info_www.php:        $teacherid = $this->get_login_teacher();
teacher_info_www.php:        $timestamp = $this->get_in_int_val("timestamp");
teacher_info_www.php:        $type      = $this->get_in_int_val("type",0);
teacher_info_www.php:        $lesson_list=$this->t_lesson_info->get_teacher_lesson_info($teacherid,$start_time,$end_time);
teacher_info_www.php:            $nick=$this->cache_get_student_nick($item["userid"]);
teacher_info_www.php:        return $this->output_succ(["lesson_list"=>$lesson_list]);
teacher_info_www.php:        $lessonid = $this->get_in_int_val('lessonid',-1);
teacher_info_www.php:        $ret_info = $this->t_lesson_info->get_lesson_info($lessonid);
teacher_info_www.php:            $ret_info["lesson_course_name"] = $this->cache_get_student_nick($ret_info["userid"]);
teacher_info_www.php:        return $this->output_succ(["data"=>$ret_info]);
teacher_info_www.php:        $file_url = $this->get_in_str_val("file_url");
teacher_info_www.php:            return $this->output_err(array( 'info' => '文件名为空', 'file' => $file_url));
teacher_info_www.php:            return $this->output_succ( array('ret' => 0, 'info' => '成功', 'file' => $file_url));
teacher_info_www.php:            $new_url=$this->gen_download_url($file_url);
teacher_info_www.php:            return $this->output_succ(array('ret' => 0, 'info' => '成功',
teacher_info_www.php:        $base_url=$auth->privateDownloadUrl($file_url );
teacher_info_www.php:        $teacherid          = $this->get_login_teacher();
teacher_info_www.php:        $lessonid           = $this->get_in_lessonid();
teacher_info_www.php:        $lesson_name        = $this->get_in_str_val("lesson_name");
teacher_info_www.php:        $lesson_intro       = $this->get_in_str_val("lesson_intro");
teacher_info_www.php:        $tea_cw_url         = trim($this->get_in_str_val("tea_cw_url"));
teacher_info_www.php:        $stu_cw_url         = trim($this->get_in_str_val("stu_cw_url"));
teacher_info_www.php:        $issue_url          = trim($this->get_in_str_val("issue_url"));
teacher_info_www.php:        $pdf_question_count = trim($this->get_in_str_val("pdf_question_count"));
teacher_info_www.php:        $tea_more_cw_url    = trim($this->get_in_str_val("tea_more_cw_url"));
teacher_info_www.php:        $tea_cw_pic_flag    = $this->get_in_int_val("tea_cw_pic_flag");
teacher_info_www.php:        $old_tea_cw_time    = trim($this->get_in_str_val("old_tea_cw_time"));
teacher_info_www.php:        $old_stu_cw_time    = trim($this->get_in_str_val("old_stu_cw_time"));
teacher_info_www.php:        $old_issue_time     = trim($this->get_in_str_val("old_issue_time"));
teacher_info_www.php:        $old_tea_cw_url     = trim($this->get_in_str_val("old_tea_cw_url"));
teacher_info_www.php:        $db_teacherid = $this->t_lesson_info->get_teacherid($lessonid);
teacher_info_www.php:            $this->output_err("你不是该课程的老师");
teacher_info_www.php:        $this->t_lesson_info->field_update_list($lessonid,[
teacher_info_www.php:        $lesson_type=$this->t_lesson_info->get_lesson_type($lessonid);
teacher_info_www.php:            $ret = $this->t_small_lesson_info->update_pdf($lessonid,$issue_url,$work_status,$pdf_question_count,$issue_time);
teacher_info_www.php:            $ret = $this->t_homework_info->field_update_list($lessonid,[
teacher_info_www.php:            $this->send_curl_post($post_url);
teacher_info_www.php:        return $this->output_succ();
teacher_info_www.php:        $teacherid  = $this->get_login_teacher();
teacher_info_www.php:        $studentid  = -1;
teacher_info_www.php:        $year       = $this->get_in_int_val("year","2016");
teacher_info_www.php:        $month      = $this->get_in_int_val("month","11");
teacher_info_www.php:        $start_time = strtotime( "$year-$month-01");
teacher_info_www.php:        $end_time = strtotime("$year-$month-01");
teacher_info_www.php:        $old_list = $this->t_lesson_info->get_1v1_lesson_list_by_teacher($teacherid,$studentid,$start_time,$end_time);
teacher_info_www.php:                    "key_class" => $key_class."-".$cur_key_index,
teacher_info_www.php:        $data_map=[]; //studentid -> lesson_count_level -> row
teacher_info_www.php:            $diff=($item["lesson_end"]-$item["lesson_start"])/60;
teacher_info_www.php:                $item["lesson_count_err"]="background-color:red;";
teacher_info_www.php:                $data["level"]="l-0";
teacher_info_www.php:                    $data["stu_nick"]=$this->cache_get_student_nick($key1);
teacher_info_www.php:                    $data["level"]="l-1";
teacher_info_www.php:                        $data["level"]="l-2";
teacher_info_www.php:                            $data["level"]="l-3";
teacher_info_www.php:                            $data["lesson_count_level_str"]="-";
teacher_info_www.php:        return $this->Pageview(__METHOD__,$ret_list );
teacher_info_www.php:        return $this->view(__METHOD__);
teacher_info_www.php:        $teacherid   = $this->get_login_teacher();
teacher_info_www.php:            return $this->output_err("老师登陆信息错误，请退出重新登陆!");
teacher_info_www.php:        $tea_info=$this->t_teacher_info->get_teacher_info_all($teacherid);
teacher_info_www.php:        $tea_info['birth_str'] = substr(@$tea_info['birth'],0,4)."-"
teacher_info_www.php:                               .substr(@$tea_info['birth'],4,2)."-"
teacher_info_www.php:            $tea_info['create_time'] = date('Y-m-d H:i:s',$tea_info['create_time']);
teacher_info_www.php:        return $this->pageView(__METHOD__,null,['tea_info'=>$tea_info]);
teacher_info_www.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_info_www.php:        $face = $this->get_in_str_val("face");
teacher_info_www.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info_www.php:        return $this->output_succ();
teacher_info_www.php:        $teacherid     = $this->get_in_int_val("teacherid");
teacher_info_www.php:        $nick          = $this->get_in_str_val("nick");
teacher_info_www.php:        $realname      = $this->get_in_str_val("realname");
teacher_info_www.php:        $gender        = $this->get_in_int_val("gender");
teacher_info_www.php:        $birth         = $this->get_in_str_val("birth");
teacher_info_www.php:        $work_year     = $this->get_in_int_val("work_year");
teacher_info_www.php:        $phone         = $this->get_in_int_val("phone");
teacher_info_www.php:        $grade_part_ex = $this->get_in_int_val("grade_part_ex");
teacher_info_www.php:        $subject       = $this->get_in_int_val("subject");
teacher_info_www.php:        $putonghua_is_correctly = $this->get_in_int_val("putonghua_is_correctly");
teacher_info_www.php:        $email         = $this->get_in_str_val("email");
teacher_info_www.php:        $base_intro    = $this->get_in_str_val("base_intro");
teacher_info_www.php:        $dialect_notes = $this->get_in_str_val("dialect_notes");
teacher_info_www.php:            if(preg_match('/^[1-9]\d{4,10}$/',$email)){
teacher_info_www.php:                $pattern = "/^([0-9A-Za-z\\-_\\.]+)@([0-9a-z]+\\.[a-z]{2,3}(\\.[a-z]{2})?)$/i";
teacher_info_www.php:                        'ret' => -1,
teacher_info_www.php:                'ret' => -1,
teacher_info_www.php:        $this->t_teacher_info->field_update_list($teacherid,[
teacher_info_www.php:        return $this->output_succ();
teacher_info_www.php:        $teacherid  = $this->get_login_teacher();
teacher_info_www.php:        $year       = $this->get_in_str_val("year","2017-1");
teacher_info_www.php:        if(!in_array($year,["2016-12","2017-1"])){
teacher_info_www.php:            $year = "2017-1";
teacher_info_www.php:        $start_time = strtotime("$year-01");
teacher_info_www.php:        $begin_time = strtotime("2016-12-01");
teacher_info_www.php:            return $this->Pageview(__METHOD__,$ret_list);
teacher_info_www.php:        $teacher_money_flag = $this->t_teacher_info->get_teacher_money_flag($teacherid);
teacher_info_www.php:        $teacher_money_type = $this->t_teacher_info->get_teacher_money_type($teacherid);
teacher_info_www.php:        $teacher_honor      = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,1);
teacher_info_www.php:        $teacher_trial      = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,2);
teacher_info_www.php:        $old_list           = $this->t_lesson_info->get_lesson_list_for_wages($teacherid,$start_time,$end_time);
teacher_info_www.php:            $start = strtotime("-1 month",strtotime(date("Y-m-01",$start_time)));
teacher_info_www.php:            $already_lesson_count = $this->t_lesson_info->get_teacher_last_month_lesson_count($teacherid,$start,$end);
teacher_info_www.php:                    "key_class" => $key_class."-".$cur_key_index,
teacher_info_www.php:                    $arr[$k]-=$v;
teacher_info_www.php:                        $lesson_count_level=$key==0?$i:($i-1);
teacher_info_www.php:            $diff = ($item["lesson_end"]-$item["lesson_start"])/60;
teacher_info_www.php:                $item["lesson_count_err"] = "background-color:red;";
teacher_info_www.php:            $item['lesson_full_reward'] = $this->get_lesson_full_reward($item['lesson_full_num']);
teacher_info_www.php:            $this->get_lesson_cost_info($item);
teacher_info_www.php:                    $item['pre_reward'] = $this->get_teacher_lesson_money($item['type'],$already_lesson_count);
teacher_info_www.php:                                   -$item['lesson_cost'];
teacher_info_www.php:                        $item["price"]        = $trial_base+$item['lesson_full_reward']-$item['lesson_cost'];
teacher_info_www.php:                $data["level"]="l-0";
teacher_info_www.php:                    $data["stu_nick"]=$this->cache_get_student_nick($key1);
teacher_info_www.php:                    $data["level"]="l-1";
teacher_info_www.php:                        $data["level"]="l-2";
teacher_info_www.php:                            $data["level"]="l-3";
teacher_info_www.php:                            $data["lesson_count_level_str"]="-";
teacher_info_www.php:                    $tax_price = $teacher_all_money-800;
teacher_info_www.php:                    $teacher_all_money -= $teacher_tax_money;
teacher_info_www.php:                $teacher_all_money -= $teacher_tax_money;
teacher_info_www.php:         $tax_price = $teacher_all_money-800;
teacher_info_www.php:         $teacher_all_money -= $teacher_tax_money;
teacher_info_www.php:        return $this->Pageview(__METHOD__,$ret_list,[
teacher_info_www.php:        $full_num = $this->teacher_money['lesson_full_num'];
teacher_info_www.php:            $lesson_full_reward = $this->teacher_money['lesson_full_reward']/100;
teacher_info_www.php:            $this->change_num=0;
teacher_info_www.php:            $this->late_num=0;
teacher_info_www.php:                $lesson_all_cost = $this->teacher_money['lesson_miss_cost']/100;
teacher_info_www.php:                if($this->change_num>=3){
teacher_info_www.php:                    $lesson_all_cost = $this->teacher_money['lesson_cost']/100;
teacher_info_www.php:                    $this->change_num++;
teacher_info_www.php:                    $lesson_info     = "本月第".$this->change_num."次换课";
teacher_info_www.php:            $lesson_cost = $this->teacher_money['lesson_cost']/100;
teacher_info_www.php:                        if($key=="deduct_come_late" && $this->late_num<3){
teacher_info_www.php:                            $this->late_num++;
teacher_info_www.php:        list($start_time,$end_time) = $this->get_in_date_range(date("Y-m-01",time()),0,0,[],3);
teacher_info_www.php:        $page_num  = $this->get_in_page_num();
teacher_info_www.php:        $teacherid = $this->get_login_teacher();
teacher_info_www.php:        $status    = $this->get_in_int_val("status",-1);
teacher_info_www.php:        $phone    = $this->t_teacher_info->get_phone($teacherid);
teacher_info_www.php:        $ret_info = $this->t_teacher_lecture_appointment_info->get_all_info($page_num,$start_time,$end_time,$phone,$status);
teacher_info_www.php:                $item["answer_time"] = date("Y-m-d H:i:s",$item["answer_begin_time"])."-".date("H:i:s",$item["answer_end_time"]);
teacher_info_www.php:                    $item["confirm_time_str"] = date("Y-m-d H:i:s",$item['confirm_time']);
teacher_info_www.php:                if($item['status']=="-2"){
teacher_info_www.php:                    $item['name']  = mb_substr($item['name'],0,1,"utf-8")."老师";
teacher_info_www.php:            return $this->pageView(__METHOD__,[],[
teacher_info_www.php:        $all_info  = $this->t_teacher_lecture_appointment_info->get_lecture_count_info($start_time,$end_time,$phone);
teacher_info_www.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info_www.php:        $text       = $this->get_in_str_val("text");
teacher_info_www.php:        $time       = $this->get_in_str_val("time","0");
teacher_info_www.php:            $ret_info = $this->t_test_lesson_subject_require->grab_trial_lesson_list($require_id);
teacher_info_www.php:                $item['accept_account'] = $this->t_manager_info->get_name($item['accept_adminid']);
teacher_info_www.php:        return $this->pageView(__METHOD__,$ret_info,[
teacher_info_www.php:        $teacherid    = $this->get_login_teacher();
teacher_info_www.php:        $require_id   = $this->get_in_int_val("require_id");
teacher_info_www.php:        $lesson_start = $this->get_in_str_val('lesson_start');
teacher_info_www.php:        $grade        = $this->get_in_int_val('grade');
teacher_info_www.php:        $db_lessonid=$this->t_test_lesson_subject_require->get_current_lessonid($require_id);
teacher_info_www.php:            return $this->output_err("此课程已被其他老师预约。");
teacher_info_www.php:            return $this->output_err("此课程的申请时间已超时!");
teacher_info_www.php:        $week_freeze_info = $this->t_teacher_info->field_get_list($teacherid,"is_freeze,is_week_freeze,week_freeze_time,lesson_hold_flag,is_test_user");
teacher_info_www.php:            return $this->output_err("您已被冻结，无法排课!");
teacher_info_www.php:            if($week_freeze_info["week_freeze_time"]>=($lstart-7*86400) && $week_freeze_info["week_freeze_time"]<($lend-7*86400)){
teacher_info_www.php:                return $this->output_err("您本周被冻结,下一周开始可以排课!");
teacher_info_www.php:        //     return $this->output_err("您已被限制排课!");
teacher_info_www.php:        $teacher_type_train_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,train_through_new");
teacher_info_www.php:            return $this->output_err("您培训未通过,暂不能排试听课!");
teacher_info_www.php:        $test_lesson_subject_id = $this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
teacher_info_www.php:        $tt_item = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"subject, grade, userid ");
teacher_info_www.php:        $teacher_subject = $this->t_teacher_info->field_get_list($teacherid,"subject,second_subject,third_subject,grade_part_ex,second_grade,third_grade,grade_start,grade_end,not_grade,not_grade_limit,limit_plan_lesson_type");
teacher_info_www.php:            $check_subject= $this->check_teacher_subject_and_grade(
teacher_info_www.php:            $check_subject=$this->check_teacher_grade_range_new($tt_item,$teacher_subject);
teacher_info_www.php:        $test_lesson_num = $this->t_lesson_info->get_limit_type_teacher_lesson_num($teacherid,$lstart,$lend);
teacher_info_www.php:            return $this->output_err(
teacher_info_www.php:        $limit_num_info = $this->t_teacher_info->field_get_list($teacherid,"limit_day_lesson_num,limit_week_lesson_num");
teacher_info_www.php:        $ret = $this->t_lesson_info->check_teacher_have_test_lesson_pre_week($teacherid,$lstart);
teacher_info_www.php:                return $this->output_err("您试听课一周限排".$limit_num_info["limit_week_lesson_num"]."节!");
teacher_info_www.php:                return $this->output_err("您是新入职老师,试听课一周限排6节!");
teacher_info_www.php:        $day_st    = date("Y-m-d",$lesson_start);
teacher_info_www.php:        $test_lesson_num_day = $this->t_lesson_info->get_limit_type_teacher_lesson_num($teacherid,$day_start,$day_end);
teacher_info_www.php:            return $this->output_err(
teacher_info_www.php:        $stu_free = $this->t_lesson_info->check_student_time_free($userid,0,$lesson_start,$lesson_end);
teacher_info_www.php:            return $this->output_err("有现存的学生课程与该课程时间冲突！请联系教务老师！");
teacher_info_www.php:        $tea_free=$this->t_lesson_info->check_teacher_time_free(
teacher_info_www.php:            return $this->output_err("您有一堂课和此课程冲突，无法排课!");
teacher_info_www.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
teacher_info_www.php:        $this->t_course_order->start_transaction();
teacher_info_www.php:        $courseid = $this->t_course_order->add_course_info_new($orderid,$userid,$grade,$subject,100,2,0,1,1,0,$teacherid);
teacher_info_www.php:        $lessonid = $this->t_lesson_info->add_lesson(
teacher_info_www.php:        $stu_free = $this->t_lesson_info->check_student_time_free($userid,$lessonid,$lesson_start,$lesson_end);
teacher_info_www.php:            $this->t_course_order->rollback();
teacher_info_www.php:            return $this->output_err("本节课已经被抢！请刷新页面重新查看！");
teacher_info_www.php:        $this->t_course_order->commit();
teacher_info_www.php:        $this->t_homework_info->add($courseid,0,$userid,$lessonid,$grade,$subject,$teacherid);
teacher_info_www.php:        $accept_adminid = $this->t_test_lesson_subject_require->get_accept_adminid($require_id);
teacher_info_www.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
teacher_info_www.php:        $this->t_test_lesson_subject_sub_list->row_insert([
teacher_info_www.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
teacher_info_www.php:        $account = $this->t_manager_info->get_account($accept_adminid);
teacher_info_www.php:        $this->t_test_lesson_subject_require->set_test_lesson_status(
teacher_info_www.php:        $this->t_lesson_info->reset_lesson_list($courseid);
teacher_info_www.php:        $this->t_seller_student_new->field_update_list($userid,[
teacher_info_www.php:            $require_adminid = $this->t_test_lesson_subject->get_require_adminid($test_lesson_subject_id);
teacher_info_www.php:            $userid          = $this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
teacher_info_www.php:            $phone           = $this->t_seller_student_new->get_phone($userid);
teacher_info_www.php:            $nick            = $this->t_student_info->get_nick($userid);
teacher_info_www.php:            $teacher_nick = $this->cache_get_teacher_nick($teacherid);
teacher_info_www.php:            $require_admin_nick = $this->t_manager_info->get_account($require_adminid);
teacher_info_www.php:            $this->send_curl_post($post_url);
teacher_info_www.php:        return $this->output_succ();
teacher_info_www.php:                return $this->output_err("请安排与老师科目相符合的课程!");
teacher_info_www.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                        return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                         return $this->output_err("请安排与老师年级段相符合的课程!");
teacher_info_www.php:                return $this->output_err("该老师对应年级段已被冻结!");
teacher_info_www.php:        $stu_grade_range = $this->get_grade_range_new($stu_info['grade']);
teacher_info_www.php:            return $this->output_err("学生年级与老师年级范围不匹配!");
teacher_info_www.php:            return $this->output_err("学生科目与老师科目不匹配!");
teacher_info_www.php:            return $this->output_err("该老师对应年级段已被冻结!");
teacher_info_www.php:        $start_date      = $this->get_in_str_val("start_date",date("Y-m",time()));
teacher_info_www.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
teacher_info_www.php:        $last_start_time = strtotime("-1 month",$start_time);
teacher_info_www.php:        $last_end_time   = strtotime("-1 month",$end_time);
teacher_info_www.php:        $uid             = $this->get_login_teacher();
teacher_info_www.php:        $teacher_info     = $this->t_teacher_info->get_teacher_info_all($uid);
teacher_info_www.php:            $teacher_ref_num  = $this->t_teacher_info->get_teacher_ref_num($start_time,$teacher_ref_type);
teacher_info_www.php:        $check_date = "2017-6-1";
teacher_info_www.php:            $teaid_list    = $this->t_teacher_info->get_tea_list_by_ref_type($teacher_ref_type,$teacherid);
teacher_info_www.php:                    $reward_money     = $this->t_teacher_money_list->get_teacher_reward_money($tea_id,$start_time,$end_time,3);
teacher_info_www.php:            $tea_list = $this->t_lesson_info->get_tea_month_list($start_time,$end_time,trim($teacherid_str,","));
teacher_info_www.php:                        $this->t_lesson_info->get_teacher_last_month_lesson_count($tid,$last_start_time,$last_end_time);
teacher_info_www.php:                $this->get_lesson_cost_info($val);
teacher_info_www.php:                $money  = ($val['money']+$reward)*$lesson_count-$val['lesson_cost'];
teacher_info_www.php:        return $this->pageView(__METHOD__,$show_teacher_money,[
teacher_info_www.php:        $lessonid     = $this->get_in_int_val("lessonid");
teacher_info_www.php:        $start_date   = $this->get_in_str_val("start_date",date("Y-m-d H:i",time()));
teacher_info_www.php:        $ret = $this->t_lesson_info->field_update_list($lessonid,[
teacher_info_www.php:            return $this->output_err("更改失败!请重试!");
teacher_info_www.php:        return $this->output_succ();
teacher_info_www.php:        $msg            = $this->get_in_str_val('complaint_info');
teacher_info_www.php:        $teacherid      = $this->get_account_id();
teacher_info_www.php:        $ret_info_qc = $this->t_complaint_info->row_insert([
teacher_info_www.php:            $log_time_date = date('Y-m-d H:i:s',time(NULL));
teacher_info_www.php:            $opt_nick      = $this->cache_get_teacher_nick($teacherid);
teacher_info_www.php:                $this->send_teacher_msg($qc_item,$opt_nick,$msg);
teacher_info_www.php:            $teacher_openid   = $this->t_teacher_info->get_wx_openid_by_teacherid($teacherid);
teacher_info_www.php:            $ret = $wx->send_template_msg($teacher_openid,$template_id_teacher,$data ,$url);
teacher_info_www.php:            return $this->output_succ();
teacher_info_www.php:        $qc_log   =  $this->send_curl_post($post_url);
teacher_level.php:        $this->switch_tongji_database();
teacher_level.php:        $season = ceil((date('n'))/3)-1;//上季度是第几季度
teacher_level.php:        $start_time = strtotime(date('Y-m-d H:i:s', mktime(0, 0, 0,$season*3-3+1,1,date('Y'))));
teacher_level.php:        $end_time = strtotime(date('Y-m-d H:i:s', mktime(23,59,59,$season*3,date('t',mktime(0, 0 , 0,$season*3,1,date("Y"))),date('Y'))));
teacher_level.php:        $this->set_in_value("quarter_start",$start_time);
teacher_level.php:        $quarter_start = $this->get_in_int_val("quarter_start");
teacher_level.php:        $teacher_money_type       = $this->get_in_int_val("teacher_money_type",1);
teacher_level.php:        $list = $this->t_teacher_info->get_teacher_info_by_money_type($teacher_money_type,$start_time,$end_time);
teacher_level.php:        $page_info = $this->get_in_page_info();
teacher_level.php:        $ret_info = $this->t_teacher_info->get_teacher_level_info($page_info,$tea_list,$start_time);
teacher_level.php:        $test_person_num= $this->t_lesson_info->get_teacher_test_person_num_list( $start_time,$end_time,-1,-1,$tea_arr);
teacher_level.php:        $kk_test_person_num= $this->t_lesson_info->get_kk_teacher_test_person_num_list( $start_time,$end_time,-1,-1,$tea_arr);
teacher_level.php:        $change_test_person_num= $this->t_lesson_info->get_change_teacher_test_person_num_list( $start_time,$end_time,-1,-1,$tea_arr);
teacher_level.php:        $teacher_record_score = $this->t_teacher_record_list->get_test_lesson_record_score($start_time,$end_time,$tea_arr);
teacher_level.php:        $tea_refund_info =$this->get_tea_refund_info($start_time,$end_time,$tea_arr);
teacher_level.php:            $item["lesson_count_score"] = $this->get_score_by_lesson_count($item["lesson_count"]);
teacher_level.php:            $item["cc_order_score"] = $this->get_cc_order_score($item["cc_order_num"],$item["cc_order_per"]);
teacher_level.php:            $item["other_order_score"] = $this->get_other_order_score($item["other_order_num"],$item["other_order_per"]);
teacher_level.php:        $erick["level"]  = $this->t_teacher_info->get_level($erick["teacherid"]);
teacher_level.php:        return $this->pageView(__METHOD__,$ret_info);
teacher_level.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_level.php:        $start_time = $this->get_in_int_val("start_time");
teacher_level.php:        $level_before = $this->get_in_int_val("level_before");
teacher_level.php:        $level_after = $this->get_in_int_val("level_after");
teacher_level.php:        $lesson_count = $this->get_in_int_val("lesson_count");
teacher_level.php:        $lesson_count_score  = $this->get_in_int_val("lesson_count_score");
teacher_level.php:        $cc_test_num = $this->get_in_int_val("cc_test_num");
teacher_level.php:        $cc_order_num = $this->get_in_int_val("cc_order_num");
teacher_level.php:        $cc_order_per = $this->get_in_str_val("cc_order_per");
teacher_level.php:        $cc_order_score = $this->get_in_int_val("cc_order_score");
teacher_level.php:        $other_test_num = $this->get_in_int_val("other_test_num");
teacher_level.php:        $other_order_num = $this->get_in_int_val("other_order_num");
teacher_level.php:        $other_order_per = $this->get_in_str_val("other_order_per");
teacher_level.php:        $other_order_score = $this->get_in_int_val("other_order_score");
teacher_level.php:        $record_num = $this->get_in_int_val("record_num");
teacher_level.php:        $record_score_avg = $this->get_in_str_val("record_score_avg");
teacher_level.php:        $record_final_score  = $this->get_in_int_val("record_final_score");
teacher_level.php:        $is_refund  = $this->get_in_int_val("is_refund");
teacher_level.php:        $total_score = $this->get_in_int_val("total_score");
teacher_level.php:        $this->t_teacher_advance_list->row_insert([
teacher_level.php:            "require_adminid"=>$this->get_account_id()
teacher_level.php:        $realname  = $this->t_teacher_info->get_realname($teacherid);
teacher_level.php:        $this->t_manager_info->send_wx_todo_msg_by_adminid (349,"兼职老师晋升申请","兼职老师晋升申请待处理",$realname."老师的晋升申请已提交,请尽快审核","http://admin.yb1v1.com/teacher_level/get_teacher_advance_info?start_time=".$start_time."&teacherid=".$teacherid);
teacher_level.php:        $this->t_manager_info->send_wx_todo_msg_by_adminid (72,"兼职老师晋升申请","兼职老师晋升申请待处理",$realname."老师的晋升申请已提交,请尽快审核","http://admin.yb1v1.com/teacher_level/get_teacher_advance_info?start_time=".$start_time."&teacherid=".$teacherid);
teacher_level.php:        return $this->output_succ();
teacher_level.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_level.php:        $start_time = $this->get_in_int_val("start_time");
teacher_level.php:        $level_after = $this->get_in_int_val("level_after");
teacher_level.php:        $accept_flag = $this->get_in_int_val("accept_flag");
teacher_level.php:        $accept_info = trim($this->get_in_str_val("accept_info"));
teacher_level.php:        $this->t_teacher_advance_list->field_update_list_2($start_time,$teacherid,[
teacher_level.php:            "accept_adminid" =>$this->get_account_id(),
teacher_level.php:        $realname  = $this->t_teacher_info->get_realname($teacherid);
teacher_level.php:            $this->t_teacher_info->field_update_list($teacherid,["level"=>$level_after]);
teacher_level.php:            $score = $this->t_teacher_advance_list->get_total_score($start_time,$teacherid);
teacher_level.php:            // $this->t_lesson_info_b2->update_teacher_level($teacherid,$level_after);
teacher_level.php:            // $level_start = strtotime("2017-08-01");
teacher_level.php:            //$teacher_money_type = $this->t_teacher_info->get_teacher_money_type($teacherid);
teacher_level.php:            // $this->t_lesson_info->set_teacher_level_info_from_now($teacherid,$teacher_money_type,$level_after,$level_start);
teacher_level.php:            $wx_openid = $this->t_teacher_info->get_wx_openid($teacherid);
teacher_level.php:                $data['keyword3'] = date("Y-m-d H:i",time());
teacher_level.php:            $subject = $this->t_teacher_info->get_subject($teacherid);
teacher_level.php:            $master_adminid = $this->get_tea_adminid_by_subject($subject);
teacher_level.php:            $teacher_info = $this->t_manager_info->get_teacher_info_by_adminid($master_adminid);
teacher_level.php:            $wx_openid = $this->t_teacher_info->get_wx_openid($jy_teacherid);
teacher_level.php:                $data['keyword3'] = date("Y-m-d H:i",time());
teacher_level.php:            $wx_openid = $this->t_teacher_info->get_wx_openid(130462);
teacher_level.php:                $data['keyword3'] = date("Y-m-d H:i",time());
teacher_level.php:        return $this->output_succ();
teacher_level.php:        $season = ceil((date('n'))/3)-1;//上季度是第几季度
teacher_level.php:        $start_time = strtotime(date('Y-m-d H:i:s', mktime(0, 0, 0,$season*3-3+1,1,date('Y'))));
teacher_level.php:        $end_time = strtotime(date('Y-m-d H:i:s', mktime(23,59,59,$season*3,date('t',mktime(0, 0 , 0,$season*3,1,date("Y"))),date('Y'))));
teacher_level.php:        $start_time = $this->get_in_int_val("start_time",$start_time);
teacher_level.php:        $this->set_in_value("quarter_start",$start_time);
teacher_level.php:        $quarter_start = $this->get_in_int_val("quarter_start");
teacher_level.php:        $teacher_money_type       = $this->get_in_int_val("teacher_money_type",-1);
teacher_level.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
teacher_level.php:        $page_info = $this->get_in_page_info();
teacher_level.php:        $ret_info = $this->t_teacher_advance_list->get_info_by_time($page_info,$start_time,$teacher_money_type,$teacherid);
teacher_level.php:        return $this->pageView(__METHOD__,$ret_info);
teacher_level.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_level.php:        $start_time = $this->get_in_int_val("start_time");
teacher_level.php:        // $start_time = strtotime("2017-04-01");
teacher_level.php:        $end_time = strtotime(date("Y-m-01",$start_time+110*86400));
teacher_level.php:        $list = $this->t_order_refund->get_tea_refund_info_new($start_time,$end_time,$tea_arr);
teacher_level.php:            $ss = $val["nick"]."-".$val["apply_time"];
teacher_level.php:                $info = explode("-",$k);
teacher_level.php:                $data[$k]["apply_time_str"]=!empty($data[$k]["apply_time"])?date("Y-m-d H:i:s",$data[$k]["apply_time"]):"";
teacher_level.php:        return $this->output_succ(["data"=>$data]);
teacher_level.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_level.php:        $data["first"] = $this->t_lesson_info_b2->get_lesson_row_info($teacherid,$lesson_type,0);
teacher_level.php:        $data["five"] = $this->t_lesson_info_b2->get_lesson_row_info($teacherid,$lesson_type,4);
teacher_level.php:             $item["lesson_start_str"] = date("Y-m-d H:i:s",$item["lesson_start"]);
teacher_level.php:             $item["nick"] = $this->t_student_info->get_nick($item["userid"]);
teacher_level.php:        return $this->output_succ(["data"=>$data]);
teacher_level.php:        $page_info = $this->get_in_page_info();
teacher_level.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
teacher_level.php:        $ret_info = $this->t_teacher_info->get_all_train_pass_teacher_info($page_info,$teacherid);
teacher_level.php:        return $this->pageView(__METHOD__,$ret_info);
teacher_money.php:        $this->teacher_money = \App\Helper\Config::get_config("teacher_money");
teacher_money.php:        $teacherid  = $this->get_in_int_val("teacherid");
teacher_money.php:        $acc = $this->get_account();
teacher_money.php:            return $this->output_err("老师id错误!");
teacher_money.php:        $start_time = $this->get_in_int_val("start_time",strtotime(date("Y-m-01",time())));
teacher_money.php:        $end_time   = $this->get_in_int_val("end_time",strtotime("+1 month",$start_time));
teacher_money.php:        $teacher_money_type = $this->t_teacher_info->get_teacher_money_type($teacherid);
teacher_money.php:            $start = strtotime("-1 month",$start_time);
teacher_money.php:            $end   = strtotime("-1 month",$end_time);
teacher_money.php:            $already_lesson_count = $this->t_lesson_info->get_teacher_last_month_lesson_count($teacherid,$start,$end);
teacher_money.php:        $lesson_info = $this->t_lesson_info->get_lesson_list_for_wages($teacherid,$start_time,$end_time);
teacher_money.php:                $this->get_lesson_cost_info($val);
teacher_money.php:                $lesson_price = $val['lesson_base']+$val['lesson_reward']+$val['lesson_full_reward']-$val['lesson_cost'];
teacher_money.php:                $lesson_list[$key]['lesson_time']   = date("m.d H:i",$val['lesson_start'])."-".date("H:i",$val['lesson_end']);
teacher_money.php:        $teacher_reward_list = $this->t_teacher_money_list->get_teacher_honor_money_list($teacherid,$start_time,$end_time);
teacher_money.php:            $reward['add_time_str'] = \App\Helper\Utils::unixtime2date($r_val["add_time"],"Y-m-d");
teacher_money.php:                $reward['money_info'] = $this->t_teacher_info->get_nick($r_val['money_info']);
teacher_money.php:        $this->get_array_data_by_count($all_reward_list,$reward_ex);
teacher_money.php:        $this->get_array_data_by_count($all_reward_list,$reward_compensate);
teacher_money.php:        $this->get_array_data_by_count($all_reward_list,$reward_reference);
teacher_money.php:        return $this->output_succ(["data"=>$lesson_list,"all_reward_list"=>$all_reward_list]);
teacher_money.php:            $this->change_num=0;
teacher_money.php:            $this->late_num=0;
teacher_money.php:                $lesson_all_cost = $this->teacher_money['lesson_miss_cost']/100;
teacher_money.php:                if($this->change_num>=3){
teacher_money.php:                    $lesson_all_cost = $this->teacher_money['lesson_cost']/100;
teacher_money.php:                    $this->change_num++;
teacher_money.php:                    $info            = "本月第".$this->change_num."次换课";
teacher_money.php:            $lesson_cost = $this->teacher_money['lesson_cost']/100;
teacher_money.php:                        if($key=="deduct_come_late" && $this->late_num<3){
teacher_money.php:                            $this->late_num++;
teacher_money.php:        $type      = $this->get_in_str_val("type","wx");
teacher_money.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_money.php:        $acc       = $this->get_account();
teacher_money.php:            return $this->output_err("老师id错误!");
teacher_money.php:        $this->t_lesson_info->switch_tongji_database();
teacher_money.php:            $start_time = $this->t_lesson_info->get_first_lesson_start($teacherid);
teacher_money.php:            $node_time  = strtotime("2016-12-1");
teacher_money.php:            $now_time = strtotime("+1 month",strtotime(date("Y-m-01",time())));
teacher_money.php:            $start_time   = strtotime($this->get_in_str_val("start_time"));
teacher_money.php:            $now_time     = strtotime("+1 day",strtotime($this->get_in_str_val("end_time")));
teacher_money.php:            $teacher_info = $this->t_teacher_info->get_teacher_info($teacherid);
teacher_money.php:                $teacher_ref_num  = $this->t_teacher_info->get_teacher_ref_num($start_time,$teacher_ref_type);
teacher_money.php:                $start_time = strtotime("-1 month",$start_time);
teacher_money.php:                return $this->output_err("时间错误!");
teacher_money.php:            return $this->output_err("参数错误!");
teacher_money.php:        $teacher_money_flag = $this->t_teacher_info->get_teacher_money_flag($teacherid);
teacher_money.php:        $teacher_money_type = $this->t_teacher_info->get_teacher_money_type($teacherid);
teacher_money.php:        $start_date         = strtotime(date("Y-m-01",$start_time));
teacher_money.php:        $now_date           = strtotime(date("Y-m-01",$now_time));
teacher_money.php:        $simple_info  = $this->t_teacher_info->get_teacher_info($teacherid);
teacher_money.php:        $teacher_info = $this->get_teacher_info_for_total_money($simple_info);
teacher_money.php:            $list[$i]['lesson_reward_ex']    = ($this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start,$end,1))/100;
teacher_money.php:            $list[$i]['lesson_reward_trial'] = ($this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start,$end,2))/100;
teacher_money.php:            $list[$i]['lesson_reward_compensate'] = ($this->t_teacher_money_list->get_teacher_honor_money(
teacher_money.php:            $list[$i]['lesson_reward_compensate_price'] = ($this->t_teacher_money_list->get_teacher_honor_money(
teacher_money.php:            $list[$i]['lesson_reward_reference'] = ($this->t_teacher_money_list->get_teacher_honor_money(
teacher_money.php:                $start_time = strtotime("-1 month",$start);
teacher_money.php:                $end_time   = strtotime("-1 month",$end);
teacher_money.php:                $already_lesson_count = $this->t_lesson_info->get_teacher_last_month_lesson_count($teacherid,$start_time,$end_time);
teacher_money.php:            $lesson_list = $this->t_lesson_info->get_lesson_list_for_wages($teacherid,$start,$end);
teacher_money.php:                    $this->get_lesson_cost_info($val);
teacher_money.php:                    $lesson_price = $val['lesson_base']+$val['lesson_reward']-$val['lesson_cost'];
teacher_money.php:                $item['lesson_ref_money']  = strval($item['lesson_normal']+$item['lesson_reward']-$item['lesson_cost_normal']);
teacher_money.php:                        $tax_price = $item['lesson_price']-800;
teacher_money.php:                        $item['lesson_price'] -= $item['lesson_cost_tax'];
teacher_money.php:                    $item['lesson_price'] -= $item['lesson_cost_tax'];
teacher_money.php:        return $this->output_succ([
teacher_money.php:     * 通过命令 Command:SetTeacherMoney --type=1 执行
teacher_money.php:        $start_time = strtotime("2016-10-4");
teacher_money.php:        $tea_list   = $this->t_teacher_money_list->get_teacher_lesson_total_list($start_time);
teacher_money.php:                    $end_time     = strtotime("-1 week",$val['add_time']);
teacher_money.php:                    $list["time"] = date("m.d",$end_time)."-".date("m.d",($val['add_time']-86400));
teacher_money.php:        return $this->output_succ(["data"=>$ret_list]);
teacher_money.php:        $data['come_late']  = $this->t_lesson_info->get_cost_num($time['start'],$time['end'],$teacherid,1);
teacher_money.php:        $data['change_num'] = $this->t_lesson_info->get_cost_num($time['start'],$time['end'],$teacherid,2);
teacher_money.php:        $this->t_teacher_record_list->switch_tongji_database();
teacher_money.php:        $teacherid = $this->get_in_int_val("teacherid",50158);
teacher_money.php:        $type      = $this->get_in_int_val("type",1);
teacher_money.php:        $add_time  = $this->get_in_int_val("add_time",1484116899);
teacher_money.php:        $ret_info  = $this->t_teacher_record_list->get_all_info($teacherid,$type,$add_time);
teacher_money.php:        return $this->output_succ(["ret_info"=>$ret_info]);
teacher_money.php:        $type      = $this->get_in_int_val("type",0);
teacher_money.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_money.php:            $wx_use_flag = $this->t_teacher_info->get_wx_use_flag($teacherid);
teacher_money.php:            return $this->output_err("权限类型出错！");
teacher_money.php:        return $this->output_succ(["wx_use_flag"=>$wx_use_flag]);
teacher_money.php:        $type       = $this->get_in_int_val("type");
teacher_money.php:        $teacherid  = $this->get_in_int_val("teacherid");
teacher_money.php:        $money_info = $this->get_in_str_val("money_info");
teacher_money.php:        $money      = $this->get_in_int_val("money");
teacher_money.php:        $add_date   = $this->get_in_str_val("add_time",date("Y-m-d",time()));
teacher_money.php:        $acc        = $this->get_account();
teacher_money.php:                return $this->output_err("此用户没有添加奖励权限！");
teacher_money.php:            $check_flag = $this->t_teacher_money_list->check_is_exists($money_info);
teacher_money.php:                return $this->output_err("此课程奖励已存在!");
teacher_money.php:                $teacher_money_type = $this->t_teacher_info->get_teacher_money_type($teacherid);
teacher_money.php:                    return $this->output_err("老师工资分类错误！");
teacher_money.php:                $lesson_info = $this->t_lesson_info->get_lesson_info($money_info);
teacher_money.php:                $diff_time   = $lesson_info['lesson_end']-$add_time;
teacher_money.php:                    return $this->output_err("本节课不是90分钟，无法添加90分钟的课程补偿。");
teacher_money.php:                $base_money = $this->t_lesson_info->get_lesson_money($money_info);
teacher_money.php:                return $this->output_err("请填写补偿原因！");
teacher_money.php:        $ret = $this->t_teacher_money_list->row_insert([
teacher_money.php:            return $this->output_err("添加失败！请重试！");
teacher_money.php:        return $this->output_succ();
teacher_money.php:        $bankcard      = $this->get_in_int_val("bankcard");
teacher_money.php:        $bank_address  = $this->get_in_str_val("bank_address");
teacher_money.php:        $bank_account  = $this->get_in_str_val("bank_account");
teacher_money.php:        $bank_phone    = $this->get_in_str_val("bank_phone");
teacher_money.php:        $bank_province = $this->get_in_str_val("bank_province");
teacher_money.php:        $bank_city     = $this->get_in_str_val("bank_city");
teacher_money.php:        $bank_type     = $this->get_in_str_val("bank_type");
teacher_money.php:        $idcard        = $this->get_in_str_val("idcard");
teacher_money.php:            return $this->output_err("请完善所有数据后重新提交！");
teacher_money.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
teacher_money.php:            return $this->output_err("更新失败！请重试！");
teacher_money.php:        return $this->output_succ();
teacher_money.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
teacher_money.php:        $this->switch_tongji_database();
teacher_money.php:        $list        = $this->t_lesson_info_b2->get_grade_wages_list($start_time,$end_time,0);
teacher_money.php:        $full_start  = strtotime("-1 month",$start_time);
teacher_money.php:        $full_end    = strtotime("-1 month",$end_time);
teacher_money.php:        $full_list   = $this->t_lesson_info_b2->get_grade_wages_list($full_start,$full_end,3);
teacher_money.php:        return $this->PageView(__METHOD__,$ret_info);
teacher_money.php:        $teacherid = $this->get_in_int_val("teacherid");
teacher_money.php:        $lessonid  = $this->get_in_int_val("lessonid");
teacher_money.php:            return $this->output_err("老师和课程id都不能为0！");
teacher_money.php:        $lesson_info = $this->t_lesson_info->get_lesson_info($lessonid);
teacher_money.php:            $check_flag = $this->t_lesson_info_b2->check_teacher_lesson($teacherid,$userid,$subject,$lesson_type);
teacher_money.php:            return $this->output_err("课程类型出错！试听签单奖只能是由试听或常规来申诉！");
teacher_money.php:            return $this->output_err("符合签单奖！");
teacher_money.php:                $this->set_in_value("type",2);
teacher_money.php:                $this->set_in_value("teacherid",$teacherid);
teacher_money.php:                $this->set_in_value("money_info",$teacherid);
teacher_wx_server.php:        // $r = $wechat->checkSignature();
teacher_wx_server.php:        $ret=$wechat->run();
teacher_wx_server.php:            array('id'=>'5', 'pid'=>'1', 'name'=>'立即报名', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/wx_teacher_web/tea?reference'),
teacher_wx_server.php:            array('id'=>'7', 'pid'=>'2', 'name'=>'荣誉榜', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/wx_teacher_web/honor_rank'),
teacher_wx_server.php:            array('id'=>'8', 'pid'=>'2', 'name'=>'上课时间', 'type'=>'view', 'code'=>"http://wx-teacher.leo1v1.com/wx_teacher_web/course_arrange"),
teacher_wx_server.php:            array('id'=>'9', 'pid'=>'2', 'name'=>'课程评价', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/wx_teacher_web/comment_list'),
teacher_wx_server.php:            array('id'=>'10', 'pid'=>'2', 'name'=>'我的收入', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/wx_teacher_web/wage_summary'),
teacher_wx_server.php:            array('id'=>'13', 'pid'=>'3', 'name'=>'我要投诉', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/wx_teacher_web/complaint'),
teacher_wx_server.php:        return $this->output_succ(["index" =>$phone_index ]);
teacher_wx_server.php:        $url = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx636f1058abca1bc1&redirect_uri=http%3A%2F%2Fwx-parent.leo1v1.com%2Farticle_wx%2Fget_openid&response_type=code&scope=snsapi_base&state=1#wechat_redirect";
TeaController.php:        if (!$this->get_login_teacher ()) {
TeaController.php:        $role      = $this->get_in_int_val("_role",2 );
TeaController.php:        $teacherid = $this->get_in_int_val("_userid",60008);
TeaController.php:             echo $this->output_err("未登录");
tea_manage_new.php:        $teacherid=$this->get_in_teacherid();
tea_manage_new.php:        $start_time=$this->get_in_start_time_from_str();
tea_manage_new.php:        $end_time=$this->get_in_end_time_from_str();
tea_manage_new.php:        $teacherid                 = $this->get_in_teacherid();
tea_manage_new.php:        $account                   = $this->get_account();
tea_manage_new.php:        $level                     = $this->get_in_int_val("level");
tea_manage_new.php:        $start_time                = $this->get_in_start_time_from_str();
tea_manage_new.php:        $teacher_money_type = $this->get_in_int_val("teacher_money_type");
tea_manage_new.php:        if ( !$this->check_account_in_arr( ["jim","fly","adrian"] ) ) {
tea_manage_new.php:            return $this->output_err("没有权限:". $account);
tea_manage_new.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:            $this->t_lesson_info->set_teacher_level_info_from_now($teacherid,$teacher_money_type,$level,$start_time);
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid             = $this->get_in_teacherid();
tea_manage_new.php:        $is_good_flag           = $this->get_in_int_val('is_good_flag');
tea_manage_new.php:        $this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid             = $this->get_in_teacherid();
tea_manage_new.php:        $limit_day_lesson_num           = $this->get_in_int_val('limit_day_lesson_num',4);
tea_manage_new.php:        $limit_week_lesson_num          = $this->get_in_int_val('limit_week_lesson_num',8);
tea_manage_new.php:        $limit_month_lesson_num         = $this->get_in_int_val('limit_month_lesson_num',30);
tea_manage_new.php:        $saturday_lesson_num         = $this->get_in_int_val('saturday_lesson_num',6);
tea_manage_new.php:        $seller_require_flag         = $this->get_in_int_val('seller_require_flag',0);
tea_manage_new.php:        $week_lesson_count        = $this->get_in_int_val('week_lesson_count',18);
tea_manage_new.php:        $old_week_num = $this->t_teacher_info->get_limit_week_lesson_num($teacherid);
tea_manage_new.php:        $tea_nick = $this->cache_get_teacher_nick($teacherid);
tea_manage_new.php:        $account = $this->get_account();
tea_manage_new.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (72,"理优监课组","老师周排课数更改",$tea_nick."老师"."周排课数由".$old_week_num."节改为".$limit_week_lesson_num."节,操作人:".$account,"");
tea_manage_new.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (448,"理优监课组","老师周排课数更改",$tea_nick."老师"."周排课数由".$old_week_num."节改为".$limit_week_lesson_num."节,操作人:".$account,"");
tea_manage_new.php:                $this->t_teacher_record_list->row_insert([
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid             = $this->get_in_teacherid();
tea_manage_new.php:        $tea_nick              = $this->get_in_str_val('tea_nick',"");
tea_manage_new.php:        $realname              = $this->get_in_str_val('realname',"");
tea_manage_new.php:        $gender                = $this->get_in_int_val('gender', -1);
tea_manage_new.php:        $birth                 = $this->get_in_str_val('birth',"");
tea_manage_new.php:        $work_year             = $this->get_in_int_val('work_year', 0);
tea_manage_new.php:        $email                 = $this->get_in_str_val('email',"");
tea_manage_new.php:        $base_intro            = $this->get_in_str_val('base_intro',"");
tea_manage_new.php:        $advantage             = $this->get_in_str_val('advantage',"");
tea_manage_new.php:        $need_test_lesson_flag = $this->get_in_str_val("need_test_lesson_flag","");
tea_manage_new.php:        $wx_openid             = $this->get_in_str_val("wx_openid",null);
tea_manage_new.php:        $subject               = $this->get_in_int_val('subject',-1);
tea_manage_new.php:        $second_subject        = $this->get_in_int_val('second_subject',-1);
tea_manage_new.php:        $third_subject         = $this->get_in_int_val('third_subject',-1);
tea_manage_new.php:        $grade_part_ex         = $this->get_in_int_val('grade_part_ex',-1);
tea_manage_new.php:        $second_grade          = $this->get_in_int_val('second_grade',-1);
tea_manage_new.php:        $third_grade           = $this->get_in_int_val('third_grade',-1);
tea_manage_new.php:        $textbook_type         = $this->get_in_int_val('textbook_type');
tea_manage_new.php:        $address               = $this->get_in_str_val('address',"");
tea_manage_new.php:        $school                = $this->get_in_str_val('school',"");
tea_manage_new.php:        $teacher_textbook      = $this->get_in_str_val('teacher_textbook',"");
tea_manage_new.php:        $phone_spare           = $this->get_in_str_val('phone_spare',"");
tea_manage_new.php:        $subject_old        = $this->t_teacher_info->get_subject($teacherid);
tea_manage_new.php:        $grade_part_ex_old  = $this->t_teacher_info->get_grade_part_ex($teacherid);
tea_manage_new.php:        $second_subject_old = $this->t_teacher_info->get_second_subject($teacherid);
tea_manage_new.php:        $second_grade_old   = $this->t_teacher_info->get_second_grade($teacherid);
tea_manage_new.php:        if($_SERVER['HTTP_HOST']=="admin.yb1v1.com" && !$this->check_account_in_arr(["ted","adrian"]) && $subject==0 && $subject_old!=0){
tea_manage_new.php:            return $this->output_err("没有权限修改第一科目至未设置,请找Erick");
tea_manage_new.php:        $sub_pass = $this->t_teacher_lecture_info->get_teacher_subject($teacherid);
tea_manage_new.php:        $adminid  = $this->get_account_id();
tea_manage_new.php:        $account  = $this->get_account();
tea_manage_new.php:        $this->cache_del_teacher_nick($teacherid);
tea_manage_new.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:            $tea_arr[] = $this->get_tea_adminid_by_subject($subject_old);
tea_manage_new.php:            $this->t_field_modified_list->add_modified_teacher_info("t_teacher_info","subject",$subject_old,$subject,$adminid,$teacherid);
tea_manage_new.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid($v,"理优监课组","老师第一科目更改",$tea_nick."老师,第一科目由".$old_subject_str."改为".$subject_str.",操作人:".$account,"");
tea_manage_new.php:            $tea_arr[] = $this->get_tea_adminid_by_subject($subject_old);
tea_manage_new.php:            $this->t_field_modified_list->add_modified_teacher_info("t_teacher_info","grade_part_ex",$grade_part_ex_old,$grade_part_ex,$adminid,$teacherid);
tea_manage_new.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($v,"理优监课组","老师第一年级段更改",$tea_nick."老师,第一年级段由".$old_grade_str."改为".$grade_str.",操作人:".$account,"");
tea_manage_new.php:            $tea_arr[] = $this->get_tea_adminid_by_subject($second_subject_old);
tea_manage_new.php:            $this->t_field_modified_list->add_modified_teacher_info("t_teacher_info","second_subject",$second_subject_old,$second_subject,$adminid,$teacherid);
tea_manage_new.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($v,"理优监课组","老师第二科目更改",$tea_nick."老师,第二科目由".$old_second_subject_str."改为".$second_subject_str.",操作人:".$account,"");
tea_manage_new.php:            $tea_arr[] = $this->get_tea_adminid_by_subject($second_subject_old);
tea_manage_new.php:            $this->t_field_modified_list->add_modified_teacher_info("t_teacher_info","second_grade",$second_grade_old,$second_grade,$adminid,$teacherid);
tea_manage_new.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($v,"理优监课组","老师第二年级段更改",$tea_nick."老师,第二年级段由".$old_second_grade_str."改为".$second_grade_str.",操作人:".$account,"");
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid =$this->get_in_teacherid();
tea_manage_new.php:        $tea_note     = trim($this->get_in_str_val('tea_note',""));
tea_manage_new.php:        $ret=$this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid             = $this->get_in_teacherid();
tea_manage_new.php:        $trial_lecture_is_pass = $this->get_in_int_val('trial_lecture_is_pass');
tea_manage_new.php:        $train_through_new     = $this->get_in_int_val('train_through_new');
tea_manage_new.php:        $wx_use_flag           = $this->get_in_int_val('wx_use_flag');
tea_manage_new.php:        $teacher_info = $this->t_teacher_info->get_teacher_info($teacherid);
tea_manage_new.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,$update_arr);
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid        = $this->get_in_teacherid();
tea_manage_new.php:        $interview_access = trim($this->get_in_str_val('interview_access',""));
tea_manage_new.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid = $this->get_in_teacherid();
tea_manage_new.php:        $timestamp = $this->get_in_int_val("timestamp");
tea_manage_new.php:        $month_start = $this->get_in_int_val("month_start");
tea_manage_new.php:        $type = $this->get_in_int_val("type",0);
tea_manage_new.php:        $ret_info = $this->t_lesson_info->get_teacher_free_time_info_new( $teacherid, $start_time,$end_time );
tea_manage_new.php:                $l_item["title"]="$lesson_type_str-".
tea_manage_new.php:                    $this->cache_get_student_nick( $l_item["userid"]);
tea_manage_new.php:        $page_num=$this->get_in_page_num();
tea_manage_new.php:        $record_audio_server1= $this->get_in_str_val("record_audio_server1");
tea_manage_new.php:        $ret_info=$this->t_lesson_info-> lesson_record_server_list($page_num, $record_audio_server1);
tea_manage_new.php:            $this->cache_set_item_student_nick($item);
tea_manage_new.php:            $this->cache_set_item_teacher_nick($item);
tea_manage_new.php:        return $this->pageView(__METHOD__, $ret_info);
tea_manage_new.php:        $lessonid = $this->get_in_lessonid();
tea_manage_new.php:        $list = $this->t_lesson_info->get_seller_and_ass_lesson_info($lessonid);
tea_manage_new.php:        return $this->output_succ(["data"=>$list]);
tea_manage_new.php:        $id= $this->get_in_int_val("id",-1);
tea_manage_new.php:        $account_id = $this->get_account_id(); 
tea_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
tea_manage_new.php:        $page_num    = $this->get_in_page_num();
tea_manage_new.php:        $adminid   = $this->get_in_int_val("adminid",-1);
tea_manage_new.php:        $accept_adminid   = $this->get_in_int_val("accept_adminid",-1);
tea_manage_new.php:        $accept_adminid_flag   = $this->get_in_str_val("accept_adminid_flag",0);
tea_manage_new.php:            $account_id=-1;
tea_manage_new.php:        $require_adminid      = $this->get_in_int_val("require_adminid",-1);
tea_manage_new.php:        $ret_info = $this->t_teacher_complaints_info->get_all_info($page_num,$account_id,$adminid,$accept_adminid,$require_adminid,$start_time,$end_time,$id);
tea_manage_new.php:                $item["deal_time"] = round(($item["accept_time"] - $item["add_time"])/3600,2);
tea_manage_new.php:                $item["curl"] = substr($item["complaints_info_url"],$num,$num_surl-1);
tea_manage_new.php:                $item["surl"] = substr($item["record_scheme_url"],$num,$num_surl-1);
tea_manage_new.php:        $acc = $this->get_account();
tea_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info,["acc"=>$acc]);
tea_manage_new.php:        $adminid = $this->get_account_id();
tea_manage_new.php:        $this->set_in_value("adminid",$adminid);
tea_manage_new.php:        $this->set_in_value("accept_adminid_flag",1);
tea_manage_new.php:        return $this->get_teacher_complaints_info();
tea_manage_new.php:        $id= $this->get_in_int_val("id",-1);
tea_manage_new.php:        $account_id = $this->get_account_id(); 
tea_manage_new.php:        $accept_adminid_list = $this->get_accept_adminid_list($account_id);
tea_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
tea_manage_new.php:        $page_num    = $this->get_in_page_num();
tea_manage_new.php:        $adminid   = $this->get_in_int_val("adminid",-1);
tea_manage_new.php:        $accept_adminid   = $this->get_in_int_val("accept_adminid",-1);
tea_manage_new.php:        $accept_adminid_flag   = $this->get_in_str_val("accept_adminid_flag",0);
tea_manage_new.php:        $require_adminid      = $this->get_in_int_val("require_adminid",-1);
tea_manage_new.php:        $ret_info = $this->t_change_teacher_list->get_seller_require_commend_teacher_info($start_time,$end_time,$adminid,$page_num,$id,$accept_adminid,$accept_adminid_list,$require_adminid,2);
tea_manage_new.php:                $val["deal_time"] = round(($val["accept_time"] - $val["wx_send_time"])/3600,2);
tea_manage_new.php:        $acc = $this->get_account();
tea_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info,["adminid"=>$adminid,"acc"=>$acc]);
tea_manage_new.php:        $adminid = $this->get_account_id();
tea_manage_new.php:        $this->set_in_value("adminid",$adminid);
tea_manage_new.php:        $this->set_in_value("accept_adminid_flag",1);
tea_manage_new.php:        return $this->get_seller_require_commend_teacher_info();
tea_manage_new.php:        $id= $this->get_in_int_val("id",-1);
tea_manage_new.php:        $account_id = $this->get_account_id(); 
tea_manage_new.php:        $accept_adminid_list = $this->get_accept_adminid_list($account_id);
tea_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
tea_manage_new.php:        $page_num    = $this->get_in_page_num();
tea_manage_new.php:        $adminid   = $this->get_in_int_val("adminid",-1);
tea_manage_new.php:        $accept_adminid   = $this->get_in_int_val("accept_adminid",-1);
tea_manage_new.php:        $accept_adminid_flag   = $this->get_in_str_val("accept_adminid_flag",0);
tea_manage_new.php:        $require_adminid      = $this->get_in_int_val("require_adminid",-1);
tea_manage_new.php:        $ret_info = $this->t_seller_and_ass_record_list->get_seller_ass_record_info($start_time,$end_time,$adminid,$page_num,$id,$accept_adminid,$accept_adminid_list,$require_adminid);
tea_manage_new.php:            $val["rurl"] = substr($val["record_info_url"],$num,$num_url-1);
tea_manage_new.php:                $val["surl"] = substr($val["record_scheme_url"],$num,$num_surl-1);
tea_manage_new.php:                $val["deal_time"] = round(($val["accept_time"] - $val["add_time"])/3600,2);
tea_manage_new.php:        $acc = $this->get_account();
tea_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info,["adminid"=>$adminid,"acc"=>$acc]);
tea_manage_new.php:        $adminid = $this->get_account_id();
tea_manage_new.php:        $this->set_in_value("adminid",$adminid);
tea_manage_new.php:        $this->set_in_value("accept_adminid_flag",1);
tea_manage_new.php:        return $this->get_seller_ass_record_info();
tea_manage_new.php:        $adminid = $this->get_account_id();
tea_manage_new.php:        $this->set_in_value("adminid",$adminid);
tea_manage_new.php:        $this->set_in_value("accept_adminid_flag",1);
tea_manage_new.php:        return $this->get_seller_ass_record_info();
tea_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid");
tea_manage_new.php:            return $this->output_err("老师id为0");
tea_manage_new.php:        $data = $this->t_teacher_info->field_get_list(
tea_manage_new.php:        return $this->output_succ(["data"=>$data]);
tea_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid");
tea_manage_new.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"grade_part_ex,grade_start,grade_end,not_grade");
tea_manage_new.php:           $grade_range= $this->get_grade_range_new($val);
tea_manage_new.php:        return $this->output_succ(["list"=>$list,"data"=>$data]);
tea_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid");
tea_manage_new.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"grade_part_ex,grade_start,grade_end,not_grade_limit");
tea_manage_new.php:        return $this->output_succ(["data"=>$data,"list"=>$arr]);
tea_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid");
tea_manage_new.php:        $grade_start = $this->get_in_int_val("grade_start");
tea_manage_new.php:        $grade_end = $this->get_in_int_val("grade_end");
tea_manage_new.php:            return $this->output_err("结束年级段不能小于开始年级段");
tea_manage_new.php:        $this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid");
tea_manage_new.php:        $is_quit = $this->get_in_int_val("is_quit");
tea_manage_new.php:        $quit_info = $this->get_in_str_val("quit_info");
tea_manage_new.php:        $quit_set_adminid = $this->get_account_id();
tea_manage_new.php:            return $this->output_err("请填写离职确认信息");
tea_manage_new.php:        $this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid");
tea_manage_new.php:        $leave_start_time = $this->get_in_str_val("leave_start_time");
tea_manage_new.php:        $leave_end_time = $this->get_in_str_val("leave_end_time");
tea_manage_new.php:        $leave_reason = $this->get_in_str_val("leave_reason");
tea_manage_new.php:            return $this->output_err("请填写完整!");
tea_manage_new.php:        $leave_set_adminid = $this->get_account_id();
tea_manage_new.php:        $this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:        $this->t_teacher_leave_info->row_insert([
tea_manage_new.php:        $this->t_teacher_record_list->row_insert([
tea_manage_new.php:            "acc"                     => $this->get_account(),
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid");
tea_manage_new.php:        $data = $this->t_teacher_leave_info->get_all_info_by_teacherid($teacherid);
tea_manage_new.php:            $item["account"] = $this->t_manager_info->get_account($item["leave_set_adminid"]);
tea_manage_new.php:        return $this->output_succ(["data"=>$data]);
tea_manage_new.php:        $phone            = $this->get_in_str_val("phone");
tea_manage_new.php:        $tea_nick         = $this->get_in_str_val("tea_nick");
tea_manage_new.php:        $lesson_start     = $this->get_in_str_val("lesson_start");
tea_manage_new.php:        $subject          = $this->get_in_int_val("subject");
tea_manage_new.php:        $grade            = $this->get_in_int_val("grade");
tea_manage_new.php:        $record_teacherid = $this->get_in_int_val("record_teacherid");
tea_manage_new.php:        $acc              = $this->get_account();
tea_manage_new.php:            return $this->output_err("请填写完整"); 
tea_manage_new.php:            return $this->output_err("请填写正确的上课时间"); 
tea_manage_new.php:        $ret_row2   = $this->t_lesson_info->check_teacher_time_free($record_teacherid,0,$lesson_start,$lesson_end);
tea_manage_new.php:            return $this->output_err(
tea_manage_new.php:        $teacherid = $this->t_teacher_info->get_teacherid_by_phone($phone);
tea_manage_new.php:            $teacherid = $this->add_teacher_common($teacher_info);              
tea_manage_new.php:            $this->t_teacher_info->field_update_list($teacherid,[
tea_manage_new.php:            $this->t_user_info->field_update_list($teacherid,[
tea_manage_new.php:        $courseid    = $this->t_course_order->add_open_course($teacherid,$lesson_name,$grade,$subject,1100);
tea_manage_new.php:        $tea_cw_url  = "http://leowww.oss-cn-shanghai.aliyuncs.com/Teacher/试讲内容——".$grade_str.$subject_str.".pdf";
tea_manage_new.php:        $this->t_lesson_info->row_insert([
tea_manage_new.php:        $lessonid = $this->t_lesson_info->get_last_insertid();
tea_manage_new.php:        $this->t_train_lesson_user->row_insert([
tea_manage_new.php:        $realname = $this->t_teacher_info->get_realname($teacherid);
tea_manage_new.php:        $phone = $this->t_teacher_info->get_phone($teacherid);
tea_manage_new.php:        $lesson_start_str = date("Y-m-d H:i:s",$lesson_start);
tea_manage_new.php:        $time_str = date("Y-m-d H:i:s",time());
tea_manage_new.php:        $lesson_time = date("Y-m-d",$lesson_start);
tea_manage_new.php:        $lesson_time_str = $lesson_time." ".$start_str."-".$end_str; 
tea_manage_new.php:         * 模板ID   : rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o
tea_manage_new.php:        $wx_openid = $this->t_teacher_info->get_wx_openid($teacherid);
tea_manage_new.php:            $template_id      = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
tea_manage_new.php:            $data['keyword3'] = date("Y-m-d H:i",time());
tea_manage_new.php:        $uid = $this->t_manager_info->get_adminid_by_teacherid($record_teacherid);
tea_manage_new.php:        $record_realname = $this->t_teacher_info->get_realname($record_teacherid);
tea_manage_new.php:        $this->t_manager_info->send_wx_todo_msg_by_adminid ($uid,"1对1面试课程",$record_realname."老师您好,您的面试课程已排好","
tea_manage_new.php:        $email = $this->t_teacher_lecture_appointment_info->get_email_by_phone($phone);
tea_manage_new.php:【LEO】试讲-答疑QQ群<br><br>
tea_manage_new.php:时薪：50-100RMB<br><br>
tea_manage_new.php:            $this->t_lesson_info->field_update_list($lessonid,[
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $phone = $this->get_in_str_val("phone");
tea_manage_new.php:        $lessonid = $this->get_in_int_val("lessonid");
tea_manage_new.php:        $lesson_time_str = $this->get_in_str_val("lesson_time");
tea_manage_new.php:        $realname = $this->get_in_str_val("realname");
tea_manage_new.php:        $email = $this->t_teacher_lecture_appointment_info->get_email_by_phone($phone);
tea_manage_new.php:【LEO】试讲-答疑QQ群<br><br>
tea_manage_new.php:时薪：50-100RMB<br><br>
tea_manage_new.php:            $this->t_lesson_info->field_update_list($lessonid,[
tea_manage_new.php:        return $this->output_succ();
tea_manage_new.php:        $phone   = $this->get_in_phone();
tea_manage_new.php:        $subject = $this->get_in_subject();
tea_manage_new.php:        $grade   = $this->get_in_grade();
tea_manage_new.php:        $num = $this->t_teacher_lecture_info->get_re_submit_num($phone,$subject,$grade);      
tea_manage_new.php:        return $this->output_succ(["num"=>$num]);
tea_manage_new.php:        $id = $this->get_in_int_val("id");
tea_manage_new.php:        $re_submit_list = $this->get_in_str_val("re_submit_list");
tea_manage_new.php:        $lecture_out_list = $this->get_in_str_val("lecture_out_list");
tea_manage_new.php:        $reason = trim($this->get_in_str_val("reason"));
tea_manage_new.php:        $this->t_teacher_lecture_info->field_update_list($id,[
tea_manage_new.php:        $teacher_info                          = $this->t_teacher_lecture_info->get_lecture_info($id);
tea_manage_new.php:        $this->send_lecture_sms_new($teacher_info,$status);
tea_manage_new.php:        return $this->output_succ();       
tea_manage_new.php:        $lessonid      = $this->get_in_int_val("lessonid");
tea_manage_new.php:        $lesson_status = $this->get_in_int_val("lesson_status");
tea_manage_new.php:        $adminid       = $this->get_account_id();
tea_manage_new.php:            $ret = $this->t_lesson_info->field_update_list($lessonid,[
tea_manage_new.php:            return $this->output_err("课程状态不对！无法删除！");
tea_manage_new.php:            return $this->output_err("删除失败！请重试！");
tea_manage_new.php:        return $this->output_succ();
tea_manage.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,1);
tea_manage.php:        $lesson_status = $this->get_in_int_val('lesson_status', -1);
tea_manage.php:        $lesson_type   = $this->get_in_int_val('lesson_type',-1);
tea_manage.php:        $teacherid     = $this->get_in_int_val('teacherid',-1);
tea_manage.php:        $lessonid      = $this->get_in_lessonid(-1);
tea_manage.php:        $page          = $this->get_in_int_val('page_num',1);
tea_manage.php:        $ret_info = $this->t_lesson_info->get_open_lessons($lesson_status,$teacherid,$lesson_type,
tea_manage.php:            $item['lesson_time']     = date('Y-m-d H:i:s',$item['lesson_start'])."-".date("H:i:s",$item['lesson_end']);
tea_manage.php:            $item['nick']            = $this->cache_get_teacher_nick($item['teacherid']);
tea_manage.php:            $item['stu_total']       = $this->t_open_lesson_user->check_lesson_has($item['lessonid']);
tea_manage.php:            $item['stu_join']        = $this->t_lesson_opt_log->get_login_user($item['lessonid']);
tea_manage.php:        return $this->Pageview(__METHOD__,$ret_info,["qiniu_domain"=>$qiniu_url]);
tea_manage.php:        $courseid    = $this->get_in_courseid(-1);
tea_manage.php:        $course_type = $this->get_in_int_val("course_type",-1);
tea_manage.php:        $search_str  = trim($this->get_in_str_val("search_str"));
tea_manage.php:        $page_num    = $this->get_in_page_num();
tea_manage.php:        $ret_info = $this->t_course_order->get_open_course_list($courseid,$course_type,$search_str,$page_num);
tea_manage.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
tea_manage.php:        $courseid    = $this->get_in_courseid(-1);
tea_manage.php:        $course_type = $this->get_in_int_val("course_type",-1);
tea_manage.php:        $search_str  = trim($this->get_in_str_val("search_str"));
tea_manage.php:        $page_num    = $this->get_in_page_num();
tea_manage.php:        $ret_info = $this->t_lesson_info->get_open_from_list($courseid,$course_type,$search_str,$page_num);
tea_manage.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
tea_manage.php:        $packageid    = $this->get_in_packageid(-1);
tea_manage.php:        $package_type = $this->get_in_int_val("package_type",-1);
tea_manage.php:        $search_str   = trim($this->get_in_str_val("search_str"));
tea_manage.php:        $page_num     = $this->get_in_page_num();
tea_manage.php:        $ret_info = $this->t_appointment_info->get_open_package_list($packageid,$package_type,$search_str,$page_num);
tea_manage.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
tea_manage.php:        $courseid=$this->get_in_int_val("courseid",0);
tea_manage.php:        $lessonid=$this->get_in_int_val("lessonid",0);
tea_manage.php:        $course_name=$this->t_course_order->get_course_name($courseid);
tea_manage.php:        $lesson_intro=$this->t_lesson_info->get_lesson_intro($lessonid);
tea_manage.php:        $lesson_type  = $this->get_in_int_val('lesson_type',-1);
tea_manage.php:        $teacherid    = $this->get_in_int_val('teacherid',-1);
tea_manage.php:        $start_date   = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-3*86400 ));
tea_manage.php:        $end_date     = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
tea_manage.php:        $page_num     = $this->get_in_page_num();
tea_manage.php:        $ret_info = $this->t_lesson_info->lesson_account($lesson_type,$start_date_s,$end_date_s,$teacherid,$page_num);
tea_manage.php:            $item['lesson_time']     = date('Y-m-d H:i',$item['lesson_start'])."-".date('H:i',$item['lesson_end']);
tea_manage.php:            $ret_all                 = $this->t_small_class_user->get_small_class_user_list($item['courseid']);
tea_manage.php:            $item['course_name']     = $this->t_course_order->get_course_name($item['courseid']);
tea_manage.php:                $val["user_login_time"] = $this->t_small_class_user->get_small_class_user_login_time($item['lessonid'],$val["userid"]);
tea_manage.php:        return $this->pageView(__METHOD__,$ret_info);
tea_manage.php:        $adminid = $this->get_account_id();
tea_manage.php:        $this->set_in_value("test_seller_id", $adminid);
tea_manage.php:        $this->set_in_value("lesson_type",  2);
tea_manage.php:        return $this->lesson_list();
tea_manage.php:        $this->set_in_value("fulltime_flag",0);
tea_manage.php:        return $this->lesson_list();
tea_manage.php:        $this->set_in_value("fulltime_flag",1);
tea_manage.php:        return $this->lesson_list();
tea_manage.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,null,1);
tea_manage.php:        $acc         = $this->get_account();
tea_manage.php:        $adminid     = $this->get_account_id();
tea_manage.php:        $right_list  = $this->get_tea_subject_and_right_by_adminid($adminid);
tea_manage.php:        $account_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
tea_manage.php:        $studentid       = $this->get_in_int_val('studentid', -1);
tea_manage.php:        $teacherid       = $this->get_in_int_val('teacherid', -1);
tea_manage.php:        $confirm_flag    = $this->get_in_enum_list(E\Econfirm_flag::class);
tea_manage.php:        $seller_adminid  = $this->get_in_int_val("seller_adminid",-1);
tea_manage.php:        $lesson_status   = $this->get_in_int_val("lesson_status",-1);
tea_manage.php:        $assistantid     = $this->get_in_assistantid(-1);
tea_manage.php:        $grade           = $this->get_in_enum_list(E\Egrade::class);
tea_manage.php:        $test_seller_id  = $this->get_in_int_val("test_seller_id",-1 );
tea_manage.php:        $has_performance = $this->get_in_int_val("has_performance",-1 );
tea_manage.php:        $fulltime_flag = $this->get_in_int_val("fulltime_flag",-1 );
tea_manage.php:        $lesson_user_online_status   = $this->get_in_e_set_boolean(-1,"lesson_user_online_status");
tea_manage.php:        $lesson_type_default = Cookie::get("lesson_type")==null?-1: Cookie::get("lesson_type") ;
tea_manage.php:        $subject_default     = Cookie::get("subject")==null?-1: Cookie::get("subject");
tea_manage.php:        $lesson_type               = $this->get_in_int_val('lesson_type', $lesson_type_default);
tea_manage.php:        $subject                   = $this->get_in_int_val('subject', $subject_default);
tea_manage.php:        $lesson_count              = $this->get_in_int_val('lesson_count', -1 );
tea_manage.php:        $lesson_cancel_reason_type = $this->get_in_int_val('lesson_cancel_reason_type', -1 );
tea_manage.php:        $lesson_del_flag           = $this->get_in_int_val('lesson_del_flag', -1 );
tea_manage.php:        $has_video_flag            = $this->get_in_e_boolean(-1,"has_video_flag");
tea_manage.php:        $is_with_test_user = $this->get_in_int_val('is_with_test_user', 0);
tea_manage.php:        $lessonid          = $this->get_in_lessonid(-1);
tea_manage.php:        $origin            = $this->get_in_str_val("origin");
tea_manage.php:        $page_num          = $this->get_in_page_num();
tea_manage.php:            $lessonid= $this->t_lesson_info->get_lessonid_by_lesson_str( $this->get_in_str_val("lessonid"));
tea_manage.php:        $ret_info = $this->t_lesson_info->get_lesson_condition_list_ex(
tea_manage.php:            $item['lesson_end_str' ]        = date('Y-m-d H:i',$item['lesson_end']);
tea_manage.php:            $item['real_begin_time_str' ]   = date('Y-m-d H:i',$item['real_begin_time']);
tea_manage.php:            $item['lesson_quiz_status_str'] = $this->get_lesson_quiz_cfg($item['lesson_quiz_status'], $item['lesson_type']);
tea_manage.php:            $item['homework_url']           = $this->get_work_url($item);
tea_manage.php:            $item["tea_nick"]             = $this->cache_get_teacher_nick($item["teacherid"]);
tea_manage.php:            $item["require_admin_nick"]   = $this->cache_get_account_nick($item["require_adminid"]);
tea_manage.php:            $item['lesson_diff']          = $item['lesson_end'] - $item['lesson_start'];
tea_manage.php:            $item["confirm_admin_nick"] = $this->cache_get_account_nick($item["confirm_adminid"]);
tea_manage.php:        $seller_list      = $this->t_admin_group->get_admin_list_by_gorupid(E\Eaccount_role::V_1 );
tea_manage.php:        $adminid          = $this->get_account_id();
tea_manage.php:        $self_groupid     = $this->t_admin_group_user->get_groupid_by_adminid(2 , $adminid );
tea_manage.php:        $get_self_adminid = $this->t_admin_group_name->get_master_adminid($self_groupid);
tea_manage.php:        $ret_str  = $this->pageView(__METHOD__,$ret_info, [
tea_manage.php:        return  $response->withCookie(cookie('lesson_type',$lesson_type , 45000))
tea_manage.php:          ->withCookie(cookie('subject', $subject, 45000));
tea_manage.php:        $lessonid =  $this->get_in_int_val('lessonid');
tea_manage.php:        $courseware_flag =  $this->get_in_str_val('courseware_flag');
tea_manage.php:        $courseware_flag_score =  $this->get_in_int_val('courseware_flag_score');
tea_manage.php:        $lesson_preparation_content =  $this->get_in_str_val('lesson_preparation_content');
tea_manage.php:        $lesson_preparation_content_score =  $this->get_in_int_val('lesson_preparation_content_score');
tea_manage.php:        $courseware_quality =  $this->get_in_str_val('courseware_quality');
tea_manage.php:        $courseware_quality_score =  $this->get_in_int_val('courseware_quality_score');
tea_manage.php:        $tea_process_design =  $this->get_in_str_val('tea_process_design');
tea_manage.php:        $tea_process_design_score =  $this->get_in_int_val('tea_process_design_score');
tea_manage.php:        $class_atm =  $this->get_in_str_val('class_atm');
tea_manage.php:        $class_atm_score =  $this->get_in_int_val('class_atm_score');
tea_manage.php:        $knw_point =  $this->get_in_str_val('knw_point');
tea_manage.php:        $knw_point_score =  $this->get_in_int_val('knw_point_score');
tea_manage.php:        $dif_point =  $this->get_in_str_val('dif_point');
tea_manage.php:        $dif_point_score =  $this->get_in_int_val('dif_point_score');
tea_manage.php:        $teacher_blackboard_writing =  $this->get_in_str_val('teacher_blackboard_writing');
tea_manage.php:        $teacher_blackboard_writing_score =  $this->get_in_int_val('teacher_blackboard_writing_score');
tea_manage.php:        $tea_rhythm =  $this->get_in_str_val('tea_rhythm');
tea_manage.php:        $tea_rhythm_score =  $this->get_in_int_val('tea_rhythm_score');
tea_manage.php:        $language_performance =  $this->get_in_str_val('language_performance');
tea_manage.php:        $language_performance_score =  $this->get_in_int_val('language_performance_score');
tea_manage.php:        $content_fam_degree =  $this->get_in_str_val('content_fam_degree');
tea_manage.php:        $content_fam_degree_score =  $this->get_in_int_val('content_fam_degree_score');
tea_manage.php:        $answer_question_cre =  $this->get_in_str_val('answer_question_cre');
tea_manage.php:        $answer_question_cre_score =  $this->get_in_int_val('answer_question_cre_score');
tea_manage.php:        $tea_attitude =  $this->get_in_str_val('tea_attitude');
tea_manage.php:        $tea_attitude_score =  $this->get_in_int_val('tea_attitude_score');
tea_manage.php:        $tea_method =  $this->get_in_str_val('tea_method');
tea_manage.php:        $tea_method_score =  $this->get_in_int_val('tea_method_score');
tea_manage.php:        $tea_concentration =  $this->get_in_str_val('tea_concentration');
tea_manage.php:        $tea_concentration_score =  $this->get_in_int_val('tea_concentration_score');
tea_manage.php:        $tea_accident =  $this->get_in_str_val('tea_accident');
tea_manage.php:        $tea_accident_score =  $this->get_in_int_val('tea_accident_score');
tea_manage.php:        $tea_operation =  $this->get_in_str_val('tea_operation');
tea_manage.php:        $tea_operation_score =  $this->get_in_int_val('tea_operation_score');
tea_manage.php:        $tea_environment =  $this->get_in_str_val('tea_environment');
tea_manage.php:        $tea_environment_score =  $this->get_in_int_val('tea_environment_score');
tea_manage.php:        $class_abnormality =  $this->get_in_str_val('class_abnormality');
tea_manage.php:        $class_abnormality_score =  $this->get_in_int_val('class_abnormality_score');
tea_manage.php:        $test_lesson_advice =  trim($this->get_in_str_val('test_lesson_advice'));
tea_manage.php:        $test_lesson_score =  $this->get_in_int_val('test_lesson_score');
tea_manage.php:        $this->t_test_lesson_subject_sub_list->field_update_list($lessonid,[
tea_manage.php:        return $this->output_succ();
tea_manage.php:        //if (!$this->check_in_has("assistantid")) {
tea_manage.php:            $this->set_in_value("assistantid",$this->t_assistant_info->get_assistantid($this->get_account()) );
tea_manage.php:        $this->set_in_value("test_seller_id", $this->get_account_id());
tea_manage.php:        return $this->lesson_list();
tea_manage.php:        $this->set_in_value("is_with_test_user",0);
tea_manage.php:        $this->set_in_value("lesson_type",-2);
tea_manage.php:        return $this->lesson_list();
tea_manage.php:        $is_part_time = $this->get_in_int_val('is_part_time', -1 );
tea_manage.php:        $tea_nick     = $this->get_in_str_val('tea_nick', "" );
tea_manage.php:        $page_num     = $this->get_in_int_val('page_num', -1 );
tea_manage.php:        $ret_info = $this->t_teacher_info->get_tea_list_for_tea_manage($tea_nick, $is_part_time, $page_num);
tea_manage.php:            $ret_quiz           = $this->t_quiz_info->get_unchecked_quiz_by_teacherid($value['teacherid']);
tea_manage.php:        return $this->pageView(__METHOD__,$ret_info);
tea_manage.php:        $courseid  = $this->get_in_int_val('courseid',0);
tea_manage.php:        $teacherid = $this->get_in_int_val('teacherid',0);
tea_manage.php:        $ret = $this->t_course_order->change_teacher($courseid, $teacherid);
tea_manage.php:        return outputJson(array('ret' => -1, 'info' => '修改失败'));
tea_manage.php:        $lessonid = $this->get_in_int_val('lessonid',0);
tea_manage.php:        $ret      = $this->t_lesson_info->get_lesson_after($lessonid);
tea_manage.php:           return outputJson(array('ret' => -1, 'info' => '还有在此课程之后的已排课程, 请先删除这些课程再重新操作'));
tea_manage.php:        $ret                             =  $this->t_lesson_info->delete_open_lesson($lessonid);
tea_manage.php:           return outputJson(array('ret' => -1, 'info' => '删除失败'));
tea_manage.php:        $role  = $this->get_in_int_val('role',0);
tea_manage.php:        $phone = $this->get_in_str_val('phone',"");
tea_manage.php:        $info  = $this->t_phone_to_user->get_info_from_role_phone($role,$phone);
tea_manage.php:            return outputJson(array('ret' => -1, 'info' => '该账号不存在'));
tea_manage.php:        $lessonid = $this->get_in_int_val('lessonid',-1);
tea_manage.php:        $opt_type = $this->get_in_str_val('opt_type',"");
tea_manage.php:        $userid   = $this->get_in_int_val('userid',-1);
tea_manage.php:            $ret             = $this->t_open_lesson_user->delete_open_lesson_user($lessonid,$userid);
tea_manage.php:            if(-1 == $userid || -1 == $lessonid){
tea_manage.php:            $enter_type = $this->t_lesson_info->get_open_class_enter_type($lessonid);
tea_manage.php:            $ret = $this->t_open_lesson_user->get_open_class_user($lessonid,$userid);
tea_manage.php:            $this->t_open_lesson_user->add_open_class_user($lessonid,$userid);
tea_manage.php:        $uid_arr = $this->t_open_lesson_user->get_open_class_users($lessonid);
tea_manage.php:            $ret       = $this->t_phone_to_user->get_phone_role_by_userid($item['userid']);
tea_manage.php:            $nick      = $this->t_student_info->get_user_nick_by_id($item['userid'], $ret['role']);
tea_manage.php:        $id  = $this->get_in_str_val('id', "");
tea_manage.php:        $url = $this->get_in_str_val('urlkey', "");
tea_manage.php:        $this->tea_manage_model->upload_files($lessonid, 0, $url);
tea_manage.php:        $courseid      = $this->get_in_int_val('courseid', 0);
tea_manage.php:        $from_lessonid = $this->get_in_int_val('from_lessonid', 0);
tea_manage.php:        $ret_info = $this->t_lesson_info->add_from_lessonid($courseid,$from_lessonid);
tea_manage.php:        $lessonid = $this->get_in_int_val('lessonid', 0);
tea_manage.php:        $can_set  = $this->get_in_int_val('can_set', 0);
tea_manage.php:        $ret_info = $this->t_lesson_info->can_set_from_lessonid($lessonid,$can_set);
tea_manage.php:        $courseid = $this->get_in_courseid();
tea_manage.php:        $lessonid = $this->get_in_int_val("lessonid",0);
tea_manage.php:        $course_name = $this->get_in_str_val("course_name","");
tea_manage.php:        $lesson_intro1= $this->get_in_str_val("lesson_intro1","");
tea_manage.php:        $lesson_intro2= $this->get_in_str_val("lesson_intro2","");
tea_manage.php:        $this->t_course_order->field_update_list($courseid,["course_name" => $course_name]);
tea_manage.php:        $this->t_lesson_info->field_update_list($lessonid,["lesson_intro" => $lesson_intro]);
tea_manage.php:        $lessonid=$this->get_in_int_val('lessonid',0);
tea_manage.php:        $ret_info=$this->t_lesson_info->get_teacherid($lessonid);
tea_manage.php:        $lessonid=$this->get_in_int_val('lessonid',0);
tea_manage.php:        $ret=$this->t_lesson_info->get_stu_performance($lessonid);
tea_manage.php:        $lessonid=$this->get_in_int_val('lessonid',0);
tea_manage.php:        $ret=$this->t_lesson_info->get_stu_performance($lessonid);
tea_manage.php:        $lessonid                       = $this->get_in_int_val('lessonid',0);
tea_manage.php:        $ret_info['total_judgement']    = $this->get_in_str_val('total_judgement','');
tea_manage.php:        $ret_info['homework_situation'] = $this->get_in_str_val('homework_situation','');
tea_manage.php:        $ret_info['content_grasp']      = $this->get_in_str_val('content_grasp','');
tea_manage.php:        $ret_info['lesson_interact']    = $this->get_in_str_val('lesson_interact','');
tea_manage.php:        $ret_info['stu_comment']    = $this->get_in_str_val('stu_comment','');
tea_manage.php:        $point_name                     = $this->get_in_str_val('point_name','');
tea_manage.php:        $point_stu_desc                 = $this->get_in_str_val('point_stu_desc','');
tea_manage.php:        $point_name2                    = $this->get_in_str_val('point_name2','');
tea_manage.php:        $point_stu_desc2                = $this->get_in_str_val('point_stu_desc2','');
tea_manage.php:        $ret_info = $this->t_lesson_info->field_update_list($lessonid,array('stu_performance'=>$stu_performance));
tea_manage.php:        $lessonid   = $this->get_in_int_val('lessonid',0);
tea_manage.php:        $tea_money  = $this->get_in_int_val('tea_money',0);
tea_manage.php:        $ret_info=$this->t_lesson_info->field_update_list($lessonid,array('tea_price'=>$tea_money));
tea_manage.php:        $lessonid = $this->get_in_int_val('lessonid',0);
tea_manage.php:        $ret_info = $this->t_lesson_info->get_lesson_name_and_intro($lessonid);
tea_manage.php:        $lessonid      = $this->get_in_int_val('lessonid',0);
tea_manage.php:        $lesson_name   = $this->get_in_str_val('lesson_name','');
tea_manage.php:        $lesson_intro  = $this->get_in_str_val('lesson_intro','');
tea_manage.php:        $lesson_intro2 = $this->get_in_str_val('lesson_intro2','');
tea_manage.php:        $ret_info = $this->t_lesson_info->field_update_list($lessonid,[
tea_manage.php:        $tea_nick              = $this->get_in_str_val('tea_nick',"");
tea_manage.php:        $gender                = $this->get_in_int_val('gender', -1);
tea_manage.php:        $birth                 = $this->get_in_str_val('birth',"");
tea_manage.php:        $phone                 = $this->get_in_str_val('phone',"");
tea_manage.php:        $phone_spare           = $this->get_in_int_val('phone_spare',"");
tea_manage.php:        $email                 = $this->get_in_str_val('email',"");
tea_manage.php:        $level                 = $this->get_in_int_val('level',-1);
tea_manage.php:        $work_year             = $this->get_in_int_val('work_year', 0);
tea_manage.php:        $subject               = $this->get_in_int_val('subject',-1);
tea_manage.php:        $address               = $this->get_in_str_val('address',"");
tea_manage.php:        $school                = $this->get_in_str_val('school',"");
tea_manage.php:        $identity              = $this->get_in_int_val('identity',-1);
tea_manage.php:        $teacher_type          = $this->get_in_int_val('teacher_type',-1);
tea_manage.php:        $grade_part_ex         = $this->get_in_int_val('grade_part_ex',-1);
tea_manage.php:        $interview_access      = $this->get_in_str_val('interview_access',"");
tea_manage.php:        $teacher_money_type    = $this->get_in_int_val('teacher_money_type',-1);
tea_manage.php:        $trial_lecture_is_pass = $this->get_in_int_val('trial_lecture_is_pass',0);
tea_manage.php:        $face                  = $this->get_in_str_val('face',"");
tea_manage.php:        $textbook              = $this->get_in_str_val('textbook',"");
tea_manage.php:        $resume_url            = $this->get_in_str_val('resume_url',"");
tea_manage.php:        $create_time           = $this->get_in_int_val("create_time",time());
tea_manage.php:        $dialect_note          = $this->get_in_str_val("dialect_note","");
tea_manage.php:        $textbook_type         = $this->get_in_int_val("textbook_type",0);
tea_manage.php:        $interview_score       = $this->get_in_int_val("interview_score",0);
tea_manage.php:        $sshd_good             = $this->get_in_str_val("sshd_good","");
tea_manage.php:        $sshd_bad              = $this->get_in_str_val("sshd_bad","");
tea_manage.php:        $ktfw_good             = $this->get_in_str_val("ktfw_good","");
tea_manage.php:        $ktfw_bad              = $this->get_in_str_val("ktfw_bad","");
tea_manage.php:        $skgf_good             = $this->get_in_str_val("skgf_good","");
tea_manage.php:        $skgf_bad              = $this->get_in_str_val("skgf_bad","");
tea_manage.php:        $jsfg_good             = $this->get_in_str_val("jsfg_good","");
tea_manage.php:        $jsfg_bad              = $this->get_in_str_val("jsfg_bad","");
tea_manage.php:        $record_info           = $this->get_in_str_val("record_info","");
tea_manage.php:        $grade_start           = $this->get_in_int_val("grade_start",0);
tea_manage.php:        $grade_end             = $this->get_in_int_val("grade_end",0);
tea_manage.php:        $not_grade             = $this->get_in_str_val("not_grade","");
tea_manage.php:        $teacher_ref_type      = $this->get_in_int_val('teacher_ref_type',-1);
tea_manage.php:        $wx_use_flag           = $this->get_in_int_val("wx_use_flag",1);
tea_manage.php:        $bankcard              = $this->get_in_str_val("bankcard");
tea_manage.php:        $bank_address          = $this->get_in_str_val("bank_address");
tea_manage.php:        $bank_account          = $this->get_in_str_val("bank_account");
tea_manage.php:        $train_through_new     = $this->get_in_int_val("train_through_new");
tea_manage.php:        $account_role          = $this->get_account_role();
tea_manage.php:        $acc                   = $this->get_account();
tea_manage.php:        $add_type = $this->get_in_int_val("add_type");
tea_manage.php:        if ($teacher_money_type==-1) {
tea_manage.php:            return $this->output_err("工资分类没选!") ;
tea_manage.php:            \App\Helper\Utils::logger("error teacher type:".$phone." account:".$this->get_account());
tea_manage.php:            return $this->output_err("此分类无法新加老师！");
tea_manage.php:        if ($level==-1) {
tea_manage.php:            return $this->output_err("等级没选!") ;
tea_manage.php:        if ($identity==-1) {
tea_manage.php:            return $this->output_err("请选择老师身份!") ;
tea_manage.php:            return $this->output_err("电话号码不对") ;
tea_manage.php:            return $this->output_err("年级范围出错");
tea_manage.php:        $ret_num = $this->t_phone_to_user->is_phone_valid($phone, E\Erole::V_TEACHER);
tea_manage.php:            return $this->output_err("此号码已经存在") ;
tea_manage.php:        $this->t_user_info->start_transaction();
tea_manage.php:        $this->t_user_info->row_insert([
tea_manage.php:        $teacherid = $this->t_user_info->get_last_insertid();
tea_manage.php:            $this->t_user_info->rollback();
tea_manage.php:            return $this->output_err("生成用户出错");
tea_manage.php:        $ret = $this->t_phone_to_user->add($phone,E\Erole::V_TEACHER,$teacherid) ;
tea_manage.php:            $this->t_user_info->rollback();
tea_manage.php:            return $this->output_err("生成用户出错:电话->userid") ;
tea_manage.php:        $reference      = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
tea_manage.php:        $reference_info = $this->t_teacher_info->get_teacher_info_by_phone($reference);
tea_manage.php:        $this->t_teacher_info->add_teacher_info_to_ejabberd($teacherid,$md5_passwd);
tea_manage.php:        $ret = $this->t_teacher_info->add_new_teacher($tea_nick,$gender,$birth,$work_year,$phone,
tea_manage.php:            $this->t_user_info->rollback();
tea_manage.php:            return $this->output_err("生成老师出错");
tea_manage.php:            $this->t_user_info->commit();
tea_manage.php:            $this->add_teacher_label($sshd_good,$sshd_bad,$ktfw_good,$ktfw_bad,$skgf_good,$skgf_bad,$jsfg_good,$jsfg_bad,$teacherid,3,0,$subject);
tea_manage.php:            $this->t_teacher_record_list->row_insert([
tea_manage.php:                "acc"         => $this->get_account(),
tea_manage.php:        $ret = $this->t_teacher_freetime_for_week->row_insert([
tea_manage.php:            return $this->output_err("老师生成成功，但创建每周空闲时间失败！");
tea_manage.php:                       ."添加时间:".date("Y-m-d H:i:s",time());
tea_manage.php:        return $this->output_succ(["teacherid" => $teacherid]);
tea_manage.php:        $phone = $this->get_in_int_val('phone',"");
tea_manage.php:        $res = $this->t_teacher_info->get_teacher_info_by_phone($phone);
tea_manage.php:        return $this->output_succ(["res"=>$res]);
tea_manage.php:        $from_lessonid = $this->get_in_int_val("from_lessonid");
tea_manage.php:        $lesson_start  = $this->get_in_str_val('lesson_start', date('Y-m-d', time(NULL)-86400*7));
tea_manage.php:        $lesson_num    = $this->get_in_int_val("lesson_num",1);
tea_manage.php:            return $this->output_err("源课程不存在!");
tea_manage.php:        $from_lesson = $this->t_lesson_info->get_all_lesson_info($from_lessonid);
tea_manage.php:        $time_difference = $from_lesson['lesson_end']-$from_lesson['lesson_start'];
tea_manage.php:        $ret=$this->t_course_order->row_insert([
tea_manage.php:        $courseid=$this->t_course_order->get_last_courseid();
tea_manage.php:            $this->t_lesson_info->row_insert([
tea_manage.php:        return $this->output_succ();
tea_manage.php:        $this->set_in_value("assistantid",-1);
tea_manage.php:        $this->set_in_value("subject",11);
tea_manage.php:        $this->set_in_value("lesson_type",2);
tea_manage.php:        return $this->course_plan();
tea_manage.php:        list($start_time,$end_time)=$this->get_in_date_range(0,3);
tea_manage.php:        $page_num    = $this->get_in_page_num();
tea_manage.php:        $assistantid = $this->t_assistant_info->get_assistantid($this->get_account());
tea_manage.php:            $assistantid = -1;
tea_manage.php:        $assistantid = $this->get_in_int_val("assistantid",$assistantid);
tea_manage.php:        $subject = $this->get_in_int_val("subject",-1);
tea_manage.php:        $lesson_type = $this->get_in_int_val("lesson_type",-1);
tea_manage.php:        $userid   = $this->get_in_int_val("studentid",-1);
tea_manage.php:        $ret_info = $this->t_lesson_info->get_lesson_info_ass($page_num,$start_time,$end_time,$assistantid,$userid,$subject,$lesson_type);
tea_manage.php:                $item['teacher_nick'] = $this->t_teacher_info->get_realname($item['teacherid']);
tea_manage.php:            $item['teacher_nick'] = $this->t_teacher_info->get_nick($item['teacherid']);
tea_manage.php:            $item['user_nick'] = $this->t_student_info->get_nick($item['userid']);
tea_manage.php:            $item['level'] = $this->t_teacher_info->get_level($item['teacherid']);
tea_manage.php:            $item['teacher_money_type'] = $this->t_teacher_info->get_teacher_money_type($item['teacherid']);
tea_manage.php:            $item['lesson_start_str' ] = date('Y-m-d H:i:s',$item['lesson_start']);
tea_manage.php:            $item['lesson_end_str' ] = date('Y-m-d H:i:s',$item['lesson_end']);
tea_manage.php:                $item['lesson_cancel_reason_next_lesson_time_str' ] = date('Y-m-d H:i',$item['lesson_cancel_reason_next_lesson_time']);
tea_manage.php:            $item['lesson_diff' ] = $item['lesson_end']-$item['lesson_start'];
tea_manage.php:        return $this->pageView(__METHOD__,$ret_info);
tea_manage.php:        $adminid =$this->get_account_id();
tea_manage.php:        $acc= $this->get_account();
tea_manage.php:        $assistantid = $this->t_assistant_info->get_assistantid($this->get_account());
tea_manage.php:            $assistantid=-1;
tea_manage.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],2);
tea_manage.php:        $is_done      = $this->get_in_int_val('is_done',-1);
tea_manage.php:        $assistantid  = $this->get_in_int_val('assistantid',$assistantid);
tea_manage.php:        $userid       = $this->get_in_int_val('userid',-1);
tea_manage.php:        $student_type = $this->get_in_int_val("student_type",0);
tea_manage.php:        $list = $this->t_student_info->get_stu_ass_all($assistantid,$userid,$student_type);
tea_manage.php:        $ret_lesson_info = $this->t_lesson_info->get_lesson_info_ass_all_new($start_time,$end_time,$ass_userid);
tea_manage.php:        $lesson_time_info = $this->t_lesson_info->get_lesson_info_time_new($start_time,$end_time,$lesson_userid);
tea_manage.php:        $ret_check_stu = $this->t_summer_week_regular_course->check_is_clash_stu_new($lesson_userid,$plan_lessonid,$start_time);
tea_manage.php:            $ret_lesson_info[$key]['count_diff'] = $val['lesson_total']-@$arr_lesson_count[$key];
tea_manage.php:        $res_regular_info = $this->t_summer_week_regular_course->get_stu_count_total_new($ass_userid);
tea_manage.php:        $regular_lesson_info =$this->t_summer_week_regular_course->get_lesson_info_new($regular_userid);
tea_manage.php:        return $this->pageView(__METHOD__,$list,["regular_count_all"=>$regular_count_all,"plan_count_all"=>$plan_count_all]);
tea_manage.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],2);
tea_manage.php:        $is_done      = $this->get_in_int_val('is_done',-1);
tea_manage.php:        $assistantid  = $this->get_in_int_val('assistantid',-1);
tea_manage.php:        $userid       = $this->get_in_int_val('userid',-1);
tea_manage.php:        $student_type = $this->get_in_int_val("student_type",0);
tea_manage.php:        $list = $this->t_student_info->get_stu_ass_all($assistantid,$userid,$student_type);
tea_manage.php:        $ret_lesson_info = $this->t_lesson_info->get_lesson_info_ass_all_new($start_time,$end_time,$ass_userid);
tea_manage.php:        $lesson_time_info = $this->t_lesson_info->get_lesson_info_time_new($start_time,$end_time,$lesson_userid);
tea_manage.php:        $ret_check_stu = $this->t_week_regular_course->check_is_clash_stu_new($lesson_userid,$plan_lessonid,$start_time);
tea_manage.php:            $ret_lesson_info[$key]['count_diff'] = $val['lesson_total']-@$arr_lesson_count[$key];
tea_manage.php:        $res_regular_info = $this->t_week_regular_course->get_stu_count_total_new($ass_userid);
tea_manage.php:        $regular_lesson_info =$this->t_week_regular_course->get_lesson_info_new($regular_userid);
tea_manage.php:        return $this->pageView(__METHOD__,$list,["regular_count_all"=>$regular_count_all,"plan_count_all"=>$plan_count_all]);
tea_manage.php:        $assistantid = $this->t_assistant_info->get_assistantid($this->get_account());
tea_manage.php:        $this->set_in_value("assistantid",$assistantid );
tea_manage.php:        return $this->course_plan_stu();
tea_manage.php:        $teacherid    = $this->get_in_str_val('teacherid');
tea_manage.php:        $courseid     = $this->get_in_int_val('courseid');
tea_manage.php:        $userid       = $this->get_in_int_val('userid');
tea_manage.php:        $lesson_count = $this->get_in_int_val('lesson_count');
tea_manage.php:        $lesson_start = $this->get_in_str_val('lesson_start');
tea_manage.php:        $lesson_end   = $this->get_in_str_val('lesson_end');
tea_manage.php:            return $this->output_err("请填写完整!");
tea_manage.php:        $item = $this->t_course_order->field_get_list($courseid,"*");
tea_manage.php:            $grade = $this->t_student_info->get_grade($userid);
tea_manage.php:            return $this->output_err("学生课程年级出错！请在课程包列表中修改！");
tea_manage.php:        $teacher_info = $this->t_teacher_info->field_get_list($item["teacherid"],"teacher_money_type,level");
tea_manage.php:        $lessonid = $this->t_lesson_info->add_lesson(
tea_manage.php:            $this->t_homework_info->add(
tea_manage.php:        $this->t_lesson_info->reset_lesson_list($courseid);
tea_manage.php:        $db_teacherid = $this->t_lesson_info->get_teacherid($lessonid);
tea_manage.php:        $lesson_type  = $this->t_lesson_info->get_lesson_type($lessonid);
tea_manage.php:        $status       = $this->t_lesson_info->get_lesson_status($lessonid);
tea_manage.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"*");
tea_manage.php:            $this->t_lesson_info->field_update_list($lessonid,[
tea_manage.php:            $this->t_homework_info->field_update_list($lessonid,[
tea_manage.php:        return $this->output_succ("");
tea_manage.php:        $courseid   = $this->get_in_int_val("courseid");
tea_manage.php:        $course_info = $this->t_course_order->field_get_list($courseid,"teacherid,default_lesson_count");
tea_manage.php:        $userid    = $this->get_in_userid();
tea_manage.php:        $page_num     = $this->get_in_page_num();
tea_manage.php:        $ret_info   = $this->t_course_order->get_all_list($page_num,$userid);
tea_manage.php:            $item['teacher_nick'] = $this->t_teacher_info->get_nick($item['teacherid']);
tea_manage.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
tea_manage.php:        $userid    = $this->get_in_userid();
tea_manage.php:        $page_num     = $this->get_in_page_num();
tea_manage.php:        $ret_info   = $this->t_course_order->get_all_list_new($page_num,$userid);
tea_manage.php:            $item['teacher_nick'] = $this->t_teacher_info->get_nick($item['teacherid']);
tea_manage.php:        // $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
tea_manage.php:        $lessonid = $this->get_in_int_val("lessonid");
tea_manage.php:        $ret_info = $this->t_user_video_info->get_info_by_lessonid($lessonid);
tea_manage.php:        return $this->train_lesson_list();
tea_manage.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
tea_manage.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
tea_manage.php:        $lesson_status   = $this->get_in_int_val("lesson_status",-1);
tea_manage.php:        $lesson_type     = $this->get_in_int_val("lesson_type",1100);
tea_manage.php:        $lessonid        = $this->get_in_int_val("lessonid",-1);
tea_manage.php:        $lesson_sub_type = $this->get_in_int_val("lesson_sub_type",-1);
tea_manage.php:        $train_type      = $this->get_in_int_val("train_type",-1);
tea_manage.php:        $acc             = $this->get_account();
tea_manage.php:        $page_num        = $this->get_in_page_num();
tea_manage.php:        $this->t_lesson_info->switch_tongji_database();
tea_manage.php:        $ret_info = $this->t_lesson_info->get_train_lesson(
tea_manage.php:            $server_map = $this->gen_server_map($ret_info['list']);
tea_manage.php:        return $this->pageView(__METHOD__,$ret_info,[
tea_manage.php:        $lessonid        = $this->get_in_int_val("lessonid");
tea_manage.php:        $lesson_name     = $this->get_in_str_val("lesson_name");
tea_manage.php:        $lesson_start    = $this->get_in_str_val("lesson_start");
tea_manage.php:        $lesson_end      = $this->get_in_str_val("lesson_end");
tea_manage.php:        $teacherid       = $this->get_in_int_val("teacherid");
tea_manage.php:        $subject         = $this->get_in_int_val("subject");
tea_manage.php:        $grade           = $this->get_in_int_val("grade");
tea_manage.php:        $type            = $this->get_in_str_val("type","add");
tea_manage.php:        $lesson_sub_type = $this->get_in_int_val("lesson_sub_type");
tea_manage.php:        $train_type      = $this->get_in_int_val("train_type");
tea_manage.php:            return $this->output_err("请选择上课老师!");
tea_manage.php:                return $this->output_err("数据不完整，请完善课程数据!");
tea_manage.php:        $end_time   = strtotime((date("Y-m-d",$start_time).$lesson_end));
tea_manage.php:            $courseid = $this->t_course_order->add_open_course($teacherid,$lesson_name,$grade,$subject,1100);
tea_manage.php:            $ret = $this->t_lesson_info->row_insert([
tea_manage.php:            $old = $this->t_lesson_info->get_lesson_info($lessonid);
tea_manage.php:                return $this->output_err("课程已结束，无法更改课程时间！");
tea_manage.php:            $ret = $this->t_lesson_info->field_update_list($lessonid,[
tea_manage.php:            return $this->output_succ();
tea_manage.php:            return $this->output_err("操作出错，请重试！");
tea_manage.php:        $lessonid = $this->get_in_int_val("lessonid");
tea_manage.php:        $lesson_info = $this->t_lesson_info->get_lesson_info($lessonid);
tea_manage.php:            return $this->output_err();
tea_manage.php:            return $this->output_succ(["data"=>$lesson_info]);
tea_manage.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
tea_manage.php:        $ret_info = $this->t_train_lesson_user->get_not_through_user($start_time,$end_time);
tea_manage.php:        return $this->pageView(__METHOD__,$ret_info);
tea_manage.php:        $type           = $this->get_in_int_val("type");
tea_manage.php:        $subject        = trim($this->get_in_str_val("subject"),",");
tea_manage.php:        $grade_part_ex  = trim($this->get_in_str_val("grade_part_ex"),",");
tea_manage.php:        $create_day     = $this->get_in_str_val("create_day");
tea_manage.php:        $min_per        = $this->get_in_str_val("min_per");
tea_manage.php:        $max_per        = $this->get_in_str_val("max_per");
tea_manage.php:        $lessonid       = $this->get_in_int_val("lessonid");
tea_manage.php:        $userid         = $this->get_in_int_val("userid");
tea_manage.php:        $is_test_user   = $this->get_in_int_val("is_test_user");
tea_manage.php:        $has_limit      = $this->get_in_int_val("has_limit",-1);
tea_manage.php:        $is_freeze      = $this->get_in_int_val("is_freeze",-1);
tea_manage.php:        $train_lessonid = $this->get_in_int_val("train_lessonid",-1);
tea_manage.php:        $lesson_teacher = $this->t_lesson_info->get_teacherid($lessonid);
tea_manage.php:            return $this->output_err("该用户是本堂课的老师！无法添加！");
tea_manage.php:            return $this->output_err("课程id出错！");
tea_manage.php:            $check_user = $this->t_train_lesson_user->check_user_exists($lessonid,$userid);
tea_manage.php:                return $this->output_err("用户在此培训课程中！");
tea_manage.php:                    $train_teacher_list = $this->t_train_lesson_user->get_train_through_teacher_list($train_lessonid,$lessonid);
tea_manage.php:                    $per_teacher_list = $this->t_teacher_info->get_need_join_train_teacher_list(
tea_manage.php:                        2,$lessonid,"","",0,$min_per,$max_per,0,-1,-1
tea_manage.php:                    $create_time = strtotime("-".$create_day."day",time());
tea_manage.php:                $teacherid_list = $this->t_teacher_info->get_need_join_train_teacher_list(
tea_manage.php:        return $this->output_succ();
tea_manage.php:        $lessonid = $this->get_in_int_val("lessonid");
tea_manage.php:        $type     = $this->get_in_int_val("type");
tea_manage.php:        $user_list = $this->t_train_lesson_user->get_train_lesson_user($lessonid,$type);
tea_manage.php:        return $this->output_succ(["data"=>$user_list]);
tea_manage.php:        $lessonid = $this->get_in_int_val("lessonid");
tea_manage.php:        $userid   = $this->get_in_int_val("userid");
tea_manage.php:        $ret=$this->t_train_lesson_user->row_delete_2($lessonid,$userid);
tea_manage.php:        return $this->output_succ();
tea_manage.php:        $lessonid     = $this->get_in_int_val("lessonid");
tea_manage.php:        $enable_video = $this->get_in_int_val("enable_video");
tea_manage.php:        $ret=$this->t_lesson_info->field_update_list($lessonid,[
tea_manage.php:        return $this->output_succ();
tea_manage.php:        $lessonid   = $this->get_in_int_val("lessonid");
tea_manage.php:        $send_email = $this->get_in_str_val("stu_email");
tea_manage.php:            return $this->output_err("lessonid 为空!");
tea_manage.php:        $html_header="<div style=\"text-indent:2em;margin-\">家长您好!</div><br>"
tea_manage.php:                    ."<div style=\"text-indent:2em\">以下是您孩子本次课的课程讲义和课后作业,请及时下载</div><br>"
tea_manage.php:                    ."<div style=\"text-indent:2em\">本邮件由\"上海升学帮\"发送,若想获得更加便捷和专业的服务</div><br>"
tea_manage.php:                    ."<div style=\"text-indent:2em\">请务必下载\"上海升学帮\"关注孩子点滴成长!</div><br>"
tea_manage.php:                    ."<div style=\"color:red;text-indent:2em\">高效的学习,从课后巩固和完成作业开始</div></br>";
tea_manage.php:        $html_footer="<div style=\"color:#545454;text-indent:2em;margin-top:-3px\">单击文字即可下载</div><br> "
tea_manage.php:                    ."<div style=\"color:#545454;text-indent:2em\">(若下载中遇到任何问题,"
tea_manage.php:                    ."<div style=\"margin-top:2px;font-weight:bold;text-indent:2em\">理优家长端\"上海升学帮\"功能介绍</div><br>"
tea_manage.php:                    ."<div style=\"text-indent:2em\">通过下载并使用\"上海升学帮\"可以全过程透明化的进行教学反馈,"
tea_manage.php:                    ."<div style=\"text-indent:2em\">无论身处何地,都能及时准确地了解您孩子的辅导情况!</div><br>"
tea_manage.php:                    ."<div style=\"text-indent:2em\">家长端APP下载"
tea_manage.php:                    ."<span style=\"color:#545454;ext-indent:2em\" >(请用手机的二维码扫描工具扫描下载)</span></div><br>"
tea_manage.php:        $lesson_info = $this->t_lesson_info->get_lesson_info_for_send_email_by_lessonid($lessonid);
tea_manage.php:                $lesson_start = date('Y-m-d H:i',$item['lesson_start']);
tea_manage.php:                      ." style=\"color:blue;text-indent:2em;display:block;margin-top:-3px\" >作业下载</a><br>";
tea_manage.php:                            ." style=\"color:blue;text-indent:2em;display:block\">讲义下载</a><br>";
tea_manage.php:                $html_title = $lesson_start."-".$lesson_end."课堂讲义";
tea_manage.php:                $this->t_lesson_info->field_update_list($item['lessonid'],["lesson_end_todo_flag"=>1]);
tea_manage.php:            return $this->output_err("课程信息出错!");
tea_manage.php:        return $this->output_succ();
tea_manage.php:        $lessonid = $this->get_in_int_val("lessonid");
tea_manage.php:        $data     = $this->t_test_lesson_subject->get_stu_request($lessonid);
tea_manage.php:            $has_paper = "\n有试卷\n<div class='btn btn-primary download_paper' data-paper='"
tea_manage.php:        return $this->output_succ(["data"=>$info]);
tea_manage.php:        $date                = $this->get_in_str_val('date',date('Y-m-d', time(NULL)));
tea_manage.php:        $st_application_nick = $this->get_in_str_val('st_application_nick',"");
tea_manage.php:        $require_adminid     = $this->get_in_int_val('require_adminid', -1 );
tea_manage.php:        $userid              = $this->get_in_userid(-1);
tea_manage.php:        $teacherid           = $this->get_in_teacherid(-1);
tea_manage.php:        $run_flag            = $this->get_in_int_val("run_flag",1);
tea_manage.php:        $assistantid         = $this->get_in_assistantid(-1);
tea_manage.php:        $lessonid            = $this->get_in_int_val('lessonid');
tea_manage.php:        $ret_info = $this->t_lesson_info->get_lesson_info_by_lessonid($lessonid);
tea_manage.php:        $adminid          = $this->get_account_id();
tea_manage.php:        $self_groupid     = $this->t_admin_group_user->get_groupid_by_adminid(2 , $adminid );
tea_manage.php:        $get_self_adminid = $this->t_admin_group_name->get_master_adminid($self_groupid);
tea_manage.php:            $server_map = $this->gen_server_map($ret_info['list']);
tea_manage.php:        $info=$this->t_lesson_info-> get_info_for_monitor($lessonid);
tea_manage.php:            $item['lesson_time'] = date('H:i',$item['lesson_start'])."-".date('H:i',$item['lesson_end']);
tea_manage.php:            $this->cache_set_item_assistant_nick($item);
tea_manage.php:            $this->cache_set_item_teacher_nick($item);
tea_manage.php:            $this->cache_set_item_student_nick($item);
tea_manage.php:        $ret_arr_log=$this->t_lesson_opt_log->get_lesson_log_by_pool($lessonid,$userid,$server_type
tea_manage.php:        $log_num_str = $this->t_lesson_info->get_lesson_conditions_by_lessonid($lessonid);
tea_manage.php:        return $this->pageView(__METHOD__,$ret_info,["self_groupid"=>$self_groupid,'stu_info'=>$info,"is_group_leader_flag"=>$is_group_leader_flag,'log_lists'=>$ret_list_log]);
tea_manage.php:        $type        = $this->get_in_str_val("type","normal_lesson");
tea_manage.php:        $lesson_name = $this->get_in_str_val("lesson_name","");
tea_manage.php:        $page_num    = $this->get_in_page_num();
tea_manage.php:        $this->switch_tongji_database();
tea_manage.php:            $ret_list = $this->t_lesson_info_b2->get_train_lesson_list_for_select($page_num,$lesson_name);
tea_manage.php:        return $this->output_ajax_table($ret_list);
tea_manage.php:        list($start_time,$end_time) = $this->get_in_date_range(-7,7);
tea_manage.php:        $status        = $this->get_in_int_val("status",-1);
tea_manage.php:        $lesson_status = $this->get_in_int_val("lesson_status",2);
tea_manage.php:        $grade         = $this->get_in_int_val("grade",-1);
tea_manage.php:        $subject       = $this->get_in_int_val("subject",-1);
tea_manage.php:        $teacherid     = $this->get_in_int_val("teacherid",-1);
tea_manage.php:        $is_test       = $this->get_in_int_val("is_test",0);
tea_manage.php:        $page_num      = $this->get_in_page_num();
tea_manage.php:        $acc           = $this->get_account();
tea_manage.php:        $ret_info = $this->t_teacher_record_list->get_trial_train_lesson_list(
tea_manage.php:            $from_lesson_info = $this->t_test_lesson_subject->get_from_lesson_info($from_lessonid);
tea_manage.php:        return $this->pageView(__METHOD__,$ret_info,[
tea_manage.php:        $id  = $this->get_in_int_val("id");
tea_manage.php:        $acc = $this->get_account();
tea_manage.php:        $old_acc = $this->t_teacher_record_list->get_acc($id);
tea_manage.php:            $ret = $this->t_teacher_record_list->field_update_list($id,[
tea_manage.php:                return $this->output_err("更新负责人失败！请重试！");
tea_manage.php:            return $this->output_err("本视频已被其他人观看！");
tea_manage.php:        return $this->output_succ();
tea_manage.php:        $lessonid = $this->get_in_int_val('lessonid');
tea_manage.php:        $tea_cw_pic_str = $this->t_lesson_info_b2->get_tea_imgs_show($lessonid);
tea_manage.php:        // return $this->pageView(__METHOD__,$ret_info);
tea_manage.php:        return $this->train_lecture_lesson();   
tea_manage.php:        list($start_time,$end_time,$opt_date_str) = $this->get_in_date_range(0,0,1,[
tea_manage.php:        $lesson_status    = $this->get_in_int_val("lesson_status",-1);
tea_manage.php:        $subject          = $this->get_in_int_val("subject",-1);
tea_manage.php:        $grade            = $this->get_in_int_val("grade",-1);
tea_manage.php:        $check_status     = $this->get_in_int_val("check_status",-2);
tea_manage.php:        $train_teacherid  = $this->get_in_int_val("train_teacherid",-1);
tea_manage.php:        $page_num         = $this->get_in_page_num();
tea_manage.php:        $adminid          = $this->get_account_id();
tea_manage.php:        $acc              = $this->get_account();
tea_manage.php:        $lessonid         = $this->get_in_int_val("lessonid",-1);
tea_manage.php:        $res_teacherid    = $this->get_in_int_val("res_teacherid",-1);
tea_manage.php:        $have_wx          = $this->get_in_int_val("have_wx",-1);
tea_manage.php:        $lecture_status   = $this->get_in_int_val("lecture_status",-1);
tea_manage.php:        $train_email_flag = $this->get_in_int_val("train_email_flag",-1);
tea_manage.php:        $this->switch_tongji_database();
tea_manage.php:        $teacherid = -1;
tea_manage.php:            $teacher_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
tea_manage.php:        $ret_info = $this->t_lesson_info_b2->train_lecture_lesson(
tea_manage.php:            if($val['trial_train_status']==-1){
tea_manage.php:            $val['tea_nick'] = $this->cache_get_teacher_nick($val['l_teacherid']);
tea_manage.php:            if($val["lecture_status_ex"]==-2){
tea_manage.php:            $val["add_time_str"] = date("Y-m-d H:i:s",$val["add_time"]);
tea_manage.php:        $all_num = $this->t_lesson_info_b2->train_lecture_lesson_count(
tea_manage.php:        $wx_num = $this->t_lesson_info_b2->train_lecture_lesson_count(
tea_manage.php:        $email_num = $this->t_lesson_info_b2->train_lecture_lesson_count(
tea_manage.php:            $start_time,$end_time,$opt_date_str,-1,1
tea_manage.php:        return $this->pageView(__METHOD__,$ret_info,[
tea_manage.php:        $teacherid   = $this->get_in_int_val("teacherid");
tea_manage.php:        $lessonid    = $this->get_in_int_val("lessonid");
tea_manage.php:        $phone       = $this->get_in_str_val("phone");
tea_manage.php:        $nick        = $this->get_in_str_val("nick");
tea_manage.php:        $account     = $this->get_in_str_val("account");
tea_manage.php:        $flag        = $this->get_in_int_val("flag");
tea_manage.php:        $record_info = $this->get_in_str_val("record_info");
tea_manage.php:        $grade       = $this->get_in_int_val("grade");
tea_manage.php:        $subject     = $this->get_in_int_val("subject");
tea_manage.php:        $identity    = $this->get_in_int_val("identity");
tea_manage.php:        $acc         = $this->get_account();
tea_manage.php:        $teacher_info = $this->t_teacher_info->get_teacher_info_by_phone($phone);
tea_manage.php:        $this->t_teacher_lecture_appointment_info->reset_teacher_identity_by_phone($phone,$identity);
tea_manage.php:                $teacherid = $this->add_teacher_common($teacher_info);
tea_manage.php:                    return $this->output_err("老师添加失败！");
tea_manage.php:                $this->set_teacher_grade($teacher_info,$check_info);
tea_manage.php:                $this->check_teacher_lecture_is_pass($teacher_info);
tea_manage.php:        $wx_openid = $this->t_teacher_info->get_wx_openid_by_phone($phone);
tea_manage.php:             * 模板ID   : rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o
tea_manage.php:            $template_id      = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
tea_manage.php:                $data['keyword3'] = date("Y-m-d H:i",time());
tea_manage.php:                $data['keyword3'] = date("Y-m-d H:i",time());
tea_manage.php:        $record_id = $this->t_teacher_record_list->check_have_record($teacherid,10,$lessonid);
tea_manage.php:            $ret = $this->t_teacher_record_list->field_update_list($record_id,[
tea_manage.php:            $ret = $this->t_teacher_record_list->row_insert([
tea_manage.php:            return $this->output_err("添加反馈失败！");
tea_manage.php:        return $this->output_succ();
tea_manage.php:        $teacherid   = $this->get_in_int_val("teacherid");
tea_manage.php:        $part_remarks = $this->get_in_str_val("part_remarks");
tea_manage.php:        $ret = $this->t_teacher_info->field_update_list($teacherid,[
tea_manage.php:            return $this->output_err("更新失败！请重试！");
tea_manage.php:        return $this->output_succ();
tea_manage.php:        $lessonid               = $this->get_in_int_val("lessonid");
tea_manage.php:        $stu_lesson_content     = $this->get_in_str_val("stu_lesson_content");
tea_manage.php:        $stu_lesson_status      = $this->get_in_str_val("stu_lesson_status");
tea_manage.php:        $stu_study_status       = $this->get_in_str_val("stu_study_status");
tea_manage.php:        $stu_advantages         = trim($this->get_in_str_val("stu_advantages"),",");
tea_manage.php:        $stu_disadvantages      = trim($this->get_in_str_val("stu_disadvantages"),",");
tea_manage.php:        $stu_lesson_plan        = $this->get_in_str_val("stu_lesson_plan");
tea_manage.php:        $stu_teaching_direction = $this->get_in_str_val("stu_teaching_direction");
tea_manage.php:        $stu_advice             = $this->get_in_str_val("stu_advice");
tea_manage.php:        $require_id = $this->t_test_lesson_subject_sub_list->get_require_id($lessonid);
tea_manage.php:            $ret_info = $this->t_test_lesson_subject_require->field_update_list(
tea_manage.php:            $ret_info = $this->t_seller_student_info->field_update_list(
tea_manage.php:            $this->t_lesson_info->field_update_list($lessonid,[
TeaPower.php:    public function research_fulltime_teacher_lesson_plan_limit($teacherid,$userid,$lesson_count=0,$lesson_start=0,$lesson_type=-1){
TeaPower.php:        $admin_info   = $this->t_manager_info->get_account_role_by_teacherid($teacherid);
TeaPower.php:        $day          = intval(($lesson_start-$date_week["sdate"])/86400)+1;
TeaPower.php:        $normal_stu_num    = $this->t_course_order->get_tea_stu_num($teacherid);
TeaPower.php:        $normal_stu_list   = $this->t_course_order->get_tea_userid_detail_list($teacherid);
TeaPower.php:        $day_start         = strtotime(date("Y-m-d",$lesson_start));
TeaPower.php:        $day_end           = strtotime(date("Y-m-d",$lesson_start+86400));
TeaPower.php:        $lesson_count_ex   = ($this->t_lesson_info->get_lesson_count_all_by_teacherid_new($teacherid,$day_start,$day_end))/100;
TeaPower.php:        $lesson_count_week = ($this->t_lesson_info->get_lesson_count_all_by_teacherid_new($teacherid,$date_week["sdate"],$date_week["edate"]))/100;
TeaPower.php:        $saturday_lesson_num = $this->t_teacher_info->get_saturday_lesson_num($teacherid);
TeaPower.php:        $week_lesson_count   = $this->t_teacher_info->get_week_lesson_count($teacherid);
TeaPower.php:        $week_left = $saturday_lesson_num-$lesson_count_ex;
TeaPower.php:        $day_arr   = ["2017-04-02","2017-04-03","2017-04-04","2017-05-01","2017-05-29","2017-05-30","2017-05-28"];
TeaPower.php:        $lesson_start_date = date("Y-m-d",$lesson_start);
TeaPower.php:                   $month_start = strtotime(date("Y-m-01",$lesson_start));
TeaPower.php:                   $month_end = strtotime(date("Y-m-01",$month_start+35*86400));
TeaPower.php:                   $test_num = $this->t_lesson_info->get_test_lesson_num_by_teacherid($month_start,$month_end,$teacherid,$normal_stu_list);
TeaPower.php:                        return $this->output_err("该教研老师学生达上限,不能接试听课!");
TeaPower.php:                    return $this->output_err(
TeaPower.php:                            return $this->output_err("该教研老师周六剩余可排课时为".$week_left);
TeaPower.php:                            return $this->output_err("教研老师周二至周五只能18点以后排课");
TeaPower.php:            $create_time = $this->t_teacher_info->field_get_value($teacherid,"train_through_new_time");
TeaPower.php:                    $is_freeze = $this->t_teacher_info->get_is_freeze($teacherid);
TeaPower.php:                        return $this->output_err("该老师目前冻结排课");
TeaPower.php:                    $test_lesson_num = $this->t_lesson_info->get_limit_type_teacher_lesson_num(
TeaPower.php:                    $limit_type = $this->t_teacher_info->get_limit_plan_lesson_type($teacherid);
TeaPower.php:                        return $this->output_err("该全职老师新入职两周内一周限课".$limit_type."节,当前已排".$test_lesson_num."节");
TeaPower.php:        $ret = $this->t_teacher_label->row_insert([
TeaPower.php:        $teacher_label_list = $this->t_teacher_label->get_info_by_teacherid(-1,$tea_arr);
TeaPower.php:        // $ret = $this->t_admin_main_group_name->get_all_memeber_list(4,"小学科");
TeaPower.php:            $list = $this->t_admin_main_group_name->get_all_memeber_list(4,"文综组");
TeaPower.php:            $list = $this->t_admin_main_group_name->get_all_memeber_list(4,"数学组");
TeaPower.php:            $adminid= $this->t_admin_group_name->get_master_adminid_by_subject($subject);
TeaPower.php:            //$list = $this->t_admin_main_group_name->get_all_memeber_list(4,"小学科");
TeaPower.php:             $master_adminid = $this->t_admin_main_group_name->get_maste_admin_name(4,"文综组");
TeaPower.php:            $master_adminid = $this->t_admin_main_group_name->get_maste_admin_name(4,"数学组");
TeaPower.php:            $master_adminid = $this->t_admin_main_group_name->get_maste_admin_name(4,"小学科");
TeaPower.php:        $account_role = $this->t_manager_info->get_account_role($adminid);
TeaPower.php:        $account_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
TeaPower.php:        $master_adminid = $this->t_admin_main_group_name->get_master_adminid_list($account_role);
TeaPower.php:            $group_name  = $this->t_admin_main_group_name->get_group_name_by_master_adminid($adminid);
TeaPower.php:            $grade=-1;
TeaPower.php:                $grade=-1;
TeaPower.php:            $subject=-1;
TeaPower.php:            $grade=-1;
TeaPower.php:        $account_role = $this->t_manager_info->get_account_role($adminid);
TeaPower.php:        $account_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
TeaPower.php:        $master_adminid = $this->t_admin_main_group_name->get_master_adminid_list($account_role);
TeaPower.php:            $grade=-1;
TeaPower.php:                $grade=-1;
TeaPower.php:            $subject=-1;
TeaPower.php:            $grade=-1;
TeaPower.php:        $account_role = $this->t_manager_info->get_account_role($adminid);
TeaPower.php:        $account_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
TeaPower.php:                $master_adminid = $this->t_admin_main_group_name->get_master_adminid_list($account_role);
TeaPower.php:                    $group_name  = $this->t_admin_main_group_name->get_group_name_by_master_adminid($adminid);
TeaPower.php:        $acc = $this->t_manager_info->get_account($adminid);
TeaPower.php:        //$account_id = $this->get_account_id();
TeaPower.php:        $account_info = $this->t_manager_info->get_teacher_info_by_adminid($account_id);
TeaPower.php:            $tea_subject=-3;
TeaPower.php:            $arr_group=["小学科"=>"-2","数学组"=>2,"文综组"=>-5,"物理组"=>5];
TeaPower.php:            $master_adminid = $this->t_admin_main_group_name->get_master_adminid_list(4);
TeaPower.php:                $group_name= $this->t_admin_main_group_name->get_group_name_by_master_adminid($account_id);
TeaPower.php:        $subject_grade_arr=[["subject"=>"3","grade"=>200,"realname"=>"初中英语"],["subject"=>"1","grade"=>200,"realname"=>"初中语文"],["subject"=>"2","grade"=>300,"realname"=>"高中数学"],["subject"=>"-2","grade"=>"-1","realname"=>"综合学科"],["subject"=>"3","grade"=>100,"realname"=>"小学英语"],["subject"=>"1","grade"=>100,"realname"=>"小学语文"],["subject"=>"2","grade"=>200,"realname"=>"初中数学"],["subject"=>"3","grade"=>300,"realname"=>"高中英语"],["subject"=>"1","grade"=>300,"realname"=>"高中语文"],["subject"=>"2","grade"=>100,"realname"=>"小学数学"],["subject"=>"4","grade"=>"200","realname"=>"初中化学"],["subject"=>"4","grade"=>"300","realname"=>"高中化学"],["subject"=>"5","grade"=>"200","realname"=>"初中物理"],["subject"=>"5","grade"=>"300","realname"=>"高中物理"],["subject"=>"6","grade"=>"-1","realname"=>"生物"],["subject"=>"7","grade"=>"-1","realname"=>"政治"],["subject"=>"8","grade"=>"-1","realname"=>"历史"],["subject"=>"9","grade"=>"-1","realname"=>"地理"],["subject"=>"10","grade"=>"-1","realname"=>"科学"],["subject"=>"-1","grade"=>"100","realname"=>"小学"],["subject"=>"-1","grade"=>"200","realname"=>"初中"],["subject"=>"-1","grade"=>"300","realname"=>"高中"],["subject"=>"-1","grade"=>"101","realname"=>"小一"],["subject"=>"-1","grade"=>"102","realname"=>"小二"],["subject"=>"-1","grade"=>"103","realname"=>"小三"],["subject"=>"-1","grade"=>"104","realname"=>"小四"],["subject"=>"-1","grade"=>"105","realname"=>"小五"],["subject"=>"-1","grade"=>"106","realname"=>"小六"],["subject"=>"-1","grade"=>"201","realname"=>"初一"],["subject"=>"-1","grade"=>"202","realname"=>"初二"],["subject"=>"-1","grade"=>"203","realname"=>"初三"],["subject"=>"-1","grade"=>"301","realname"=>"高一"],["subject"=>"-1","grade"=>"302","realname"=>"高二"],["subject"=>"-1","grade"=>"303","realname"=>"高三"]];
TeaPower.php:            if($tea_subject==-3){
TeaPower.php:            }elseif($tea_subject==-2){
TeaPower.php:                if($v["subject"] !=-2 && in_array($v["subject"],[1,2,3])){
TeaPower.php:            }elseif($tea_subject==-5){
TeaPower.php:            $master_adminid = $this->t_admin_main_group_name->get_master_adminid_list(4);
TeaPower.php:        $list = $this->t_admin_main_group_name->get_maste_admin_name(4,$group_name);
TeaPower.php:        $master_adminid = $this->t_admin_main_group_name->get_master_adminid_list(4);
TeaPower.php:        $adminid_list =$this->t_admin_main_group_name->get_adminid_list_by_master_adminid(-1,4);
TeaPower.php:           $accept_adminid_list = $this->t_admin_main_group_name->get_adminid_list_by_master_adminid($account_id,4);
TeaPower.php:        $week_freeze_info = $this->t_teacher_info->field_get_list($teacherid,"is_week_freeze,week_freeze_time,lesson_hold_flag,is_test_user");
TeaPower.php:            if($week_freeze_info["week_freeze_time"]>=($lstart-7*86400) && $week_freeze_info["week_freeze_time"]<($lend-7*86400)){
TeaPower.php:                return $this->output_err("该老师被限制排课,下一周开始可以排课!");
TeaPower.php:        $teacher_type_train_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,train_through_new");
TeaPower.php:            return $this->output_err("该老师培训未通过,暂不能排试听课!");
TeaPower.php:        $check = $this->research_fulltime_teacher_lesson_plan_limit($teacherid,-1,1,$lesson_start,2);
TeaPower.php:        $test_lesson_subject_id = $this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
TeaPower.php:        $tt_item          = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"subject,userid");
TeaPower.php:        $teacher_subject  = $this->t_teacher_info->field_get_list(
TeaPower.php:                $check_subject = $this->check_teacher_subject_and_grade_new(
TeaPower.php:                $check_subject = $this->check_teacher_grade_range_new($tt_item,$teacher_subject);
TeaPower.php:            $check_subject = $this->check_teacher_subject_and_grade_new(
TeaPower.php:        $test_lesson_num = $this->t_lesson_info->get_limit_type_teacher_lesson_num($teacherid,$lstart,$lend);
TeaPower.php:            return $this->output_err(
TeaPower.php:        $limit_num_info  = $this->t_teacher_info->field_get_list($teacherid,"limit_day_lesson_num,limit_week_lesson_num");
TeaPower.php:        $ret             = $this->t_lesson_info->check_teacher_have_test_lesson_pre_week($teacherid,$lstart);
TeaPower.php:        $test_lesson_num = $this->t_lesson_info->get_limit_type_teacher_lesson_num($teacherid,$lstart,$lend);
TeaPower.php:                return $this->output_err(
TeaPower.php:                return $this->output_err(
TeaPower.php:        $day_st    = date("Y-m-d",$lesson_start);
TeaPower.php:        $test_lesson_num_day = $this->t_lesson_info->get_limit_type_teacher_lesson_num($teacherid,$day_start,$day_end);
TeaPower.php:            return $this->output_err(
TeaPower.php:                return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                return $this->output_err("该老师对应年级段已被冻结!");
TeaPower.php:        $stu_grade_range = $this->get_grade_range_new($stu_info['grade']);
TeaPower.php:            return $this->output_err("学生年级与老师年级范围不匹配!");
TeaPower.php:            return $this->output_err("学生科目与老师科目不匹配!");
TeaPower.php:            return $this->output_err("该老师对应年级段已被冻结!");
TeaPower.php:        $list = $this->t_teacher_info->field_get_list($teacherid,"subject,second_subject,third_subject,grade_part_ex,second_grade,third_grade,grade_start,grade_end,not_grade");
TeaPower.php:            return $this->output_err("学生科目与老师科目不符,不能做特殊申请!");
TeaPower.php:            $stu_grade_range = $this->get_grade_range_new($grade);
TeaPower.php:                return $this->output_err("学生年级与老师年级范围不匹配,不能做限课特殊申请");
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:                        return $this->output_err(
TeaPower.php:            return $this->output_err("该老师对应年级段已被冻结!不可以做限课特殊申请");
TeaPower.php:        $test_lesson_num = $this->t_lesson_info->get_limit_type_teacher_lesson_num($teacherid,$lstart,$lend);
TeaPower.php:            return $this->output_err("该老师该周已有10课时课!不可以做限课特殊申请!");
TeaPower.php:        $start_time = strtotime(date("Y-m-01",time()));
TeaPower.php:        $end_time = strtotime(date("Y-m-01",$start_time+40*86400));
TeaPower.php:        $num = $this->t_test_lesson_subject_require->get_month_limit_require_num($master_adminid,$start_time,$end_time);
TeaPower.php:            return $this->output_err("本月特殊限课已达上限".$limit_num."次");
TeaPower.php:        $ymd = date("Y-m-d",time());
TeaPower.php:            $list = $this->t_week_regular_course->get_week_regular_course_info($teacherid,$week,$old_start_time);
TeaPower.php:                $arr = explode("-",$start);
TeaPower.php:                        $arr = explode("-",$s);
TeaPower.php:                            return $this->output_err(
TeaPower.php:                            return $this->output_err(
TeaPower.php:                        $arr = explode("-",$s);
TeaPower.php:                            return $this->output_err(
TeaPower.php:                            return $this->output_err(
TeaPower.php:        $grade_info = $this->t_teacher_info->field_get_list($teacherid,"grade_part_ex,grade_start,grade_end");
TeaPower.php:        $lesson_end = $lesson_start-5400;
TeaPower.php:        $start = $this->t_lesson_info_b2->check_off_time_lesson_start($teacherid,$lesson_end,$lesson_start);
TeaPower.php:            return $this->get_first_lesson_start($teacherid,$start);
TeaPower.php:        $db_lessonid = $this->t_test_lesson_subject_require->get_current_lessonid($require_id);
TeaPower.php:            return $this->output_err("已经排课过了!,可以换老师&时间");
TeaPower.php:            return $this->output_err("请填写完整!");
TeaPower.php:            return $this->output_err("课程开始时间过早!");
TeaPower.php:        $rr = $this->get_teacher_grade_freeze_limit_info($teacherid,$lesson_start,$grade,$require_id);
TeaPower.php:        $test_lesson_subject_id=$this->t_test_lesson_subject_require->get_test_lesson_subject_id($require_id);
TeaPower.php:        $tt_item = $this->t_test_lesson_subject->field_get_list($test_lesson_subject_id,"subject,grade,userid");
TeaPower.php:        $ret_row1 = $this->t_lesson_info->check_student_time_free($userid,0,$lesson_start,$lesson_end);
TeaPower.php:            return $this->output_err(
TeaPower.php:        $ret_row2=$this->t_lesson_info->check_teacher_time_free($teacherid,0,$lesson_start,$lesson_end);
TeaPower.php:            return $this->output_err(
TeaPower.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
TeaPower.php:        $courseid     = $this->t_course_order->add_course_info_new($orderid,$userid,$grade,$subject,100,2,0,1,1,0,$teacherid);
TeaPower.php:        $lessonid     = $this->t_lesson_info->add_lesson(
TeaPower.php:        $this->t_homework_info->add(
TeaPower.php:        $this->t_test_lesson_subject->field_update_list($test_lesson_subject_id,[
TeaPower.php:        $this->t_test_lesson_subject_sub_list->row_insert([
TeaPower.php:        $this->t_test_lesson_subject_require->field_update_list($require_id,[
TeaPower.php:        $this->t_test_lesson_subject_require->set_test_lesson_status(
TeaPower.php:        $this->t_lesson_info->reset_lesson_list($courseid);
TeaPower.php:        $this->t_seller_student_new->field_update_list($userid,[
TeaPower.php:        $require_info = $this->t_test_lesson_subject_require->field_get_list($require_id,"test_lesson_subject_id,accept_adminid");
TeaPower.php:        $this->t_test_lesson_subject->field_update_list($require_info["test_lesson_subject_id"],[
TeaPower.php:            $require_adminid  = $this->t_test_lesson_subject->get_require_adminid($test_lesson_subject_id);
TeaPower.php:            $userid           = $this->t_test_lesson_subject->get_userid($test_lesson_subject_id);
TeaPower.php:            $phone            = $this->t_seller_student_new->get_phone($userid);
TeaPower.php:            $nick             = $this->t_student_info ->get_nick($userid);
TeaPower.php:            $teacher_nick     = $this->cache_get_teacher_nick($teacherid);
TeaPower.php:            $require_phone    = $this->t_manager_info->get_phone($require_adminid);
TeaPower.php:            $stu_request_info = $this->t_test_lesson_subject->get_stu_request($lessonid);
TeaPower.php:            $require_admin_nick = $this->cache_get_account_nick($require_adminid);
TeaPower.php:            $this->t_manager_info->send_wx_todo_msg(
TeaPower.php:                $require_admin_nick,"来自:".$this->get_account()
TeaPower.php:            $parentid = $this->t_student_info->get_parentid($userid);
TeaPower.php:            $this->t_parent_info->send_wx_todo_msg($parentid,"课程反馈","您的试听课已预约成功!", "上课时间[$lesson_time_str]","http://wx-parent.leo1v1.com/wx_parent/index", "点击查看详情" );
TeaPower.php:             * 模板ID   : rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o
TeaPower.php:            $wx_openid = $this->t_teacher_info->get_wx_openid($teacherid);
TeaPower.php:                $template_id      = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
TeaPower.php:                $data['keyword3'] = date("Y-m-d H:i",time());
TeaPower.php:        return $this->output_succ();
TeaPower.php:        $check_flag = $this->t_teacher_info->check_teacher_phone($phone);
TeaPower.php:        $adminid = $this->t_manager_info->get_id_by_phone($phone);
TeaPower.php:                $tea_nick = $this->t_manager_info->get_name($adminid);
TeaPower.php:            $reference      = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
TeaPower.php:            $reference_info = $this->t_teacher_info->get_teacher_info_by_phone($reference);
TeaPower.php:        $this->t_user_info->start_transaction();
TeaPower.php:        $this->t_user_info->row_insert([
TeaPower.php:        $teacherid = $this->t_user_info->get_last_insertid();
TeaPower.php:            $this->t_user_info->rollback();
TeaPower.php:        $ret = $this->t_phone_to_user->add($phone,E\Erole::V_TEACHER,$teacherid) ;
TeaPower.php:            $this->t_user_info->rollback();
TeaPower.php:        $this->t_teacher_info->add_teacher_info_to_ejabberd($teacherid,$passwd_md5);
TeaPower.php:        $ret = $this->t_teacher_info->row_insert([
TeaPower.php:            $this->t_user_info->rollback();
TeaPower.php:            $this->t_user_info->commit();
TeaPower.php:        $ret = $this->t_teacher_freetime_for_week->row_insert([
TeaPower.php:            $ret = $this->update_teacher_grade_range($check_info,$teacher_info,1);
TeaPower.php:            $ret = $this->update_teacher_grade_range($check_info,$teacher_info,2);
TeaPower.php:            if($r_grade_start-$l_grade_end>1){
TeaPower.php:            $ret = $this->t_teacher_info->field_update_list($teacher_info['teacherid'],$update_arr);
TeaPower.php:        $appointment_info = $this->t_teacher_lecture_appointment_info->get_simple_info($teacher_info['phone']);
TeaPower.php:            $ret = $this->t_teacher_info->field_update_list($teacher_info['teacherid'],$update_arr);
TeaPower.php:        $teacher_re_submit_num = $this->t_teacher_lecture_info->get_teacher_re_submit_num($teacher_info['id']);
TeaPower.php:             * 老师试讲通过2-14
TeaPower.php:             * 模板名称 : 老师试讲未通过2-14
TeaPower.php:             * 模板名称 : 老师试讲可重申2-14
TeaPower.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid($id,$from_user,$header_msg,$msg_info,$admin_url);
TeaPower.php:        $teacher_info        = $this->t_teacher_info->get_teacher_info_by_phone($phone);
TeaPower.php:        $reference           = $this->t_teacher_lecture_appointment_info->get_reference_by_phone($phone);
TeaPower.php:        $reference_teacherid = $this->t_teacher_info->get_teacherid_by_phone($reference);
TeaPower.php:        $reference_count     = $this->t_teacher_lecture_appointment_info->get_reference_count($reference);
TeaPower.php:        $check_flag=$this->t_teacher_money_list->check_is_exists($teacher_info['teacherid'],6);
TeaPower.php:            $this->t_teacher_info->row_insert([
TeaPower.php:        $d = ($end_time - $start_time)/86400;
TeaPower.php:        $qz_tea_list  = $this->t_lesson_info->get_qz_test_lesson_info_list($qz_tea_arr,$start_time,$end_time);
TeaPower.php:        $qz_tea_list_kk = $this->t_lesson_info->get_qz_test_lesson_info_list2($qz_tea_arr,$start_time,$end_time);
TeaPower.php:        $qz_tea_list_hls = $this->t_lesson_info->get_qz_test_lesson_info_list3($qz_tea_arr,$start_time,$end_time);
TeaPower.php:        $list = $this->t_order_refund->get_ass_refund_info_new($start_time,$end_time);
TeaPower.php:            $ss = $val["orderid"]."-".$val["apply_time"];
TeaPower.php:        $list = $this->t_order_refund->get_tea_refund_info_new($start_time,$end_time,$tea_arr);
TeaWxController.php:        if ($this->check_wx_use_flag ) {
TeaWxController.php:             $this->check_wx_use();
TeaWxController.php:        $role      = $this->get_in_int_val("_role",0);
TeaWxController.php:        $teacherid = $this->get_in_int_val("_userid",0);
TeaWxController.php:             echo $this->output_err("未登录");
tec_stu_logtime.php:        $date                = $this->get_in_str_val('date',date('Y-m-d', time(NULL)));
tec_stu_logtime.php:        $st_application_nick = $this->get_in_str_val('st_application_nick',"");
tec_stu_logtime.php:        $require_adminid     = $this->get_in_int_val('require_adminid', -1 );
tec_stu_logtime.php:        $userid              = $this->get_in_userid(-1);
tec_stu_logtime.php:        $teacherid           = $this->get_in_teacherid(-1);
tec_stu_logtime.php:        $run_flag            = $this->get_in_int_val("run_flag",1);
tec_stu_logtime.php:        $assistantid         = $this->get_in_assistantid(-1);
tec_stu_logtime.php:        $ret_info    = $this->t_lesson_info->get_lesson_condition_list(
tec_stu_logtime.php:        $monitor_key = $this->session_gen_key($date,$st_application_nick,$userid,$teacherid,$run_flag) ;
tec_stu_logtime.php:        $adminid          = $this->get_account_id();
tec_stu_logtime.php:        $self_groupid     = $this->t_admin_group_user->get_groupid_by_adminid(2 , $adminid );
tec_stu_logtime.php:        $get_self_adminid = $this->t_admin_group_name->get_master_adminid($self_groupid);
tec_stu_logtime.php:            $server_map = $this->gen_server_map($ret_info['list']);
tec_stu_logtime.php:            $item['lesson_time'] = date('H:i',$item['lesson_start'])."-".date('H:i',$item['lesson_end']);
tec_stu_logtime.php:            $this->cache_set_item_assistant_nick($item);
tec_stu_logtime.php:            $this->cache_set_item_teacher_nick($item);
tec_stu_logtime.php:            $this->cache_set_item_student_nick($item);
tec_stu_logtime.php:        return $this->pageView(__METHOD__,$ret_info,["self_groupid"=>$self_groupid,"is_group_leader_flag"=>$is_group_leader_flag]);
testbb.php:        $today      = date('Y-m-d',time(null));
testbb.php:        $userid=-1;
testbb.php:        $lesson_arr = $this->t_agent->get_agent_info_row_by_phone($phone);
testbb.php:        $lesson_end_time = $this->t_lesson_info->get_lesson_end(2367);
testbb.php:        dd(strtotime(date('Y-m-d',time(NULL))));
testbb.php:        $ret_video = $this->t_lesson_info_b2->get_lesson_url($lessonid);
testbb.php:            // dd($ret_video[0]['real_begin_time']<($stroke_time-30*60));
testbb.php:            if ($ret_video[0]['real_begin_time']<($stroke_time-30*60)) {
testbb.php:                $re = $this->t_lesson_info->field_update_list($lessonid,[
testbb.php:        // $this->t_manager_info->send_wx_todo_msg("tom","sdfa","dfadf");
testbb.php:        $this->t_teacher_info->get_lesson_info_by_time($start_time,$end_time);
testbb.php:        $free_time = $this->get_in_str_val('parent_modify_time');
testbb.php:            $item["user_nick"]  = $this->cache_get_teacher_nick ($item["userid"] );
testbb.php:            $item['phone']      = $this->t_teacher_info->get_phone_by_nick($item['user_nick']);
testbb.php:        $lessonid = $this->get_in_int_val('lessonid');
testbb.php:        $lesson_time = $this->t_lesson_info_b2->get_lesson_time($lessonid);
testbb.php:        $teacher_lesson_time = $this->t_lesson_info_b2->get_teacher_time_by_lessonid($lessonid);
testbb.php:        $student_lesson_time = $this->t_lesson_info_b2->get_student_lesson_time_by_lessonid($lessonid);
testbb.php:        $parent_modify_time  = $this->t_lesson_time_modify->get_parent_modify_time($lessonid);
testbb.php:            $t['time'][0] = date('Y-m-d',$item['lesson_start']);
testbb.php:            $t2['time'][0] = date('Y-m-d',$item['lesson_end']);
testbb.php:            $t4['time'][0] = date('Y-m-d',$item['lesson_start']);
testbb.php:            $t3['time'][0] = date('Y-m-d',$item['lesson_end']);
testbb.php:        //     $t5['time'][0] = date('Y-m-d',$item);
testbb.php:        return $this->output_succ(['data'=>$lesson_time_arr]);
test_code.php:        $this->switch_tongji_database();
test_code.php:        $this->br="<br>";
test_code.php:        $this->red="<div color=\"red\">";
test_code.php:        $this->div="</div>";
test_code.php:            $this->teacherid="50728";
test_code.php:            $this->teacherid="60024";
test_code.php:                    $userid = $this->t_student_info->get_userid_by_phone($user_arr[1]);
test_code.php:                        $userid = $this->t_user_info->user_reg($passwd,0,0);
test_code.php:                        $this->t_phone_to_user->add($user_arr[1],1,$userid);
test_code.php:                        $this->t_student_info->add_student($userid,$user_arr[2],$user_arr[1],$user_arr[0],0);
test_code.php:                        $this->users->add_ejabberd_info($userid,$passwd);
test_code.php:                    $check_flag=$this->t_teacher_money_type->check_is_exists($arr[0],$arr[1],$arr[2]);
test_code.php:                        $this->t_teacher_money_type->row_insert([
test_code.php:        if ($file->isValid()) {
test_code.php:            $tmpName  = $file->getFileName();
test_code.php:            $realPath = $file->getRealPath();
test_code.php:            $objPHPExcel = $objReader->load($obj_file);
test_code.php:            $objPHPExcel->setActiveSheetIndex(0);
test_code.php:            $arr  = $objPHPExcel->getActiveSheet()->toArray();
test_code.php:                            $teacherid = $this->t_teacher_info->get_teacherid_by_phone($val[3]);
test_code.php:                            $teacherid = $this->t_teacher_info->get_teacherid_by_name($val[3]);
test_code.php:                        $ret = $this->t_lesson_info->check_teacher_time_free($teacherid,0,$lesson_start,$lesson_end);
test_code.php:                            $packageid = $this->t_appointment_info->add_appoint($title,1001,$package_intro,$suit_student,
test_code.php:                            $courseid  = $this->t_course_order->add_open_course($teacherid,$title,$grade,$subject,
test_code.php:                            $lessonid  = $this->t_lesson_info->add_open_lesson($teacherid,$courseid,$lesson_start,$lesson_end,
test_code.php:        $tea_list = $this->t_teacher_info->get_teacher_simple_list();
test_code.php:                $address = $this->get_mobile_area($val['phone']);
test_code.php:                    $this->t_teacher_info->field_update_list($val['teacherid'],[
test_code.php:        $content  = mb_convert_encoding( $content, 'UTF-8', 'UTF-8,GBK,GB2312,BIG5');
test_code.php:        $province = mb_substr($str,10,2,"utf-8");
test_code.php:        $begin_date = "2016-12-1";
test_code.php:        $this->t_test_lesson_subject_sub_list->switch_tongji_database();
test_code.php:        $list = $this->t_test_lesson_subject_sub_list->get_teacher_trial_success_list($begin_time);
test_code.php:        $begin_time = strtotime("2017-2-1 10:00");
test_code.php:        $teacherid=$this->get_in_int_val("teacherid");
test_code.php:        // $tea_list['wx_openid'] = $this->t_teacher_info->get_wx_openid($teacherid);
test_code.php:        // $time     = strtotime("2017-4-21");
test_code.php:        $tea_list = $this->t_teacher_info->get_tea_wx_openid_list();
test_code.php:        $template_id      = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
test_code.php:        $data['keyword2'] = "\n-增加课堂中一键pdf上传功能";
test_code.php:        $data['keyword3'] = date("Y-m-d",time());
test_code.php:        $start_time = strtotime("2016-12-1");
test_code.php:        $end_time   = strtotime("2017-4-8");
test_code.php:        $list       = $this->t_student_info->get_zhuan_1($start_time,$end_time);
test_code.php:            $ass_nick=$this->cache_get_assistant_nick($val['assistantid']);
test_code.php:     * 1-3月份合同总课时以及总金额
test_code.php:        $start     = strtotime("2017-1-1");
test_code.php:        $shut_time = strtotime("2017-4-1");
test_code.php:                $start=strtotime("2017-1-4");
test_code.php:            $list  = $this->t_order_info->get_order_total_price($start,$end);
test_code.php:        $num=$this->get_in_int_val("num");
test_code.php:        $begin_date = strtotime("2016-12-1");
test_code.php:        echo "start_time|".date("Y-m-d",$start_time)."|end_time|".date("Y-m-d",$end_time);
test_code.php:        $list = $this->t_test_lesson_subject_require->get_test_plan_data($start_time,$end_time);
test_code.php:        $order_list=$this->t_order_info->get_test_plan_order($start_time,$end_time);
test_code.php:        $userid = $this->get_in_int_val("userid");
test_code.php:        $type   = $this->get_in_int_val("type",1);
test_code.php:        $list = $this->t_student_info->get_orgin_user($userid,$type);
test_code.php:            $origin_name = $this->cache_get_student_nick($userid);
test_code.php:            $origin_userid = $this->t_student_info->get_origin_userid($userid);
test_code.php:            $origin_name   = $this->cache_get_student_nick($origin_userid);
test_code.php:                              .date("Y-m-d",$val['pay_time'])."|".($val['price']/100)."|"
test_code.php:        $list = $this->t_teacher_info->get_teacher_type_list();
test_code.php:            $this->t_teacher_info->field_update_list($val['teacherid'],[
test_code.php:        $type = $this->get_in_int_val("type",3);
test_code.php:            $begin_date = "2017-4-1";
test_code.php:            $begin_date = "2016-12-1";
test_code.php:        $list = $this->t_test_lesson_subject_sub_list->get_teacher_trial_success_list($begin_time,$type);
test_code.php:        $ret=$this->t_parent_info->get_parent_list();
test_code.php:        $t2 = strtotime("2017-2-1");
test_code.php:        $t3 = strtotime("2017-3-1");
test_code.php:        $t4 = strtotime("2017-4-1");
test_code.php:        $t5 = strtotime("2017-5-1");
test_code.php:        $list = $this->t_lesson_info->get_lesson_pay_order($t2,$t5);
test_code.php:            $o = $pay_time-$order_time;
test_code.php:            $t = $order_time-$lesson_time;
test_code.php:        $begin_date = strtotime("2016-11-1");
test_code.php:        $end_date   = strtotime("2017-5-1");
test_code.php:            $count      = $this->t_test_lesson_subject_require->get_count($start_time,$begin_date);
test_code.php:            echo date("Y-m-d",$start_time).":".$count;
test_code.php:        $list = $this->t_teacher_info->get_change_teacher_list();
test_code.php:                $this->t_teacher_info->field_update_list($val['teacherid'],$data);
test_code.php:        $list = $this->t_teacher_feedback_list->get_admin_list();
test_code.php:                        $acc = $this->t_manager_info->get_account($val['accept_adminid']);
test_code.php:                        $acc = $this->t_assistant_info->get_account_by_id($val['assistantid']);
test_code.php:        $stu_list = $this->t_student_info->get_grade_count(0);
test_code.php:        $start_time = strtotime("2017-1-1");
test_code.php:        $end_date   = strtotime("2017-5-1");
test_code.php:        $this->t_student_info->switch_readonly_database();
test_code.php:            echo date("Y-m-d",$start_time);
test_code.php:            $list = $this->t_student_info->get_student_type_list($start_time,$end_time);
test_code.php:                $val['first_lesson'] = $this->t_lesson_info->get_first_lesson($val['userid']);
test_code.php:                echo $val['phone']."|".E\Egrade::get_desc($val['grade'])."|".date("Y-m-d",$val['first_lesson']);
test_code.php:        $teacherid = $this->t_teacher_info->get_teacher_info_by_wx_openid($wx_openid);
test_code.php:        $teacher_ref_type = $this->get_in_int_val("teacher_ref_type",-1);
test_code.php:        $teacher_list = $this->t_teacher_info->get_all_reference_teacher($teacher_ref_type);
test_code.php:        $list = $this->t_teacher_lecture_appointment_info->get_ref_teacher_list();
test_code.php:            $date    = date("Y-m",$val['answer_begin_time']);
test_code.php:        $begin_data = $this->get_in_str_val("begin_data","2017-1-1");
test_code.php:        $end_data   = $this->get_in_str_val("end_data","2017-5-1");
test_code.php:        $this->t_lesson_info->switch_tongji_database();
test_code.php:            $tea_list   = $this->t_lesson_info->get_tea_month_list(
test_code.php:                $start_time,$end_time,-1,0,-1,-1
test_code.php:            $full_start_time = strtotime("-1 month",$start_time);
test_code.php:            $full_tea_list   = $this->t_lesson_info->get_tea_month_list(
test_code.php:                $full_start_time,$start_time,-1,3,-1,-1
test_code.php:            $date_str = date("m-d",$start_time);
test_code.php:            $count_list[$date_str]["all"]["stu_num"]=$this->t_lesson_info->get_stu_total($start_time,$end_time,-1);
test_code.php:                    $stu_num = $this->t_lesson_info->get_stu_total($start_time,$end_time,$teacher_money_type);
test_code.php:                $this->check_isset_data($count_list[$date_str][$teacher_money_type]["teacher_1v1"],0);
test_code.php:                $this->check_isset_data($count_list[$date_str][$teacher_money_type]["teacher_trial"],0);
test_code.php:                    $this->check_isset_data($count_list[$date_str]["all"]["teacher_1v1"]);
test_code.php:                    $this->check_isset_data($count_list[$date_str][$teacher_money_type]["teacher_1v1"]);
test_code.php:                    $this->check_isset_data($count_list[$date_str]["all"]["teacher_trial"]);
test_code.php:                    $this->check_isset_data($count_list[$date_str][$teacher_money_type]["teacher_trial"]);
test_code.php:                $this->check_isset_data($count_list[$date_str]["all"]["lesson_money"],$lesson_price);
test_code.php:                $this->check_isset_data($count_list[$date_str][$teacher_money_type]["lesson_money"],$lesson_price);
test_code.php:                $this->check_isset_data($count_list[$date_str]["all"]["lesson_1v1"],$lesson_1v1);
test_code.php:                $this->check_isset_data($count_list[$date_str][$teacher_money_type]["lesson_1v1"],$lesson_1v1);
test_code.php:                $this->check_isset_data($count_list[$date_str]["all"]["lesson_trial"],$lesson_trial);
test_code.php:                $this->check_isset_data($count_list[$date_str][$teacher_money_type]["lesson_trial"],$lesson_trial);
test_code.php:                $this->check_isset_data($count_list[$date_str]["all"]["lesson_total"],$lesson_total);
test_code.php:                $this->check_isset_data($count_list[$date_str][$teacher_money_type]["lesson_total"],$lesson_total);
test_code.php:                $this->check_isset_data($count_list[$date_str]["all"]["teacher_num"]);
test_code.php:                $this->check_isset_data($count_list[$date_str][$teacher_money_type]["teacher_num"]);
test_code.php:        $this->t_student_info->switch_tongji_database();
test_code.php:        $list = $this->t_student_info->get_origin_stu();
test_code.php:            $val["cc"] = $this->t_manager_info->get_account($val['seller_adminid']);
test_code.php:            $val["cr"] = $this->t_assistant_info->get_nick($val['assistantid']);
test_code.php:            $ret_list = $this->t_student_info->get_stu_list_by_origin($val['userid'],0);
test_code.php:                $o_val["cc"] = $this->t_manager_info->get_account($o_val['seller_adminid']);
test_code.php:                $o_val["cr"] = $this->t_assistant_info->get_nick($o_val['assistantid']);
test_code.php:            $course_list = $this->t_course_order->get_course_list_by_teacherid($n_val);
test_code.php:                $this->t_course_order->row_insert([
test_code.php:        $teacherid    = $this->get_in_int_val("teacherid",$this->teacherid);
test_code.php:        $teacher_info = $this->t_teacher_info->get_teacher_info($teacherid);
test_code.php:        $grade    = $this->change_grade_end_to_grade($teacher_info);
test_code.php:        $courseid = $this->t_course_order->add_course_info_new(
test_code.php:        $lessonid = $this->t_lesson_info->add_lesson(
test_code.php:        $this->t_homework_info->add(0,0,0,$lessonid,$grade,$teacher_info['subject'],$teacher_info['teacherid']);
test_code.php:        $this->t_teacher_record_list->row_insert([
test_code.php:        $start_time = strtotime("2017-5-1");
test_code.php:        $end_time   = strtotime("2017-6-13");
test_code.php:        $ret_info=$this->t_order_info->get_new_order($start_time,$end_time);
test_code.php:            $date_str=date("Y-m-d",$val['pay_time']);
test_code.php:            echo $val['nick']."|".date("Y-m-d",$val['pay_time'])."|".$val['default_lesson_count']*$val['lesson_total']/100;
test_code.php:        header("Content-type: text/html; charset=utf-8"); 
test_code.php:        $phone = $this->get_in_str_val("phone");
test_code.php:            return $this->output_err("手机号为空！");
test_code.php:        $teacher_info = $this->t_teacher_lecture_appointment_info->get_lecture_appointment_info($phone);
test_code.php:            return $this->output_err("您此手机号还未报名！请先报名才可录制试讲！");
test_code.php:        $ret_list = $this->get_teacher_lecture_list($teacher_info);
test_code.php:        $lecture_list = $this->t_teacher_lecture_info->get_lecture_list($phone);
test_code.php:                        "status"       => -1,
test_code.php:        $num = $this->get_in_int_val("num",4);
test_code.php:        $start_time = strtotime("2017-".$num."-1");
test_code.php:        $this->switch_tongji_database();
test_code.php:        $userid_list = $this->t_student_info->get_origin_user_list();
test_code.php:        $stu_list    = $this->t_student_info->get_origin_user($start_time,$end_time);
test_code.php:        // $origin_list = $this->t_student_info->get_origin_user_2($start_time,$end_time,$userid_str);
test_code.php:            $val['seller_nick'] = $this->cache_get_seller_nick($val['origin_seller']);
test_code.php:        $list = $this->t_teacher_info->get_teacher_name_list();
test_code.php:             $this->t_teacher_info->field_update_list($val['teacherid'],[
test_code.php:        $arr = $this->get_b_txt();
test_code.php:        $this->switch_tongji_database();
test_code.php:                $info = $this->t_student_info->get_teacher_origin_info($val);
test_code.php:        $this->switch_tongji_database();
test_code.php:        $list = $this->t_lesson_info_b2->get_teacher_lesson_count();
test_code.php:        $list = $this->t_lesson_info_b2->get_subject_teacher();
test_code.php:            $this->t_teacher_info->field_update_list($val['teacherid'],[
test_code.php:        $start = strtotime("2017-6-1");
test_code.php:        $end   = strtotime("2017-7-1");
test_code.php:        $list=$this->t_order_info->get_new_order($start,$end);
test_code.php:        $start_date = $this->get_in_str_val("start_date","2017-6-17");
test_code.php:        $list = $this->t_train_lesson_user->get_not_through_user($start_time,$end_time);
test_code.php:            echo $val['nick']."|".$val['phone']."|".$val['score']."|".date("Y-m-d H:i",$val['create_time']);
test_code.php:        $num                = $this->get_in_int_val("num");
test_code.php:        $teacher_money_type = $this->get_in_str_val("teacher_money_type","5");
test_code.php:        $level              = $this->get_in_str_val("level","");
test_code.php:        $start_date = strtotime("2017-4-1");
test_code.php:        $this->t_lesson_info_b2->switch_tongji_database();
test_code.php:        $list = $this->t_lesson_info_b2->get_lesson_total_list($start_time,$end_time,$teacher_money_type,$level);
test_code.php:            $create_time        = date("Y-m-d",$val['create_time']);
test_code.php:            $stu_num            = $this->t_lesson_info_b2->get_stu_num($val['teacherid'],$start_time,$end_time);
test_code.php:        $start = strtotime("2017-4-1");
test_code.php:        $end   = strtotime("2017-7-1");
test_code.php:            $lesson_list = $this->t_lesson_info_b2->get_lesson_total();
test_code.php:            $teacherid = $this->t_teacher_info->get_teacherid_by_name($val);
test_code.php:                $stu_num=$this->t_lesson_info_b2->get_stu_num($val,$start,$end);
test_code.php:         * 模板ID   : rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o
test_code.php:        $template_id = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
test_code.php:            "keyword3" => date("Y-m-d H:i:s",time()),
test_code.php:        $url = "http://wx-teacher-web.leo1v1.com/bank_info.html";
test_code.php:        $arr = $this->get_b_txt();
test_code.php:                $info = $this->t_teacher_info->get_teacher_info_by_phone($val);
test_code.php:        $arr = $this->get_b_txt();
test_code.php:        $lesson_start = strtotime("2017-7-12 21:00");
test_code.php:        $lesson_end   = strtotime("2017-7-12 23:59");
test_code.php:                $tea_info  = $this->t_teacher_info->get_teacher_info_by_phone($phone);
test_code.php:                $this->t_teacher_info->field_update_list($teacherid,[
test_code.php:                // $user_info = $this->t_student_info->get_student_info_by_phone($t_v[2]);
test_code.php:                $this->cache_get_assistant_nick($assistantid);
test_code.php:        $list = $this->t_teacher_info->get_admin_teacher_list();
test_code.php:            $this->t_teacher_info->field_update_list($val['teacherid'],[
test_code.php:        header("Content-type:image/jpeg");
test_code.php:        $phone = $this->get_in_str_val("phone","18790256265");
test_code.php:        $text           = "http://wx-teacher-web.leo1v1.com/tea.html?".$phone;
test_code.php:        $bg_url         = "http://leowww.oss-cn-shanghai.aliyuncs.com/summer_pic_invitation.png";
test_code.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
test_code.php:        $this->switch_tongji_database();
test_code.php:        $list = $this->t_lesson_info_b2->test_lesson_total($start_time,$end_time,0);
test_code.php:        $full_start  = strtotime("-1 month",$start_time);
test_code.php:        $full_end    = strtotime("-1 month",$end_time);
test_code.php:        $full_list = $this->t_lesson_info_b2->test_lesson_total($full_start,$full_end,3);
test_code.php:        $arr=$this->get_b_txt();
test_code.php:        $today_date=date("Y-m-d",time());
test_code.php:                $lesson_time  = explode("-",$lesson_info[1]);
test_code.php:                $teacherid     = $this->t_teacher_info->get_teacherid_by_phone($lesson_info[3]);
test_code.php:                $check_teacher = $this->t_lesson_info->check_teacher_time_free($teacherid,0,$lesson_start,$lesson_end);
test_code.php:                $check_user = $this->t_lesson_info->check_student_time_free($userid,0,$lesson_start,$lesson_end);
test_code.php:                // $lessonid = $this->t_lesson_info->add_lesson(
test_code.php:        $userid    = $this->get_in_int_val("userid",241094);
test_code.php:        $teacherid = $this->get_in_int_val("teacherid",240469);
test_code.php:        $lesson_start = strtotime("2017-7-15 21:00");
test_code.php:        $lesson_end = strtotime("2017-7-15 22:00");
test_code.php:        $ret_row1 = $this->t_lesson_info->check_student_time_free($userid,0,$lesson_start,$lesson_end);
test_code.php:            return $this->output_err(
test_code.php:        $ret_row2 = $this->t_lesson_info->check_teacher_time_free($teacherid,0,$lesson_start,$lesson_end);
test_code.php:            return $this->output_err(
test_code.php:        $courseid = $this->t_course_order->add_course_info_new(1,$userid,$grade,$subject,100,2,0,1,1,0,$teacherid);
test_code.php:        $lessonid = $this->t_lesson_info->add_lesson(
test_code.php:        $origin     = $this->get_in_str_val("origin","问卷星");
test_code.php:        $start_time = strtotime("2017-5-1");
test_code.php:        $list = $this->t_order_info->get_origin_order($start_time,$end_time,$origin);
test_code.php:            $pay_time = date("Y-m-d H:i",$val['pay_time']);
test_code.php:        $list = $this->t_order_info->get_origin_user_list();
test_code.php:        $num = $this->get_in_int_val("num",0);
test_code.php:        $start_time = strtotime("2017-4-1");
test_code.php:        $end_time = strtotime("2017-7-1");
test_code.php:        $list = $this->t_teacher_info->get_trial_teacher_month($start_time,$end_time);
test_code.php:            $create_date = date("Y-m-d",$val['create_time']);
test_code.php:            $success = $this->t_lesson_info->get_teacher_test_person_num_list( $create_start,$create_end,-1,-1,[$val['teacherid']]);
test_code.php:        $start_time=strtotime("2017-6-1");
test_code.php:        $end_time=strtotime("2017-7-1");
test_code.php:        $list = $this->t_student_info->get_has_lesson($start_time,$end_time);
test_code.php:        $this->switch_tongji_database();
test_code.php:        $list = $this->t_order_info->get_order_5();
test_code.php:            $ass_nick    = $this->cache_get_assistant_nick($val['assistantid']);
test_code.php:            $last_lesson = $this->t_lesson_info->get_last_lesson_time($val['userid']);
test_code.php:            $last_lesson = date("Y-m-d",$last_lesson);
test_control.php:        while (($file = $dir->read()) !== false)
test_control.php:            if (  substr( $file, -4 ) == ".php"  &&  $file[0] <>"."  ) {
test_control.php:                    $className=substr($file, 0, -4 ) ;
test_control.php:        while (($file = $dir->read()) !== false)
test_control.php:            if (  substr( $file, -4 ) == ".php" &&  $file[0] <>"."  ) {
test_control.php:                $className=substr($file, 0, -4 ) ;
test_kevin.php:        $page_info= $this->get_in_page_info();
test_kevin.php:        $nick_phone= $this->get_in_str_val("nick_phone");
test_kevin.php:        $account_role= $this->get_in_el_account_role();
test_kevin.php:        $ret_info=$this->t_manager_info->get_list_test($page_info,$nick_phone);
test_kevin.php:        return $this->pageView( __METHOD__,$ret_info);
test_kevin.php:        $phone    = $this->get_in_phone();
test_kevin.php:        $origin   = $this->get_in_str_val("origin");
test_kevin.php:        $grade    = $this->get_in_grade();
test_kevin.php:        $subject  = $this->get_in_subject();
test_kevin.php:        $tmk_flag = $this->get_in_int_val("tmk_flag", 0);
test_kevin.php:            return $this->output_err("电话号码长度不对");
test_kevin.php:        $userid=$this->t_phone_to_user->get_userid_by_phone($phone);
test_kevin.php:        if ($this->t_test_lesson_subject->check_subject($userid,$subject))  {
test_kevin.php:            return $this->output_err("已经有了这个科目的例子了,不能增加");
test_kevin.php:        $userid=$this->t_seller_student_new->book_free_lesson_new("",$phone,$grade,$origin,$subject,0);
test_kevin.php:            $this->t_seller_student_new->field_update_list($userid,[
test_kevin.php:                "tmk_adminid"  => $this->get_account_id(),
test_kevin.php:            $account=$this->get_account();
test_kevin.php:            $ret_update = $this->t_book_revisit->add_book_revisit(
test_kevin.php:        return $this->output_succ();
test.php:        $objPHPExcel = $objReader->load("/tmp/001.xls");
test.php:        $objPHPExcel->setActiveSheetIndex(0);
test.php:        $arr=$objPHPExcel->getActiveSheet()->toArray();
test.php:                if ( !$this->t_seller_student_info->check_phone_existed($phone) ) {
test.php:                    $this->t_seller_student_info->add($phone,$origin,$nick,$user_desc,$grade,$subject,$has_pad);
test.php:         * 然后登录 [Dashboard](https://dashboard.pingxx.com)->点击右上角公司名称->开发信息->商户公钥（用于商户身份验证）
test.php:         * 将你的公钥复制粘贴进去并且保存->先启用 Test 模式进行测试->测试通过后启用 Live 模式
test.php:         * 以下 channel 仅为部分示例，未列出的 channel 请查看文档 https://pingxx.com/document/api#api-c-new；
test.php:                'open_id' => 'openidxxxxxxxxxxxx'// 用户在商户微信公众号下的唯一标识，获取方式可参考 pingpp-php/lib/WxpubOAuth.php
test.php:                'product_id' => 'Productid'// 为二维码中包含的商品 ID，1-32 位字符串，商户可自定义
test.php:                'product_category' => '1',// 商品类别码参考链接 ：https://www.pingxx.com/api#api-appendix-2
test.php:                    //请求参数字段规则，请参考 API 文档：https://www.pingxx.com/api#api-c-new
test.php:                    'order_no'  => $orderNo,// 推荐使用 8-20 位，要求数字或字母，不允许其他字符
test.php:                    'channel'   => $channel,// 支付使用的第三方支付渠道取值，请参考：https://www.pingxx.com/api#api-c-new
test.php:            if ($e->getHttpStatus() != null) {
test.php:                header('Status: ' . $e->getHttpStatus());
test.php:                echo $e->getHttpBody();
test.php:                echo $e->getMessage();
test.php:            if ($e->getHttpStatus() != null) {
test.php:                header('Status: ' . $e->getHttpStatus());
test.php:                echo $e->getHttpBody();
test.php:                echo $e->getMessage();
test.php:            if ($e->getHttpStatus() != null) {
test.php:                header('Status: ' . $e->getHttpStatus());
test.php:                echo $e->getHttpBody();
test.php:                echo $e->getMessage();
test.php:        $teacherid = $this->get_in_teacherid(0);
test.php:        $start_time      = $this->get_in_start_time_from_str(date("Y-m-01",time(NULL)) );
test.php:        $end_time        = $this->get_in_end_time_from_str_next_day(date("Y-m-d",(time(NULL)+86400)) );
test.php:        $old_list=$this->t_lesson_info->get_1v1_lesson_list_by_teacher($teacherid,$start_time,$end_time);
test.php:                    "key_class" => $key_class."-".$cur_key_index,
test.php:        $data_map=[]; //studentid -> lesson_count_level -> row
test.php:            $data["level"]="l-0";
test.php:                $data["level"]="l-1";
test.php:                    $data["level"]="l-2";
test.php:                    $data["level"]="l-3";
test.php:        return $this->Pageview(__METHOD__,$ret_list );
test.php:        // $ret_info[]='{ "time":["2016-08-23 21:00","21:59"], "can_edit":1 }';
test.php:        $today_time = strtotime(date('Y-m-d',time(NULL)));
test.php:        $page_info= $this->get_in_page_info();
test.php:        $nick_phone= $this->get_in_str_val("nick_phone");
test.php:        $account_role= $this->get_in_el_account_role();
test.php:        $ret_info=$this->t_manager_info->get_list_test($page_info,$nick_phone);
test.php:        return $this->pageView( __METHOD__,$ret_info);
test_sam.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,null,1);
test_sam.php:        $acc         = $this->get_account();
test_sam.php:        $adminid     = $this->get_account_id();
test_sam.php:        $right_list  = $this->get_tea_subject_and_right_by_adminid($adminid);
test_sam.php:        $account_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
test_sam.php:        $studentid       = $this->get_in_int_val('studentid', -1);
test_sam.php:        $teacherid       = $this->get_in_int_val('teacherid', -1);
test_sam.php:        $confirm_flag    = $this->get_in_enum_list(E\Econfirm_flag::class);
test_sam.php:        $seller_adminid  = $this->get_in_int_val("seller_adminid",-1);
test_sam.php:        $lesson_status   = $this->get_in_int_val("lesson_status",-1);
test_sam.php:        $assistantid     = $this->get_in_assistantid(-1);
test_sam.php:        $grade           = $this->get_in_enum_list(E\Egrade::class);
test_sam.php:        $test_seller_id  = $this->get_in_int_val("test_seller_id",-1 );
test_sam.php:        $has_performance = $this->get_in_int_val("has_performance",-1 );
test_sam.php:        $fulltime_flag = $this->get_in_int_val("fulltime_flag",-1 );
test_sam.php:        $lesson_user_online_status   = $this->get_in_e_set_boolean(-1,"lesson_user_online_status");
test_sam.php:        $lesson_type_default = Cookie::get("lesson_type")==null?-1: Cookie::get("lesson_type") ;
test_sam.php:        $subject_default     = Cookie::get("subject")==null?-1: Cookie::get("subject");
test_sam.php:        $lesson_type               = $this->get_in_int_val('lesson_type', $lesson_type_default);
test_sam.php:        $subject                   = $this->get_in_int_val('subject', $subject_default);
test_sam.php:        $lesson_count              = $this->get_in_int_val('lesson_count', -1 );
test_sam.php:        $lesson_cancel_reason_type = $this->get_in_int_val('lesson_cancel_reason_type', -1 );
test_sam.php:        $lesson_del_flag           = $this->get_in_int_val('lesson_del_flag', -1 );
test_sam.php:        $has_video_flag            = $this->get_in_e_boolean(-1,"has_video_flag");
test_sam.php:        $is_with_test_user = $this->get_in_int_val('is_with_test_user', 0);
test_sam.php:        $lessonid          = $this->get_in_lessonid(-1);
test_sam.php:        $origin            = $this->get_in_str_val("origin");
test_sam.php:        $page_num          = $this->get_in_page_num();
test_sam.php:            $lessonid= $this->t_lesson_info->get_lessonid_by_lesson_str( $this->get_in_str_val("lessonid"));
test_sam.php:        $ret_info = $this->t_lesson_info->get_lesson_condition_list_ex(
test_sam.php:            $item['lesson_end_str' ]        = date('Y-m-d H:i',$item['lesson_end']);
test_sam.php:            $item['real_begin_time_str' ]   = date('Y-m-d H:i',$item['real_begin_time']);
test_sam.php:            $item['lesson_quiz_status_str'] = $this->get_lesson_quiz_cfg($item['lesson_quiz_status'], $item['lesson_type']);
test_sam.php:            $item['homework_url']           = $this->get_work_url($item);
test_sam.php:            $item["tea_nick"]             = $this->cache_get_teacher_nick($item["teacherid"]);
test_sam.php:            $item["require_admin_nick"]   = $this->cache_get_account_nick($item["require_adminid"]);
test_sam.php:            $item['lesson_diff']          = $item['lesson_end'] - $item['lesson_start'];
test_sam.php:            $item["confirm_admin_nick"] = $this->cache_get_account_nick($item["confirm_adminid"]);
test_sam.php:        $seller_list      = $this->t_admin_group->get_admin_list_by_gorupid(E\Eaccount_role::V_1 );
test_sam.php:        $adminid          = $this->get_account_id();
test_sam.php:        $self_groupid     = $this->t_admin_group_user->get_groupid_by_adminid(2 , $adminid );
test_sam.php:        $get_self_adminid = $this->t_admin_group_name->get_master_adminid($self_groupid);
test_sam.php:        $ret_str  = $this->pageView(__METHOD__,$ret_info, [
test_sam.php:        return  $response->withCookie(cookie('lesson_type',$lesson_type , 45000))
test_sam.php:          ->withCookie(cookie('subject', $subject, 45000));
test_sam.php:        // $this->t_manager_info->field_update_list($uid,$set_field_arr);
test_sam.php:        $this->get_in_int_val("assign_groupid", -1);
test_sam.php:        $this->get_in_int_val("assign_account_role", -1);
test_sam.php:        $creater_adminid = $this->get_in_int_val("creater_adminid", -1);
test_sam.php:        $adminid           = $this->get_in_adminid(-1);
test_sam.php:        $uid               = $this->get_in_int_val('uid',0);
test_sam.php:        $user_info         = trim($this->get_in_str_val('user_info', ''));
test_sam.php:        $has_question_user = $this->get_in_int_val('has_question_user', 0);
test_sam.php:        $del_flag          = $this->get_in_int_val('del_flag', 0);
test_sam.php:        $page_info         = $this->get_in_page_info();
test_sam.php:        $account_role      = $this->get_in_int_val('account_role', -1);
test_sam.php:        $cardid            = $this->get_in_int_val('cardid', -1);
test_sam.php:        $day_new_user_flag = $this->get_in_boolean_val("day_new_user_flag", -1);
test_sam.php:        $tquin             = $this->get_in_int_val('tquin', -1);
test_sam.php:        $seller_level      = $this->get_in_el_seller_level();
test_sam.php:            $cardid = -1;
test_sam.php:        $ret_info = $this->t_manager_info->get_all_manager(
test_sam.php:                 nickname,          //null->2
test_sam.php:                 password,          //密码->2
test_sam.php:                 permission,        //---->1
test_sam.php:        $group_list = $this->t_authority_group->get_auth_groups();
test_sam.php:            $this->cache_set_item_account_nick($item, "creater_adminid", "creater_admin_nick");
test_sam.php:            $this->cache_set_item_account_nick($item, "up_adminid", "up_admin_nick");
test_sam.php:            if($item['seller_level_str'] == -1){
test_sam.php:        return $this->pageView(__METHOD__, $ret_info);
tongji2.php:        list($start_time,$end_time)= $this->get_in_date_range_week( 0 );
tongji2.php:        $seller_groupid_ex    = $this->get_in_str_val('seller_groupid_ex', "");
tongji2.php:        $require_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji2.php:        $order_info=$this->t_order_info->get_total_order_info($start_time,$end_time,$require_adminid_list,$contract_type);
tongji2.php:        $origin_info=$this->t_seller_student_new->get_origin_ass_count( $start_time,$end_time,$require_adminid_list );
tongji2.php:        $order_info=$this->t_order_info->get_total_order_info($start_time,$end_time,$require_adminid_list,$contract_type);
tongji2.php:        $require_info=$this->t_test_lesson_subject_require->get_ass_require_info($start_time,$end_time,$require_adminid_list);
tongji2.php:        $add_data_list("待跟进人数", intval( $require_info["all_count"] -$require_info["succ_count"] - $require_info["fail_count"] ) ) ;
tongji2.php:        $lesson_info=$this->t_lesson_info->get_ass_lesson_info($start_time,$end_time, $require_adminid_list);
tongji2.php:        $add_data_list("其他情况", ($lesson_info["fail_all_lesson_count"]-  $lesson_info["tea_fail_all_lesson_count"]- $lesson_info["stu_fail_all_lesson_count"] )/100);
tongji2.php:                           ($lesson_info[ "all_lesson_count"]-$lesson_info["fail_all_lesson_count"]),
tongji2.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($data_list)  );
tongji2.php:        list($start_time,$end_time)= $this->get_in_date_range("2015-01-01",0);
tongji2.php:        list($start_time,$end_time)= $this->get_in_date_range("2015-01-01",0,0,[
tongji2.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
tongji2.php:        $grade = $this->get_in_e_grade(-1);
tongji2.php:        $phone_location = $this->get_in_str_val("phone_location","");
tongji2.php:        $origin_from_user_flag = $this->get_in_e_boolean(-1,"origin_from_user_flag");
tongji2.php:        $competition_flag = $this->get_in_e_boolean(-1,"competition_flag");
tongji2.php:        $subject = $this->get_in_e_subject(-1);
tongji2.php:        list($check_start_time,$check_end_time)= $this->get_in_date_range(0,0,0,[
tongji2.php:        $check_field_id =$this->get_in_int_val("check_field_id",1);
tongji2.php:        $this->t_student_info->switch_tongji_database();
tongji2.php:        //$lesson_info=$this->t_student_info->tongji_get_lesson_start_by_field_name( $field_name,$userid_query_arr,$check_start_time, $check_end_time  );
tongji2.php:        $contract_type_3_list= $this->t_student_info->tongji_get_contract_type_3_by_field_name( $field_name,$userid_query_arr,$check_start_time, $check_end_time  );
tongji2.php:        $origin_user_list= $lesson_info=$this->t_student_info->tongji_get_origin_user_by_field_name( $field_name,$userid_query_arr,$check_start_time, $check_end_time  );
tongji2.php:            $data_map=  (new tongji_ss ())->gen_origin_data($data_map,[  "avg_lesson_count", "contract_type_3_avg_money" ] );
tongji2.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($data_map),[
tongji2.php:        list($start_time,$end_time)= $this->get_in_date_range("2015-01-01",0);
tongji2.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
tongji2.php:        $grade = $this->get_in_e_grade(-1);
tongji2.php:        $phone_location = $this->get_in_str_val("phone_location","");
tongji2.php:        $origin_from_user_flag = $this->get_in_e_boolean(-1,"origin_from_user_flag");
tongji2.php:        $competition_flag = $this->get_in_e_boolean(-1,"competition_flag");
tongji2.php:        $subject = $this->get_in_e_subject(-1);
tongji2.php:        $data_list=$this->t_student_info->tongji_get_region_info( $userid_query_arr,  "phone_location" );
tongji2.php:            $key= substr( $item["phone_location"],0,-6);
tongji2.php:        $grade_list=$this->t_student_info->tongji_get_region_info( $userid_query_arr, "grade" );
tongji2.php:        $subject_list=$this->t_student_info-> tongji_get_subject( $userid_query_arr );
tongji2.php:        $origin_list=$this->t_student_info->tongji_get_region_info( $userid_query_arr, "s.origin" );
tongji2.php:        $origin_userid_list=$this->t_student_info->tongji_get_region_info(  $userid_query_arr, "origin_userid" );
tongji2.php:        $origin_list =  (new tongji_ss ())->gen_origin_data($origin_list);
tongji2.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($list), [
tongji2.php:        $this->set_in_value("adminid" , $this->get_account_id());
tongji2.php:        list($start_time,$end_time )= $this->get_in_date_range_month(0);
tongji2.php:        $check_start_time=strtotime("2017-04-01");
tongji2.php:            return $this->output_err("不可查看");
tongji2.php:        return $this->seller_month_money_list();
tongji2.php:        $adminid=$this->get_in_adminid(-1);
tongji2.php:        $ret_info= $this->t_manager_info->get_admin_member_list(  E\Emain_type::V_2,$adminid );
tongji2.php:        list($start_time,$end_time )= $this->get_in_date_range_month(0);
tongji2.php:        $order_user_list=$this->t_order_info->get_admin_list ($start_time,$end_time,$account_role);
tongji2.php:                if ($adminid = -1  && $adminid==  $item["adminid"]   ) {
tongji2.php:        return $this->pageView(__METHOD__,$ret_info);
tongji2.php:        $adminid = $this->get_account_id();
tongji2.php:        $master_info = $this->t_admin_group_name->get_all_info_by_master_adminid(2,$adminid);
tongji2.php:            return $this->error_view(
tongji2.php:        $this->set_in_value("master_flag",$master_flag);
tongji2.php:        return $this->test_lesson_frist_call_time();
tongji2.php:        list($start_time, $end_time) = $this->get_in_date_range_day(-1);
tongji2.php:        $page_num                    = $this->get_in_page_num();
tongji2.php:        $seller_groupid_ex           = $this->get_in_str_val('seller_groupid_ex', "销售,,,");
tongji2.php:        $master_flag                 = $this->get_in_str_val('master_flag',"");
tongji2.php:        $require_adminid_list        = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji2.php:        $lesson_user_online_status   = $this->get_in_e_set_boolean(-1,"lesson_user_online_status");
tongji2.php:            =$this->get_in_order_by_str([],"lesson_start asc",[
tongji2.php:                "duration" => "(min(tq.start_time) -l.lesson_start ) ",
tongji2.php:        $ret_info = $this->t_lesson_info_b2-> get_test_lesson_first_list($page_num, $order_by_str ,$start_time,$end_time  ,$require_adminid_list, $lesson_user_online_status );
tongji2.php:                $item["duration"]= $item["tq_call_time"] - $item["lesson_start"]  ;
tongji2.php:                $item["duration"]= -1;
tongji2.php:                $item["price"] ="--";
tongji2.php:            $this->cache_set_item_account_nick($item,"cur_require_adminid","cur_require_admin_nick");
tongji2.php:        return $this->pageView(__METHOD__,$ret_info,[
tongji2.php:        $del_flag=$this->get_in_e_boolean(-1,"del_flag");
tongji2.php:        $ret_info=$this->t_seller_student_new->admin_list($del_flag);
tongji2.php:        return $this->pageView(__METHOD__,$ret_info);
tongji2.php:        list($start_time,$end_time )= $this->get_in_date_range_day(0);
tongji2.php:        $ret_info= $this->t_manager_info->get_admin_member_list(  E\Emain_type::V_2,$adminid );
tongji2.php:        return $this->pageView(__METHOD__,$ret_info);
tongji2.php:        $group_adminid   = $this->get_in_int_val("group_adminid",-1);
tongji2.php:            =$this->get_in_order_by_str($order_field_arr ,"account desc");
tongji2.php:        $group_list   = $this->t_admin_group_name->get_group_list(2);
tongji2.php:        $groupid      = $this->get_in_int_val("groupid", -1);
tongji2.php:        list($start_time,$end_time)= $this->get_in_date_range_month( 0 );
tongji2.php:        $origin_ex           = $this->get_in_str_val("origin_ex");
tongji2.php:        $ret_info    = $this->t_student_info->get_referral_info( $group_field,$start_time, $end_time );
tongji2.php:        $admin_info = $this->t_manager_info->get_admin_member_list();
tongji2.php:            $groupid=$this->t_admin_group_name->get_groupid_by_master_adminid($group_adminid);
tongji2.php:            $mark_user_map= $this->t_admin_group_user->get_user_map($groupid);
tongji2.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info),["data_ex_list"=>$ret_info]);
tongji2.php:        return date('Y-m-d',$value);
tongji2.php:        $this->set_in_value("group_adminid",$this->get_account_id());
tongji2.php:        return $this->seller_week_lesson();
tongji2.php:        list($start_time, $end_time) = $this->get_in_date_range_week(0);
tongji2.php:        $group_adminid = $this->get_in_int_val("group_adminid",-1);
tongji2.php:        $adminid           = $this->get_account_id();
tongji2.php:        $adminid_right     = $this->get_seller_adminid_and_right();
tongji2.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex', "");
tongji2.php:        $adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji2.php:            $groupid       = $this->t_admin_group_name->get_groupid_by_master_adminid($group_adminid);
tongji2.php:            $mark_user_map = $this->t_admin_group_user->get_user_map($groupid);
tongji2.php:        $lesson_info      = $this->t_lesson_info_b2->get_seller_week_lesson($start_time,$end_time,$adminid_list);
tongji2.php:        $require_list     = $this->t_test_lesson_subject_require->get_require_noset_lesson_count($start_time,$end_time,$adminid_list);
tongji2.php:        $need_list = $this->t_test_lesson_subject_require->get_need_require_lesson_count($start_time,$end_time,$adminid_list);
tongji2.php:            $lesson_date = date("Y-m-d", $l_item["lesson_start" ]);
tongji2.php:            $opt_date = date("Y-m-d", $require_item["opt_time" ]);
tongji2.php:            $opt_date=  date("Y-m-d", $need_item["opt_time" ]);
tongji2.php:                $item["v_$i"."_need_lesson_count" ]    = $v_item["need_lesson_count"]-$item["v_$i"."_all_lesson_count" ];
tongji2.php:        $ret_list=\App\Helper\Common::gen_admin_member_data($ret_list ,[],0, strtotime( date("Y-m-01",$start_time )   ));
tongji2.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($ret_list)  , [
tongji2.php:        $this->set_in_value("group_adminid",$this->get_account_id());
tongji2.php:        $adminid_right     = $this->get_seller_adminid_and_right();
tongji2.php:        $this->set_in_value("seller_groupid_ex",$seller_groupid_ex);
tongji2.php:        return $this->seller_week_lesson_call();
tongji2.php:        list($start_time, $end_time) = $this->get_in_date_range_week(0);
tongji2.php:        $group_adminid = $this->get_in_int_val("group_adminid",-1);
tongji2.php:        $adminid           = $this->get_account_id();
tongji2.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex', "");
tongji2.php:        $adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji2.php:            $groupid       = $this->t_admin_group_name->get_groupid_by_master_adminid($group_adminid);
tongji2.php:            $mark_user_map = $this->t_admin_group_user->get_user_map($groupid);
tongji2.php:        $lesson_info = $this->t_lesson_info_b2->get_seller_week_lesson($start_time,$end_time,$adminid_list);
tongji2.php:            $lesson_date = date("Y-m-d", $l_item["lesson_start" ]);
tongji2.php:        $ret_list=\App\Helper\Common::gen_admin_member_data($ret_list ,[],0, strtotime( date("Y-m-01",$start_time )));
tongji2.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($ret_list)  , [
tongji2.php:        list($start_time, $end_time) = $this->get_in_date_range_week(0);
tongji2.php:        $adminid           = $this->get_account_id();
tongji2.php:        $adminid_right     = $this->get_seller_adminid_and_right();
tongji2.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex', "");
tongji2.php:        $adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji2.php:        $stu_phone = $this->get_in_str_val('stu_phone');
tongji2.php:        $ret_list = $this->t_lesson_info_b2->get_seller_week_lesson($start_time,$end_time,$adminid_list);
tongji2.php:            \App\Helper\Utils::unixtime2date_for_item($item, "call_before_time", "", "Y-m-d H:i");
tongji2.php:            \App\Helper\Utils::unixtime2date_for_item($item, "call_end_time", "", "Y-m-d H:i");
tongji2.php:            \App\Helper\Utils::unixtime2date_for_item($item, "lesson_start", "", "Y-m-d H:i");
tongji2.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($ret_list),[
tongji2.php:        list($start_time,$end_time)= $this->get_in_date_range_week(0);
tongji2.php:        $origin_ex    = $this->get_in_str_val('origin_ex', "");
tongji2.php:        $list=$this->t_seller_student_new->get_first_call_time_list(  $start_time, $end_time,$origin_ex );
tongji2.php:            $row_item["title"]=sprintf("%02d:00-%02d:59" ,$i,$i) ;
tongji2.php:                $diff= ($item["first_call_time"]- $add_time)/60;
tongji2.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_map),[
tongji2.php:        $adminid = $this->get_account_id();
tongji2.php:        $this->set_in_value("adminid",$adminid);
tongji2.php:        return $this->ass_month_kpi_tongji();
tongji2.php:        $this->switch_tongji_database();
tongji2.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
tongji2.php:        $account_id    = $this->get_in_int_val('adminid',-1);
tongji2.php:        $ass_list = $this->t_manager_info->get_adminid_list_by_account_role(1);
tongji2.php:        $lesson_list_first = $this->t_lesson_info_b2->get_all_ass_stu_lesson_info($start_time,$month_middle);
tongji2.php:        $xq_revisit_first = $this->t_revisit_info->get_ass_xq_revisit_info_new($start_time,$month_middle,$userid_list_first_all,false);
tongji2.php:        $lesson_list_second = $this->t_lesson_info_b2->get_all_ass_stu_lesson_info($month_middle,$end_time);
tongji2.php:        $xq_revisit_second = $this->t_revisit_info->get_ass_xq_revisit_info_new($month_middle,$end_time,$userid_list_second_all,false);
tongji2.php:        $warning_info    = $this->t_month_ass_student_info->get_ass_month_info($start_time);
tongji2.php:        $last_month  = strtotime(date('Y-m-01',$start_time-100));
tongji2.php:        $ass_last_month    = $this->t_month_ass_student_info->get_ass_month_info($last_month,-1,1);
tongji2.php:        $assistant_renew_list = $this->t_manager_info->get_all_assistant_renew_list_new($start_time,$end_time);
tongji2.php:        $new_info = $this->t_student_info->get_ass_new_stu_first_revisit_info($start_time,$end_time);
tongji2.php:        $refund_score = $this->get_ass_refund_score($start_time,$end_time);
tongji2.php:        $lesson_money_all = $this->t_manager_info->get_assistant_lesson_money_info_all($start_time,$end_time);
tongji2.php:        $lesson_count_all = $this->t_manager_info->get_assistant_lesson_count_info_all($start_time,$end_time);
tongji2.php:        $lesson_count_list = $this->t_manager_info->get_assistant_lesson_count_info($start_time,$end_time);
tongji2.php:        //$kk_require_info = $this->t_test_lesson_subject_sub_list->get_kk_require_info($start_time,$end_time,"c.add_time");
tongji2.php:        $kk_require_info = $this->t_course_order->get_kk_succ_info($start_time,$end_time);
tongji2.php:            // $val["refund_score"] = round((10-@$refund_score[$k])>=0?10-@$refund_score[$k]:0,2);
tongji2.php:            $ass_master_adminid = $this->t_admin_group_user->get_master_adminid_by_adminid($k);
tongji2.php:            if($account_id==-1){
tongji2.php:        return $this->pageView(__METHOD__,null,["ass_list"=>$ass_list]);
tongji2.php:        list($start_time,$end_time)= $this->get_in_date_range_month(0);
tongji2.php:        $origin_ex           = $this->get_in_str_val("origin_ex");
tongji2.php:        $origin_level  = $this->get_in_el_origin_level();
tongji2.php:        $tmk_student_status= $this->get_in_el_tmk_student_status();
tongji2.php:        $old_ret_info=$this->t_test_lesson_subject->get_seller_new_user_count( $end_time-90*86400,$end_time , -1, $origin_ex ,$origin_level,$tmk_student_status );
tongji2.php:        $old_order_info=$this->t_order_info->get_1v1_order_seller_list($end_time-90*86400,$end_time ,-1,"" , $origin_ex ,$origin_level, $tmk_student_status );
tongji2.php:        $ret_info=$this->t_test_lesson_subject->get_seller_new_user_count( $start_time, $end_time, -1, $origin_ex  ,$origin_level,$tmk_student_status );
tongji2.php:        $order_info=$this->t_order_info->get_1v1_order_seller_list($start_time,$end_time ,-1,"" , $origin_ex ,$origin_level,$tmk_student_status );
tongji2.php:        $admin_map= $this->t_manager_info->get_create_time_list();
tongji2.php:            $item["create_time"]= \App\Helper\Utils::unixtime2date(@$admin_map[$adminid]["create_time"], 'Y-m-d');
tongji2.php:        $ret_info=\App\Helper\Common::gen_admin_member_data($obj_list,[ "create_time", "per_price" ],0, strtotime( date("Y-m-01",$start_time )   ));
tongji2.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info),[
tongji2.php:        list($start_time,$end_time)= $this->get_in_date_range_month( -20 );
tongji2.php:        $ret_info=$this->t_admin_card_log->get_list( null, $start_time,$end_time,-1,0);
tongji_ex.php:        list($start_time,$end_time)=$this->get_in_date_range_month(date("Y-m-01") );
tongji_ex.php:        $tongji_type=$this->get_in_int_val("tongji_type",1, E\Etongji_type::class);
tongji_ex.php:        $page_num=$this->get_in_page_num();
tongji_ex.php:        $ret_info=$this->t_tongji_seller_top_info->get_list($page_num,$tongji_type,$start_time);
tongji_ex.php:            $this->cache_set_item_account_nick($item);
tongji_ex.php:        return $this->pageView(__METHOD__,$ret_info);
tongji.php:        $opt_date_type= $this->get_in_int_val("opt_date_type",0);
tongji.php:        $start_time = $this->get_in_start_time_from_str(date("Y-m-d",time(NULL)-86400*14));
tongji.php:        $end_time   = $this->get_in_end_time_from_str(date("Y-m-d",time(NULL)));
tongji.php:        $date_list=\App\Helper\Common::get_date_time_list($start_time, $end_time-1);
tongji.php:        $stu_from_type = $this->get_in_int_val("stu_from_type",-1);
tongji.php:        $contract_type = $this->get_in_enum_val(E\Econtract_type::class, 0);
tongji.php:        $list      = $this->t_order_info->get_1v1_order_list($start_time,$end_time,"", $stu_from_type, [],[] ,$contract_type );
tongji.php:            $opt_date=date("Y-m-d",$item["order_time"]);
tongji.php:        return $this->pageView(__METHOD__, $page_info,["data_ex_list"=>$date_list]);
tongji.php:            =$this->get_in_order_by_str($order_field_arr ,"title desc");
tongji.php:        $this->get_in_int_val( "check_add_time_count",1);
tongji.php:        $this->get_in_int_val( "check_call_old_count",1);
tongji.php:        $this->get_in_int_val( "check_first_revisite_time_count",1);
tongji.php:        $this->get_in_int_val( "check_test_lesson_count",1);
tongji.php:        $this->get_in_int_val( "check_order_count",1);
tongji.php:        $admin_revisiterid=$this->get_in_int_val("admin_revisiterid",-1);
tongji.php:        list($start_time,$end_time)=$this->get_in_date_range( date("Y-m-d",time(NULL)-14*86500),date("Y-m-d",time(NULL)));
tongji.php:        $date_list=\App\Helper\Common::get_date_time_list($start_time, $end_time-1);
tongji.php:        $list = $this->t_seller_student_info->get_tongji_add_time($start_time,$end_time,$admin_revisiterid);
tongji.php:            $opt_date=date("Y-m-d",$item["opt_time"]);
tongji.php:        $list = $this->t_seller_student_info->get_tongji_first_revisite_time($start_time,$end_time,$admin_revisiterid);
tongji.php:            $opt_date=date("Y-m-d",$item["opt_time"]);
tongji.php:        $list = $this->t_lesson_info->test_lesson_require_tongji($start_time,$end_time,$admin_revisiterid);
tongji.php:            $opt_date=date("Y-m-d",$item["opt_time"]);
tongji.php:        $list = $this->t_lesson_info->test_lesson_get_tongji($start_time,$end_time,$admin_revisiterid);
tongji.php:            $opt_date=date("Y-m-d",$item["opt_time"]);
tongji.php:        $list = $this->t_tongji_date->get_list(1,$start_time,$end_time,$admin_revisiterid);
tongji.php:            $opt_date=date("Y-m-d",$item["log_time"]);
tongji.php:        if ($admin_revisiterid !=-1) {
tongji.php:            $sys_operator=$this->cache_get_account_nick($admin_revisiterid);
tongji.php:        $list = $this->t_order_info->get_1v1_order_list($start_time,$end_time,$sys_operator,-1);
tongji.php:            $opt_date=date("Y-m-d",$item["order_time"]);
tongji.php:            $d_item["call_old_count"]= @$d_item["call_count"]-@$d_item["first_revisite_time_count"];
tongji.php:                 - @$d_item["seller_test_lesson_count_succ"]
tongji.php:                 - @$d_item["seller_test_lesson_count_fail_need_money"]
tongji.php:                 - @$d_item["seller_test_lesson_count_change_time"]
tongji.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($date_list) ,["data_ex_list"=>$date_list]);
tongji.php:        $opt_time = $this->get_in_str_val('opt_time');
tongji.php:        //$admin_revisiterid=$this->get_in_int_val("admin_revisiterid",-1);
tongji.php:        $groupid = $this->get_in_int_val("groupid",-1);
tongji.php:        if($groupid == -1){
tongji.php:            $adminid_arr = $this->t_admin_group_user->get_userid_arr($groupid);
tongji.php:        $group_list= $this->t_admin_group_name->get_group_list(2);
tongji.php:        list($start_time,$end_time)=$this->get_in_date_range( date("Y-m-d",time(NULL)-14*86500),date("Y-m-d",time(NULL)));
tongji.php:        $ret_info=$this->t_seller_student_info-> tongji_first_revisite_time($start_time,$end_time,-1 ,$adminid_list);
tongji.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid");
tongji.php:        return $this->pageView(__METHOD__, $ret_info,['group_list'=>$group_list,'count_ave'=>$count_ave,'avg_call_interval_ave'=>$avg_call_interval_ave]);
tongji.php:        return date('Y-m-d',$value);
tongji.php:        list($start_time,$end_time)=$this->get_in_date_range( -14,0);
tongji.php:        $is_succ                    = $this->get_in_int_val('is_succ',-1);
tongji.php:        $type                       = $this->get_in_int_val("type",-1);
tongji.php:        $date_list=\App\Helper\Common::get_date_time_list($start_time, $end_time-1);
tongji.php:        $ret_list= $this->t_sms_msg->tongji_get_list($start_time,$end_time,$is_succ,$type);
tongji.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($date_list) );
tongji.php:        list($start_time,$end_time)=$this->get_in_date_range( -14,0);
tongji.php:        $ret_list= $this->t_sms_msg->tongji_type_get_list ($start_time,$end_time);
tongji.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info( $ret_list ) );
tongji.php:            =$this->get_in_order_by_str( [ "succ_count" ,"after_4_bak_count"  ]);
tongji.php:        list($start_time,$end_time )= $this->get_in_date_range(
tongji.php:            -7, 0);
tongji.php:        $ret_info=$this->t_seller_student_info->test_lesson_tongi( $order_by_str,$start_time,$end_time);
tongji.php:            $item["succ_count"] = $item  ["all_count"]- $item["bad_count"] ;
tongji.php:            $item["after_4_bak_count"] = $item  ["bad_count"]- $item["before_4_bad_count"] ;
tongji.php:        return $this->pageView(__METHOD__, $ret_info );
tongji.php:        list($start_time,$end_time )= $this->get_in_date_range(
tongji.php:        $ret_info=$this->t_seller_student_info->first_revisite_time_tongji($start_time,$start_time+86400 );
tongji.php:        return $this->pageView(__METHOD__, $ret_info );
tongji.php:        list($start_time,$end_time )= $this->get_in_date_range(
tongji.php:        $page_num=$this->get_in_page_num();
tongji.php:        $lesson_flag=$this->get_in_int_val("lesson_flag",-1);
tongji.php:        $ret_info=$this->t_seller_student_info->test_lesson_list($page_num,$start_time,$end_time,$lesson_flag);
tongji.php:            $this->cache_set_item_student_nick($item);
tongji.php:                $this->cache_set_item_teacher_nick($item );
tongji.php:                $this->cache_set_item_teacher_nick($item, "cancel_teacherid" );
tongji.php:        return $this->pageView(__METHOD__, $ret_info );
tongji.php:        list($start_time,$end_time )=$this->get_in_date_range_day(0);
tongji.php:        $admin_list=$this->t_admin_card_log->get_admin_list($start_time,$end_time);
tongji.php:            $d_item["work_time"]=  $d_item["end_logtime"] -  $d_item["start_logtime"] ;
tongji.php:        $def_admin_list = $this->t_manager_info->get_admin_member_list();
tongji.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_list) );
tongji.php:        $this->set_in_value("adminid", $this->get_account_id() );
tongji.php:        return  $this->admin_card_date_log_list();
tongji.php:        list($start_time,$end_time )=$this->get_in_date_range( date("Y-m-01", time(NULL) ) ,0,0, [],3  );
tongji.php:        $adminid= $this->get_in_int_val("adminid",0 );
tongji.php:        $date_list=\App\Helper\Common::get_date_time_list($start_time, $end_time-1);
tongji.php:        $ret_info=$this->t_admin_card_log->get_list( 1, $start_time,$end_time,$adminid,100000 );
tongji.php:            $opt_date=date("Y-m-d",$logtime);
tongji.php:                $d_item["work_time"]=  $d_item["end_logtime"] -  $d_item["start_logtime"] ;
tongji.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($date_list) );
tongji.php:        list($start_time,$end_time )=$this->get_in_date_range_day(0);
tongji.php:        $page_num=$this->get_in_page_num();
tongji.php:        $adminid= $this->get_in_int_val("adminid", -1);
tongji.php:        $ret_info=$this->t_admin_card_log->get_list( $page_num, $start_time,$end_time,$adminid );
tongji.php:        return $this->pageView(__METHOD__,$ret_info);
tongji.php:        if ($file->isValid()) {
tongji.php:            $tmpName = $file ->getFileName();
tongji.php:            $realPath = $file ->getRealPath();
tongji.php:            $original_name=$file->getClientOriginalName();
tongji.php:            $objPHPExcel = $objReader->load($realPath);
tongji.php:            $objPHPExcel->setActiveSheetIndex(0);
tongji.php:            $arr=$objPHPExcel->getActiveSheet()->toArray();
tongji.php:                        return $this->output_err("文件字段不对");
tongji.php:            $this->t_admin_card_log-> insert_arr(join(",",$row_arr ) );
tongji.php:            return $this->output_succ();
tongji.php:            return $this->output_err("处理xls失败");
tongji.php:        $assistantid= $this->t_assistant_info->get_assistantid( $this->get_account() );
tongji.php:        $this->set_in_value("assistantid",  $assistantid );
tongji.php:        return $this->test_lesson_ass();
tongji.php:        $this->switch_tongji_database();
tongji.php:            =$this->get_in_order_by_str($order_field_arr ,"ass_nick desc");
tongji.php:        $assistantid= $this->get_in_int_val("assistantid",-1);
tongji.php:        $seller_groupid_ex    = $this->get_in_str_val('seller_groupid_ex', "");
tongji.php:        $require_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],2);
tongji.php:        $ret_info = $this->t_lesson_info->get_lesson_info_ass_tongji($start_time,$end_time, $assistantid ,$require_adminid_list  );
tongji.php:            $item["ass_nick"]=$this->t_assistant_info->get_nick($item['assistantid']);
tongji.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info) ,["data_ex_list"=>$ret_info]);
tongji.php:        list($start_time,$end_time)=$this->get_in_date_range(date('Y-m-01',time()),0);
tongji.php:        $seller_groupid_ex    = $this->get_in_str_val('seller_groupid_ex', "");
tongji.php:        $require_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji.php:        $adminid_right              = $this->get_seller_adminid_and_right();
tongji.php:        $ret_info = $this->t_revisit_info->get_revisit_tongji_ass($start_time,$end_time,$require_adminid_list);
tongji.php:        return $this->pageView(__METHOD__,$ret_info,["adminid_right"=>$adminid_right]);
tongji.php:            =$this->get_in_order_by_str($order_field_arr ,"require_test_lesson_count desc");
tongji.php:        $groupid= $this->get_in_int_val("groupid",-1);
tongji.php:        $adminid=$this->get_account_id();
tongji.php:        $self_groupid = $this->t_admin_group_user->get_groupid_by_adminid(2 , $adminid );
tongji.php:        $admin_revisiterid=$this->get_in_int_val("admin_revisiterid",-1);
tongji.php:        list($start_time,$end_time)=$this->get_in_date_range(
tongji.php:            date("Y-m-d",time(NULL)-86400), 0,
tongji.php:        $list = $this->t_seller_student_info->admin_revisiter_get_tongji_add_time($start_time,$end_time,$admin_revisiterid);
tongji.php:        $list = $this->t_seller_student_info->admin_revisiter_get_tongji_first_revisite_time($start_time,$end_time,$admin_revisiterid);
tongji.php:        $list = $this->t_lesson_info->admin_revisiter_test_lesson_require_tongji($start_time,$end_time,$admin_revisiterid);
tongji.php:        $list = $this->t_lesson_info-> admin_revisiter_test_lesson_get_tongji($start_time,$end_time,$admin_revisiterid);
tongji.php:        $list = $this->t_tongji_date->admin_revisiter_get_list(1,$start_time,$end_time,$admin_revisiterid);
tongji.php:                $this->cache_set_item_account_nick($r_item,"admin_revisiterid", "nick");
tongji.php:                 - @$r_item["test_lesson_count_succ"]
tongji.php:                 - @$r_item["test_lesson_count_fail_need_money"]
tongji.php:                 - @$r_item["test_lesson_count_change_time"]
tongji.php:                 - @$r_item["test_lesson_count_change_time"]
tongji.php:        if ($groupid != -1 ) {
tongji.php:            $admin_list= $this->t_admin_group_user->get_userid_arr($groupid);
tongji.php:        $admin_info = $this->t_manager_info->get_admin_member_list();
tongji.php:        /*$ret_list= $this->gen_admin_member_data($admin_info['list']);*/
tongji.php:        $all_item=[ "admin_revisiterid" => -1 ,"nick" => "全部"];
tongji.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_list), [
tongji.php:            "group_field_list" =>  $this->t_admin_group_name->get_group_list( E\Eaccount_role::V_2 ),
tongji.php:        $all_money=$this->t_order_info->get_all_money();
tongji.php:        $row=$this->t_student_info->get_all_lesson_info();
tongji.php:        $row["confirm_money"] =$row["all_money"]-$row["left_money"];
tongji.php:        $row["lesson_count_confirm"] =$row["lesson_count_all"]-$row["lesson_count_left"];
tongji.php:        return $this->pageView(__METHOD__,null, $row);
tongji.php:        $ret_list = $this->t_order_info->get_month_money_info();
tongji.php:        return $this->pageView(__METHOD__, $ret_list);
tongji.php:        list($start_time ,$end_time)=$this->get_in_date_range_day(0);
tongji.php:        $week_flag=$this->get_in_int_val("week_flag", 1, E\Eboolean::class );
tongji.php:        $time_list=$this->t_online_count_log->get_list($start_time,$end_time);
tongji.php:                while ( $t < $c_time -60  ) {
tongji.php:            $opt_time=$start_time-$i*86400;
tongji.php:            $date_time_list=$this->t_lesson_info->get_lesson_time_list($start_time ,$end_time);
tongji.php:        return $this->pageView(__METHOD__,null,[
tongji.php:        list($start_time ,$end_time)=$this->get_in_date_range_day(0);
tongji.php:        $week_flag=$this->get_in_int_val("week_flag", 1, E\Eboolean::class );
tongji.php:            $opt_time=$start_time-$i*86400;
tongji.php:            $date_time_list=$this->t_lesson_info->get_lesson_time_list($opt_time,$opt_time+86399 );
tongji.php:        return $this->pageView(__METHOD__,null,[
tongji.php:        list($start_time,$end_time)=$this->get_in_date_range_month(0);
tongji.php:        $ass_test_lesson_type= $this->get_in_int_val("ass_test_lesson_type",-1,E\Eass_test_lesson_type::class);
tongji.php:        $list=$this->t_test_lesson_subject_require->tong_ass_test_lesson_info($start_time,$end_time, $ass_test_lesson_type ); // ,
tongji.php:            $this->cache_set_item_account_nick($item,"require_adminid","title");
tongji.php:        return $this->pageView(__METHOD__,$ret_info);
tongji.php:        $grade_list       = $this->get_in_enum_list(E\Egrade::class);
tongji.php:        $group_adminid=$this->get_in_int_val("group_adminid",-1);
tongji.php:        $hour     = $this->get_in_int_val("hour", -1,E\Ehour::class);
tongji.php:        $hour_arr = explode('-',$hour_str);
tongji.php:            =$this->get_in_order_by_str($order_field_arr ,"account desc");
tongji.php:        $group_list=$this->t_admin_group_name->get_group_list(2);
tongji.php:        $groupid=$this->get_in_int_val("groupid", -1);
tongji.php:        list($start_time,$end_time)= $this->get_in_date_range_day( 0 );
tongji.php:        if($hour != -1){
tongji.php:            $start_change = date('Y-m-d',$start_time);
tongji.php:        $origin_ex           = $this->get_in_str_val("origin_ex");
tongji.php:        $ret_info=$this->t_test_lesson_subject->get_seller_count( $start_time, $end_time, $grade_list );
tongji.php:        $tl_info=$this->t_test_lesson_subject_require->tongji_test_lesson_group_by_admin_revisiterid($start_time,$end_time ,$grade_list);
tongji.php:        $tr_info=$this->t_test_lesson_subject_require->tongji_require_test_lesson_group_by_admin_revisiterid($start_time,$end_time,$grade_list);
tongji.php:        $order_info=$this->t_order_info->get_1v1_order_seller_list($start_time,$end_time ,$grade_list,"");
tongji.php:        $date_list = $this->t_id_opt_log-> get_seller_tongji($start_time,$end_time,$grade_list);
tongji.php:        $call_duration_info = $this->t_manager_info->get_call_duration_time($start_time,$end_time,$grade_list);
tongji.php:        $contact_lesson_num_info = $this->t_lesson_info->get_not_contact_lesson_num( $start_time, $end_time );
tongji.php:        $all_item=["account" => "全部","admin_revisiterid" =>-1, ];
tongji.php:            $item["valid_count"]=@$item["call_count"]-  @$item["invalid_count"]-@$item["no_connect"];
tongji.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid","account");
tongji.php:        $admin_info = $this->t_manager_info->get_admin_member_list();
tongji.php:            $groupid=$this->t_admin_group_name->get_groupid_by_master_adminid($group_adminid);
tongji.php:            $mark_user_map= $this->t_admin_group_user->get_user_map($groupid);
tongji.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info),["group_list"=>$group_list,"data_ex_list"=>$ret_info]);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range( date("Y-m-d",time(NULL)-30*86500),date("Y-m-d",time(NULL)));
tongji_ss.php:        $date_list = \App\Helper\Common::get_date_time_list($start_time, $end_time-1);
tongji_ss.php:        $from_list = $this->t_id_opt_log->get_date_list($log_type,$start_time,$end_time);
tongji_ss.php:        $from_list=$this->t_lesson_info->get_user_count_list($start_time,$end_time);
tongji_ss.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($date_list));
tongji_ss.php:            = $this->get_in_order_by_str($order_field_arr,"title desc");
tongji_ss.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex',"");
tongji_ss.php:        $adminid_list  = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        $adminid_right = $this->get_seller_adminid_and_right();
tongji_ss.php:        $this->get_in_int_val( "check_add_time_count",1);
tongji_ss.php:            $this->get_in_int_val( "check_call_old_count",0);
tongji_ss.php:            $this->get_in_int_val( "check_call_old_count",1);
tongji_ss.php:        $grade_list=$this->get_in_enum_list(E\Egrade::class);
tongji_ss.php:        $stu_test_paper_flag=$this->get_in_boolean_val("stu_test_paper_flag",-1);
tongji_ss.php:        $this->get_in_int_val( "check_first_revisit_time_count",1);
tongji_ss.php:        $this->get_in_int_val( "check_test_lesson_count",1);
tongji_ss.php:        $this->get_in_int_val( "check_order_count",1);
tongji_ss.php:        $adminid_all = $this->get_seller_adminid_and_branch();
tongji_ss.php:        $admin_revisiterid=$this->get_in_int_val("admin_revisiterid",-1);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range( date("Y-m-d",time(NULL)-14*86500),date("Y-m-d",time(NULL)));
tongji_ss.php:        $date_list=\App\Helper\Common::get_date_time_list($start_time, $end_time-1);
tongji_ss.php:        $list = $this->t_seller_student_new->get_tongji_add_time($start_time,$end_time,$adminid_list,$adminid_all,$grade_list );
tongji_ss.php:        $list = $this->t_seller_student_new->get_tongji_first_revisit_time($start_time,$end_time,$adminid_list,$adminid_all,$grade_list);
tongji_ss.php:        $list = $this->t_test_lesson_subject_require->tongji_require_test_lesson($start_time,$end_time,$adminid_list,$adminid_all, $grade_list );
tongji_ss.php:        $list = $this->t_test_lesson_subject_require->tongji_test_lesson($start_time,$end_time,$adminid_list,$adminid_all,$grade_list, $stu_test_paper_flag);
tongji_ss.php:            $opt_date  = date("Y-m-d",$item["opt_time"]);
tongji_ss.php:        $list = $this->t_tongji_date->get_list(1,$start_time,$end_time,-1);
tongji_ss.php:            $opt_date  = date("Y-m-d",$item["log_time"]);
tongji_ss.php:        $list = $this->t_order_info->get_1v1_order_list($start_time,$end_time,"",-1,$adminid_list,$adminid_all  ,-1,$grade_list, $stu_test_paper_flag );
tongji_ss.php:            $opt_date      = date("Y-m-d",$item["order_time"]);
tongji_ss.php:            $d_item["call_old_count"] = @$d_item["call_count"]-@$d_item["first_revisit_time_count"];
tongji_ss.php:                 - @$d_item["seller_test_lesson_count_succ"]
tongji_ss.php:                 - @$d_item["seller_test_lesson_count_fail_need_money"]
tongji_ss.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($date_list),[
tongji_ss.php:            =$this->get_in_order_by_str($order_field_arr ,"title desc");
tongji_ss.php:        $admin_revisiterid = $this->get_in_int_val("admin_revisiterid",-1);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range( date("Y-m-d",time(NULL)-14*86500),date("Y-m-d",time(NULL)));
tongji_ss.php:        $date_list=\App\Helper\Common::get_date_time_list($start_time, $end_time-1);
tongji_ss.php:        $list = $this->t_seller_student_origin->get_user_revisit_count_info($start_time,$end_time);
tongji_ss.php:            $opt_date=date("Y-m-d",$item["add_time"]);
tongji_ss.php:        $list = $this->t_test_lesson_subject_require->get_plan_course_info($start_time,$end_time);
tongji_ss.php:            $opt_date=date("Y-m-d",$item["require_time"]);
tongji_ss.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($date_list) ,["data_ex_list"=>$date_list]);
tongji_ss.php:        $this->set_in_value("group_adminid",$this->get_account_id() );
tongji_ss.php:        return $this->seller_count();
tongji_ss.php:        list($start_time,$end_time)= $this->get_in_date_range_week( 0 );
tongji_ss.php:        $data_list=$this->t_test_lesson_subject_require->tongji_require_time_vs_admin_assign_time_duration($start_time,$end_time);
tongji_ss.php:        $grade_list      = $this->get_in_enum_list(E\Egrade::class);
tongji_ss.php:        $group_adminid   = $this->get_in_int_val("group_adminid",-1);
tongji_ss.php:            =$this->get_in_order_by_str($order_field_arr ,"account desc");
tongji_ss.php:        //   $group_list=$this->t_admin_group_name->get_group_list(2);
tongji_ss.php:        // $groupid=$this->get_in_int_val("groupid", -1);
tongji_ss.php:        list($start_time,$end_time)= $this->get_in_date_range_week( 0 );
tongji_ss.php:        $origin_ex           = $this->get_in_str_val("origin_ex");
tongji_ss.php:        $ret_info=$this->t_test_lesson_subject->get_seller_count( $start_time, $end_time, $grade_list , $origin_ex  );
tongji_ss.php:        $new_user_info=$this->t_test_lesson_subject->get_seller_new_user_count( $start_time, $end_time, $grade_list, $origin_ex  );
tongji_ss.php:        $tl_info=$this->t_test_lesson_subject_require->tongji_test_lesson_group_by_admin_revisiterid($start_time,$end_time ,$grade_list , $origin_ex );
tongji_ss.php:        $tr_info=$this->t_test_lesson_subject_require->tongji_require_test_lesson_group_by_admin_revisiterid($start_time,$end_time,$grade_list , $origin_ex );
tongji_ss.php:        $order_info=$this->t_order_info->get_1v1_order_seller_list($start_time,$end_time ,$grade_list,"" , $origin_ex );
tongji_ss.php:        $date_list=$this->t_id_opt_log-> get_seller_tongji($start_time,$end_time,$grade_list);
tongji_ss.php:        $all_item=["account" => "全部","admin_revisiterid" =>-1, ];
tongji_ss.php:            $item["valid_count"]=@$item["call_count"]-  @$item["invalid_count"]-@$item["no_connect"];
tongji_ss.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid","account");
tongji_ss.php:        $admin_info = $this->t_manager_info->get_admin_member_list();
tongji_ss.php:            $groupid=$this->t_admin_group_name->get_groupid_by_master_adminid($group_adminid);
tongji_ss.php:            $mark_user_map= $this->t_admin_group_user->get_user_map($groupid);
tongji_ss.php:        $ret_info=\App\Helper\Common::gen_admin_member_data($admin_info['list'],[],0, strtotime( date("Y-m-01",$start_time )   ));
tongji_ss.php:        /*$ret_info= $this->gen_admin_member_data($admin_info['list']);*/
tongji_ss.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info),["data_ex_list"=>$ret_info]);
tongji_ss.php:        list($start_time,$end_time)= $this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        $this->t_test_lesson_subject_require->switch_tongji_database();
tongji_ss.php:        $test_leeson_list=$this->t_test_lesson_subject_require->tongji_test_lesson_group_by_admin_revisiterid($start_time,$end_time );
tongji_ss.php:        $this->t_order_info->switch_tongji_database();
tongji_ss.php:        $order_new = $this->t_order_info->get_1v1_order_list_by_adminid($start_time,$end_time,0);
tongji_ss.php:        $order_new_green = $this->t_order_info->get_1v1_order_list_by_adminid_green($start_time,$end_time,0);
tongji_ss.php:            $item["non_green_count"] = @$item['succ_all_count_for_month']-@$item['succ_green_count_for_month'];
tongji_ss.php:            $item["non_green_order"] = @$item['all_new_contract_for_month']-@$item['all_green_contract_for_month'];
tongji_ss.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info));
tongji_ss.php:        $check_field_id =$this->get_in_int_val("check_field_id",1);
tongji_ss.php:        $this->set_in_value("tmk_adminid", -2 );
tongji_ss.php:            $this->set_in_value("check_field_id", 5 );
tongji_ss.php:        return $this->origin_count();
tongji_ss.php:        $this->set_in_value("tmk_adminid", $this->get_account_id());
tongji_ss.php:        return $this->origin_count();
tongji_ss.php:        $this->set_in_value("origin_ex","BD,,,");
tongji_ss.php:        return $this->origin_count();
tongji_ss.php:        $this->set_in_value("origin_ex",  $origin_ex );
tongji_ss.php:        return $this->origin_publish_list();
tongji_ss.php:        $this->set_in_value("origin_ex","BD,,,");
tongji_ss.php:        return $this->origin_count_simple_has_intention();
tongji_ss.php:        $this->set_in_value("origin_ex","优学帮,,,");
tongji_ss.php:        return $this->origin_count();
tongji_ss.php:        $this->set_in_value("origin_ex","优学帮,,,");
tongji_ss.php:        return $this->origin_count_simple_has_intention();
tongji_ss.php:        $this->set_in_value("origin_ex","!BD,,,");
tongji_ss.php:        return $this->origin_count();
tongji_ss.php:        $origin            = trim($this->get_in_str_val("origin",""));
tongji_ss.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
tongji_ss.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex', "");
tongji_ss.php:        $adminid_list      = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        $admin_revisiterid = $this->get_in_int_val("admin_revisiterid", -1);
tongji_ss.php:        $groupid           = $this->get_in_int_val("groupid",-1);
tongji_ss.php:        $tmk_adminid       = $this->get_in_int_val("tmk_adminid", -1);
tongji_ss.php:        $check_field_id    = $this->get_in_int_val("check_field_id",1);
tongji_ss.php:        list($start_time,$end_time ,$opt_date_str)=$this->get_in_date_range_month( date("Y-m-01"), 0, [
tongji_ss.php:        $this->t_seller_student_origin->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_seller_student_origin->get_origin_tongji_info($field_name,$opt_date_str ,$start_time,$end_time,$origin,$origin_ex,"",$adminid_list, $tmk_adminid);
tongji_ss.php:        $this->t_test_lesson_subject_require->switch_tongji_database();
tongji_ss.php:        $test_lesson_list=$this->t_test_lesson_subject_require->tongji_test_lesson_origin( $field_name,$start_time,$end_time,$adminid_list,$tmk_adminid, $origin_ex );
tongji_ss.php:        $require_list=$this->t_test_lesson_subject_require->tongji_require_count_origin( $field_name,$start_time,$end_time,$adminid_list,$tmk_adminid,$origin_ex);
tongji_ss.php:        $this->t_order_info->switch_tongji_database();
tongji_ss.php:        $order_list= $this->t_order_info->tongji_seller_order_count_origin( $field_name,$start_time,$end_time,$adminid_list,$tmk_adminid,$origin_ex,$opt_date_str);
tongji_ss.php:                    $item["title"]= $this->cache_get_account_nick( $item["check_value"] );
tongji_ss.php:            $ret_info["list"]= $this->gen_origin_data($ret_info["list"],["avg_first_time"], $origin_ex);
tongji_ss.php:        $data_list = $this->t_seller_student_origin->get_origin_detail_info($opt_date_str,$start_time,$end_time,$origin,$origin_ex,"",$adminid_list,$tmk_adminid);
tongji_ss.php:            $area_name    = substr($a_item["phone_location"], 0, -6);
tongji_ss.php:        $group_list = $this->t_admin_group_name->get_group_list(2);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info,[
tongji_ss.php:        $origin            = trim($this->get_in_str_val("origin",""));
tongji_ss.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
tongji_ss.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex', "");
tongji_ss.php:        $adminid_list      = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        $admin_revisiterid = $this->get_in_int_val("admin_revisiterid", -1);
tongji_ss.php:        $groupid           = $this->get_in_int_val("groupid",-1);
tongji_ss.php:        $tmk_adminid       = $this->get_in_int_val("tmk_adminid", -1);
tongji_ss.php:        $check_field_id    = $this->get_in_int_val("check_field_id",1);
tongji_ss.php:        list($start_time,$end_time ,$opt_date_str)=$this->get_in_date_range_month( date("Y-m-01"), 0, [
tongji_ss.php:        // $this->t_seller_student_origin->switch_tongji_database();
tongji_ss.php:        // $this->t_test_lesson_subject_require->switch_tongji_database();
tongji_ss.php:        // $this->t_order_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_seller_student_origin->get_origin_tongji_info_not_intention( $field_name,$opt_date_str ,$start_time,$end_time,$origin,$origin_ex,"",$adminid_list, $tmk_adminid);
tongji_ss.php:        $require_list=$this->t_test_lesson_subject_require->tongji_require_count_origin( $field_name,$start_time,$end_time,$adminid_list,$tmk_adminid,$origin_ex);
tongji_ss.php:                    $item["title"]= $this->cache_get_account_nick( $item["check_value"] );
tongji_ss.php:            $ret_info["list"]= $this->gen_origin_data($ret_info["list"],[], $origin_ex);
tongji_ss.php:        $data_list = $this->t_seller_student_origin->get_origin_detail_info($opt_date_str,$start_time,$end_time,$origin,$origin_ex,"",$adminid_list,$tmk_adminid);
tongji_ss.php:        $group_list= $this->t_admin_group_name->get_group_list(2);
tongji_ss.php:        $ret= $this->pageView(__METHOD__,$ret_info,[
tongji_ss.php:        $origin            = trim($this->get_in_str_val("origin",""));
tongji_ss.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
tongji_ss.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex', "");
tongji_ss.php:        $adminid_list      = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        $admin_revisiterid = $this->get_in_int_val("admin_revisiterid", -1);
tongji_ss.php:        $groupid           = $this->get_in_int_val("groupid",-1);
tongji_ss.php:        $tmk_adminid       = $this->get_in_int_val("tmk_adminid", -1);
tongji_ss.php:        $check_field_id    = $this->get_in_int_val("check_field_id",1);
tongji_ss.php:        list($start_time,$end_time ,$opt_date_str)=$this->get_in_date_range_month( date("Y-m-01"), 0, [
tongji_ss.php:        // $this->t_seller_student_origin->switch_tongji_database();
tongji_ss.php:        // $this->t_test_lesson_subject_require->switch_tongji_database();
tongji_ss.php:        // $this->t_order_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_seller_student_origin->get_origin_tongji_info( $field_name,$opt_date_str ,$start_time,$end_time,$origin,$origin_ex,"",$adminid_list, $tmk_adminid);
tongji_ss.php:        $require_list=$this->t_test_lesson_subject_require->tongji_require_count_origin( $field_name,$start_time,$end_time,$adminid_list,$tmk_adminid,$origin_ex);
tongji_ss.php:                    $item["title"]= $this->cache_get_account_nick( $item["check_value"] );
tongji_ss.php:            $ret_info["list"]= $this->gen_origin_data($ret_info["list"],[], $origin_ex);
tongji_ss.php:        $data_list = $this->t_seller_student_origin->get_origin_detail_info($opt_date_str,$start_time,$end_time,$origin,$origin_ex,"",$adminid_list,$tmk_adminid);
tongji_ss.php:        $group_list= $this->t_admin_group_name->get_group_list(2);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info,[
tongji_ss.php:        $value_map=$this->t_origin_key->get_list( $origin_ex);
tongji_ss.php:                    "key_class" => $key_class."-".$cur_key_index,
tongji_ss.php:            $data["level"]="l-0";
tongji_ss.php:                $data["level"]="l-1";
tongji_ss.php:                    $data["level"]="l-2";
tongji_ss.php:                        $data["level"]="l-3";
tongji_ss.php:                            $data["level"]="l-4";
tongji_ss.php:            if($item["level"]=="l-4" && $item["key1"]!="未定义"){
tongji_ss.php:                    $item["create_time"] = date('Y-m-d',$item["create_time"]);
tongji_ss.php:        $start_time      = $this->get_in_start_time_from_str(date("Y-m-d",(time(NULL)-86400*7)) );
tongji_ss.php:        $end_time        = $this->get_in_end_time_from_str(date("Y-m-d",(time(NULL)+86400)) );
tongji_ss.php:        $contract_type   = $this->get_in_int_val("contract_type",-1);
tongji_ss.php:        $contract_status = -1;
tongji_ss.php:        $config_courseid = -1;
tongji_ss.php:        $is_test_user    =  $this->get_in_int_val("is_test_user", 0 , E\Eboolean::class  );
tongji_ss.php:        $studentid       = $this->get_in_studentid(-1);
tongji_ss.php:        $check_money_flag = $this->get_in_int_val("check_money_flag", -1);
tongji_ss.php:        $origin           = $this->get_in_str_val("origin");
tongji_ss.php:        $from_type = $this->get_in_int_val("from_type",-1);
tongji_ss.php:        $account_role = $this->get_in_int_val("account_role",-1);
tongji_ss.php:        $has_money = -1;
tongji_ss.php:        $sys_operator = $this->get_in_str_val("sys_operator","");
tongji_ss.php:        $seller_groupid_ex         = $this->get_in_str_val('seller_groupid_ex', "");
tongji_ss.php:        $adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        //$adminid_right  = $this->get_seller_adminid_and_right();
tongji_ss.php:        // $adminid_all  = $this->get_seller_adminid_and_branch();
tongji_ss.php:        $account=$this->get_account();
tongji_ss.php:        $ret_info=$this->t_order_info->get_order_count_new($start_time,$end_time,$contract_type,$contract_status,$studentid,$config_courseid,$is_test_user, $show_yueyue_flag, $has_money,$check_money_flag,-1,$origin,$from_type,$sys_operator,$account_role,$adminid_list,$adminid_all);
tongji_ss.php:        $admin_info = $this->t_manager_info->get_admin_member_list();
tongji_ss.php:        $data_list = $this->t_order_info->get_order_count_subject_grade_info($start_time,$end_time,$contract_type,$contract_status,$studentid,$config_courseid,$is_test_user, $show_yueyue_flag, $has_money,$check_money_flag,-1,$origin,$from_type,$sys_operator,$account_role,$adminid_list,$adminid_all);
tongji_ss.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info),["subject_map"=>$subject_map,"grade_map"=>$grade_map,"subject_count_map"=>$subject_count_map,"grade_count_map"=>$grade_count_map,"adminid_right"=>$adminid_right]);
tongji_ss.php:        $this->set_in_value("set_lesson_adminid", $this->get_account_id() );
tongji_ss.php:        return $this->test_lesson_plan_detail_list();
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range_day(0);
tongji_ss.php:        $page_num= $this->get_in_page_num();
tongji_ss.php:        $set_lesson_adminid=$this->get_in_int_val("set_lesson_adminid", -1);
tongji_ss.php:        $subject = $this->get_in_subject(-1);
tongji_ss.php:        $grade= $this->get_in_grade(-1);
tongji_ss.php:        $success_flag= $this->get_in_int_val("success_flag", -1, E\Eset_boolean::class);
tongji_ss.php:        $test_lesson_fail_flag = $this->get_in_int_val("test_lesson_fail_flag", -1, E\Etest_lesson_fail_flag::class);
tongji_ss.php:        $userid=$this->get_in_userid(-1);
tongji_ss.php:        $require_admin_type=$this->get_in_int_val("require_admin_type", -1, E\Eaccount_role::class);
tongji_ss.php:        $require_adminid=$this->get_in_int_val("require_adminid", -1 );
tongji_ss.php:        $ret_info=$this->t_test_lesson_subject_sub_list->tongji_get_plan_list( $page_num,$start_time,$end_time ,$set_lesson_adminid ,$subject, $grade, $success_flag, $test_lesson_fail_flag, $userid, $require_admin_type,$require_adminid );
tongji_ss.php:            $this->cache_set_item_teacher_nick($item);
tongji_ss.php:            $this->cache_set_item_account_nick($item,"require_adminid", "require_admin_nick" );
tongji_ss.php:            $this->cache_set_item_account_nick($item,"set_lesson_adminid", "set_lesson_admin_nick" );
tongji_ss.php:            \App\Helper\Utils::unixtime2date_for_item($item,"lesson_start","","Y-m-d H:i");
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range_week(0);
tongji_ss.php:        $account_role=$this->get_in_account_role();
tongji_ss.php:        $ret_info  = $this->t_test_lesson_subject_require->tongji_set_lesson_info($account_role ,$start_time,$end_time);
tongji_ss.php:        $order_map = $this->t_order_info->tongji_by_grade($account_role,$start_time,$end_time);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range_day(0);
tongji_ss.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex', "");
tongji_ss.php:        $adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        //$adminid_right  = $this->get_seller_adminid_and_right();
tongji_ss.php:        $adminid_right  =  [];//$this->get_seller_adminid_and_right();
tongji_ss.php:        $this->t_test_lesson_subject_require->switch_tongji_database();
tongji_ss.php:        $ret_info=$this->t_test_lesson_subject_require->require_count_seller($start_time, $end_time,$adminid_list,$adminid_all);
tongji_ss.php:        $set_lesson_list= $this->t_test_lesson_subject_require->tongin_set_lesson_time_info($start_time,$end_time,$adminid_list,$adminid_all );
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info,["adminid_right"=>$adminid_right]);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range_month(0);
tongji_ss.php:        $ret_info=$this->t_test_lesson_subject-> tongji_master_no_assign_count( $start_time,$end_time) ;
tongji_ss.php:            $this->cache_set_item_account_nick($item,"sub_assign_adminid_2", "sub_assign_admin_nick_2" );
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        list($start_time,$end_time, $opt_date_str )=$this->get_in_date_range(0, 10,0,[
tongji_ss.php:        $data_arr=$this->t_test_lesson_subject_require->require_no_set_lesson_tonoji( $opt_date_str,$start_time, $end_time );
tongji_ss.php:            $this->cache_set_item_account_nick($r_item,"id","id_str");
tongji_ss.php:        return $this->pageView(__METHOD__,NULL, $data_arr);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range(-120, 0 );
tongji_ss.php:        $page_num= $this->get_in_page_num();
tongji_ss.php:        $test_lesson_flag =$this->get_in_int_val("test_lesson_flag",-1,E\Eboolean::class);
tongji_ss.php:        $l_1v1_flag=$this->get_in_int_val("l_1v1_flag",-1,E\Eboolean::class);
tongji_ss.php:        $tutor_subject= $this->get_in_int_val("tutor_subject", -1, E\Esubject::class);
tongji_ss.php:        $ret_info=$this->t_teacher_info-> tongji_get_test_lesson_info($page_num,$start_time,$end_time,$test_lesson_flag, $l_1v1_flag ,$tutor_subject );
tongji_ss.php:        return $this->pageView(__METHOD__, $ret_info );
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range_month(0);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $this->t_order_info->switch_tongji_database();
tongji_ss.php:        $test_lesson_info = $this->t_lesson_info->get_test_lesson_device_info($start_time,$end_time);
tongji_ss.php:        $order_info = $this->t_order_info->get_order_device_info($start_time,$end_time);
tongji_ss.php:             = $test_lesson_info["all_count"]  - $test_lesson_info["ipad_count"]
tongji_ss.php:             - $test_lesson_info["windows_count"]  - $test_lesson_info["null_count"]
tongji_ss.php:             = $order_info["all_count"]  - $order_info["ipad_count"]
tongji_ss.php:             - $order_info["windows_count"]  - $order_info["null_count"]
tongji_ss.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($list) );
tongji_ss.php:        $seller_count=$this->t_seller_month_money_target->get_seller_num_day($start_time,$adminid_list,$adminid_all);
tongji_ss.php:            "name" => $name. date("m-d", $start_time),
tongji_ss.php:        $order_arr=$this->t_order_info->seller_info( $start_time,$end_time,$adminid_list,$adminid_all);
tongji_ss.php:        $tq_arr=$this->t_tq_call_info->tongji_tq_info_all($start_time,$end_time,$adminid_list,$adminid_all);
tongji_ss.php:        $set_lesson_arr=$this->t_test_lesson_subject_sub_list->get_set_lesson_count_info($start_time,$end_time,$adminid_list,$adminid_all);
tongji_ss.php:        $test_lesson_arr= $this->t_test_lesson_subject_require->tongji_test_lesson_all($start_time,$end_time,$adminid_list,$adminid_all);
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range_day(-1);
tongji_ss.php:        $week_start_time            = $start_time-7*86400;
tongji_ss.php:        $seller_groupid_ex         = $this->get_in_str_val('seller_groupid_ex', "");
tongji_ss.php:        $this->t_admin_main_group_name->switch_tongji_database();
tongji_ss.php:        $adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        $total_info_list[]=$this->get_day_data_from_time("本日",$start_time,$adminid_list);
tongji_ss.php:        $total_info_list[]=$this->get_day_data_from_time("上周",$week_start_time,$adminid_list);
tongji_ss.php:        $total_info_list[]=$this->get_day_data_from_time("上月",$month_start_time,$adminid_list);
tongji_ss.php:        $total_info_list[]= $this->diff_data_precent( "比-上周",  $total_info_list[1],$total_info_list[0]);
tongji_ss.php:        $total_info_list[]= $this->diff_data_precent( "比-上月",  $total_info_list[2],$total_info_list[0]);
tongji_ss.php:        $this->t_order_info->switch_tongji_database();
tongji_ss.php:        $this->t_test_lesson_subject_require ->switch_tongji_database();
tongji_ss.php:        $this->t_test_lesson_subject_sub_list   ->switch_tongji_database();
tongji_ss.php:        $month_start_time=strtotime( date("Y-m-01",  $start_time));
tongji_ss.php:        $month_end_time=strtotime(date("Y-m-01",  ($month_start_time+86400*32)));
tongji_ss.php:        $month_date_money_list=$this->t_order_info->get_seller_date_money_list($month_start_time,$month_end_time,$adminid_list);
tongji_ss.php:        $month_finish_define_money = $this->get_month_finish_define_money($seller_groupid_ex,$start_time);
tongji_ss.php:        $month_date_set_lesson_list=$this->t_test_lesson_subject_sub_list-> get_seller_date_set_lesson_list($month_start_time,$month_end_time,$adminid_list);
tongji_ss.php:        $month_date_test_lesson_list=$this->t_test_lesson_subject_require->get_seller_date_test_lesson_list($month_start_time,$month_end_time,$adminid_list );
tongji_ss.php:            if ($date_time>$today-86400) {
tongji_ss.php:        return $this->pageView(__METHOD__,null, [
tongji_ss.php:                "month_left_money" => $month_finish_define_money- $cur_money ,
tongji_ss.php:        $this->t_admin_main_group_name->switch_tongji_database();
tongji_ss.php:        $this->t_admin_group_name->switch_tongji_database();
tongji_ss.php:        $this->t_manager_info->switch_tongji_database();
tongji_ss.php:        $this->t_seller_month_money_target->switch_tongji_database();
tongji_ss.php:        $this->t_admin_group_month_time->switch_tongji_database();
tongji_ss.php:            $up_groupid = $this->t_admin_main_group_name->get_groupid_by_group_name($up_group_name);
tongji_ss.php:            $groupid = $this->t_admin_group_name->get_groupid_by_group_name($group_name);
tongji_ss.php:            $adminid = $this->t_manager_info->get_id_by_account($account);
tongji_ss.php:        $month = date("Y-m-01",$start_time);
tongji_ss.php:            $month_finish_define_money=$this->t_seller_month_money_target->field_get_value_2( $adminid,$month,"personal_money");
tongji_ss.php:                    $groupid_list = $this->t_admin_group_name->get_groupid_list_new($up_groupid,-1);
tongji_ss.php:                        $groupid_list = $this->t_admin_group_name->get_groupid_list_new(-1,$main_type);
tongji_ss.php:            $month_finish_define_money=$this->t_admin_group_month_time->get_month_money_by_month( $start_time,$groupid_list);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range(-7, 0 );
tongji_ss.php:        $subject= $this->get_in_int_val("subject", -1);
tongji_ss.php:        $ret = $this->t_test_lesson_subject_require->get_tmk_test_lesson_count_info($start_time,$end_time,$subject);
tongji_ss.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info));
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range_day(0);
tongji_ss.php:        $origin_ex           = $this->get_in_str_val("origin_ex");
tongji_ss.php:        $list=$this->t_seller_student_new->get_hour_user_count($start_time,$end_time,$origin_ex);
tongji_ss.php:        return $this->pageView(__METHOD__,null, [
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range(date('Y-m-01',time()), 0 );
tongji_ss.php:        $origin = trim($this->get_in_str_val("origin",""));
tongji_ss.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
tongji_ss.php:        $seller_groupid_ex         = $this->get_in_str_val('seller_groupid_ex', "");
tongji_ss.php:        $adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        $ret_info = $this->t_seller_student_new->get_origin_info_by_order($start_time,$end_time,$origin,$origin_ex,$adminid_list);
tongji_ss.php:        $ret_info["list"]= $this->gen_origin_data($ret_info["list"]);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:            =$this->get_in_order_by_str($order_field_arr,"nick desc");
tongji_ss.php:        $page_num = $this->get_in_page_num();
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(date('Y-m-01',time()), 0 );
tongji_ss.php:        $teacherid                  = $this->get_in_int_val('teacherid', -1);
tongji_ss.php:        $teacher_account            = $this->get_in_int_val('teacher_account', -1);
tongji_ss.php:        $subject                    = $this->get_in_int_val('subject', -1);
tongji_ss.php:        $subject_num                = $this->get_in_int_val('subject_num', -1);
tongji_ss.php:        $teacher_subject            = $this->get_in_int_val('teacher_subject', -1);
tongji_ss.php:        $identity                   = $this->get_in_int_val('identity', -1);
tongji_ss.php:        $is_new_teacher             = $this->get_in_int_val("is_new_teacher",1);
tongji_ss.php:        $teacher_money_type         = $this->get_in_int_val('teacher_money_type', -1);
tongji_ss.php:        $have_interview_teacher     = $this->get_in_int_val('have_interview_teacher',-1);
tongji_ss.php:        $reference_teacherid        = $this->get_in_int_val('reference_teacherid',-1);
tongji_ss.php:        $grade_part_ex              =$this->get_in_int_val('grade_part_ex',-1);
tongji_ss.php:        $teacher_test_status             =$this->get_in_int_val('teacher_test_status',-1);
tongji_ss.php:        $this->get_tea_subject($tea_subject,$tea_right);
tongji_ss.php:        $adminid      = $this->get_account_id();
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_lesson_info->tongji_teacher_test_lesson_info_list(
tongji_ss.php:        $test_person_num= $this->t_lesson_info->get_teacher_test_person_num_list( $start_time,$end_time,$subject,$grade_part_ex);
tongji_ss.php:        $kk_test_person_num= $this->t_lesson_info->get_kk_teacher_test_person_num_list( $start_time,$end_time,$subject,$grade_part_ex);
tongji_ss.php:        $change_test_person_num= $this->t_lesson_info->get_change_teacher_test_person_num_list( $start_time,$end_time,$subject,$grade_part_ex);
tongji_ss.php:        $success_test_lesson_list = $this->t_lesson_info->get_success_test_lesson_list_new($start_time,$end_time,$subject,$grade_part_ex);
tongji_ss.php:        $success_not_in_lesson_list =  $this->t_lesson_info->get_success_not_test_lesson_list_new($start_time,$end_time,$subject,$grade_part_ex);
tongji_ss.php:        $have_order_list =$this->t_lesson_info->get_have_order_list_new($start_time,$end_time,$subject,$grade_part_ex);
tongji_ss.php:        $subject_num_list = $this->t_lesson_info->get_teacher_test_subject_num_list( $start_time,$end_time,$subject,$grade_part_ex);
tongji_ss.php:        $teacher_regular_stu_list          = $this->t_lesson_info->get_regular_stu_num($date["sdate"],$date["edate"]);
tongji_ss.php:        $teacher_test_lesson_num_list      = $this->t_lesson_info->get_test_lesson_num_list(time(),time()+21*86400);
tongji_ss.php:        $teacher_lesson_count_total        = $this->t_lesson_info->get_teacher_lesson_count_total(time(),$date["edate"]);
tongji_ss.php:        $teacher_test_lesson_num_list_week = $this->t_lesson_info->get_test_lesson_num_list(time(),$date_week["edate"]);
tongji_ss.php:        $old_time = strtotime("2016-11-20 00:00:00");
tongji_ss.php:                $item["create_time_str"] = date("Y-m-d",$item["create_time"]);
tongji_ss.php:            $item["work_day"] = round((time()-$item["create_time"])/86400);
tongji_ss.php:            $item["kk_lesson_per"] = !empty($item["success_lesson"]-$item["test_person_num"])?round(($item["order_number"]-$item["have_order"])/($item["success_lesson"]-$item["test_person_num"]),4)*100:0;
tongji_ss.php:            $item["add_time_str"] = date('Y-m-d',$item["add_time"]);
tongji_ss.php:            $item["freeze_time_str"] = date('Y-m-d',$item["freeze_time"]);
tongji_ss.php:            $item["limit_plan_lesson_time_str"] = date("Y-m-d",$item["limit_plan_lesson_time"]);
tongji_ss.php:                    $count --;
tongji_ss.php:                    $count --;
tongji_ss.php:        $day_time = $this->get_avg_conversion_time(time(),2);
tongji_ss.php:        $rr = $this->t_lesson_info->get_order_add_time();
tongji_ss.php:        $order_lesson_day = round(($rr["lesson_time"]-$rr["order_time"])/$rr["all_count"]/86400,1);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info,[
tongji_ss.php:            "adminid"     => $this->get_account_id(),
tongji_ss.php:        $adminid      = $this->get_account_id();
tongji_ss.php:        $account_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
tongji_ss.php:        $teacherid = $this->get_in_int_val('teacherid');
tongji_ss.php:        $start_time = $this->get_in_int_val('start_time');
tongji_ss.php:        $end_time = $this->get_in_int_val('end_time');
tongji_ss.php:        $subject                    = $this->get_in_int_val('subject', -1);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_teacher_test_lesson_history_info($start_time,$end_time,$teacherid,$subject);
tongji_ss.php:            $item["lesson_start_str"]=date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret_info] );
tongji_ss.php:        $teacherid = $this->get_in_int_val('teacherid');
tongji_ss.php:        $start_time = $this->get_in_int_val('start_time');
tongji_ss.php:        $end_time = $this->get_in_int_val('end_time');
tongji_ss.php:        $subject                    = $this->get_in_int_val('subject', -1);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $this->t_course_order->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_teacher_test_lesson_history_success_info($start_time,$end_time,$teacherid,$subject);
tongji_ss.php:            $aa = $this->t_course_order->get_have_order_info($item["teacherid"],$item["userid"],$item["subject"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$data] );
tongji_ss.php:        $teacherid = $this->get_in_int_val('teacherid');
tongji_ss.php:        $start_time = $this->get_in_int_val('start_time');
tongji_ss.php:        $end_time = $this->get_in_int_val('end_time');
tongji_ss.php:        $subject                    = $this->get_in_int_val('subject', -1);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $this->t_course_order->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_teacher_test_lesson_history_success_info($start_time,$end_time,$teacherid,$subject);
tongji_ss.php:            $item["lesson_start_str"]=date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:            $rev_info = $this->t_book_revisit->get_rev_info_by_phone_adminid($phone);
tongji_ss.php:                $v["revisit_time_str"] = date("Y-m-d H:i:s",$v["revisit_time"]);
tongji_ss.php:            $aa = $this->t_course_order->get_have_order_info($item["teacherid"],$item["userid"],$item["subject"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret_info] );
tongji_ss.php:        $teacherid = $this->get_in_int_val('teacherid');
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $regular_stu_list =$this->t_lesson_info->get_regular_stu_num_by_teacher($date["sdate"],$date["edate"],$teacherid);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$regular_stu_list,"grade"=>$grade_arr,"subject"=>$subject_arr] );
tongji_ss.php:        $teacherid = $this->get_in_int_val('teacherid');
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $teacher_test_lesson_num_list = $this->t_lesson_info->get_test_lesson_num_list_detail(time(),time()+21*86400,$teacherid);
tongji_ss.php:            $item["lesson_start_str"]=date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$teacher_test_lesson_num_list] );
tongji_ss.php:        $teacherid = $this->get_in_int_val('teacherid');
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $teacher_test_lesson_num_list = $this->t_lesson_info->get_test_lesson_num_list_detail(time(),$date_week["edate"],$teacherid);
tongji_ss.php:            $item["lesson_start_str"]=date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$teacher_test_lesson_num_list] );
tongji_ss.php:            $tea = $this->t_teacher_info->get_teacherid_by_realname($v);
tongji_ss.php:                $val["time"]=date("Y-m-d H:i:s",$val["set_lesson_time"]);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:            =$this->get_in_order_by_str($order_field_arr ,"nick desc");
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range(date('Y-10-01',time()), date('Y-10-31',time()));
tongji_ss.php:        $page_num           = $this->get_in_page_num();
tongji_ss.php:        $teacherid          = $this->get_in_int_val('teacherid', -1);
tongji_ss.php:        $subject            = $this->get_in_int_val('subject', -1);
tongji_ss.php:        $identity           = $this->get_in_int_val('identity', -1);
tongji_ss.php:        $teacher_money_type = $this->get_in_int_val('teacher_money_type', -1);
tongji_ss.php:        $is_new_teacher     = $this->get_in_int_val("is_new_teacher",1);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_teacher_test_info_old(
tongji_ss.php:        $teacher_regular_stu_list =$this->t_lesson_info->get_regular_stu_num($date["sdate"],$date["edate"]);
tongji_ss.php:        $teacher_test_lesson_num_list = $this->t_lesson_info->get_test_lesson_num_list(time(),time()+21*86400);
tongji_ss.php:        $teacher_test_lesson_num_list_week = $this->t_lesson_info->get_test_lesson_num_list(time(),$date_week["edate"]);
tongji_ss.php:                $item["create_time_str"] = date("Y-m-d",$item["create_time"]);
tongji_ss.php:            $item["work_day"] = round((time()-$item["create_time"])/86400);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        $origin_ex      = $this->get_in_str_val("origin_ex");
tongji_ss.php:        list($start_time ,$end_time) = $this->get_in_date_range_day(0);
tongji_ss.php:        $need_count = $this->get_in_int_val("need_count", 2 );
tongji_ss.php:        $seller_student_status= $this->get_in_e_seller_student_status(-1);
tongji_ss.php:        $page_num = $this->get_in_page_num();
tongji_ss.php:        $this->t_seller_student_origin->switch_tongji_database();
tongji_ss.php:        $ret_info= $this->t_seller_student_origin->get_rejoin_user_list($page_num ,$origin_ex, $start_time, $end_time,$need_count, $seller_student_status );
tongji_ss.php:            $this->cache_set_item_account_nick($item,"admin_revisiterid","admin_revisiter_nick");
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        $origin_ex      = $this->get_in_str_val("origin_ex");
tongji_ss.php:        list($start_time ,$end_time) = $this->get_in_date_range_day(0);
tongji_ss.php:        $list= $this->t_seller_student_origin->get_rejoin_count_list($origin_ex, $start_time, $end_time);
tongji_ss.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($list) );
tongji_ss.php:        list($start_time ,$end_time) = $this->get_in_date_range(0,-14);
tongji_ss.php:        $list=$this->t_test_lesson_subject_require-> require_time_test_lesson_require_time_date_info($start_time,$end_time);
tongji_ss.php:        //$date_list=\App\Helper\Common::get_date_time_list($start_time, $end_time-1);
tongji_ss.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($list) );
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range( date("Y-m-d",time(NULL)-30*86500),date("Y-m-d",time(NULL)));
tongji_ss.php:        $origin_ex           = $this->get_in_str_val("origin_ex");
tongji_ss.php:        $list=$this->t_seller_student_new->tongji_invalid_count($start_time,$end_time,$origin_ex);
tongji_ss.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($list) );
tongji_ss.php:        $cur_require_adminid=$this->get_in_int_val("cur_require_adminid",-1);
tongji_ss.php:        list($start_time, $end_time)=$this->get_in_date_range(-30,0);
tongji_ss.php:        $origin_userid_flag = $this->get_in_enum_val(E\Eboolean::class , -1,"origin_userid_flag" );
tongji_ss.php:        $require_admin_type = $this->get_in_enum_val(E\Eaccount_role::class,-1,"require_admin_type");
tongji_ss.php:        $list=$this->t_test_lesson_subject_require->tongji_get_order_fail($start_time, $end_time, $cur_require_adminid,$origin_userid_flag,$require_admin_type);
tongji_ss.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($list) );
tongji_ss.php:        list($start_time, $end_time)=$this->get_in_date_range(-30,0);
tongji_ss.php:        $origin_userid_flag = $this->get_in_enum_val(E\Eboolean::class , -1,"origin_userid_flag" );
tongji_ss.php:        $list=$this->t_test_lesson_subject_require-> tongji_order_fail_seller_set($start_time, $end_time, $origin_userid_flag);
tongji_ss.php:            $this->cache_set_item_account_nick($item,"cur_require_adminid","cur_require_admin_nick");
tongji_ss.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($list) );
tongji_ss.php:        $page_num= $this->get_in_page_num();
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range( date("2016-11-01"),date("2016-11-30") );
tongji_ss.php:        $this->t_test_lesson_subject_require->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_test_lesson_subject_require->get_test_lesson_transfor_info_new($start_time,$end_time,$page_num);
tongji_ss.php:        $res = $this->t_test_lesson_subject_require->get_test_succ_ass($start_time,$end_time);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        $adminid      = $this->get_account_id();
tongji_ss.php:        $right_list = $this->get_tea_subject_and_right_by_adminid($adminid);
tongji_ss.php:        $subject = $this->get_in_int_val("subject",-1);
tongji_ss.php:        $limit_plan_lesson_type = $this->get_in_int_val("limit_plan_lesson_type",-1);
tongji_ss.php:        $is_record_flag = $this->get_in_int_val("is_record_flag",-1);
tongji_ss.php:        $is_do_sth = $this->get_in_int_val("is_do_sth",-1);
tongji_ss.php:        $day_num    = $this->get_avg_conversion_time();
tongji_ss.php:        $start_time = time()-60*86400;
tongji_ss.php:        $end_time   = time()-$day_num*86400;
tongji_ss.php:        $wx_type = $this->get_in_int_val("wx_type",-1);
tongji_ss.php:        $start_time_ex = $this->get_in_int_val("start_time_ex",0);
tongji_ss.php:        $end_time_ex = $this->get_in_int_val("end_time_ex",0);
tongji_ss.php:        //list($start_time_ex,$end_time_ex) = $this->get_in_date_range(0,0);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $teacherid_list = $this->t_lesson_info->get_have_ten_test_lesson_teacher_list($start_time,$subject,$tea_subject,$end_time,$limit_plan_lesson_type,$is_record_flag,$is_do_sth,$wx_type,$start_time_ex,$end_time_ex,$qz_flag);
tongji_ss.php:            $test_lesson_num_week = $this->t_lesson_info->get_limit_type_teacher_lesson_num($teacherid,$lstart,$lend);
tongji_ss.php:            $ret = $this->t_lesson_info->get_test_lesson_order_info_by_teacherid($teacherid,$start_time,$end_time,$test_lesson_num);
tongji_ss.php:            $start = date("Y-m-d",$ret[9]["lesson_start"]);
tongji_ss.php:            $end = date("m-d",$end_time);
tongji_ss.php:            $day = ceil((time()-$item["create_time"])/86400);
tongji_ss.php:                   $uu = $this->t_course_order->get_have_order_info($teacherid,$userid,$subject);
tongji_ss.php:                $ret_info[$teacherid]["time"]=$start." - ".$end;
tongji_ss.php:                $ret_info[$teacherid]["add_time_str"] = date('Y-m-d',$item["add_time"]);
tongji_ss.php:                $ret_info[$teacherid]["limit_plan_lesson_time_str"] = date("Y-m-d",$item["limit_plan_lesson_time"]);
tongji_ss.php:                    $ret_info[$teacherid]["freeze_adminid_str"] = $this->t_manager_info->get_account($item["freeze_adminid"]);
tongji_ss.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($ret_info) ,["tea_right"=>$tea_right]);
tongji_ss.php:        $day_num=$this->get_avg_conversion_time();
tongji_ss.php:        $start_time=time()-60*86400;
tongji_ss.php:        $end_time = time()-$day_num*86400;
tongji_ss.php:        $teacherid = $this->get_in_int_val("teacherid",-1);
tongji_ss.php:        $test_lesson_num= $this->get_in_int_val("test_lesson_num",10);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $this->t_book_revisit->switch_tongji_database();
tongji_ss.php:        $this->t_course_order->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_test_lesson_order_info_by_teacherid_new($teacherid,$start_time,$end_time,$test_lesson_num);
tongji_ss.php:            $item["lesson_start_str"]=date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:            $rev_info = $this->t_book_revisit->get_rev_info_by_phone_adminid($phone);
tongji_ss.php:                $v["revisit_time_str"] = date("Y-m-d H:i:s",$v["revisit_time"]);
tongji_ss.php:            $aa = $this->t_course_order->get_have_order_info($item["teacherid"],$item["userid"],$item["subject"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret_info] );
tongji_ss.php:        $start_time = time()-14*86400;
tongji_ss.php:        $teacherid  = $this->get_in_int_val("teacherid",-1);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $list = $this->t_lesson_info->get_week_test_lesson_info_new($teacherid,$start_time,$end_time);
tongji_ss.php:            $item["lesson_start_str"] = date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:        return $this->output_succ(["data"=> $list]);
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $adminid = $this->get_in_int_val("adminid",-1);
tongji_ss.php:        $list = $this->t_test_lesson_subject_require->get_teat_lesson_transfor_info_by_adminid($start_time,$end_time,$adminid);
tongji_ss.php:        // $list = $this->t_test_lesson_subject_sub_list->get_teat_lesson_transfor_info_by_adminid($start_time,$end_time,$adminid);
tongji_ss.php:            $item["lesson_start_str"] = date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:        return $this->output_succ(["data"=> $list]);
tongji_ss.php:        $start_time = strtotime("2017-01-01");
tongji_ss.php:        $ret_info = $this->t_teacher_lecture_info->get_lecture_info_by_day($start_time,$end_time);
tongji_ss.php:        $arr = $this->t_teacher_record_list->get_train_teacher_interview_info_by_day($start_time,$end_time);
tongji_ss.php:        $lecture_succ = $this->t_teacher_lecture_info->get_lecture_info_by_day($start_time,$end_time,1);
tongji_ss.php:        $train_succ = $this->t_teacher_record_list->get_train_teacher_interview_info_by_day($start_time,$end_time,1);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_list);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range(date('2017-06-18'), date('Y-m-d H:i:s',time()));
tongji_ss.php:        $tongji_type=$this->get_in_int_val("tongji_type",1);
tongji_ss.php:            $res = $this->t_teacher_lecture_info->get_lecture_info_by_subject_new($start_time,$end_time);
tongji_ss.php:            $video_succ = $this->t_teacher_lecture_info->get_lecture_info_by_subject_new($start_time,$end_time,1);
tongji_ss.php:            $one = $this->t_teacher_record_list->get_all_interview_count_by_subject($start_time,$end_time,-1);
tongji_ss.php:            $one_succ = $this->t_teacher_record_list->get_all_interview_count_by_subject($start_time,$end_time,1);
tongji_ss.php:            $res = $this->t_teacher_lecture_info->get_lecture_info_by_grade($start_time,$end_time);
tongji_ss.php:            $video_succ = $this->t_teacher_lecture_info->get_lecture_info_by_grade($start_time,$end_time,1);
tongji_ss.php:            $one = $this->t_teacher_record_list->get_all_interview_count_by_grade($start_time,$end_time,-1);
tongji_ss.php:            $one_succ = $this->t_teacher_record_list->get_all_interview_count_by_grade($start_time,$end_time,1);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_list,["tongji_type"=>$tongji_type]);
tongji_ss.php:            =$this->get_in_order_by_str($order_field_arr ,"all_count desc");
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range(date('Y-m-d H:i:s',time()-7*86400), date('Y-m-d H:i:s',time()));
tongji_ss.php:        $adminid     = $this->get_account_id();
tongji_ss.php:        $right_list  = $this->get_tea_subject_and_right_by_adminid($adminid);
tongji_ss.php:        $this->switch_tongji_database();
tongji_ss.php:        $subject             = $this->get_in_int_val("subject",-1);
tongji_ss.php:        $teacher_account     = $this->get_in_int_val('teacher_account', -1);
tongji_ss.php:        $reference_teacherid = $this->get_in_int_val('reference_teacherid',-1);
tongji_ss.php:        $identity            = $this->get_in_int_val('identity', -1);
tongji_ss.php:        $interview_type      = $this->get_in_int_val('interview_type', -1);
tongji_ss.php:            $ret_info = $this->t_teacher_lecture_info->get_lecture_info_by_time_new(
tongji_ss.php:            $ret_info = $this->t_teacher_record_list->get_train_teacher_interview_info(
tongji_ss.php:            $ret_info = $this->t_teacher_lecture_info->get_lecture_info_by_time_new(
tongji_ss.php:            $arr = $this->t_teacher_record_list->get_train_teacher_interview_info(
tongji_ss.php:            $item["ave_time"] = (isset($item["all_count_new"]) && !empty($item["all_count_new"]))?round(($item["all_con_time"]-$item["all_add_time"])/$item["all_count_new"]/86400,1):0;
tongji_ss.php:                $teacher_list = $this->t_teacher_lecture_info->get_teacher_list_passed($account,$start_time,$end_time,$subject,$teacher_account,$reference_teacherid,$identity,$tea_subject);
tongji_ss.php:                $teacher_list = $this->t_teacher_record_list->get_teacher_train_passed($account,$start_time,$end_time,$subject,$teacher_account,$reference_teacherid,$identity,$tea_subject);
tongji_ss.php:                $teacher_list = $this->t_teacher_lecture_info->get_teacher_list_passed($account,$start_time,$end_time,$subject,$teacher_account,$reference_teacherid,$identity,$tea_subject);
tongji_ss.php:                $teacher_arr = $this->t_teacher_record_list->get_teacher_train_passed($account,$start_time,$end_time,$subject,$teacher_account,$reference_teacherid,$identity,$tea_subject);
tongji_ss.php:            $res = $this->t_lesson_info->get_test_leson_info_by_teacher_list($teacher_list);
tongji_ss.php:            $teacher_list_ex = $this->t_teacher_lecture_info->get_teacher_list_passed("",$start_time,$end_time,$subject,$teacher_account,$reference_teacherid,$identity,$tea_subject);
tongji_ss.php:            $teacher_list_ex = $this->t_teacher_record_list->get_teacher_train_passed("",$start_time,$end_time,$subject,$teacher_account,$reference_teacherid,$identity,$tea_subject);
tongji_ss.php:            $teacher_list_ex = $this->t_teacher_lecture_info->get_teacher_list_passed("",$start_time,$end_time,$subject,$teacher_account,$reference_teacherid,$identity,$tea_subject);
tongji_ss.php:            $teacher_arr_ex = $this->t_teacher_record_list->get_teacher_train_passed("",$start_time,$end_time,$subject,$teacher_account,$reference_teacherid,$identity,$tea_subject);
tongji_ss.php:                $item["ave_time"] = @$item["all_count"]==0?0:round(($all_con_time-$all_add_time)/@$item["all_count"]/86400,1);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info,["all_tea"=>$all_tea_ex]);
tongji_ss.php:            =$this->get_in_order_by_str($order_field_arr ,"all_count desc");
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range(date('Y-m-d H:i:s',time()-7*86400), date('Y-m-d H:i:s',time()));
tongji_ss.php:        $adminid      = $this->get_account_id();
tongji_ss.php:        $right_list = $this->get_tea_subject_and_right_by_adminid($adminid);
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $subject = $this->get_in_int_val("subject",-1);
tongji_ss.php:        $teacher_account            = $this->get_in_int_val('teacher_account', -1);
tongji_ss.php:        $reference_teacherid        = $this->get_in_int_val('reference_teacherid',-1);
tongji_ss.php:        $identity                   = $this->get_in_int_val('identity', -1);
tongji_ss.php:        $ret_info = $this->t_teacher_lecture_info->get_lecture_info_by_reference_new($subject,$start_time,$end_time,$teacher_account,$reference_teacherid,$identity,$tea_subject);
tongji_ss.php:            $item["ave_time"] = round(($item["all_con_time"]-$item["all_add_time"])/$item["all_count"]/86400,1);
tongji_ss.php:            if($reference == -1){
tongji_ss.php:                $teacher_list = $this->t_teacher_lecture_info->get_teacher_list_passed_by_reference_is_null($start_time,$end_time);
tongji_ss.php:                $res = $this->t_lesson_info->get_test_leson_info_by_teacher_list_new(-1,$teacher_list);
tongji_ss.php:                $teacher_list = $this->t_teacher_lecture_info->get_teacher_list_passed_by_reference($reference,$start_time,$end_time);
tongji_ss.php:                $res = $this->t_lesson_info->get_test_leson_info_by_teacher_list_new($reference,$teacher_list);
tongji_ss.php:                $item["ave_time"] = @$item["all_count"]==0?0:round(($all_con_time-$all_add_time)/@$item["all_count"]/86400,1);
tongji_ss.php:           $other["ave_time"] = @$other["all_count"]==0?0:round(($other["all_con_time"]-$other["all_add_time"])/@$item["all_count"]/86400,1);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $start_time_ave = $time-30*86400;
tongji_ss.php:        $res = $this->t_lesson_info->get_all_test_order_info_by_time($start_time_ave);
tongji_ss.php:                $arr += ($item["order_time"]-$item["lesson_start"]);
tongji_ss.php:        list($start_time, $end_time)=$this->get_in_date_range(0,0,0,[],1);
tongji_ss.php:        $select_type   = $this->get_in_int_val("select_type",0);
tongji_ss.php:        $student_type  = $this->get_in_int_val("student_type",0);
tongji_ss.php:        $renewal_rate  = ($this->get_in_float_val("renewal_rate",85))/100;
tongji_ss.php:        $month_cost    = $this->get_in_float_val("month_cost",12);
tongji_ss.php:        $month_cost_ex = $this->get_in_float_val("month_cost_ex",12);
tongji_ss.php:        $order_str     = $this->get_in_int_val("order_str",0);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $this->t_order_info->switch_tongji_database();
tongji_ss.php:        $this->t_student_info->switch_tongji_database();
tongji_ss.php:        $this->t_course_order->switch_tongji_database();
tongji_ss.php:        $check_start_time = $this->get_check_start_time($student_type,$end_time);
tongji_ss.php:            $this->t_order_info->switch_tongji_database();
tongji_ss.php:            $stu_total_list = $this->t_order_info->get_stu_lesson_total_list($end_time);
tongji_ss.php:            $this->t_course_order->switch_tongji_database();
tongji_ss.php:            $stu_total_list = $this->t_course_order->get_stu_assigned_list($check_start_time,$end_time,$student_type);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $stu_cost_list = $this->t_lesson_info->get_stu_cost_list($check_start_time,$end_time,$select_type,$student_type);
tongji_ss.php:            $lesson_left   = $lesson_total-$lesson_cost;
tongji_ss.php:            $renewal_date  = date("Y-m-d",$renewal_time);
tongji_ss.php:            $renewal_month = date("Y-m",$renewal_time);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_list,[
tongji_ss.php:            $check_str = "-1 month";
tongji_ss.php:            $check_str = "-2 month";
tongji_ss.php:            $check_str = "-3 month";
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        $identity       = $this->get_in_int_val("identity");
tongji_ss.php:        $subject        = $this->get_in_int_val("subject");
tongji_ss.php:        $is_new_teacher = $this->get_in_int_val("is_new_teacher",1);
tongji_ss.php:        $count_type     = $this->get_in_int_val("count_type",1);
tongji_ss.php:        $adminid      = $this->get_account_id();
tongji_ss.php:        $right_list = $this->get_tea_subject_and_right_by_adminid($adminid);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $this->t_course_order->switch_tongji_database();
tongji_ss.php:        $this->t_order_info->switch_tongji_database();
tongji_ss.php:        $this->t_teacher_info->switch_tongji_database();
tongji_ss.php:        $this->t_test_lesson_subject_sub_list->switch_tongji_database();
tongji_ss.php:        $teacher_list = $this->t_lesson_info->get_teacher_trial_lesson_list(
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_list,[
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time   = strtotime($this->get_in_str_val("end_time"));
tongji_ss.php:        $count_type = $this->get_in_int_val("count_type");
tongji_ss.php:        $teacherid = $this->get_in_int_val("teacherid",0);
tongji_ss.php:            return $this->output_err("老师id不能为0");
tongji_ss.php:        $ret_list= $this->t_lesson_info->get_teacher_trial_lesson_list($start_time,$end_time,0,0,0,"",$count_type,$teacherid);
tongji_ss.php:            $ret_list['lesson_time'] = date("Y-m-d H:i",$ret_list["min_lesson_start"])."~"
tongji_ss.php:                                     .date("Y-m-d H:i",$ret_list["max_lesson_start"]);
tongji_ss.php:            return $this->output_err("没有签单数据!");
tongji_ss.php:        return $this->output_succ([
tongji_ss.php:        $adminid      = $this->get_account_id();
tongji_ss.php:        $right_list = $this->get_tea_subject_and_right_by_adminid($adminid);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(-7,0);
tongji_ss.php:        $subject        = $this->get_in_int_val("subject",-1);
tongji_ss.php:        $record_flag       = $this->get_in_int_val("record_flag",0);
tongji_ss.php:        $record_adminid      = $this->get_in_int_val("record_adminid",-1);
tongji_ss.php:        $ret = $this->t_lesson_info->get_all_first_lesson_teacher($start_time,$end_time,$subject,$tea_subject);
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_teacher_first_test_lesson_info($teacherid_arr,-1,$record_flag,$record_adminid);
tongji_ss.php:                $item["create_time_str"] = date("Y-m-d",$item["create_time"]);
tongji_ss.php:            $item["day"] = ceil((time()-$item["create_time"])/86400);
tongji_ss.php:            $item["first_lesson_time_str"] = date("Y-m-d H:i:s",$item["first_lesson_time"]);
tongji_ss.php:                $item["add_time_str"] = date("Y-m-d H:i:s",$item["add_time"]);
tongji_ss.php:                $item["record_time"] = round(($item["add_time"]- $item["first_lesson_time"])/86400,1);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        $teacherid = $this->get_in_int_val("teacherid",-1);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_first_test_lesson_order_info_by_teacherid_new($teacherid);
tongji_ss.php:            $item["lesson_start_str"]=date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:            $rev_info = $this->t_book_revisit->get_rev_info_by_phone_adminid($phone);
tongji_ss.php:                $v["revisit_time_str"] = date("Y-m-d H:i:s",$v["revisit_time"]);
tongji_ss.php:            $aa = $this->t_course_order->get_have_order_info($item["teacherid"],$item["userid"],$item["subject"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret_info] );
tongji_ss.php:        $accept_adminid = $this->get_in_int_val("accept_adminid");
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_teacher_lecture_info->get_lecture_video_info_by_accept_adminid($start_time,$end_time,$accept_adminid);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret_info] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_teacher_lecture_info->get_lecture_video_info_by_accept_adminid($start_time,$end_time,-1);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret_info] );
tongji_ss.php:        $accept_adminid = $this->get_in_int_val("accept_adminid");
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_teacher_lecture_info->get_lecture_suc_info_by_accept_adminid($start_time,$end_time,$accept_adminid);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret_info] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_teacher_lecture_info->get_lecture_suc_info_by_accept_adminid($start_time,$end_time,-1);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret_info] );
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        $month_test_lesson_num = $this->get_in_int_val("month_test_lesson_num",22);
tongji_ss.php:        $except_test_lesson_num = $this->get_in_int_val("except_test_lesson_num",$except_test_num);
tongji_ss.php:        //$month_start = strtotime(date("Y-m-01",time()));
tongji_ss.php:        $last_month_start = strtotime(date("Y-m-01",$start_time-300));
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $all_test_lesson_info = $this->t_lesson_info->get_all_test_lesson_info_by_subject_and_grade($last_month_start,$start_time);
tongji_ss.php:            $k = $grade."-".$subject;
tongji_ss.php:        $subject_grade_arr["xxyw_per"] = round(@$subject_grade_arr["100-1"]/@$subject_grade_arr[1],2)*100;
tongji_ss.php:        $subject_grade_arr["xxsx_per"] = round(@$subject_grade_arr["100-2"]/@$subject_grade_arr[2],2)*100;
tongji_ss.php:        $subject_grade_arr["xxyy_per"] = round(@$subject_grade_arr["100-3"]/@$subject_grade_arr[3],2)*100;
tongji_ss.php:        $subject_grade_arr["xxhx_per"] = round(@$subject_grade_arr["100-4"]/@$subject_grade_arr[4],2)*100;
tongji_ss.php:        $subject_grade_arr["xxwl_per"] = round(@$subject_grade_arr["100-5"]/@$subject_grade_arr[5],2)*100;
tongji_ss.php:        $subject_grade_arr["czyw_per"] = round(@$subject_grade_arr["200-1"]/@$subject_grade_arr[1],2)*100;
tongji_ss.php:        $subject_grade_arr["czsx_per"] = round(@$subject_grade_arr["200-2"]/@$subject_grade_arr[2],2)*100;
tongji_ss.php:        $subject_grade_arr["czyy_per"] = round(@$subject_grade_arr["200-3"]/@$subject_grade_arr[3],2)*100;
tongji_ss.php:        $subject_grade_arr["czhx_per"] = round(@$subject_grade_arr["200-4"]/@$subject_grade_arr[4],2)*100;
tongji_ss.php:        $subject_grade_arr["czwl_per"] = round(@$subject_grade_arr["200-5"]/@$subject_grade_arr[5],2)*100;
tongji_ss.php:        $subject_grade_arr["gzyw_per"] = round(@$subject_grade_arr["300-1"]/@$subject_grade_arr[1],2)*100;
tongji_ss.php:        $subject_grade_arr["gzsx_per"] = round(@$subject_grade_arr["300-2"]/@$subject_grade_arr[2],2)*100;
tongji_ss.php:        $subject_grade_arr["gzyy_per"] = round(@$subject_grade_arr["300-3"]/@$subject_grade_arr[3],2)*100;
tongji_ss.php:        $subject_grade_arr["gzhx_per"] = round(@$subject_grade_arr["300-4"]/@$subject_grade_arr[4],2)*100;
tongji_ss.php:        $subject_grade_arr["gzwl_per"] = round(@$subject_grade_arr["300-5"]/@$subject_grade_arr[5],2)*100;
tongji_ss.php:        $lecture_info= $this->t_teacher_lecture_info->get_teacher_lecture_info_by_time_list_new($last_month_start,$start_time);
tongji_ss.php:        return $this->pageView(__METHOD__,null,[
tongji_ss.php:        $adminid = $this->get_in_int_val("adminid");
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $list = $this->t_teacher_lecture_info->get_interview_test_lesson_info($start_time,$end_time,$adminid);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$list] );
tongji_ss.php:         $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:         $this->t_research_teacher_rerward_list->switch_tongji_database();
tongji_ss.php:         $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:         list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:         $tea_arr  = $this->t_manager_info->get_research_teacher_list(4);
tongji_ss.php:         $list = $this->t_research_teacher_rerward_list->tongji_week_teacher_order_turn_info($start_time,$end_time);
tongji_ss.php:         $first_reward_list = $this->t_research_teacher_rerward_list->tongji_research_teacher_first_reward($start_time,$end_time);
tongji_ss.php:         $order_num_list = $this->t_teacher_lecture_info->get_research_teacher_test_lesson_info($start_time,$end_time,$tea_arr);
tongji_ss.php:             if($start_time>= strtotime(date("2017-05-01")) && $ww["order_num"]>=10){
tongji_ss.php:         $account_id = $this->get_account_id();
tongji_ss.php:         $list_subject = $this->get_admin_tea_subject_and_arr($account_id);
tongji_ss.php:         $this->set_in_value("master_flag",$master_flag);
tongji_ss.php:         $master_flag = $this->get_in_int_val("master_flag");
tongji_ss.php:                 $res = $this->t_lesson_info->get_research_test_lesson_info_list($item["subject"],$item["grade"],$start_time,$end_time);
tongji_ss.php:         $subject_order_per_list = $this->t_lesson_info->get_subject_order_list_new($start_time,$end_time);
tongji_ss.php:         $subject_order_per_list["-2"]=["order_num"=>$zh_subject_new,"subject_str"=>"综合学科","all_lesson"=>$zh_subject_lesson,"order_per"=>$zh_order_per,"subject"=>"-2"];
tongji_ss.php:         $subject_order_per_list["-3"]=[
tongji_ss.php:             "subject"    => "-3"
tongji_ss.php:         $subject_order_per_list_sub1 = $this->t_lesson_info->get_subject_order_list_new2($start_time,$end_time);
tongji_ss.php:         $subject_order_per_list_sub1["-2"]=[
tongji_ss.php:             "subject"    => "-2"
tongji_ss.php:         $subject_order_per_list_sub1["-3"]=[
tongji_ss.php:             "subject"    => "-3"
tongji_ss.php:         $subject_order_per_list_sub2 = $this->t_lesson_info->get_subject_order_list_new3($start_time,$end_time);
tongji_ss.php:         $subject_order_per_list_sub2["-2"]=[
tongji_ss.php:             "subject"     => "-2"
tongji_ss.php:         $subject_order_per_list_sub2["-3"]=[
tongji_ss.php:             "subject"    => "-3"
tongji_ss.php:         $qz_tea_arr   = $this->t_manager_info->get_research_teacher_list(5);
tongji_ss.php:         $qz_tea_list  = $this->t_lesson_info->get_qz_test_lesson_info_list($qz_tea_arr,$start_time,$end_time);
tongji_ss.php:             if($tea_subject==-3 || $tea_subject==0){
tongji_ss.php:         $qz_tea_list_kk = $this->t_lesson_info->get_qz_test_lesson_info_list2($qz_tea_arr,$start_time,$end_time);
tongji_ss.php:         $qz_tea_list_hls = $this->t_lesson_info->get_qz_test_lesson_info_list3($qz_tea_arr,$start_time,$end_time);
tongji_ss.php:         $person_kpi = $this->t_research_teacher_kpi_info->get_month_kpi_info(1,$start_time);
tongji_ss.php:         $subject_kpi = $this->t_research_teacher_kpi_info->get_month_kpi_info(2,$start_time);
tongji_ss.php:         return $this->pageView(__METHOD__,null,[
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $subject = $this->get_in_int_val("subject",-1);
tongji_ss.php:        $grade = $this->get_in_int_val("grade",-1);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $data = $this->t_lesson_info->get_research_test_lesson_info_list_by_grade($subject,$grade,$start_time,$end_time);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$data] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $list = $this->t_lesson_info->get_subject_order_list_new($start_time,$end_time);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$list] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $adminid = $this->get_in_int_val("adminid",-1);
tongji_ss.php:        $list = $this->t_research_teacher_rerward_list->tongji_research_teacher_rerward_info($start_time,$end_time,$adminid);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$list] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $adminid = $this->get_in_int_val("adminid",-1);
tongji_ss.php:        $list = $this->t_research_teacher_rerward_list->tongji_research_teacher_first_rerward_info($start_time,$end_time,$adminid);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$list] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $adminid = $this->get_in_int_val("adminid",-1);
tongji_ss.php:        $this->t_test_lesson_subject->switch_tongji_database();
tongji_ss.php:        $data= $this->t_test_lesson_subject->get_ass_kk_tongji_info_detail($start_time,$end_time,$adminid);
tongji_ss.php:            $item["time"] = date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$data] );
tongji_ss.php:        $page_num = $this->get_in_page_num();
tongji_ss.php:        //list($start_time,$end_time) = $this->get_in_date_range(-7,0);
tongji_ss.php:        list($start_time,$end_time, $opt_date_str)=$this->get_in_date_range(
tongji_ss.php:            -7,0, 1, [
tongji_ss.php:        $have_test_lesson_flag = $this->get_in_int_val("have_test_lesson_flag",-1);
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $subject = $this->get_in_int_val("subject",-1);
tongji_ss.php:        $grade_part_ex = $this->get_in_int_val("grade_part_ex",-1);
tongji_ss.php:        $train_through_new = $this->get_in_int_val("train_through_new",-1);
tongji_ss.php:        $all_teacher_info = $this->t_lesson_info->get_all_teacher_test_lesson_info($start_time,$end_time,$grade_part_ex,$subject,$train_through_new);
tongji_ss.php:        //$ret_info = $this->t_teacher_lecture_info->get_new_teacher_no_test_lesson_info($grade_part_ex,$subject,$train_through_new);
tongji_ss.php:        $all_count = $this->t_teacher_lecture_info->get_new_teacher_no_test_lesson_info_total($grade_part_ex,$subject,$train_through_new);;
tongji_ss.php:        $ret = $this->t_teacher_lecture_info->get_new_teacher_test_lesson_info($start_time,$end_time,$grade_part_ex,$subject,$train_through_new);
tongji_ss.php:        $no_lesson_count = $all_count-$have_lesson_count;
tongji_ss.php:        $ret_info = $this->t_teacher_lecture_info->get_new_teacher_no_test_lesson_info($page_num,$grade_part_ex,$subject,$train_through_new,$have_test_lesson_flag,$tea_arr);
tongji_ss.php:                $item["work_day"] = ceil((time()-$item["train_through_new_time"])/86400)."天";
tongji_ss.php:            $first_time  = $this->t_lesson_info->get_first_test_lesson_by_teacher($item["teacherid"]);
tongji_ss.php:                $item["first_time_str"] = date("Y-m-d H:i:s",$item["first_time"]);
tongji_ss.php:                $item["range_time"] = round(($item["first_time"]-$item["confirm_time"])/86400,1);
tongji_ss.php:            $item["confirm_time_str"] = date("Y-m-d H:i:s",$item["confirm_time"]);
tongji_ss.php:        $time_tongji = $this->t_teacher_lecture_info->get_new_teacher_no_test_lesson_info_tongji($grade_part_ex,$subject,$train_through_new,$have_test_lesson_flag,$tea_arr);
tongji_ss.php:                $range_time = round(($val["lesson_start"]-$val["confirm_time"])/86400,1);
tongji_ss.php:        $num_tongji = $this->t_teacher_lecture_info->get_new_teacher_no_test_lesson_info_tongji_num($grade_part_ex,$subject,$train_through_new,$have_test_lesson_flag,$tea_arr);
tongji_ss.php:                $work_day = ceil((time()-$val["train_through_new_time"])/86400)."天";
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info,[
tongji_ss.php:        $time = time()-10*86400;
tongji_ss.php:        $ret = $this->t_test_lesson_subject_sub_list->get_set_and_lesson_time($time);
tongji_ss.php:            $item["rang"] =($item["lesson_start"] - $item["set_lesson_time"])/3600;
tongji_ss.php:        $start_time = strtotime(date("2017-03-01"));
tongji_ss.php:        $ret_info = $this->t_test_lesson_subject_require->get_jw_set_lesson_time_info($start_time);
tongji_ss.php:        return $this->pageView(__METHOD__,null,["ret"=>$ret,"arr"=>$arr,"list"=>$list]);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $this->t_course_order->switch_tongji_database();
tongji_ss.php:        $subject =$this->get_in_int_val("subject",-1);
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        // $start_time = strtotime($this->get_in_str_val("start"));
tongji_ss.php:        //$end_time = strtotime($this->get_in_str_val("end")." 23:59:59");
tongji_ss.php:        $grade = $this->get_in_int_val("grade",-1);
tongji_ss.php:        $have_order = $this->get_in_int_val("have_order",-1);
tongji_ss.php:        $page_count = $this->get_in_int_val("page_count",20);
tongji_ss.php:        $page_num = $this->get_in_page_num();
tongji_ss.php:        if($grade==-1){
tongji_ss.php:            return $this->error_view(
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_test_lesson_info_by_subject_and_grade($page_num,$subject,$grade,$start_time,$end_time,$have_order,$page_count);
tongji_ss.php:            $item["lesson_start_str"]=date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:            // $res = $this->t_course_order->check_have_course_order($item["teacherid"],$item["userid"],$item["subject"]);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:            =$this->get_in_order_by_str($order_field_arr ,"account desc");
tongji_ss.php:        $show_flag = $this->get_in_int_val("show_flag",0);
tongji_ss.php:        $lesson_money = $this->get_in_int_val("lesson_money",477);
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_seller_test_lesson_info($start_time,$end_time);
tongji_ss.php:        // $order_info = $this->t_lesson_info->get_seller_test_lesson_order_info($start_time,$end_time);
tongji_ss.php:                $item["work_day"] = ceil((time()-$item["create_time"])/86400);
tongji_ss.php:            $item["all_money"]  = $item["lesson_count"]*$lesson_money+$item["order_count"]*60+($item["suc_count"]-$item["order_count"])*30;
tongji_ss.php:                $teacherid_arr = $this->t_lesson_info->get_seller_test_lesson_teacher_info($item["cur_require_adminid"],$start_time,$end_time);
tongji_ss.php:                $ret = $this->t_lesson_info->get_seller_teacher_test_lesson_info($start_time,$end_time,$teacherid_arr);
tongji_ss.php:                $item["range"] = sprintf("%.2f",$item["order_per"]-$item["tea_per"]);
tongji_ss.php:                $val["all_money"]  = $val["lesson_count"]*$lesson_money+$val["order_count"]*60+($val["suc_count"]-$val["order_count"])*30;
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        $adminid = $this->get_in_int_val("adminid");
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $data = $this->t_lesson_info->get_seller_test_lesson_order_info_new($start_time,$end_time,$adminid);
tongji_ss.php:            $item["lesson_start_str"]=date("Y-m-d H:i:s",$item["lesson_start"]);
tongji_ss.php:            // $res = $this->t_course_order->check_have_course_order($item["teacherid"],$item["userid"],$item["subject"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$data] );
tongji_ss.php:        $adminid = $this->get_in_int_val("adminid");
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $teacherid_arr = $this->t_lesson_info->get_seller_test_lesson_teacher_info($adminid,$start_time,$end_time);
tongji_ss.php:        $ret = $this->t_lesson_info->get_seller_teacher_test_lesson_info($start_time,$end_time,$teacherid_arr);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$per] );
tongji_ss.php:        $this->t_teacher_info->switch_tongji_database();
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range( 0,0,0,[],2);
tongji_ss.php:        $revisit_info = $this->t_teacher_info->get_jw_assign_teacher_info($start_time,$end_time);
tongji_ss.php:        $revisit_in_time_info = $this->t_teacher_info->get_jw_assign_teacher_time_in_info($start_time,$end_time);
tongji_ss.php:        $revisit_out_time_info = $this->t_teacher_info->get_jw_assign_teacher_time_out_info($start_time,$end_time);
tongji_ss.php:        $un_revisit_info = $this->t_teacher_info->get_jw_assign_teacher_un_revisit_info($start_time,$end_time);
tongji_ss.php:        $plan_in_info = $this->t_teacher_info->get_jw_assign_teacher_plan_in_info($start_time,$end_time);
tongji_ss.php:        $plan_out_info = $this->t_teacher_info->get_jw_assign_teacher_plan_out_info($start_time,$end_time);
tongji_ss.php:        $no_plan_info = $this->t_teacher_info->get_jw_assign_teacher_no_plan_info($start_time,$end_time);
tongji_ss.php:        $absence_info = $this->t_teacher_info->get_jw_assign_teacher_absence_info($start_time,$end_time);
tongji_ss.php:        return $this->pageView(__METHOD__ ,null, [
tongji_ss.php:        $master_adminid = $this->get_in_int_val("adminid");
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $list = $this->t_student_info->get_ass_un_revisit_info_new($master_adminid,$start_time,$end_time);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$list] );
tongji_ss.php:        $admind = $this->get_account_id();
tongji_ss.php:        $this->t_admin_group_name->switch_tongji_database();
tongji_ss.php:        /*  $ass_leader_arr = $this->t_admin_group_name->get_leader_list(1);
tongji_ss.php:            return $this->error_view(
tongji_ss.php:        /* $this->t_manager_info->switch_tongji_database();
tongji_ss.php:        $this->t_month_ass_student_info->switch_tongji_database();
tongji_ss.php:        $this->t_revisit_info->switch_tongji_database();
tongji_ss.php:        $this->t_student_info->switch_tongji_database();*/
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range( 0,0,0,[],3);
tongji_ss.php:        $last_month = strtotime(date("Y-m-01",$start_time-100));
tongji_ss.php:        $ass_list = $this->t_manager_info->get_adminid_list_by_account_role(1);
tongji_ss.php:        $user_list = $this->t_month_ass_student_info->get_ass_month_info($last_month);
tongji_ss.php:            $bef_info = $this->t_revisit_info->get_ass_revisit_info_new(-1,$start_time,$month_middle,$userid_list);
tongji_ss.php:            $aft_info = $this->t_revisit_info->get_ass_revisit_info_new(-1,$month_middle,$end_time,$userid_list);
tongji_ss.php:        $this->t_test_lesson_subject->switch_tongji_database();
tongji_ss.php:        $kk_suc            = $this->t_test_lesson_subject->get_ass_kk_tongji_info($start_time,$end_time);
tongji_ss.php:            /*$master_adminid_ass = $this->t_admin_group_user->get_master_adminid_by_adminid($kk);
tongji_ss.php:        $trans_info = $this->t_student_info->get_trans_stu_info_new($start_time,$end_time);
tongji_ss.php:        $this->t_student_info->switch_tongji_database();
tongji_ss.php:        $un_revisit_info = $this->t_student_info->get_un_revisit_stu_info($start_time,$end_time);
tongji_ss.php:        $reading_info    = $this->t_month_ass_student_info->get_ass_month_info($start_time);
tongji_ss.php:        $refunded_info   = $this->t_order_refund->get_refunded_info($start_time,$end_time,2);
tongji_ss.php:            $ret_refund = $this->t_refund_analysis->get_configid_by_orderid($refund_item['orderid']);
tongji_ss.php:                @$department = $this->t_order_refund_confirm_config->get_department_name_by_configid(@$ret_item['configid']);
tongji_ss.php:            $master_adminid_ass = $this->t_admin_group_user->get_master_adminid_by_adminid($aa,1);
tongji_ss.php:                // $points = ceil($val['refunded_num'] - ($val['refund_num_all']*0.015));
tongji_ss.php:                $val["refund_score"]=(-10*$points);
tongji_ss.php:            $val["total_score"] = $val["revisit_score"]+$val["kk_score"]+$val["trans_score"]-$val["un_revisit_score"];
tongji_ss.php:        return $this->pageView(__METHOD__ ,null, [
tongji_ss.php:        $this->set_in_value("adminid",-1);
tongji_ss.php:        return $this->tongji_ass_kpi();
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        $ass_list = $this->t_manager_info->get_adminid_list_by_account_role(1);
tongji_ss.php:        $adminid = $this->get_account_id();
tongji_ss.php:        $account_id = $this->get_in_int_val("adminid",$adminid);
tongji_ss.php:        $read_info    = $this->t_month_ass_student_info->get_ass_month_info($start_time);
tongji_ss.php:        $new_info = $this->t_student_info->get_refund_info($start_time,$end_time,0);
tongji_ss.php:        $first_revisit = $this->t_revisit_info->get_ass_first_revisit_info($start_time,$end_time);
tongji_ss.php:        $xq_revisit_first = $this->t_revisit_info->get_ass_xq_revisit_info($start_time,$month_middle);
tongji_ss.php:        $xq_revisit_second = $this->t_revisit_info->get_ass_xq_revisit_info($month_middle,$end_time);
tongji_ss.php:        $kk_succ = $this->t_course_order->get_kk_succ_info($start_time,$end_time);
tongji_ss.php:        $tran_list = $this->t_manager_info->get_all_assistant_renew_list_new($start_time,$end_time);
tongji_ss.php:            $item["revisit_num"]= $item["read_stu"]- $item["new_stu"];
tongji_ss.php:            $ass_master_adminid = $this->t_admin_group_user->get_master_adminid_by_adminid($k);
tongji_ss.php:            if($account_id==-1){
tongji_ss.php:        return $this->pageView(__METHOD__ ,null, [
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range( 0,0,0,[],3);
tongji_ss.php:        $subject = $this->get_in_int_val("subject",-1);
tongji_ss.php:        $grade   = $this->get_in_int_val("grade",-1);
tongji_ss.php:        $ret_info = $this->t_lesson_info->get_teacher_test_lesson_order_info($start_time,$end_time,$subject,$grade);
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(date('Y-m-01',time()), 0 );
tongji_ss.php:        $seller_groupid_ex    = $this->get_in_str_val('seller_groupid_ex', "");
tongji_ss.php:        $require_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        $adminid_right              = $this->get_seller_adminid_and_right();
tongji_ss.php:        // $adminid = $this->get_in_int_val("adminid",-1);
tongji_ss.php:        $ret_info = $this->t_test_lesson_subject_sub_list->get_seller_test_lesson_order_info_new($start_time,$end_time,$require_adminid_list);
tongji_ss.php:            $location=substr($item["phone_location"], 0, -6);
tongji_ss.php:        return $this->pageView(__METHOD__ ,null, [
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3 );
tongji_ss.php:        $monthtime_flag = $this->get_in_int_val("monthtime_flag",1);
tongji_ss.php:        // $adminid = $this->get_in_int_val("adminid",-1);
tongji_ss.php:        $ret_info = $this->t_test_lesson_subject_sub_list->get_seller_test_lesson_paper_order_info($start_time,$end_time);
tongji_ss.php:            $admin_info = $this->t_manager_info->get_admin_member_list();
tongji_ss.php:            $admin_info = $this->t_manager_info->get_admin_member_list_new($start_time);
tongji_ss.php:        return $this->pageView(__METHOD__ ,$ret_info);
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(date('Y-m-01',time()), 0 );
tongji_ss.php:        $change_type = $this->get_in_int_val("change_type",2);
tongji_ss.php:        $type = $this->get_in_int_val("record_type",-1);
tongji_ss.php:            $ret_info = $this->t_teacher_record_list->get_seller_require_modify_info($type,$start_time,$end_time);
tongji_ss.php:                $check_repeat = $this->t_teacher_record_list->check_is_repeat($item["add_time"],$next_time,$item["teacherid"]);
tongji_ss.php:                    $lesson_info = $this->t_lesson_info->get_tea_test_lesson_detail_info($item["teacherid"],$item["add_time"]);
tongji_ss.php:                            $ret = $this->t_order_info->check_is_have_order($lessonid);
tongji_ss.php:            $ret_info = $this->t_test_lesson_subject_sub_list->get_seller_limit_require_info($start_time,$end_time);
tongji_ss.php:                $item["add_time_str"] = date("Y-m-d H:i:s",$item["limit_accept_time"]);
tongji_ss.php:        return $this->pageView(__METHOD__ ,$ret_info, [
tongji_ss.php:        $end_time = time()-10*86400;
tongji_ss.php:        $start_time = time()-90*86400;
tongji_ss.php:        $ret = $this->t_teacher_lecture_info->get_lecture_teacher_test_lesson_info($start_time,$end_time);
tongji_ss.php:            $num = ($val['confirm_time']-$val["add_time"])/86400;
tongji_ss.php:            =$this->get_in_order_by_str($order_field_arr,"realname desc");
tongji_ss.php:        $adminid      = $this->get_account_id();
tongji_ss.php:        $right_list = $this->get_tea_subject_and_right_by_adminid($adminid);
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(date('Y-m-01',time()), 0 );
tongji_ss.php:        $subject = $this->get_in_int_val("subject",-1);
tongji_ss.php:        $ret_info = $this->t_test_lesson_subject_sub_list->get_teacher_test_lesson_paper_order_info($start_time,$end_time,$subject,$tea_subject,$qz_flag);
tongji_ss.php:        return $this->pageView(__METHOD__ ,$ret_info);
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(date('Y-m-01',time()), 0 );
tongji_ss.php:        $adminid      = $this->get_account_id();
tongji_ss.php:        $right_list = $this->get_tea_subject_and_right_by_adminid($adminid);
tongji_ss.php:        $ret_info = $this->t_test_lesson_subject_sub_list->get_homework_and_work_status_info($start_time,$end_time,$tea_subject,$qz_flag);
tongji_ss.php:        return $this->pageView(__METHOD__ ,$ret_info);
tongji_ss.php:        $accept_adminid = $this->get_account_id();
tongji_ss.php:            $accept_adminid=-1;
tongji_ss.php:        $ret= $this->t_test_lesson_subject_require->get_jw_no_plan_time_list($accept_adminid);
tongji_ss.php:        return $this->pageView(__METHOD__ ,null,["list"=>$ret]);
tongji_ss.php:         list($start_time,$end_time) = $this->get_in_date_range(date('Y-m-01',time()), 0 );
tongji_ss.php:         $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:         $list = $this->t_lesson_info->get_test_lesson_order_per_subject($start_time,$end_time);
tongji_ss.php:         $ret_info = $this->t_teacher_record_list->get_seller_require_modify_info(-1,$start_time,$end_time);
tongji_ss.php:             $check_repeat = $this->t_teacher_record_list->check_is_repeat($i["add_time"],$next_time,$i["teacherid"]);
tongji_ss.php:                 $lesson_info = $this->t_lesson_info->get_tea_test_lesson_detail_info($i["teacherid"],$i["add_time"]);
tongji_ss.php:                         $ret = $this->t_order_info->check_is_have_order($lessonid);
tongji_ss.php:             $v["no_cc_lesson_count"] = $v["lesson_count"]- @$all[$k]["lesson_count"];
tongji_ss.php:             $v["no_cc_order_count"] = $v["order_count"] - @$all[$k]["order_count"];
tongji_ss.php:         return $this->pageView(__METHOD__ ,$list_info);
tongji_ss.php:        $this->t_test_lesson_subject->switch_tongji_database();
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(date('Y-m-01',time()), 0 );
tongji_ss.php:        // $start_time = strtotime(date("2017-01-05"));
tongji_ss.php:        // $end_time = strtotime(date("2017-05-01"));
tongji_ss.php:        $ret = $this->t_test_lesson_subject->get_ass_change_teacher_tongji_info($start_time,$end_time);
tongji_ss.php:        return $this->pageView(__METHOD__ ,null,[
tongji_ss.php:        $teacherid = $this->get_in_int_val("teacherid");
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $list = $this->t_test_lesson_subject->get_ass_change_teacher_tongji_info($start_time,$end_time,$teacherid);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$list] );
tongji_ss.php:        $adminid = $this->get_in_int_val("adminid");
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $list = $this->t_test_lesson_subject->get_ass_change_teacher_tongji_info($start_time,$end_time,-1,$adminid);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$list] );
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_manager_info-> get_adminid_list_by_account_role(4);
tongji_ss.php:        $interview_info=$this->t_teacher_lecture_info->get_interview_info_by_account($start_time,$end_time);
tongji_ss.php:        $order_info = $this->t_teacher_lecture_info->get_research_teacher_test_lesson_info_account($start_time,$end_time);
tongji_ss.php:        // $order_info = $this->t_teacher_lecture_info->get_interview_lesson_order_info($start_time,$end_time);
tongji_ss.php:        $first_info = $this->t_lesson_info->get_interview_teacher_first_lesson_info($start_time,$end_time);
tongji_ss.php:        $tea_list = $this->t_lesson_info->get_all_first_lesson_teacher_list($start_time,$end_time);
tongji_ss.php:        $record_list = $this->t_teacher_record_list->get_teacher_record_num_list_account($start_time,$end_time);
tongji_ss.php:                @$record_info[$val["uid"]]["record_time"] +=$val["add_time"] - $val["lesson_start"];
tongji_ss.php:        $lesson_info = $this->t_lesson_info->get_teacher_arr_lesson_order_info($start_time,$end_time,$tea_arr);
tongji_ss.php:        $first_lesson_info = $this->t_lesson_info->get_teacher_arr_first_lesson_order_info($start_time,$end_time,$tea_arr);
tongji_ss.php:        $other_record_info  = $this->t_seller_and_ass_record_list->get_seller_and_ass_record_by_account($start_time,$end_time);
tongji_ss.php:            $subject_and_grade_arr = $this->get_tea_subject_and_grade_by_adminid_new($k);
tongji_ss.php:            $test_person_num= $this->t_lesson_info->get_test_person_num_list_by_subject_grade( $start_time,$end_time,$subject_arr,$grade_arr);
tongji_ss.php:            $test_person_num_other= $this->t_lesson_info->get_test_person_num_list_subject_grade_other( $start_time,$end_time,$subject_arr,$grade_arr);
tongji_ss.php:            $kk_test_person_num= $this->t_lesson_info->get_kk_teacher_test_person_subject_grade_list( $start_time,$end_time,$subject_arr,$grade_arr);
tongji_ss.php:            $change_test_person_num= $this->t_lesson_info->get_change_teacher_test_person_subject_grade_list( $start_time,$end_time,$subject_arr,$grade_arr);
tongji_ss.php:        $test_person_num_all= $this->t_lesson_info->get_test_person_num_list_by_subject_grade( $start_time,$end_time);
tongji_ss.php:        $test_person_num_other_all= $this->t_lesson_info->get_test_person_num_list_subject_grade_other( $start_time,$end_time);
tongji_ss.php:        $kk_test_person_num_all= $this->t_lesson_info->get_kk_teacher_test_person_subject_grade_list( $start_time,$end_time);
tongji_ss.php:        $change_test_person_num_all= $this->t_lesson_info->get_change_teacher_test_person_subject_grade_list( $start_time,$end_time);
tongji_ss.php:            $v["add_per"] =  round($v["next_per"]-$v["first_next_per"],2);
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $this->t_lesson_info->switch_tongji_database();
tongji_ss.php:        $interview_info=$this->t_teacher_lecture_info->get_interview_info_by_subject($start_time,$end_time);
tongji_ss.php:        $order_info = $this->t_teacher_lecture_info->get_research_teacher_test_lesson_info_subject($start_time,$end_time);
tongji_ss.php:        // $order_info = $this->t_teacher_lecture_info->get_interview_lesson_order_info_subject($start_time,$end_time);
tongji_ss.php:        $first_info = $this->t_lesson_info->get_interview_teacher_first_lesson_info_subject($start_time,$end_time);
tongji_ss.php:        $tea_list = $this->t_lesson_info->get_all_first_lesson_teacher_list($start_time,$end_time);
tongji_ss.php:        $record_list = $this->t_teacher_record_list->get_teacher_record_num_list_subject($start_time,$end_time);
tongji_ss.php:                @$record_info[$val["subject"]]["record_time"] +=$val["add_time"] - $val["lesson_start"];
tongji_ss.php:        $lesson_info = $this->t_lesson_info->get_teacher_arr_lesson_order_info_subject($start_time,$end_time,$tea_arr);
tongji_ss.php:        $first_lesson_info = $this->t_lesson_info->get_teacher_arr_first_lesson_order_info_subject($start_time,$end_time,$tea_arr);
tongji_ss.php:        $other_record_info  = $this->t_seller_and_ass_record_list->get_seller_and_ass_record_by_subject($start_time,$end_time);
tongji_ss.php:        $test_person_num= $this->t_lesson_info->get_test_person_num_list_by_subject( $start_time,$end_time);
tongji_ss.php:        $test_person_num_other= $this->t_lesson_info->get_test_person_num_list_subject_other( $start_time,$end_time);
tongji_ss.php:        $kk_test_person_num= $this->t_lesson_info->get_kk_teacher_test_person_subject_list( $start_time,$end_time);
tongji_ss.php:        $change_test_person_num= $this->t_lesson_info->get_change_teacher_test_person_subject_list( $start_time,$end_time);
tongji_ss.php:        $test_person_num_all= $this->t_lesson_info->get_test_person_num_list_by_subject_grade( $start_time,$end_time);
tongji_ss.php:        $test_person_num_other_all= $this->t_lesson_info->get_test_person_num_list_subject_grade_other( $start_time,$end_time);
tongji_ss.php:        $kk_test_person_num_all= $this->t_lesson_info->get_kk_teacher_test_person_subject_grade_list( $start_time,$end_time);
tongji_ss.php:        $change_test_person_num_all= $this->t_lesson_info->get_change_teacher_test_person_subject_grade_list( $start_time,$end_time);
tongji_ss.php:            $v["add_per"] =  round($v["next_per"]-$v["first_next_per"],2);
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        $last_time = strtotime(date("Y-m-01",$start_time-100));
tongji_ss.php:        $type_flag = $this->get_in_int_val("type_flag",1);
tongji_ss.php:        $person_kpi = $this->t_research_teacher_kpi_info->get_month_kpi_info(1,$start_time);
tongji_ss.php:        $subject_kpi = $this->t_research_teacher_kpi_info->get_month_kpi_info(2,$start_time);
tongji_ss.php:        $one_subject_kpi = $this->t_research_teacher_kpi_info->get_month_kpi_info(2,$start_time,1);
tongji_ss.php:        $ret_info = $this->t_research_teacher_kpi_info->get_month_info($type_flag,$start_time);
tongji_ss.php:        $last_info = $this->t_research_teacher_kpi_info->get_month_info($type_flag,$last_time);
tongji_ss.php:        return $this->pageView(__METHOD__ ,$ret_info,[
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        $last_time = strtotime(date("Y-m-01",$start_time-100));
tongji_ss.php:        $type_flag = $this->get_in_int_val("type_flag",1);
tongji_ss.php:        $research_num= $this->t_manager_info->get_adminid_num_by_account_role(4);
tongji_ss.php:            $ret_info = $this->get_interview_info_by_time($start_time,$end_time);
tongji_ss.php:            $last_info = $this->get_interview_info_by_time($last_time,$start_time);
tongji_ss.php:                $vv["interview_per_range"] = $vv["interview_per"]- $interview_per_standard;
tongji_ss.php:                $vv["first_per_range"] = $vv["first_per"]- $first_per_standard;
tongji_ss.php:                $vv["lesson_per_range"] = $vv["lesson_per"]- $lesson_per_standard;
tongji_ss.php:                $vv["lesson_per_other_range"] = $vv["lesson_per_other"]- $lesson_per_other_standard;
tongji_ss.php:                $vv["lesson_per_kk_range"] = $vv["lesson_per_kk"]- $lesson_per_kk_standard;
tongji_ss.php:                $vv["lesson_per_change_range"] = $vv["lesson_per_change"]- $lesson_per_change_standard;
tongji_ss.php:            $ret_info = $this->get_interview_info_by_time_new($start_time,$end_time);
tongji_ss.php:            $last_info = $this->get_interview_info_by_time_new($last_time,$start_time);
tongji_ss.php:                $vv["interview_per_range"] = $vv["interview_per"]- $interview_per_standard;
tongji_ss.php:                $vv["first_per_range"] = $vv["first_per"]- $first_per_standard;
tongji_ss.php:                $vv["lesson_per_range"] = $vv["lesson_per"]- $lesson_per_standard;
tongji_ss.php:                $vv["lesson_per_other_range"] = $vv["lesson_per_other"]- $lesson_per_other_standard;
tongji_ss.php:                $vv["lesson_per_kk_range"] = $vv["lesson_per_kk"]- $lesson_per_kk_standard;
tongji_ss.php:                $vv["lesson_per_change_range"] = $vv["lesson_per_change"]- $lesson_per_change_standard;
tongji_ss.php:        return $this->pageView(__METHOD__ ,$ret_info,[
tongji_ss.php:        list($start_time,$end_time )=$this->get_in_date_range_month( 0 );
tongji_ss.php:        $origin_level= $this->get_in_el_origin_level();
tongji_ss.php:        $origin_ex= $this->get_in_str_val("origin_ex");
tongji_ss.php:        $this->t_seller_student_origin->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_seller_student_origin->get_origin_tongji_info_single( $field_name,$opt_date_str ,$start_time,$end_time,"",$origin_ex, $origin_level );
tongji_ss.php:            $item["valid_count"] = $item["all_count"] -$item["tq_no_call_count"]
tongji_ss.php:                                 -$item["tq_call_fail_count"]
tongji_ss.php:                                 -$item["tq_call_succ_invalid_count"]  ;
tongji_ss.php:            $ret_info["list"]= $this->gen_origin_data($ret_info["list"],[], $origin_ex);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        $this->set_in_value("origin_ex",  $origin_ex );
tongji_ss.php:        return $this->origin_publish_list();
tongji_ss.php:        $this->set_in_value("origin_ex",  $origin_ex );
tongji_ss.php:        $acc_id = $this->get_account_id();
tongji_ss.php:        $tmk_not_accept = [287,364,491,501,535,697];//tmk中除 maggie 和 long-张龙 其他人不得查看
tongji_ss.php:            return $this->error_view(
tongji_ss.php:        return $this->origin_publish_list();
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range_month(0);
tongji_ss.php:        $teacherid          = $this->get_in_int_val("teacherid",-1);
tongji_ss.php:        $teacher_money_type = $this->get_in_int_val("teacher_money_type",-1);
tongji_ss.php:        $subject            = $this->get_in_int_val("subject",-1);
tongji_ss.php:        $list = $this->t_lesson_info->get_teacher_trial_count($start_time,$end_time,$teacherid,$teacher_money_type,$subject);
tongji_ss.php:        return $this->pageView(__METHOD__,$list);
tongji_ss.php:        $start_time = strtotime(date("2017-01-05"));
tongji_ss.php:        $ret = $this->t_teacher_lecture_info->get_new_teacher_test_lesson_info($start_time,$end_time);
tongji_ss.php:        $ret_info = $this->t_teacher_lecture_info->get_new_teacher_no_test_lesson_info_wx($tea_arr);
tongji_ss.php:            $this->t_teacher_info->field_update_list($val["teacherid"],["have_test_lesson_flag"=>0]);
tongji_ss.php:        $time = strtotime(date("2017-01-05"));
tongji_ss.php:        $this->t_teacher_lecture_info->switch_tongji_database();
tongji_ss.php:        $this->t_teacher_lecture_appointment_info->switch_tongji_database();
tongji_ss.php:        // $this->t_lesson_info_b2->switch_tongji_database();
tongji_ss.php:        $this->t_teacher_info->switch_tongji_database();
tongji_ss.php:        $ret = $this->t_teacher_lecture_appointment_info->tongji_teacher_appoinment_lecture_info($time);
tongji_ss.php:        $tea_arr = $this->t_teacher_lecture_appointment_info->get_train_through_tea($time);
tongji_ss.php:        $first_lesson_list = $this->t_lesson_info_b2->get_lesson_tea_num_new($tea_arr,1);
tongji_ss.php:        $fifth_lesson_list = $this->t_lesson_info_b2->get_lesson_tea_num_new($tea_arr,5);
tongji_ss.php:        $app_time = $this->t_teacher_lecture_appointment_info->get_teacher_lecture_time($time);
tongji_ss.php:        $lec_time = $this->t_teacher_lecture_info->get_tea_pass_time($time);
tongji_ss.php:        $tran_time = $this->t_teacher_lecture_info->get_tea_tran_pass_time($time);
tongji_ss.php:        $first_time =  $this->t_teacher_lecture_info->get_new_teacher_first_lesson_time($time);
tongji_ss.php:        $first_time_avg =  round(($first_time["lesson_time"] - $first_time["confirm_time"])/86400,1);
tongji_ss.php:        $fifth_time =  $this->t_teacher_lecture_info->get_new_teacher_fifth_lesson_time($time);
tongji_ss.php:        $fifth_time_avg =  round(($fifth_time["lesson_time"] - $fifth_time["confirm_time"])/86400,1);
tongji_ss.php:        $tea_limit_info  = $this->t_teacher_info->get_freeze_and_limit_tea_info();
tongji_ss.php:        return $this->pageView(__METHOD__,null,[
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range_week(0);
tongji_ss.php:        $origin            = trim($this->get_in_str_val("origin",""));
tongji_ss.php:        $origin_ex         = $this->get_in_str_val('origin_ex', "");
tongji_ss.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex', "");
tongji_ss.php:        $adminid_list      = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
tongji_ss.php:        $admin_revisiterid = $this->get_in_int_val("admin_revisiterid", -1);
tongji_ss.php:        $groupid           = $this->get_in_int_val("groupid",-1);
tongji_ss.php:        $tmk_adminid       = $this->get_account_id();
tongji_ss.php:        $origin_level      = $this->get_in_el_origin_level();
tongji_ss.php:        $wx_invaild_flag  = $this->get_in_e_boolean(-1,"wx_invaild_flag");
tongji_ss.php:            $tmk_adminid = -1;
tongji_ss.php:        list($start_time,$end_time ,$opt_date_str)=$this->get_in_date_range_month( date("Y-m-01"), 0, [
tongji_ss.php:        $new_user_info=$this->t_test_lesson_subject->get_seller_new_user_count( $start_time, $end_time ,-1,"", $origin_level ,-1,$wx_invaild_flag);
tongji_ss.php:        $ret_info = $this->t_seller_student_origin->get_tmk_tongji_info($field_name,$opt_date_str ,$start_time,$end_time,$origin,$origin_ex,"",$adminid_list, $tmk_adminid,$origin_level,$wx_invaild_flag);
tongji_ss.php:        $tmk_lesson_num = $this->t_test_lesson_subject_require->get_tmk_lesson_count($field_name,$start_time,$end_time,$tmk_adminid,$origin_level,$wx_invaild_flag);
tongji_ss.php:        $order_list= $this->t_order_info->tongji_tmk_order_count_origin( $field_name,$start_time,$end_time,$adminid_list,$tmk_adminid,$origin_ex,$origin_level,$wx_invaild_flag);
tongji_ss.php:                    $item["title"]= $this->cache_get_account_nick( $item["check_value"] );
tongji_ss.php:            \App\Helper\Utils::logger( "new_count:". $item["check_value"]."-" . $item["new_user_count"] );
tongji_ss.php:            $ret_info["list"]= $this->gen_origin_data($ret_info["list"],[], $origin_ex);
tongji_ss.php:        $group_list = $this->t_admin_group_name->get_group_list(2);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info,[
tongji_ss.php:        $end_time = strtotime(date("Y-m-01",time()));
tongji_ss.php:        $start_time = strtotime(date("Y-m-01",$end_time-100));
tongji_ss.php:        $ret_info= $this->t_order_info->get_1v1_order_seller_list($start_time,$end_time, [-1],"" );
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        $tmk_adminid    = $this->get_in_int_val('adminid');
tongji_ss.php:        $start_time     = strtotime($this->get_in_str_val('start_time'));
tongji_ss.php:        $end_time       = strtotime($this->get_in_str_val('end_time'));
tongji_ss.php:        $page_num       = $this->get_in_page_num();
tongji_ss.php:        $this->t_order_info->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_order_info->get_tmk_order_by_adminid( $start_time,$end_time,$tmk_adminid,$page_num );
tongji_ss.php:            $tmk_item['cc_nick']         = $this->cache_get_account_nick($tmk_item['check_value']);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        $week_info = $this->t_ass_weekly_info->get_all_info($start_time,2);
tongji_ss.php:        $last_month = strtotime(date('Y-m-01',$start_time-100));
tongji_ss.php:        $ass_last_month = $this->t_month_ass_student_info->get_ass_month_info($last_month);
tongji_ss.php:        $lesson_target     = $this->t_ass_group_target->get_rate_target($start_time);
tongji_ss.php:        $assistant_renew_list = $this->t_manager_info->get_all_assistant_renew_list_new($start_time,$end_time);
tongji_ss.php:        $tran_require_info = $this->t_test_lesson_subject_sub_list->get_tran_require_info($start_time,$end_time);
tongji_ss.php:        $kk_require_info = $this->t_test_lesson_subject_sub_list->get_kk_require_info($start_time,$end_time);
tongji_ss.php:        $ass_list = $this->t_manager_info->get_adminid_list_by_account_role(1);
tongji_ss.php:        $account_id = $this->get_in_int_val("adminid",-1);
tongji_ss.php:            $item["kk_other"] =  $item["kk_lesson"]-$item["kk_succ"] - $item["kk_fail"];
tongji_ss.php:            $ass_master_adminid = $this->t_admin_group_user->get_master_adminid_by_adminid($k);
tongji_ss.php:            if($account_id==-1){
tongji_ss.php:        return $this->pageView(__METHOD__,null,["list"=>$arr]);
tongji_ss.php:        $adminid = $this->get_account_id();
tongji_ss.php:        $this->set_in_value("adminid",$adminid);
tongji_ss.php:        return $this-> ass_weekly_info_master();
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],2);
tongji_ss.php:        $week_info = $this->t_ass_weekly_info->get_all_info($start_time);
tongji_ss.php:        $month_start = strtotime(date("Y-m-01",$start_time));
tongji_ss.php:        $lesson_target     = $this->t_ass_group_target->get_rate_target($month_start)/4;
tongji_ss.php:        $assistant_renew_list = $this->t_manager_info->get_all_assistant_renew_list_new($start_time,$end_time);
tongji_ss.php:        $tran_require_info = $this->t_test_lesson_subject_sub_list->get_tran_require_info($start_time,$end_time);
tongji_ss.php:        $kk_require_info = $this->t_test_lesson_subject_sub_list->get_kk_require_info($start_time,$end_time);
tongji_ss.php:        $ass_list = $this->t_manager_info->get_adminid_list_by_account_role(1);
tongji_ss.php:        $new_info = $this->t_student_info->get_refund_info($start_time,$end_time,0);
tongji_ss.php:        $end_info = $this->t_student_info->get_end_class_stu_info($start_time,$end_time);
tongji_ss.php:        $account_id = $this->get_in_int_val("adminid",-1);
tongji_ss.php:            $assistant_renew_list_plan = $this->t_manager_info->get_all_assistant_renew_list_new($start_time,$end_time,$userid_list,$k);
tongji_ss.php:            $item["renw_num_other"] = $item["renw_num"]-$item["renw_num_plan"];
tongji_ss.php:            $item["kk_other"] =  $item["kk_lesson"]-$item["kk_succ"] - $item["kk_fail"];
tongji_ss.php:            $ass_master_adminid = $this->t_admin_group_user->get_master_adminid_by_adminid($k);
tongji_ss.php:            if($account_id==-1){
tongji_ss.php:        return $this->pageView(__METHOD__,null,["list"=>$arr]);
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $ret = $this->t_order_refund->get_ass_refund_detail_info($start_time,$end_time);
tongji_ss.php:            $item["sys_operator"] = $this->t_manager_info->get_account($item["refund_userid"]);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $ret = $this->t_student_info->get_end_lesson_stu_list($start_time,$end_time);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $ret= $this->t_test_lesson_subject_sub_list->get_kk_require_detail_info($start_time,$end_time);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        $ret = $this->t_test_lesson_subject_sub_list->get_tran_require_detail_info($start_time,$end_time);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret] );
tongji_ss.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
tongji_ss.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
tongji_ss.php:        /*list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],2);
tongji_ss.php:        $start_time = $start_time-21*86400;
tongji_ss.php:        $end_time = $end_time-21*86400;*/
tongji_ss.php:        $week_info = $this->t_ass_weekly_info->get_all_info($start_time);
tongji_ss.php:        $ret = $this->t_student_info->get_stu_renw_info($start_time,$end_time,$userid_list);
tongji_ss.php:                $status = $this->t_month_ass_warning_student_info->get_ass_renw_flag_master_by_userid($item["userid"],$start_time,1);
tongji_ss.php:        return  $this->output_succ( [ "data" =>$ret] );
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],3);
tongji_ss.php:        $fulltime_teacher_type = $this->get_in_int_val("fulltime_teacher_type", -1);
tongji_ss.php:        // $start_time = time()-30*86400;
tongji_ss.php:        // $d = date("m",$end_time-100)- date("m",$start_time+100)+1;
tongji_ss.php:        $n = ($end_time - $start_time)/86400/31;
tongji_ss.php:        $d = ($end_time - $start_time)/86400;
tongji_ss.php:        $ret_info  = $this->t_manager_info->get_research_teacher_list_new(5,$fulltime_teacher_type);
tongji_ss.php:        $qz_tea_list  = $this->t_lesson_info->get_qz_test_lesson_info_list($qz_tea_arr,$start_time,$end_time);
tongji_ss.php:        $qz_tea_list_kk = $this->t_lesson_info->get_qz_test_lesson_info_list2($qz_tea_arr,$start_time,$end_time);
tongji_ss.php:        $qz_tea_list_hls = $this->t_lesson_info->get_qz_test_lesson_info_list3($qz_tea_arr,$start_time,$end_time);
tongji_ss.php:        $normal_stu_num = $this->t_lesson_info_b2->get_tea_stu_num_list($qz_tea_arr,$week_start,$week_end);
tongji_ss.php:        // $normal_stu_num = $this->t_week_regular_course->get_tea_stu_num_list($qz_tea_arr);
tongji_ss.php:        $lesson_count = $this->t_lesson_info_b2->get_teacher_lesson_count_list($start_time,$end_time,$qz_tea_arr);
tongji_ss.php:        $teacher_lesson_count_total        = $this->t_lesson_info->get_teacher_lesson_count_total(time(),$date["edate"],$qz_tea_arr,1);
tongji_ss.php:            $grade = $this->t_teacher_info->get_grade_part_ex($val["teacherid"]);
tongji_ss.php:                $s = $this->t_week_regular_course->get_tea_stu_grade_list($val["teacherid"],1);
tongji_ss.php:                $m = $this->t_week_regular_course->get_tea_stu_grade_list($val["teacherid"],2);
tongji_ss.php:                $s = $this->t_week_regular_course->get_tea_stu_grade_list($val["teacherid"],2);
tongji_ss.php:                $m = $this->t_week_regular_course->get_tea_stu_grade_list($val["teacherid"],3);
tongji_ss.php:        return $this->pageView(__METHOD__,null,["ret_info"=>$ret_info,"list"=>$list]);
tongji_ss.php:        list($start_time,$end_time )=$this->get_in_date_range_month( 0 );
tongji_ss.php:        // $origin_ex= $this->get_in_str_val("origin_ex");
tongji_ss.php:        $this->t_seller_student_origin->switch_tongji_database();
tongji_ss.php:        $ret_info = $this->t_seller_student_origin->get_origin_tongji_info_vaild( $field_name,$opt_date_str ,$start_time,$end_time,"",$origin_ex,"");
tongji_ss.php:            $ret_info["list"]= $this->gen_origin_data($ret_info["list"],[], $origin_ex);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tongji_ss.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,[],1);
tongji_ss.php:        $list = $this->t_teacher_lecture_appointment_info->tongji_zs_reference_info($start_time,$end_time);
tongji_ss.php:        return $this->pageView(__METHOD__,$list);
tongji_ss.php:        $this->switch_tongji_database();
tongji_ss.php:        $start_time = strtotime("2017-06-18");
tongji_ss.php:        $end_time = strtotime("2017-08-01");
tongji_ss.php:        $ret= $this->t_lesson_info_b2->tongji_1v1_lesson_time($start_time,$end_time);
tongji_ss.php:        return $this->pageView(__METHOD__,$ret_info);
tq.php:        $phone           = $this->get_in_phone();
tq.php:            return $this->error_view(["没有电话"]);
tq.php:            return $this->get_list();
tq.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],1);
tq.php:        $phone           = $this->get_in_phone();
tq.php:        $is_called_phone = $this->get_in_int_val("is_called_phone",-1, E\Eboolean::class );
tq.php:        $uid             = $this->get_in_int_val("uid",-1);
tq.php:        $page_num        = $this->get_in_page_num();
tq.php:        $seller_student_status  = $this->get_in_el_seller_student_status();
tq.php:        $ret_info=$this->t_tq_call_info->get_call_phone_list($page_num,$start_time,$end_time,$uid,$is_called_phone,$phone, $seller_student_status );
tq.php:            if ($now-$item["start_time"] >1*86400 && (preg_match("/saas.yxjcloud.com/", $item["record_url"] )|| preg_match("/121.196.236.95/", $item["record_url"] ) ) ){
tq.php:        return $this->pageView(__METHOD__,$ret_info);
tq.php:        $this->set_in_value("callerid", $this->get_account_id() );
tq.php:        return $this->tongji_list();
tq.php:        $this->set_in_value("account_role", E\Eaccount_role::V_1 );
tq.php:        return $this->tongji_list();
tq.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],1);
tq.php:        $this->t_tq_call_info->switch_tongji_database();
tq.php:        $callerid   = $this->get_in_int_val("callerid", -1);
tq.php:        $account_role=$this->get_in_e_account_role(-1);
tq.php:        $list=$this->t_tq_call_info->tongi_list($start_time,$end_time, $account_role, $callerid);
tq.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($list) );
train_teacher.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,1);
train_teacher.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
train_teacher.php:        $lesson_status   = $this->get_in_int_val("lesson_status",-1);
train_teacher.php:        $lesson_type     = $this->get_in_int_val("lesson_type",1100);
train_teacher.php:        $lessonid        = $this->get_in_int_val("lessonid",-1);
train_teacher.php:        $lesson_sub_type = $this->get_in_int_val("lesson_sub_type",-1);
train_teacher.php:        $train_type      = $this->get_in_int_val("train_type",-1);
train_teacher.php:        $acc             = $this->get_account();
train_teacher.php:        $page_num        = $this->get_in_page_num();
train_teacher.php:        $this->t_lesson_info->switch_tongji_database();
train_teacher.php:        $ret_info = $this->t_lesson_info->get_train_lesson(
train_teacher.php:        return $this->pageView(__METHOD__,$ret_info,[
upload_tmk.php:        list($start_time,$end_time)= $this->get_in_date_range(-180,1);
upload_tmk.php:        $page_info= $this->get_in_page_info();
upload_tmk.php:        $ret_info=$this->t_upload_info->get_list($page_info,-1,$start_time,$end_time);
upload_tmk.php:            $this->cache_set_item_account_nick($item,"upload_adminid","upload_admin_nick");
upload_tmk.php:        return $this->pageView(__METHOD__,$ret_info);
upload_tmk.php:        $postid= $this->get_in_int_val("postid");
upload_tmk.php:            return $this->error_view(["请在[批次列表]中点击明细按钮"]);
upload_tmk.php:        $is_new_flag= $this->get_in_e_boolean(-1,"is_new_flag");
upload_tmk.php:        $ret_info=$this->t_upload_student_info->get_list($postid,$is_new_flag); //
upload_tmk.php:        return $this->pageView(__METHOD__,$ret_info);
upload_tmk.php:        $postid=$this->get_in_postid();
upload_tmk.php:        if ($file->isValid()) {
upload_tmk.php:            $realPath = $file -> getRealPath();
upload_tmk.php:            $this->upload_from_xls_data($postid, $realPath);
upload_tmk.php:        $objPHPExcel = $objReader->load($obj_file);
upload_tmk.php:        $objPHPExcel->setActiveSheetIndex(0);
upload_tmk.php:        $arr=$objPHPExcel->getActiveSheet()->toArray();
upload_tmk.php:                if ( $this->t_seller_student_new->get_userid_by_phone($phone) )  {
upload_tmk.php:                    $this->t_upload_student_info->row_insert([
upload_tmk.php:                    //$this->t_upload_student_info.
upload_tmk.php:        return $this->get_in_int_val("postid",$def_value);
upload_tmk.php:        $postid= $this->get_in_postid();
upload_tmk.php:        $ret_info=$this->t_upload_student_info->get_list($postid);
upload_tmk.php:            return $this->output_err("有数据,不能删除");
upload_tmk.php:        $this->t_upload_info->row_delete($postid);
upload_tmk.php:        return $this->output_succ();
upload_tmk.php:        $desc= $this->get_in_str_val("desc");
upload_tmk.php:        $this->t_upload_info->row_insert([
upload_tmk.php:            'upload_adminid' => $this->get_account_id(),
upload_tmk.php:        return $this->output_succ();
upload_tmk.php:        $postid=$this->get_in_postid();
upload_tmk.php:        $this->t_upload_student_info->row_delete($postid);
upload_tmk.php:        return $this->output_succ();
upload_tmk.php:        $postid = $this->get_in_postid();
upload_tmk.php:        $ret_info=$this->t_upload_student_info->get_list($postid,1);
upload_tmk.php:            $this->t_seller_student_new->book_free_lesson_new( $item['name'],$item['phone'],$item['grade'], $item['origin'], $item['subject'], $item['has_pad'] , $item['user_desc'] );
upload_tmk.php:        $this->t_upload_info->field_update_list($postid,[
user_book.php:        $g_request->offsetSet("register_flag",1);
user_book.php:        return $this->get_booked_user();
user_book.php:        //$g_request->register_flag=1;
user_book.php:        $g_request->offsetSet("register_flag",-1);
user_book.php:        return $this->get_booked_user();
user_book.php:        $start_date = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-3*86400 ));
user_book.php:        $end_date   = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
user_book.php:        $phone      = trim($this->get_in_str_val('phone',''));
user_book.php:        $page_num   = $this->get_in_page_num();
user_book.php:        $ret_info   = $this->t_book_info->get_tea_schedule($start_date_s,$end_date_s,$phone,$page_num);
user_book.php:            $item['book_time'] = date("Y-m-d H:i:s",$item['book_time']);
user_book.php:                $item['book_time_next'] = date("Y-m-d",$item['book_time_next']);
user_book.php:            $ret_lesson=$this->t_lesson_info->get_lesson_info_by_userid($item['userid']);
user_book.php:            $item['order_time']=$ret_lesson==0?'未排试听课':date('Y-m-d H:i:s',$ret_lesson['lesson_start']);
user_book.php:                $item['tea_nick']=$this->t_teacher_info->get_nick($ret_lesson['teacherid']);
user_book.php:        return $this->Pageview(__METHOD__,$ret_info);
user_book.php:        $register_flag = $this->get_in_int_val('register_flag',0);
user_book.php:        $class_time    = $this->get_in_int_val('class_time',-1);
user_book.php:        $type              = $this->get_in_int_val('type',1);
user_book.php:        $start_date        = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-3*86400 ));
user_book.php:        $end_date          = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
user_book.php:        $grade             = $this->get_in_int_val('grade',-1);
user_book.php:        $status            = $this->get_in_int_val('status',-1);
user_book.php:        $trial_type        = $this->get_in_int_val('trial_type',-1);
user_book.php:        $page_num          = $this->get_in_page_num();
user_book.php:        $sys_operator_type = $this->get_in_int_val("sys_operator_type");
user_book.php:        $book_user    = trim($this->get_in_str_val('book_user', ''));
user_book.php:        $book_origin  = trim($this->get_in_str_val('book_origin', ''));
user_book.php:        $ret_info = $this->t_book_info->get_booked_user($register_flag,$class_time,$type,$start_date_s,$end_date_s,
user_book.php:                                                        $sys_operator_type,$this->get_account());
user_book.php:            $item['book_time'] = date("Y-m-d H:i:s",$item['book_time']);
user_book.php:                $item['book_time_next'] = date("Y-m-d",$item['book_time_next']);
user_book.php:        return $this->Pageview(__METHOD__,$ret_info, [
user_book.php:        $phone   = $this->get_in_str_val("phone","");
user_book.php:        $account = $this->get_account();
user_book.php:        $ret     = $this->t_book_info->set_sys_operator($phone,$account);
user_book.php:        $phone        = $this->get_in_str_val("phone","");
user_book.php:        $nick         = $this->get_in_str_val("nick","");
user_book.php:        $subject      = $this->get_in_subject();
user_book.php:        $grade        = $this->get_in_grade();
user_book.php:        $status       = $this->get_in_int_val( "status" );
user_book.php:        $consult_desc = $this->get_in_str_val( "consult_desc" );
user_book.php:        $ret = $this->t_book_info->row_insert([
user_book.php:            "sys_operator"  => $this->get_account(),
user_book.php:        $phone   = $this->get_in_str_val('phone', '');
user_book.php:        $op_note = $this->get_in_str_val('op_note', '');
user_book.php:        $sys_operator = $this->get_account(); 
user_book.php:            return outputJson(array('ret' => -1, 'info' => '回访记录不能为空'));
user_book.php:        $ret_add = $this->t_book_revisit->add_book_revisit($phone,$op_note,$sys_operator);
user_book.php:           return outputJson(array('ret' => -1, 'info' => '系统错误'));
user_book.php:        $phone = $this->get_in_str_val('phone', '');
user_book.php:           return outputJson(array('ret' => -1, 'info' => '手机号不能为空'));
user_book.php:        $ret_list = $this->t_book_revisit->get_book_revisit_list($phone);
user_book.php:            return outputJson(array('ret' => -1, 'info' => '系统错误'));
user_book.php:                'revisit_time' => date('Y-m-d H:i:s', $revisit_record['revisit_time']),
user_book.php:        $phone   = $this->get_in_str_val('phone', '');
user_book.php:        $op_note = $this->get_in_str_val('op_note', '');
user_book.php:        $status = $this->get_in_int_val('status', 0);
user_book.php:        $note   = $this->get_in_str_val('note', 0);
user_book.php:            $ret_update = $this->t_book_revisit->add_book_revisit($phone,$op_note,$sys_operator);
user_book.php:                return outputJson(array('ret' => -1, 'info' => '系统错误'));
user_book.php:        $ret_info = $this->t_book_info->update_user_info($phone,$status,$note);
user_book.php:           return outputJson(array('ret' => -1, 'info' => '系统错误'));
user_book.php:        $phone          = $this->get_in_str_val('phone', '');
user_book.php:        $book_time_next = $this->get_in_str_val('book_time_next', 0);
user_book.php:        $ret_info = $this->user_book_model->update_book_time_next($phone,$book_time_next_s);
user_book.php:            outputJson(array('ret' => -1, 'info' => '系统错误'));
user_book.php:        $id= $this->get_in_str_val('id');
user_book.php:        $class_time= strtotime($this->get_in_str_val("class_time"));
user_book.php:        $ret_set = $this->t_book_info->field_update_list($id,[
user_book.php:            return outputJson(array('ret' => -1, 'info' => '设置失败'));
user_book.php:        $teacherid= $this->get_in_int_val('teacherid',-1);
user_book.php:        $courseid= $this->get_in_int_val('courseid',-1);
user_book.php:        $ret_teacher = $this->t_book_info->set_course_teacher($teacherid,$courseid);
user_book.php:        $lesson_type  = $this->get_in_int_val('lesson_type',-1);
user_book.php:        $teacherid    = $this->get_in_int_val('teacherid',-1);
user_book.php:        $start_date   = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-3*86400 ));
user_book.php:        $end_date     = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
user_book.php:        $page_num     = $this->get_in_page_num();
user_book.php:        $ret_info = $this->t_lesson_info->lesson_account($lesson_type,$start_date_s,$end_date_s,$teacherid,$page_num);
user_book.php:        return $this->pageView(__METHOD__,$ret_info);
user_deal.php:        $userid=$this->get_in_userid(-1);
user_deal.php:        $lesson_type=$this->get_in_int_val("lesson_type",-1);
user_deal.php:        $page_num=$this->get_in_page_num();
user_deal.php:        $ret_list=$this->t_lesson_info->get_list_for_ajax_list($userid,$lesson_type,$page_num);
user_deal.php:            $item["teacher_nick"]=$this->cache_get_teacher_nick($item["teacherid"]);
user_deal.php:        $ret_list["page_info"]  = $this->get_page_info_for_js( $ret_list["page_info"]   );
user_deal.php:        $lessonid     = $this->get_in_int_val('lessonid',-1);
user_deal.php:        $server_type  = $this->get_in_int_val('server_type',-1);
user_deal.php:        $userid       = $this->get_in_int_val('userid',-1);
user_deal.php:        $studentid = $this->get_in_studentid();
user_deal.php:        $money=$this->get_in_int_val("money")*100;
user_deal.php:        $lesson_count= $this->get_in_str_val("lesson_count",0);
user_deal.php:        $course_name=$this->get_in_str_val("course_name");
user_deal.php:        $ret_auth = $this->t_manager_info ->check_permission($this->get_account(),
user_deal.php:        $lesson_account_id=$this->t_user_lesson_account->add($this->get_account(),$studentid,$course_name,0,$price);
user_deal.php:        $insert_ret=$this->t_order_info->row_insert([
user_deal.php:            \App\Models\t_order_info::C_sys_operator=> $this->get_account() ,
user_deal.php:        $lessonid      = $this->get_in_int_val('lessonid',-1);
user_deal.php:        $lesson_type=$this->t_lesson_info-> get_lesson_type($lessonid);
user_deal.php:            if ($this->t_seller_student_info->get_stu_performance_for_seller($lessonid) ) {
user_deal.php:                return $this->output_err("试听课 有绑定,请从试听管理中取消");
user_deal.php:        $this->t_lesson_info->del_if_no_start($lessonid);
user_deal.php:        $lessonid = $this->get_in_int_val('lessonid',-1);
user_deal.php:        $lesson_count = $this->get_in_int_val('lesson_count',0);
user_deal.php:        $lesson_start=$this->t_lesson_info->get_lesson_start($lessonid);
user_deal.php:            return $this->output_err("上课时间太早了, 早于[$lesson_confirm_start_time] ");
user_deal.php:        $ret=$this->t_lesson_info->check_lesson_count_for_change($lessonid, $lesson_count);
user_deal.php:            return $this->output_err("课时数太大了");
user_deal.php:        $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:        $courseid = $this->get_in_courseid();
user_deal.php:        $item = $this->t_course_order->field_get_list($courseid,"*");
user_deal.php:            $this->output_err("还没设置老师");
user_deal.php:            if(!$this->check_power(E\Epower::V_ADD_TEST_LESSON)) {
user_deal.php:                return $this->output_err("没有权限排试听课");
user_deal.php:        $check = $this->research_fulltime_teacher_lesson_plan_limit($item["teacherid"],$item["userid"]);
user_deal.php:            $grade = $this->t_student_info->get_grade($item["userid"]);
user_deal.php:            return $this->output_err("学生课程年级出错！请在课程包列表中修改！");
user_deal.php:        $teacher_info = $this->t_teacher_info->field_get_list($item["teacherid"],"teacher_money_type,level");
user_deal.php:        $lessonid = $this->t_lesson_info->add_lesson(
user_deal.php:            $this->t_homework_info->add($item["courseid"],0,$item["userid"],$lessonid,$item["grade"],$item["subject"]);
user_deal.php:        $this->t_lesson_info->reset_lesson_list($courseid);
user_deal.php:        return $this->output_succ(["lessonid" => $lessonid ]);
user_deal.php:        $userid=$this->get_in_userid();
user_deal.php:        $passwd=$this->get_in_str_val("passwd");
user_deal.php:        $this->t_user_info->update_password($userid,md5($passwd));
user_deal.php:        $studentid=$this->get_in_int_val('studentid');
user_deal.php:        $this->t_student_info->reset_lesson_count($studentid);
user_deal.php:        $this->cache_del_student_nick($studentid);
user_deal.php:        $lessonid       = $this->get_in_lessonid();
user_deal.php:        $confirm_flag   = $this->get_in_int_val("confirm_flag");
user_deal.php:        $confirm_reason = $this->get_in_str_val("confirm_reason");
user_deal.php:        $lesson_cancel_reason_next_lesson_time = strtotime( $this->get_in_str_val("lesson_cancel_reason_next_lesson_time"  ));
user_deal.php:        $lesson_cancel_reason_type = $this->get_in_str_val("lesson_cancel_reason_type"  );
user_deal.php:        $lesson_cancel_time_type = $this->get_in_int_val("lesson_cancel_time_type");
user_deal.php:        $lesson_info  = $this->t_lesson_info->get_all_lesson_info($lessonid);
user_deal.php:            return $this->output_err("上课时间太早了, 早于[$lesson_confirm_start_time]");
user_deal.php:            $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:                return $this->output_err("请填写无效原因!");
user_deal.php:            $this->push_teacher_wx($lesson_info,$confirm_flag);
user_deal.php:                $this->check_order_lesson_list($lessonid);
user_deal.php:                $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:                $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:        $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:            "confirm_adminid" => $this->get_account_id(),
user_deal.php:            $realname = $this->t_teacher_info->get_realname($teacherid);
user_deal.php:            $lesson_time = date("Y-m-d H:i:s",$lesson_info["lesson_start"]);
user_deal.php:            $this->t_revisit_info->row_insert([
user_deal.php:                "sys_operator"  => $this->get_account(),
user_deal.php:            $lesson_cw    = $this->t_lesson_info->get_lesson_cw_info($lessonid);
user_deal.php:            $courseid     = $this->get_in_courseid();
user_deal.php:            $lesson_type  = $this->get_in_int_val("lesson_type");
user_deal.php:            $lesson_count = $this->get_in_str_val("lesson_count")*100;
user_deal.php:            $lesson_end = $this->get_in_str_val("lesson_cancel_reason_next_lesson_end_time");
user_deal.php:            $day = date('Y-m-d',$lesson_cancel_reason_next_lesson_time);
user_deal.php:                $item = $this->t_course_order->field_get_list($courseid,"*");
user_deal.php:                    $grade = $this->t_student_info->get_grade($item["userid"]);
user_deal.php:                $teacher_info = $this->t_teacher_info->field_get_list($item["teacherid"],"teacher_money_type,level");
user_deal.php:                $lessonid = $this->t_lesson_info->add_lesson_new(
user_deal.php:                    $this->t_homework_info->add_new(
user_deal.php:                $this->t_lesson_info->reset_lesson_list($courseid);
user_deal.php:                    return $this->output_err( "时间不对: 时间不对: 下课时间早于上课时间");
user_deal.php:                    return $this->output_err( "时间不对,不能比当前时间晚");
user_deal.php:                $teacherid = $this->t_lesson_info->get_teacherid($lessonid);
user_deal.php:                $lesson_type= $this->t_lesson_info->get_lesson_type($lessonid);
user_deal.php:                $userid  = $this->t_lesson_info->get_userid($lessonid);
user_deal.php:                    $ret_row = $this->t_lesson_info->check_student_time_free($userid,$lessonid,$lesson_start,$lesson_end);
user_deal.php:                        return $this->output_err(
user_deal.php:                $ret_row=$this->t_lesson_info->check_teacher_time_free(
user_deal.php:                    return $this->output_err(
user_deal.php:                    $diff=($lesson_end-$lesson_start)/60;
user_deal.php:                $lesson_type = $this->t_lesson_info->get_lesson_type($lessonid);
user_deal.php:                    $ret = $this->t_lesson_info->check_lesson_count_for_change($lessonid,$lesson_count);
user_deal.php:                    $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:                    $this->t_lesson_info->set_lesson_time($lessonid,$lesson_start,$lesson_end);
user_deal.php:                    return $this->output_succ();
user_deal.php:                    return $this->output_err("课时不足,需要课时数:$str");
user_deal.php:            return $this->output_succ();
user_deal.php:        $ret = $this->t_order_lesson_list->get_lesson_info($lessonid);
user_deal.php:                $order_info   = $this->t_order_info->get_order_info_by_orderid($val['orderid']);
user_deal.php:                    return $this->output_err("此课程课时有错!请在问题报告群里汇报,并写出此课堂的lessonid和学生!");
user_deal.php:                $this->t_order_info->field_update_list($val['orderid'],[
user_deal.php:        $end_time      = date("Y-m-d H:i",$lesson_info['lesson_start'])."-".date("H:i",$lesson_info['lesson_end']);
user_deal.php:        $stu_nick      = $this->cache_get_student_nick($lesson_info['userid']);
user_deal.php:        $openid = $this->t_teacher_info->get_wx_openid($lesson_info['teacherid']);
user_deal.php:                        $change_num = $this->t_lesson_info->get_cost_num($time['start'],$time['end'],$lesson_info['teacherid'],2);
user_deal.php:                $this->t_lesson_info->field_update_list($lesson_info['lessonid'],[
user_deal.php:            $template_id = "YKGjtHUG20pS9RGBmTWm8_wYx4f30amrGv-F5NnBk8w";
user_deal.php:            $wx->send_template_msg($openid,$template_id,$data);
user_deal.php:        $ret=$this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:        $ret_info        = $this->t_order_lesson_list->get_simple_order_info($lessonid);
user_deal.php:                return $this->output_err("此合同已经提前终结,无法确认为无效课时");
user_deal.php:                $this->t_order_info->field_update_list($orderid,[
user_deal.php:                $this->t_order_info->field_update_list($orderid,[
user_deal.php:        $studentid      = $this->get_in_studentid();
user_deal.php:        $seller_adminid = $this->get_in_int_val("seller_adminid");
user_deal.php:        $this->t_student_info->field_update_list($studentid, [
user_deal.php:        return $this->output_succ();
user_deal.php:        $lessonid = $this->get_in_int_val('lessonid',0);
user_deal.php:        $start    = $this->get_in_str_val('start',0);
user_deal.php:        $end      = $this->get_in_str_val('end',0);
user_deal.php:        $reset_lesson_count = $this->get_in_str_val('reset_lesson_count',1);
user_deal.php:            $date         = date('Y-m-d', strtotime($start));
user_deal.php:            $lesson_start = $this->get_in_int_val("lesson_start");
user_deal.php:            $lesson_end   = $this->get_in_int_val("lesson_end");
user_deal.php:            return $this->output_err( "时间不对: $lesson_start>$lesson_end");
user_deal.php:        $teacherid = $this->t_lesson_info->get_teacherid($lessonid);
user_deal.php:        $userid    = $this->t_lesson_info->get_userid($lessonid);
user_deal.php:        $diff=($lesson_end-$lesson_start)/60;
user_deal.php:        $lesson_info = $this->t_lesson_info->get_lesson_info($lessonid);
user_deal.php:            $old_date   = date("Y-m-d",$lesson_info['lesson_start']);
user_deal.php:            $start_date = date("Y-m-d",$lesson_start);
user_deal.php:            $end_date   = date("Y-m-d",$lesson_end);
user_deal.php:                return $this->output_err("不能更改到其他日期的时间");
user_deal.php:        $check=$this->research_fulltime_teacher_lesson_plan_limit($teacherid,$userid,$lesson_count/100,$lesson_start,$lesson_type);
user_deal.php:            if(!$this->check_power(E\Epower::V_ADD_TEST_LESSON)) {
user_deal.php:                return $this->output_err("没有权限排试听课");
user_deal.php:            $db_lesson_start=$this->t_lesson_info->get_lesson_start($lessonid);
user_deal.php:                return $this->output_err("试听课不能修改时间,只能删除,重新排新课,再设置时间");
user_deal.php:        $userid = $this->t_lesson_info->get_userid($lessonid);
user_deal.php:            $ret_row = $this->t_lesson_info->check_student_time_free(
user_deal.php:                return $this->output_err(
user_deal.php:        $ret_row=$this->t_lesson_info->check_teacher_time_free(
user_deal.php:            return $this->output_err(
user_deal.php:        $lesson_type = $this->t_lesson_info->get_lesson_type($lessonid);
user_deal.php:            $ret = $this->t_lesson_info->check_lesson_count_for_change($lessonid,$lesson_count);
user_deal.php:                $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:            $this->t_lesson_info->set_lesson_time($lessonid,$lesson_start,$lesson_end);
user_deal.php:            $url              = "http://wx-teacher.leo1v1.com";
user_deal.php:            $old_lesson_start = date('Y-m-d H:i:s',$lesson_info['lesson_start']);
user_deal.php:            $old_lesson_end   = date('Y-m-d H:i:s',$lesson_info['lesson_end']);
user_deal.php:            $lesson_start     = date('Y-m-d H:i:s',$lesson_start);
user_deal.php:            $lesson_end       = date('Y-m-d H:i:s',$lesson_end);
user_deal.php:            $operation_name   = $this->get_account();
user_deal.php:            $adminid          = $this->get_account_id();
user_deal.php:            $operation_phone  = $this->t_manager_info->get_operation_phone($adminid);
user_deal.php:            $parent_wx_openid = $this->t_student_info->get_parent_wx_openid($userid);
user_deal.php:            $this->t_teacher_info->send_template_msg($teacherid,$template_id,$data_msg,$url);
user_deal.php:            $ret=$wx->send_template_msg($parent_wx_openid,$template_id,$data_msg ,$url);
user_deal.php:            $jw_openid = $this->t_test_lesson_subject_require->get_jw_openid($lessonid);
user_deal.php:                $wx->send_template_msg($jw_openid,$template_id,$data_msg ,$url);
user_deal.php:            return $this->output_succ();
user_deal.php:            return $this->output_err("课时不足,需要课时数:$str");
user_deal.php:        if ($this->get_account() != "jim"  && $this->get_account() != "echo" && $this->get_account() != "adrian"  ) {
user_deal.php:            return $this->output_err("没有权限");
user_deal.php:        $orderid=$this->get_in_int_val("orderid");
user_deal.php:        $default_lesson_count=$this->get_in_int_val("default_lesson_count");
user_deal.php:            $lesson_total=  $this->t_order_info->get_lesson_total($orderid);
user_deal.php:            $this->t_order_info->field_update_list($orderid,[
user_deal.php:            $courseid=$this->t_course_order->get_courseid_by_orderid($orderid);
user_deal.php:            $this->t_course_order->field_update_list($courseid, [
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid= $this->get_in_int_val("userid");
user_deal.php:        $courseid= $this->t_course_order->get_test_lesson_courseid($userid);
user_deal.php:        return $this->output_succ(["courseid"=>$courseid]);
user_deal.php:        $orderid          = $this->get_in_int_val("orderid");
user_deal.php:        $check_money_flag = $this->get_in_int_val("check_money_flag" );
user_deal.php:        $check_money_desc = $this->get_in_str_val("check_money_desc" );
user_deal.php:        $this->t_order_info->field_update_list($orderid,[
user_deal.php:            "check_money_adminid" => $this->get_account_id(),
user_deal.php:        $order_item = $this->t_order_info->field_get_list($orderid,"contract_type,userid, sys_operator, lesson_total,price");
user_deal.php:        $flowid=$this->t_flow->get_flowid_from_key_int(E\Eflow_type::V_SELLER_ORDER_REQUIRE, $orderid );
user_deal.php:            $start_time            = strtotime(date("Y-m-d"));
user_deal.php:            $end_time              = $start_time+20*86400-1;
user_deal.php:            $adminid               = $this->t_manager_info->get_id_by_account($sys_operator);
user_deal.php:                if (!$this->t_seller_new_count->check_adminid_seller_new_count_type_value_ex($adminid,$seller_new_count_type,$value_ex)) {
user_deal.php:                    $this->t_seller_new_count->add($start_time,$end_time,$seller_new_count_type,$count,$adminid,$value_ex);
user_deal.php:                    $this->t_manager_info->send_wx_todo_msg(
user_deal.php:                        ,"学生:". $this->cache_get_student_nick($userid)
user_deal.php:            $sys_operator=$this->t_order_info->get_sys_operator($orderid);
user_deal.php:            $this->t_student_info->noti_ass_order($userid,$sys_operator,false);
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid = $this->get_in_int_val("userid");
user_deal.php:        $account = $this->get_in_str_val("account");
user_deal.php:        $this->t_student_info->noti_ass_order($userid,$account);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid = $this->get_in_int_val("groupid");
user_deal.php:        $adminid = $this->get_in_int_val("adminid");
user_deal.php:        $assign_percent = $this->get_in_str_val("assign_percent");
user_deal.php:        $this->t_admin_group_user->field_update_list_2($groupid,$adminid,['assign_percent'=>$assign_percent]);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid = $this->get_in_int_val("groupid");
user_deal.php:        $group_assign_percent = $this->get_in_int_val("group_assign_percent");
user_deal.php:        $this->t_admin_group_name->field_update_list($groupid,['group_assign_percent'=>$group_assign_percent]);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid = $this->get_in_int_val("groupid");
user_deal.php:        $main_assign_percent = $this->get_in_int_val("main_assign_percent");
user_deal.php:        $this->t_admin_main_group_name->field_update_list($groupid,['main_assign_percent'=>$main_assign_percent]);
user_deal.php:        return $this->output_succ();
user_deal.php:        $uid               = $this->get_in_str_val("uid");
user_deal.php:        $phone             = $this->get_in_phone();
user_deal.php:        $name              = $this->get_in_str_val("name");
user_deal.php:        $email             = $this->get_in_str_val("email");
user_deal.php:        $tquin             = $this->get_in_str_val("tquin");
user_deal.php:        $cardid            = $this->get_in_int_val("cardid");
user_deal.php:        $account_role      = $this->get_in_int_val("account_role");
user_deal.php:        $seller_level      = $this->get_in_int_val("seller_level");
user_deal.php:        $wx_id             = $this->get_in_str_val("wx_id");
user_deal.php:        $up_adminid        = $this->get_in_int_val("up_adminid");
user_deal.php:        $become_full_member_flag = $this->get_in_int_val("become_full_member_flag");
user_deal.php:        $day_new_user_flag       = $this->get_in_boolean_val("day_new_user_flag");
user_deal.php:        $call_phone_passwd       = $this->get_in_str_val("call_phone_passwd");
user_deal.php:        $call_phone_type         = $this->get_in_int_val("call_phone_type");
user_deal.php:        $main_department         = $this->get_in_int_val("main_department");
user_deal.php:            $db_adminid=$this->t_manager_info->get_uid_by_tquin ($tquin);
user_deal.php:                $db_account= $this->cache_get_account_nick($db_adminid);
user_deal.php:                return $this->output_err( "TQ号 [$tquin] 已经被[$db_account]占用了"    );
user_deal.php:            $db_cardid_uid=$this->t_manager_info->get_uid_by_cardid($cardid);
user_deal.php:                return $this->output_err("考勤卡冲突");
user_deal.php:        $this->t_manager_info->field_update_list($uid, $set_arr);
user_deal.php:        $this->t_manager_info->sync_kaoqin_user($uid);
user_deal.php:        $this->t_manager_info->sync_kaoqin([
user_deal.php:            "from"=> date("Y-m-d 00:00:00", time(NULL) -86400-40 ) ,
user_deal.php:            "to"=> date("Y-m-d 00:00:00", time(NULL)+86400  ) ,
user_deal.php:        return $this->output_succ();
user_deal.php:        $uid               = $this->get_in_str_val("uid");
user_deal.php:        $name              = $this->get_in_str_val("name");
user_deal.php:        $gender            = $this->get_in_int_val("gender");
user_deal.php:        $company           = $this->get_in_int_val("company");
user_deal.php:        $education         = $this->get_in_int_val("education");
user_deal.php:        $employee_level    = $this->get_in_int_val("employee_level");
user_deal.php:        /*  $basic_pay         = $this->get_in_int_val("basic_pay");
user_deal.php:        $merit_pay         = $this->get_in_int_val("merit_pay");
user_deal.php:        $post_basic_pay    = $this->get_in_int_val("post_basic_pay");
user_deal.php:        $post_merit_pay    = $this->get_in_int_val("post_merit_pay");*/
user_deal.php:        $department        = $this->get_in_int_val("department");
user_deal.php:        $main_department   = $this->get_in_int_val("main_department");
user_deal.php:        $post              = $this->get_in_int_val("post");
user_deal.php:        $department_group  = $this->get_in_int_val("department_group");
user_deal.php:        $email             = $this->get_in_str_val("email");
user_deal.php:        $gra_school        = $this->get_in_str_val("gra_school");
user_deal.php:        $gra_major         = $this->get_in_str_val("gra_major");
user_deal.php:        $identity_card     = $this->get_in_str_val("identity_card");
user_deal.php:        $become_full_member_time     = $this->get_in_str_val("become_full_member_time");
user_deal.php:        $order_end_time    = $this->get_in_str_val("order_end_time");
user_deal.php:        $url    = $this->get_in_str_val("resume_url");
user_deal.php:        $personal_email     = $this->get_in_str_val("personal_email");
user_deal.php:        $desc     = $this->get_in_str_val("desc");
user_deal.php:        $this->t_manager_info->field_update_list($uid,[
user_deal.php:            $this->t_manager_info->field_update_list($uid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $lessonid=$this->get_in_lessonid();
user_deal.php:        $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $orderid=$this->get_in_int_val("orderid");
user_deal.php:        $contract_status=$this->get_in_int_val("contract_status");
user_deal.php:            return $this->output_err("出错") ;
user_deal.php:        $db_v=  $this->t_order_info->get_contract_status($orderid);
user_deal.php:            return $this->output_err("db 数据 出错;v=$db_v") ;
user_deal.php:        $this->t_order_info->field_update_list($orderid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $key1=$this->get_in_str_val("key1");
user_deal.php:        $key2=$this->get_in_str_val("key2");
user_deal.php:        $key3=$this->get_in_str_val("key3");
user_deal.php:        $list=$this->t_origin_key->get_key_list($key1,$key2,$key3,$key_str);
user_deal.php:        $last_level=$this->t_origin_key->get_last_level( $key1, $key2 );
user_deal.php:        return $this->output_succ(["list"=> $list ,"last_level"=> $last_level]);
user_deal.php:        $key1=$this->get_in_str_val("key1");
user_deal.php:        $key2=$this->get_in_str_val("key2");
user_deal.php:        $key3=$this->get_in_str_val("key3");
user_deal.php:            $list=$this->t_origin_key->get_key_list($key1,$key2,$key3,$key_str);
user_deal.php:        return $this->output_succ(["list"=> $list ]);
user_deal.php:        $key1=$this->get_in_str_val("key1");
user_deal.php:        $key2=$this->get_in_str_val("key2");
user_deal.php:        $key3=$this->get_in_str_val("key3");
user_deal.php:        $key1_list=$this->t_origin_key->get_key_list("","","","key1");
user_deal.php:            $key2_list=$this->t_origin_key->get_key_list($key1,"","","key2");
user_deal.php:                $key3_list=$this->t_origin_key->get_key_list($key1,$key2,"","key3");
user_deal.php:                    $key4_list=$this->t_origin_key->get_key_list($key1,$key2,$key3,"key4");
user_deal.php:        return $this->output_succ([
user_deal.php:        $main_type_name=$this->get_in_str_val("main_type_name");
user_deal.php:        $main_group_name=$this->get_in_str_val("main_group_name");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:            $key2_list=$this->t_admin_main_group_name->get_group_list($main_type);
user_deal.php:                $main_groupid = $this->t_admin_main_group_name->get_groupid_by_group_name($main_group_name);
user_deal.php:                $key3_list=$this->t_admin_group_name->get_group_name_list($main_type,$main_groupid);
user_deal.php:                    $groupid = $this->t_admin_group_name->get_groupid_by_group_name($group_name);
user_deal.php:                    $key4_list=$this->t_admin_group_user->get_user_list_new($groupid);
user_deal.php:        return $this->output_succ([
user_deal.php:        $main_type_name=$this->get_in_str_val("main_type_name");
user_deal.php:        $main_group_name=$this->get_in_str_val("main_group_name");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:            $groupid = $this->t_admin_group_name->get_groupid_by_group_name($group_name);
user_deal.php:            $list=$this->t_admin_group_user->get_user_list_new($groupid);
user_deal.php:                $main_groupid = $this->t_admin_main_group_name->get_groupid_by_group_name($main_group_name);
user_deal.php:                $list= $this->t_admin_group_name->get_group_name_list($main_type,$main_groupid);
user_deal.php:                    $list = $this->t_admin_main_group_name->get_group_list($main_type);
user_deal.php:        return $this->output_succ(["list"=> $list ]);
user_deal.php:        $userid        = $this->get_in_int_val('userid',-1);
user_deal.php:        $orderid       = $this->get_in_int_val('orderid');
user_deal.php:        $course_type = $this->get_in_int_val('course_type',-1);
user_deal.php:        $stu_from_type = $this->get_in_int_val('stu_from_type',-1);
user_deal.php:        $subject= $this->get_in_subject();
user_deal.php:        $grade= $this->get_in_grade();
user_deal.php:        $competition_flag = $this->get_in_int_val("competition_flag");
user_deal.php:        $account=$this->get_account();
user_deal.php:            return $this->output_err("没有权限");
user_deal.php:        $this->t_order_info->field_update_list($orderid,[
user_deal.php:        $this->t_course_order->update_only_course_type($userid,$orderid,$course_type,$subject);
user_deal.php:        $courseid=$this->t_course_order-> get_coursesid_by_orderid($orderid );
user_deal.php:        $this->t_lesson_info-> set_subject_by_courseid($courseid,$subject );
user_deal.php:        $opt_type=$this->get_in_str_val("opt_type");
user_deal.php:        $table_key=$this->get_in_str_val("table_key");
user_deal.php:        $data=$this->get_in_str_val("data");
user_deal.php:        $account=$this->get_account();
user_deal.php:            return $this->output_succ();
user_deal.php:            return $this->output_succ([
user_deal.php:        (new  login() )->reset_power($this->get_account());
user_deal.php:        return $this->output_succ();
user_deal.php:        $grade    = $this->get_in_grade();
user_deal.php:        $lessonid = $this->get_in_lessonid();
user_deal.php:        $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $teacherid  = $this->get_in_teacherid();
user_deal.php:        $start_time = $this->get_in_start_time_from_str(date("Y-m-01",time(NULL)) );
user_deal.php:        $end_time   = $this->get_in_end_time_from_str_next_day(date("Y-m-d",(time(NULL)+86400)) );
user_deal.php:        $list = $this->t_lesson_info->get_student_list_by_teacher($teacherid,$start_time,$end_time);
user_deal.php:            $this->t_lesson_info->reset_teacher_student_already_lesson_count($teacherid,$studentid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $lessonid             = $this->get_in_lessonid();
user_deal.php:        $lesson_upload_time   = $this->get_in_int_val("lesson_upload_time",0);
user_deal.php:        $record_audio_server1 = $this->get_in_str_val("record_audio_server1");
user_deal.php:        $record_audio_server2 = $this->get_in_str_val("record_audio_server2");
user_deal.php:        $gen_video_grade      = $this->get_in_int_val("gen_video_grade");
user_deal.php:        $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid=$this->get_in_userid();
user_deal.php:        $data=$this->t_student_info->get_stu_all_info($userid);
user_deal.php:        return $this->output_succ(["data"=>$data]);
user_deal.php:        $phone = $this->get_in_phone();
user_deal.php:        $notify_flag= $this->get_in_int_val("notify_flag");
user_deal.php:        $this->t_seller_student_info-> set_notify_lesson_flag( $phone, $notify_flag);
user_deal.php:        return $this->output_succ();
user_deal.php:        $page_num=$this->get_in_page_num();
user_deal.php:        $nickname= $this->get_in_str_val("nickname");
user_deal.php:        $ret_list=$this->t_wx_user_info->get_list_for_ajax_list($page_num,$nickname);
user_deal.php:        $ret_list["page_info"]  = $this->get_page_info_for_js( $ret_list["page_info"]   );
user_deal.php:        return $this->output_succ( ['data' => $ret_list ]);
user_deal.php:        $wx_openid=$this->get_in_str_val("wx_openid");
user_deal.php:        $id=$this->get_in_id();
user_deal.php:        $this->t_manager_info->field_update_list($id,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $account  = $this->get_in_str_val("account");
user_deal.php:        $page_num = $this->get_in_page_num();
user_deal.php:        list($start_time,$end_time ) = $this->get_in_date_range(0,0);
user_deal.php:        $ret_list=$this->t_book_revisit->get_list_by_account($page_num,$account,$start_time,$end_time);
user_deal.php:            //$this->cache_set_item_student_nick($item,"userid");
user_deal.php:        $ret_list["page_info"]  = $this->get_page_info_for_js( $ret_list["page_info"]   );
user_deal.php:        $courseid             = $this->get_in_courseid();
user_deal.php:        $course_status        = $this->get_in_int_val("course_status");
user_deal.php:        $teacherid            = $this->get_in_teacherid();
user_deal.php:        $subject              = $this->get_in_int_val("subject");
user_deal.php:         $grade                = $this->get_in_int_val("grade");
user_deal.php:        $lesson_grade_type    = $this->get_in_int_val("lesson_grade_type");
user_deal.php:        $default_lesson_count = $this->get_in_int_val("default_lesson_count");
user_deal.php:        $account              = $this->get_account();
user_deal.php:        $ret = $this->t_course_order->field_update_list($courseid,$data);
user_deal.php:        return $this->output_succ();
user_deal.php:        $course_status        = $this->get_in_int_val("course_status");
user_deal.php:        $teacherid            = $this->get_in_teacherid();
user_deal.php:        $subject              = $this->get_in_int_val("subject");
user_deal.php:        $lesson_grade_type    = $this->get_in_int_val("lesson_grade_type");
user_deal.php:        $default_lesson_count = $this->get_in_int_val("default_lesson_count");
user_deal.php:        $account              = $this->get_account();
user_deal.php:        $userid               = $this->get_in_int_val("userid");
user_deal.php:        $competition_flag     = $this->get_in_int_val("competition_flag");
user_deal.php:        $is_kk_flag           = $this->get_in_int_val("is_kk_flag");
user_deal.php:        $require_id           = $this->get_in_int_val("require_id",0);
user_deal.php:        $stu_info = $this->t_student_info->get_student_simple_info($userid);
user_deal.php:            return $this->output_err("未设置助教!");
user_deal.php:        $this->t_course_order->row_insert([
user_deal.php:            $courseid = $this->t_course_order->get_last_insertid();
user_deal.php:            $lessonid = $this->t_test_lesson_subject_require->get_current_lessonid($require_id);
user_deal.php:            $this->t_course_order->clean_ass_from_test_lesson_id($lessonid);
user_deal.php:            $this->t_course_order->field_update_list($courseid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid           = $this->get_in_int_val("userid");
user_deal.php:        $subject          = $this->get_in_int_val("subject");
user_deal.php:        $competition_flag = $this->get_in_int_val("competition_flag");
user_deal.php:        $stu_info = $this->t_student_info->get_student_simple_info($userid);
user_deal.php:            return $this->output_err("未设置助教!");
user_deal.php:        $this->t_course_order->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $courseid = $this->get_in_courseid();
user_deal.php:        $lesson_count=$this->t_lesson_info->get_course_lesson_count($courseid);
user_deal.php:            $this->t_course_order->row_delete($courseid);
user_deal.php:            return $this->output_succ();
user_deal.php:            return $this->output_err("已经有安排课程了，你得只能删除排空包！");
user_deal.php:        $courseid              = $this->get_in_courseid();
user_deal.php:        $assigned_lesson_count = $this->get_in_int_val("assigned_lesson_count");
user_deal.php:        $competition_flag      = $this->get_in_int_val("competition_flag");
user_deal.php:        $userid=$this->t_course_order->get_userid($courseid);
user_deal.php:        $lesson_total = $this->t_order_info->get_user_lesson_total($userid,$competition_flag);
user_deal.php:        $g_assigned_lesson_count = $this->t_course_order->get_user_assigned_lesson_count($userid,$competition_flag,$courseid);
user_deal.php:            $max= $lesson_total - $g_assigned_lesson_count;
user_deal.php:            return $this->output_err("最多只能是:$max" );
user_deal.php:        $tmp_list =$this->t_course_order->get_list(-1,$courseid);
user_deal.php:            return $this->output_err("课程包不存在" );
user_deal.php:            return $this->output_err("最少是: $tmp, 你可以 删除 未上课 的排课 " );
user_deal.php:        $this->t_course_order->field_update_list($courseid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $courseid = $this->get_in_courseid();
user_deal.php:        $orderid  = $this->get_in_int_val("orderid");
user_deal.php:        if ($this->get_account()=="jim") {
user_deal.php:            $this->t_course_order->field_update_list($courseid,[
user_deal.php:            return $this->output_succ();
user_deal.php:            return $this->output_err("没有权限:<");
user_deal.php:        $courseid  = $this->get_in_courseid();
user_deal.php:        $teacherid = $this->get_in_teacherid();
user_deal.php:        $subject   = $this->get_in_subject();
user_deal.php:        $this->t_lesson_info-> course_set_teacher_subject($courseid,$teacherid,$subject);
user_deal.php:        return $this->output_succ();
user_deal.php:        $logtime=strtotime($this->get_in_str_val("logtime"));
user_deal.php:        $teacherid=$this->get_in_teacherid();
user_deal.php:        $all_count=$this->get_in_int_val("all_count");
user_deal.php:        $l1v1_count=$this->get_in_int_val("l1v1_count");
user_deal.php:        $test_count=$this->get_in_int_val("test_count");
user_deal.php:        $money_all_count=$this->get_in_int_val("money_all_count");
user_deal.php:        $money_l1v1_count=$this->get_in_int_val("money_l1v1_count");
user_deal.php:        $money_test_count=$this->get_in_int_val("money_test_count");
user_deal.php:            return $this->output_err("金额不对 $money_test_count+$money_l1v1_count != $money_all_count ");
user_deal.php:           return  $this->output_err("课时不对 $test_count+$l1v1_count != $all_count ");
user_deal.php:        $db_id=$this->t_teacher_month_money->field_get_list_2($logtime,$teacherid,"teacherid");
user_deal.php:            $this->t_teacher_month_money->row_insert([
user_deal.php:        $pay_flag=$this->t_teacher_month_money->get_pay_flag($logtime,$teacherid);
user_deal.php:            return $this->output_err("已支付,不可修改");
user_deal.php:        $this->t_teacher_month_money->field_update_list_2($logtime,$teacherid,[
user_deal.php:            "confirm_adminid" => $this->get_account_id(),
user_deal.php:        return $this->output_succ();
user_deal.php:        $logtime=strtotime($this->get_in_str_val("logtime"));
user_deal.php:        $teacherid=$this->get_in_teacherid();
user_deal.php:        $pay_flag=$this->t_teacher_month_money->get_pay_flag($logtime,$teacherid);
user_deal.php:            return $this->output_err("已支付,不可修改");
user_deal.php:        $this->t_teacher_month_money->field_update_list_2($logtime,$teacherid,[
user_deal.php:            "confirm_adminid" => $this->get_account_id(),
user_deal.php:        return $this->output_succ();
user_deal.php:        $logtime=strtotime($this->get_in_str_val("logtime"));
user_deal.php:        $teacherid=$this->get_in_teacherid();
user_deal.php:        $pay_flag=$this->get_in_int_val("pay_flag",0);
user_deal.php:        $confirm_flag=$this->t_teacher_month_money->get_confirm_flag($logtime,$teacherid);
user_deal.php:            return $this->output_err("未确认,不能支付") ;
user_deal.php:        $this->t_teacher_month_money->field_update_list_2($logtime,$teacherid,[
user_deal.php:            "pay_adminid" => $this->get_account_id(),
user_deal.php:        return $this->output_succ();
user_deal.php:        $group_list=$this->t_authority_group->get_auth_groups();
user_deal.php:        return $this->output_succ(["data"=> $group_list]);
user_deal.php:        $main_type=$this->get_in_str_val("main_type");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:        $up_groupid=$this->get_in_int_val("up_groupid","");
user_deal.php:        $this->t_admin_group_name->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $main_type=$this->get_in_str_val("main_type");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:        $up_groupid=$this->get_in_int_val("up_groupid","");
user_deal.php:        $month = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $max_groupid = $this->t_group_name_month->get_max_groupid($month);
user_deal.php:        $this->t_group_name_month->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $main_type=$this->get_in_str_val("main_type");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:        $this->t_admin_main_group_name->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $main_type=$this->get_in_str_val("main_type");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:        $month = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $max_groupid = $this->t_main_group_name_month->get_max_groupid($month);
user_deal.php:        $this->t_main_group_name_month->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:        $master_adminid=$this->get_in_str_val("master_adminid");
user_deal.php:        $this->t_admin_group_name->field_update_list($groupid, [
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:        $master_adminid=$this->get_in_str_val("master_adminid");
user_deal.php:        $month = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $this->t_group_name_month->field_update_list_2($groupid,$month, [
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:        $master_adminid=$this->get_in_str_val("master_adminid");
user_deal.php:        $this->t_admin_main_group_name->field_update_list($groupid, [
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $group_name=$this->get_in_str_val("group_name");
user_deal.php:        $master_adminid=$this->get_in_str_val("master_adminid");
user_deal.php:        $month = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $this->t_main_group_name_month->field_update_list_2($groupid,$month, [
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $this->t_admin_group_name->row_delete($groupid);
user_deal.php:        $this->t_admin_group_user->del_by_groupid($groupid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $month = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $this->t_group_name_month->row_delete_2($groupid,$month);
user_deal.php:        $this->t_group_user_month->del_by_groupid($groupid,$month);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $this->t_admin_main_group_name->row_delete($groupid);
user_deal.php:        $this->t_admin_group_name->update_by_up_groupid($groupid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $month = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $this->t_main_group_name_month->row_delete_2($groupid,$month);
user_deal.php:        $this->t_group_name_month->update_by_up_groupid($groupid,$month);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $adminid=$this->get_in_int_val("adminid");
user_deal.php:        $main_type=$this->get_in_int_val("main_type");
user_deal.php:        $db_groupid=$this->t_admin_group_user->get_groupid_by_adminid($main_type,$adminid);
user_deal.php:            $group_name=$this->t_admin_group_name->get_group_name($db_groupid);
user_deal.php:            return $this->output_err("此人已在[$group_name]中,不能添加");
user_deal.php:        $this->t_admin_group_user->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $adminid=$this->get_in_int_val("adminid");
user_deal.php:        $main_type=$this->get_in_int_val("main_type");
user_deal.php:        $month = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $db_groupid=$this->t_group_user_month->get_groupid_by_adminid($main_type,$adminid,$month);
user_deal.php:            $group_name=$this->t_group_name_month->get_group_name($db_groupid,$month);
user_deal.php:            return $this->output_err("此人已在[$group_name]中,不能添加");
user_deal.php:       $this->t_group_user_month->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $adminid=$this->get_in_int_val("adminid");
user_deal.php:        $this->t_admin_group_user->row_delete_2( $groupid, $adminid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $adminid=$this->get_in_int_val("adminid");
user_deal.php:        $month = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $this->t_group_user_month->delete_admin_info( $groupid, $adminid,$month);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $this->t_admin_group_name->row_delete( $groupid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid=$this->get_in_int_val("groupid");
user_deal.php:        $this->t_admin_group_name->field_update_list($groupid,['up_groupid'=>0]);
user_deal.php:        return $this->output_succ();
user_deal.php:        $cc_id  = $this->get_account_id();
user_deal.php:        $data = \App\Helper\Utils::json_decode_as_array($this->get_in_str_val("data"));
user_deal.php:        $state_arr = $this->t_student_cc_to_cr->get_last_id_reject_flag_by_orderid($orderid);
user_deal.php:           return $this->output_err("22:30-8:00: 不能提交") ;
user_deal.php:             return $this->output_err("每周课次不能为0");
user_deal.php:            return $this->output_err("每次课时不能为0");
user_deal.php:            $ret = $this->t_student_cc_to_cr->row_insert([
user_deal.php:            $this->t_student_cc_to_cr->field_update_list($state_arr['id'],$data);
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid = $this->get_in_userid();
user_deal.php:        $data = \App\Helper\Utils::json_decode_as_array(  $this->get_in_str_val ("data"));
user_deal.php:           return $this->output_err("22:30-8:00: 不能提交") ;
user_deal.php:             return $this->output_err("每周课次不能为0");
user_deal.php:            return $this->output_err("每次课时不能为0");
user_deal.php:        $this->t_student_init_info->field_update_list($userid,$data);
user_deal.php:        $this->t_student_info->field_update_list($userid,[
user_deal.php:            "seller_adminid" => $this->get_account_id(),
user_deal.php:        $account=$this->get_account();
user_deal.php:        $this->t_student_info->noti_ass_order($userid, $account );
user_deal.php:        return $this->output_succ();
user_deal.php:        $phone=$this->get_in_phone();
user_deal.php:        $ass_adminid = $this->get_account_id();
user_deal.php:        $this->t_seller_student_info->add_or_add_to_sub("",$phone,0,"转介绍",0,0,0,"","",time(NULL),true, 0 ,0, "", "",0, $ass_adminid  );
user_deal.php:        return $this->output_succ();
user_deal.php:        $phone = $this->get_in_phone();
user_deal.php:        $assigned_time= $this->t_seller_student_info->get_admin_assign_time($phone);
user_deal.php:            return $this->output_err("已经被分配，不能删除");
user_deal.php:        $ret = $this->t_seller_student_info->delete_student($phone);
user_deal.php:        return $this->output_succ();
user_deal.php:        $phone         = $this->get_in_phone();
user_deal.php:        $userid        = $this->get_in_userid();
user_deal.php:        $nick          = $this->get_in_str_val("nick");
user_deal.php:        $grade         = $this->get_in_grade();
user_deal.php:        $subject       = $this->get_in_subject();
user_deal.php:        $user_desc     = $this->get_in_str_val("user_desc");
user_deal.php:        $old_user_desc     = $this->get_in_str_val("old_user_desc");
user_deal.php:        $origin_userid = $this->get_in_int_val("origin_userid");
user_deal.php:        $this->t_seller_student_info->field_update_list($phone,[
user_deal.php:        $this->t_student_info->field_update_list($userid,[
user_deal.php:            $acc = $this->get_account();
user_deal.php:            $ret_stu      = $this->t_student_info->get_student_simple_info($userid);
user_deal.php:                return  $this->output_err( "系统出错");
user_deal.php:            if ( $this->t_revisit_info->check_add_existed($userid,$revisit_time) ) {
user_deal.php:                return  $this->output_succ();
user_deal.php:            $this->t_revisit_info->add_revisit_record($userid, $revisit_time, $ret_stu['nick'], "",
user_deal.php:        return $this->output_succ();
user_deal.php:        $orderid=$this->get_in_int_val("orderid");
user_deal.php:        $ret = $this->t_order_refund->field_update_list($orderid,[
user_deal.php:            return $this->output_err("更改失败!");
user_deal.php:        return $this->output_succ();
user_deal.php:        $teacherid_list_str = $this->get_in_str_val("teacherid_list");
user_deal.php:        $check_adminid= $this->get_in_int_val("check_adminid");
user_deal.php:            $this->t_teacher_info->field_update_list($teacherid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $teacherid = $this->get_in_int_val('teacherid');
user_deal.php:        $phone     = $this->get_in_str_val('phone');
user_deal.php:        $userid    = $this->get_in_int_val('userid');
user_deal.php:            $userid=$this->t_phone_to_user->get_userid_by_phone($phone_de);
user_deal.php:            $this->t_seller_student_info->field_update_list(
user_deal.php:        $grade        = $this->get_in_int_val('grade');
user_deal.php:        $subject      = $this->get_in_int_val('subject');
user_deal.php:        $lesson_count = $this->get_in_int_val('lesson_count');
user_deal.php:        $lesson_start = $this->get_in_str_val('lesson_start');
user_deal.php:        $lesson_end   = $this->get_in_str_val('lesson_end');
user_deal.php:        $st_lessonid  = $this->t_seller_student_info->field_get_value($phone,"st_arrange_lessonid");
user_deal.php:            return $this->output_err("请填写完整!");
user_deal.php:            return $this->output_err("课程开始时间过早!");
user_deal.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
user_deal.php:        $assistantid  = $this->t_student_info->get_assistantid($userid);
user_deal.php:        $courseid     = $this->t_course_order->add_course_info_new($orderid,$userid,$grade,$subject,100,2,0,1,1,$assistantid,$teacherid);
user_deal.php:        $lessonid = $this->t_lesson_info->add_lesson(
user_deal.php:            $ret_row1 = $this->t_lesson_info->check_student_time_free($userid,$lessonid,$lesson_start,$lesson_end);
user_deal.php:                $this->t_lesson_info->row_delete($lessonid);
user_deal.php:                return $this->output_err(
user_deal.php:            $ret_row2=$this->t_lesson_info->check_teacher_time_free($teacherid,$lessonid,$lesson_start,$lesson_end);
user_deal.php:                $this->t_lesson_info->row_delete($lessonid);
user_deal.php:                return $this->output_err(
user_deal.php:            $this->t_homework_info->add(
user_deal.php:            $this->t_lesson_info->reset_lesson_list($courseid);
user_deal.php:            $this->t_seller_student_info->field_update_list($phone,['st_arrange_lessonid'=>$lessonid]);
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid     = $this->get_in_userid();
user_deal.php:        $start_time = $this->get_in_start_time_from_str();
user_deal.php:        $grade      = $this->get_in_grade();
user_deal.php:        $acc=$this->get_account();
user_deal.php:            if(!$this->t_order_info->has_1v1_order($userid)) {
user_deal.php:                return $this->output_err("有合同了,不能修改年级,找jim处理");
user_deal.php:                return $this->output_err("没有权限");
user_deal.php:        $db_grade=$this->t_student_info->get_grade($userid);
user_deal.php:        $this->t_student_info->field_update_list($userid,[
user_deal.php:        $this->t_lesson_info->update_grade_by_userid($userid,$start_time,$grade);
user_deal.php:        $this->t_revisit_info->sys_log( $this->get_account(),
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid     = $this->get_in_int_val('userid');
user_deal.php:        $start_time = $this->get_in_str_val('start_time');
user_deal.php:        $end_time   = $this->get_in_str_val('end_time');
user_deal.php:            return $this->output_err("该周课程已结束!");
user_deal.php:        $ret = $this->t_week_regular_course->get_lesson_info(-1,$userid);
user_deal.php:                $week_time        = explode("-",$start);
user_deal.php:                $list = $this->t_course_order->get_courseid_by_stu_tea($userid,$teacherid,$competition_flag);
user_deal.php:                $regular_start = strtotime(date('Y-m-d',(strtotime($start_time)+($week-1)*86400))." ".$start);
user_deal.php:                        return $this->output_err("没有周".$week." $start"."-"."$end"."对应老师的课程包");
user_deal.php:                            $lesson_use = $this->t_lesson_info->get_lesson_count_all_without_lessonid(
user_deal.php:                            $assigned_lesson_count = $this->t_course_order->get_assigned_lesson_count($val['courseid']);
user_deal.php:                            return $this->output_err("周".$week." $start"."-"."$end"."课时数不足,请确认!");
user_deal.php:                            $lesson_start = strtotime(date('Y-m-d',(strtotime($start_time)+($week-1)*86400))." ".$start);
user_deal.php:                            $lesson_end   = strtotime(date('Y-m-d',(strtotime($start_time)+($week-1)*86400))." ".$end);
user_deal.php:                            $check        = $this->research_fulltime_teacher_lesson_plan_limit(
user_deal.php:                            $item     = $this->t_course_order->field_get_list($courseid,"*");
user_deal.php:                                return outputJson(array('ret' => -1, 'info' => "有课程包未设置科目,请确认!",'data'=>$data));
user_deal.php:                                $grade = $this->t_student_info->get_grade($item["userid"]);
user_deal.php:                                return $this->output_err("学生课程年级出错！请在课程包列表中修改！");
user_deal.php:                            $teacher_info=$this->t_teacher_info->field_get_list($item["teacherid"],"teacher_money_type,level");
user_deal.php:                            $lessonid = $this->t_lesson_info->add_lesson(
user_deal.php:                                $this->t_homework_info->add(
user_deal.php:                            $this->t_lesson_info->reset_lesson_list($courseid);
user_deal.php:                            $ret_row1 = $this->t_lesson_info->check_student_time_free(
user_deal.php:                                return $this->output_err(
user_deal.php:                            $ret_row2=$this->t_lesson_info->check_teacher_time_free(
user_deal.php:                                return $this->output_err(
user_deal.php:                            $ret = $this->t_lesson_info->check_lesson_count_for_change($lessonid,$lesson_count);
user_deal.php:                                $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:                                $this->t_lesson_info ->set_lesson_time($lessonid,$lesson_start,$lesson_end);
user_deal.php:                                return $this->output_err("课时不足,需要课时数:$str");
user_deal.php:            return $this->output_err("常规课表为空!");
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid           = $this->get_in_int_val('userid');
user_deal.php:        $old_lesson_total = $this->get_in_str_val('old_lesson_total');
user_deal.php:        $start_time       = $this->get_in_str_val('start_time');
user_deal.php:        $end_time         = $this->get_in_str_val('end_time');
user_deal.php:            return $this->output_err("该周课程已结束!");
user_deal.php:        $lesson_start_time = $this->get_in_str_val('lesson_start');
user_deal.php:        $ret = $this->t_week_regular_course->get_lesson_info(-1,$userid);
user_deal.php:                $week_time        = explode("-",$start);
user_deal.php:                $list = $this->t_course_order->get_courseid_by_stu_tea($userid,$teacherid,$competition_flag);
user_deal.php:                $regular_start = strtotime(date('Y-m-d',(strtotime($start_time)+($week-1)*86400))." ".$start);
user_deal.php:                        $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:                        return outputJson(array('ret' => -1, 'info' => "没有周".$weeker." $start"."-"."$end"."对应老师的课程包",'data'=>$data));
user_deal.php:                            $lesson_use = $this->t_lesson_info->get_lesson_count_all_without_lessonid($val['courseid'],"");
user_deal.php:                            $assigned_lesson_count= $this->t_course_order->get_assigned_lesson_count($val['courseid']);
user_deal.php:                            $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:                            return outputJson(array('ret' => -1, 'info' => "周".$weeker." $start"."-"."$end"."课时数不足,请确认!",'data'=>$data));
user_deal.php:                            $item     = $this->t_course_order->field_get_list($courseid,"*");
user_deal.php:                                return outputJson(array('ret' => -1, 'info' => "有课程包未设置科目,请确认!"));
user_deal.php:                                $grade = $this->t_student_info->get_grade($item["userid"]);
user_deal.php:                            $teacher_info = $this->t_teacher_info->field_get_list($item["teacherid"],"teacher_money_type,level");
user_deal.php:                            $lessonid = $this->t_lesson_info->add_lesson(
user_deal.php:                                $this->t_homework_info->add(
user_deal.php:                            $this->t_lesson_info->reset_lesson_list($courseid);
user_deal.php:                            $lesson_start = strtotime(date('Y-m-d',(strtotime($start_time)+($week-1)*86400))." ".$start);
user_deal.php:                            $lesson_end = strtotime(date('Y-m-d',(strtotime($start_time)+($week-1)*86400))." ".$end);
user_deal.php:                            $check =  $this->research_fulltime_teacher_lesson_plan_limit($teacherid,$userid,$lesson_count/100,$lesson_start,0);
user_deal.php:                            $ret_row1 = $this->t_lesson_info->check_student_time_free($userid,$lessonid,$lesson_start,$lesson_end);
user_deal.php:                                $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:                                return outputJson(array('ret' => -1, 'info' =>  "<div>有现存的学生课程与周".$weeker." $start"."-"."$end"."的课冲突！<a href='/tea_manage/lesson_list?lessonid=$error_lessonid/' target='_blank'>查看[lessonid=$error_lessonid]<a/><div>",'data'=>$data));
user_deal.php:                            $ret_row2=$this->t_lesson_info->check_teacher_time_free($teacherid,$lessonid,$lesson_start,$lesson_end);
user_deal.php:                                $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:                                return outputJson(array('ret' => -1, 'info' =>" <div>有现存的老师课程与周".$weeker." $start"."-"."$end"."的课冲突！<a href='/tea_manage/lesson_list?lessonid=$error_lessonid/' target='_blank'>查看[lessonid=$error_lessonid]<a/><div>",'data'=>$data));
user_deal.php:                            $ret = $this->t_lesson_info->check_lesson_count_for_change($lessonid,$lesson_count);
user_deal.php:                                $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:                                $this->t_lesson_info->set_lesson_time($lessonid,$lesson_start,$lesson_end);
user_deal.php:                                return $this->output_err("课时不足,需要课时数:$str");
user_deal.php:            return $this->output_err("常规课表为空!");
user_deal.php:        $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:            return outputJson(array('ret' => -1, 'info' => "无课可排"));
user_deal.php:        $userid           = $this->get_in_int_val('userid');
user_deal.php:        $old_lesson_total = $this->get_in_str_val('old_lesson_total');
user_deal.php:        $start_time       = $this->get_in_str_val('start_time');
user_deal.php:        $end_time         = $this->get_in_str_val('end_time');
user_deal.php:            return $this->output_err("该周课程已结束!");
user_deal.php:        $lesson_start_time = $this->get_in_str_val('lesson_start');
user_deal.php:        $ret = $this->t_summer_week_regular_course->get_lesson_info(-1,$userid);
user_deal.php:                $week_time        = explode("-",$start);
user_deal.php:                $list = $this->t_course_order->get_courseid_by_stu_tea($userid,$teacherid,$competition_flag);
user_deal.php:                $regular_start = strtotime(date('Y-m-d',(strtotime($start_time)+($week-1)*86400))." ".$start);
user_deal.php:                        $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:                        return outputJson(array('ret' => -1, 'info' => "没有周".$weeker." $start"."-"."$end"."对应老师的课程包",'data'=>$data));
user_deal.php:                            $lesson_use = $this->t_lesson_info->get_lesson_count_all_without_lessonid($val['courseid'],"");
user_deal.php:                            $assigned_lesson_count= $this->t_course_order->get_assigned_lesson_count($val['courseid']);
user_deal.php:                            $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:                            return outputJson(array('ret' => -1, 'info' => "周".$weeker." $start"."-"."$end"."课时数不足,请确认!",'data'=>$data));
user_deal.php:                            $item     = $this->t_course_order->field_get_list($courseid,"*");
user_deal.php:                                return outputJson(array('ret' => -1, 'info' => "有课程包未设置科目,请确认!"));
user_deal.php:                                $grade = $this->t_student_info->get_grade($item["userid"]);
user_deal.php:                            $teacher_info = $this->t_teacher_info->field_get_list($item["teacherid"],"teacher_money_type,level");
user_deal.php:                            $lessonid=$this->t_lesson_info->add_lesson(
user_deal.php:                                $this->t_homework_info->add(
user_deal.php:                            $this->t_lesson_info->reset_lesson_list($courseid);
user_deal.php:                            $lesson_start = strtotime(date('Y-m-d',(strtotime($start_time)+($week-1)*86400))." ".$start);
user_deal.php:                            $lesson_end = strtotime(date('Y-m-d',(strtotime($start_time)+($week-1)*86400))." ".$end);
user_deal.php:                            $check =  $this->research_fulltime_teacher_lesson_plan_limit($teacherid,$userid,$lesson_count/100,$lesson_start,0);
user_deal.php:                            $ret_row1 = $this->t_lesson_info->check_student_time_free($userid,$lessonid,$lesson_start,$lesson_end);
user_deal.php:                                $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:                                return outputJson(array('ret' => -1, 'info' =>  "<div>有现存的学生课程与周".$weeker." $start"."-"."$end"."的课冲突！<a href='/tea_manage/lesson_list?lessonid=$error_lessonid/' target='_blank'>查看[lessonid=$error_lessonid]<a/><div>",'data'=>$data));
user_deal.php:                            $ret_row2=$this->t_lesson_info->check_teacher_time_free($teacherid,$lessonid,$lesson_start,$lesson_end);
user_deal.php:                                $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:                                return outputJson(array('ret' => -1, 'info' =>" <div>有现存的老师课程与周".$weeker." $start"."-"."$end"."的课冲突！<a href='/tea_manage/lesson_list?lessonid=$error_lessonid/' target='_blank'>查看[lessonid=$error_lessonid]<a/><div>",'data'=>$data));
user_deal.php:                            $ret = $this->t_lesson_info->check_lesson_count_for_change($lessonid,$lesson_count);
user_deal.php:                                $this->t_lesson_info->field_update_list($lessonid,[
user_deal.php:                                $this->t_lesson_info->set_lesson_time($lessonid,$lesson_start,$lesson_end);
user_deal.php:                                return $this->output_err("课时不足,需要课时数:$str");
user_deal.php:            return $this->output_err("常规课表为空!");
user_deal.php:        $data = $this->t_lesson_info->get_lesson_info_ass_all($start_time_done,$end_time_done,$userid);
user_deal.php:            return outputJson(array('ret' => -1, 'info' => "无课可排"));
user_deal.php:        $noteid=$this->get_in_int_val('noteid');
user_deal.php:        $data = $this->t_question->get_question_tongji($noteid);
user_deal.php:        $main_note_id = substr($noteid,0,$num-4)."0000";
user_deal.php:        $data["main_note_name"] = $this->t_lesson_note->get_note_name($main_note_id);
user_deal.php:        $second_note_id = substr($noteid,0,$num-2)."00";
user_deal.php:        $data["second_note_name"] = $this->t_lesson_note->get_note_name($second_note_id);
user_deal.php:        $month = time()-30*86400;        
user_deal.php:        $time = time()-86400;
user_deal.php:        $ret_info = $this->t_month_ass_warning_student_info->get_week_warning_info($lstart);
user_deal.php:            $info = $this->t_month_ass_warning_student_info->get_warning_info_by_userid($userid,$month);
user_deal.php:                $this->t_month_ass_warning_student_info->field_update_list($v["id"],[
user_deal.php:        $this->switch_tongji_database();
user_deal.php:        $start_time = strtotime("2017-06-18");
user_deal.php:        $end_time = strtotime("2017-08-01");
user_deal.php:        $ret= $this->t_lesson_info_b2->tongji_1v1_lesson_time($start_time,$end_time);
user_deal.php:        return $this->pageView(__METHOD__,$ret_info);
user_deal.php:        $page_info = $this->get_in_page_info();
user_deal.php:        $end_time = strtotime("2017-07-01");
user_deal.php:        $ret_list=$this->t_order_info->get_order_list_caiwu(
user_deal.php:            if(empty($item["lesson_start"]) && $item["order_time"] < strtotime(date("2016-11-01")) && $item["contract_type"]==0){
user_deal.php:                $item["lesson_start"] = $this->t_lesson_info->get_user_test_lesson_start($userid,$item["order_time"]);
user_deal.php:        return $this->Pageview(__METHOD__,$ret_list);
user_deal.php:        $list = $this->t_month_ass_warning_student_info->get_stu_warning_info(2);
user_deal.php:        $warning_list = $this->t_student_info->get_warning_stu_list();
user_deal.php:                $this->t_month_ass_warning_student_info->row_insert([
user_deal.php:                $this->t_month_ass_warning_student_info->field_update_list($id,[
user_deal.php:        $template_id      = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
user_deal.php:            $data['keyword3'] = date("Y-m-d H:i",time());
user_deal.php:            $data['keyword3'] = date("Y-m-d H:i",time());
user_deal.php:        $start= strtotime("2017-06-18");
user_deal.php:        $teacher_list = $this->t_teacher_lecture_info->get_teacher_list_passed("",$start,$end_time);
user_deal.php:        $teacher_arr = $this->t_teacher_record_list->get_teacher_train_passed("",$start,$end_time);
user_deal.php:        $train_all = $this->t_lesson_info_b2->get_all_train_num_real($start,$end_time,$teacher_list,-1);
user_deal.php:【LEO】试讲-答疑QQ群<br><br>
user_deal.php:时薪：50-100RMB<br><br>
user_deal.php:        $account= $this->get_account();
user_deal.php:        $ret=$this->t_manager_info->get_info_by_account($account,"wx_id,name,phone");
user_deal.php:        return $this->output_succ(["data" => $ret]);
user_deal.php:        $phone=$this->get_in_phone_ex();
user_deal.php:        $name=$this->get_in_str_val("name");
user_deal.php:        $wx_id=$this->get_in_str_val("wx_id");
user_deal.php:        $seller_phone=$this->get_in_str_val("seller_phone");
user_deal.php:        $userid= $this->t_seller_student_new->get_userid_by_phone($phone);
user_deal.php:        $admin_revisiterid =$this->t_seller_student_new->get_admin_revisiterid($userid);
user_deal.php:        if ($admin_revisiterid != $this->get_account_id() ) {
user_deal.php:            return $this->output_err("这个例子还不是你的,不能发短信");
user_deal.php:        $ret=(new notice())-> sms_common( $phone,0,
user_deal.php:        return $this->output_bool_ret($ret);
user_deal.php:        $main_type    = $this->get_in_int_val("main_type");
user_deal.php:        $page_num     = $this->get_in_page_num();
user_deal.php:        $ret_info   = $this->t_admin_group_name->get_group_list_new($page_num,$main_type);
user_deal.php:            $item['group_master_nick']= $this->cache_get_account_nick($item['master_adminid']);
user_deal.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
user_deal.php:        $main_type    = $this->get_in_int_val("main_type");
user_deal.php:        $page_num     = $this->get_in_page_num();
user_deal.php:        $month        = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $ret_info   = $this->t_group_name_month->get_group_list_new($page_num,$main_type,$month);
user_deal.php:            $item['group_master_nick']= $this->cache_get_account_nick($item['master_adminid']);
user_deal.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
user_deal.php:        $groupid    = $this->get_in_int_val("groupid");
user_deal.php:        $up_groupid    = $this->get_in_int_val("up_groupid");
user_deal.php:        $this->t_admin_group_name->field_update_list($groupid,['up_groupid'=>$up_groupid]);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid    = $this->get_in_int_val("groupid");
user_deal.php:        $up_groupid    = $this->get_in_int_val("up_groupid");
user_deal.php:        $month        = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $this->t_group_name_month->field_update_list_2($groupid,$month,['up_groupid'=>$up_groupid]);
user_deal.php:        return $this->output_succ();
user_deal.php:        $type       = $this->get_in_str_val("type","teacher");
user_deal.php:        $gender     = $this->get_in_int_val('gender',-1);
user_deal.php:        $id         = $this->get_in_int_val('id',-1);
user_deal.php:        $nick_phone = trim($this->get_in_str_val('nick_phone',""));
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $page_num  = $this->get_in_page_num();
user_deal.php:        $ret_list= $this->t_student_info->get_list_for_select($id,$gender, $nick_phone, $page_num,$adminid);
user_deal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
user_deal.php:        $groupid   = $this->get_in_int_val("groupid");
user_deal.php:        $month_money   = $this->get_in_int_val("month_money");
user_deal.php:        $month   = $this->get_in_str_val("month");
user_deal.php:        $ret = $this->t_admin_group_month_time->field_get_list_2($groupid, $month,"groupid");
user_deal.php:            $this->t_admin_group_month_time->field_update_list_2($groupid, $month,[
user_deal.php:            $this->t_admin_group_month_time->row_insert([
user_deal.php:        return $this->output_succ(array('data' => $month_money ));
user_deal.php:        $adminid           = $this->get_in_int_val("adminid");
user_deal.php:        $personal_money    = $this->get_in_int_val("personal_money");
user_deal.php:        $month             = $this->get_in_str_val("month");
user_deal.php:        $test_lesson_count = $this->get_in_int_val("test_lesson_count");
user_deal.php:        $ret = $this->t_seller_month_money_target->field_get_list_2($adminid, $month,"adminid");
user_deal.php:            $this->t_seller_month_money_target->field_update_list_2($adminid, $month,[
user_deal.php:            $this->t_seller_month_money_target->row_insert([
user_deal.php:        return  $this->output_succ (array(
user_deal.php:        $adminid   = $this->get_in_int_val("adminid");
user_deal.php:        $groupid   = $this->get_in_int_val("groupid");
user_deal.php:        $month   = $this->get_in_str_val("month");
user_deal.php:        $month_time   = $this->get_in_str_val("month_time");
user_deal.php:            $ret = $this->t_admin_group_month_time->field_get_list_2($groupid, $month,"groupid");
user_deal.php:                $this->t_admin_group_month_time->field_update_list_2($groupid, $month,["month_time"=>$month_time]);
user_deal.php:                $this->t_admin_group_month_time->row_insert([
user_deal.php:            $adminid_list = $this->t_admin_group_user->get_userid_arr($groupid);
user_deal.php:                $res = $this->t_seller_month_money_target->field_get_list_2($item, $month,"adminid");
user_deal.php:                    $this->t_seller_month_money_target->field_update_list_2($item, $month,["month_time"=>$month_time]);
user_deal.php:                    $this->t_seller_month_money_target->row_insert([
user_deal.php:            $ru = $this->t_seller_month_money_target->field_get_list_2($adminid, $month,"adminid");
user_deal.php:                $this->t_seller_month_money_target->field_update_list_2($adminid, $month,["month_time"=>$month_time]);
user_deal.php:                $this->t_seller_month_money_target->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $adminid   = $this->get_in_int_val("adminid");
user_deal.php:        $month   = $this->get_in_str_val("month");
user_deal.php:        $leave_and_overtime  = $this->get_in_str_val("leave_and_overtime");
user_deal.php:        $ru = $this->t_seller_month_money_target->field_get_list_2($adminid, $month,"adminid");
user_deal.php:            $this->t_seller_month_money_target->field_update_list_2($adminid, $month,["leave_and_overtime"=>$leave_and_overtime]);
user_deal.php:            $this->t_seller_month_money_target->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $account=$this->get_in_str_val("account");
user_deal.php:        $adminid=$this->t_manager_info->get_id_by_account($account);
user_deal.php:        return $this->output_succ(["adminid" => $adminid]);
user_deal.php:        $adminid=$this->get_in_int_val("adminid");
user_deal.php:        return $this->output_succ(["account" => $this->t_manager_info->get_account($adminid)  ]);
user_deal.php:        $item_key  = $this->get_in_str_val("item_key");
user_deal.php:        $list_flag = $this->get_in_str_val("list_flag");
user_deal.php:        $term      = trim($this->get_in_str_val("term"));
user_deal.php:            return $this->output_succ(["list" => $match_list]);
user_deal.php:        $item_key=$this->get_in_str_val("item_key");
user_deal.php:        $item_name=$this->get_in_str_val("item_name");
user_deal.php:        return $this->output_succ();
user_deal.php:        $orderid=$this->get_in_int_val("orderid");
user_deal.php:        $from_test_lesson_id=$this->get_in_int_val("from_test_lesson_id");
user_deal.php:        $origin=$this->get_in_str_val("origin");
user_deal.php:        $this->t_order_info->field_update_list($orderid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid    = $this->get_in_int_val("userid");
user_deal.php:        $phone     = $this->get_in_int_val("stu_phone");
user_deal.php:        $old_phone = $this->get_in_int_val("old_phone");
user_deal.php:        if (!$this->check_account_in_arr(["jim","adrian"])) {
user_deal.php:            return $this->output_err("没有权限");
user_deal.php:            return $this->output_err("请输入正确的手机号码!");
user_deal.php:        $phone_list = $this->t_phone_to_user->get_all_phone();
user_deal.php:            return $this->output_err("该账号已存在!");
user_deal.php:        $res = $this->t_phone_to_user->check_is_exist_by_phone_and_userid($userid,$old_phone,1);
user_deal.php:            $this->t_phone_to_user->delete_user_account($old_phone,$userid,1);
user_deal.php:        $this->t_phone_to_user->add($phone,1,$userid);
user_deal.php:        $this->t_student_info->field_update_list($userid,["phone"=>$phone]);
user_deal.php:        $ret = $this->t_phone_to_user->check_is_exist_by_phone_and_userid(-1,$old_phone,4);
user_deal.php:            $this->t_phone_to_user->delete_user_account($old_phone,$parentid,4);
user_deal.php:            $this->t_phone_to_user->add($phone,4,$parentid);
user_deal.php:        $st = $this->t_parent_info->get_parentid_by_phone($old_phone);
user_deal.php:            $this->t_parent_info->update_parent_phone($phone,$old_phone);
user_deal.php:        $this->t_seller_student_new->field_update_list($userid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid=$this->get_in_userid();
user_deal.php:        $origin_userid= $this->get_in_int_val("origin_userid");
user_deal.php:        $this->t_student_info->field_update_list($userid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $page_num=$this->get_in_page_num();
user_deal.php:        $ip= $this->get_in_str_val("ip");
user_deal.php:        $ret_list=$this->t_audio_record_server->get_server_list($page_num,$ip);
user_deal.php:        $check_time=time(NULL)-60;
user_deal.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
user_deal.php:        return $this->output_succ(["data"=> $ret_list]);
user_deal.php:        $userid = $this->get_in_int_val("userid",0);
user_deal.php:        $passwd = $this->get_in_str_val("passwd","");
user_deal.php:                                  ." admin_acc is:".$_SESSION['acc']." time is:".date("Y-m-d H:i:s",time()));
user_deal.php:            return $this->output_err("更改密码出错！请刷新页面后重新更改!");
user_deal.php:        $old_passwd=$this->t_user_info->get_passwd($userid);
user_deal.php:            return $this->output_err("密码与原始密码相同，无需更改!");
user_deal.php:        $ret = $this->t_user_info->field_update_list($userid,[
user_deal.php:            return $this->output_succ();
user_deal.php:            return $this->output_err("密码更改失败，请重试！");
user_deal.php:        // $adminid         = $this->get_in_int_val("adminid");
user_deal.php:        $lesson_target   = $this->get_in_str_val("lesson_target");
user_deal.php:        $month           = strtotime($this->get_in_str_val("month"));
user_deal.php:        $res = $this->t_ass_group_target->field_get_list($month,"rate_target");
user_deal.php:            $this->t_ass_group_target->field_update_list($month,["rate_target"=>$lesson_target]);
user_deal.php:            $this->t_ass_group_target->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $uid= $this->get_in_int_val("uid");
user_deal.php:        $account= trim($this->get_in_str_val("account"));
user_deal.php:        if (!$this->check_account_in_arr(["jim","李子璇","jack"])) {
user_deal.php:            return $this->output_err("没有权限");
user_deal.php:        $db_uid=$this->t_manager_info->get_adminid_by_account($account);
user_deal.php:            return $this->output_err("已经存在:$account");
user_deal.php:        $old_account= $this->t_manager_info->get_account($uid);
user_deal.php:        $this->t_manager_info->field_update_list($uid,[
user_deal.php:        $this->t_admin_users->field_update_list($uid,[
user_deal.php:            $this->t_order_info->update_sys_operator_by_change_account( $old_account, $account  );
user_deal.php:        $this->cache_del_nick("account",$uid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid=$this->get_in_userid();
user_deal.php:        $revisit_time=$this->get_in_int_val("revisit_time");
user_deal.php:        $revisit_type= $this->get_in_e_revisit_type();
user_deal.php:        $revisit_person = $this->get_in_str_val("revisit_person");
user_deal.php:        $operator_note= $this->get_in_str_val("operator_note");
user_deal.php:        $operation_satisfy_flag =$this->get_in_int_val("operation_satisfy_flag",0);
user_deal.php:        $operation_satisfy_type =$this->get_in_int_val("operation_satisfy_type",0);
user_deal.php:        $record_tea_class_flag =$this->get_in_int_val("record_tea_class_flag",0);
user_deal.php:        $tea_content_satisfy_flag =$this->get_in_int_val("tea_content_satisfy_flag",0);
user_deal.php:        $tea_content_satisfy_type=$this->get_in_int_val("tea_content_satisfy_type",0);
user_deal.php:        $operation_satisfy_info= trim($this->get_in_str_val("operation_satisfy_info",""));
user_deal.php:        $child_performance = trim($this->get_in_str_val("child_performance",""));
user_deal.php:        $tea_content_satisfy_info= trim($this->get_in_str_val("tea_content_satisfy_info",""));
user_deal.php:        $other_parent_info= trim($this->get_in_str_val("other_parent_info",""));
user_deal.php:        $other_warning_info= trim($this->get_in_str_val("other_warning_info",""));
user_deal.php:        $child_class_performance_flag =$this->get_in_int_val("child_class_performance_flag",0);
user_deal.php:        $child_class_performance_type =$this->get_in_int_val("child_class_performance_type",0);
user_deal.php:        $child_class_performance_info = trim($this->get_in_str_val("child_class_performance_info",""));
user_deal.php:        $school_score_change_flag  =$this->get_in_int_val("school_score_change_flag",0);
user_deal.php:        $school_score_change_info = trim($this->get_in_str_val("school_score_change_info",""));
user_deal.php:        $school_work_change_flag  =$this->get_in_int_val("school_work_change_flag",0);
user_deal.php:        $school_work_change_type =$this->get_in_int_val("school_work_change_type",0);
user_deal.php:        $school_work_change_info = trim($this->get_in_str_val("school_work_change_info",""));
user_deal.php:        $ret =  $this->t_revisit_info->field_update_list_2($userid,$revisit_time,[
user_deal.php:            $max_revisit_time = $this->t_revisit_info->get_max_revisit_time($userid);
user_deal.php:            $this->t_student_info->field_update_list($userid,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $userid=$this->get_in_userid();
user_deal.php:        $revisit_time=$this->get_in_int_val("revisit_time");
user_deal.php:        $is_warning_flag=$this->get_in_int_val("is_warning_flag");
user_deal.php:        $url = $this->get_in_str_val("warning_deal_url");
user_deal.php:        $warning_deal_info = $this->get_in_str_val("warning_deal_info");
user_deal.php:        $this->t_revisit_info->field_update_list_2($userid,$revisit_time,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $teacherid = $this->get_in_int_val("teacherid",0);
user_deal.php:        $type      = $this->get_in_int_val("type",1);
user_deal.php:            return $this->output_err("老师id出错!");
user_deal.php:        $list = $this->t_teacher_record_list->get_teacher_record_list($teacherid,$type);
user_deal.php:            $val['add_time_str']=date("Y-m-d H:i:s",$val['add_time']);
user_deal.php:            return $this->output_err("该老师没有限课记录!");
user_deal.php:            return $this->output_succ(["data"=>$list]);
user_deal.php:        $teacherid = $this->get_in_int_val("teacherid",0);
user_deal.php:        $type      = $this->get_in_int_val("type",1);
user_deal.php:            return $this->output_err("老师id出错!");
user_deal.php:        $list = $this->t_teacher_record_list->get_teacher_record_list($teacherid,$type);
user_deal.php:            $val['add_time_str']=date("Y-m-d H:i:s",$val['add_time']);
user_deal.php:            return $this->output_err("该老师没有限课记录!");
user_deal.php:            return $this->output_succ(["data"=>$list]);
user_deal.php:        list($start_time,$end_time)=$this->get_in_date_range_month(0);
user_deal.php:        $adminid=$this->get_in_adminid();
user_deal.php:        return $this->output_succ($arr);
user_deal.php:        $id = $this->get_in_int_val("id",0);
user_deal.php:        $data = $this->t_ass_warning_renw_flag_modefiy_list->get_info_by_warning_id($id);
user_deal.php:            $val["account"] = $this->t_manager_info->get_account($val["adminid"]);
user_deal.php:            $val['add_time_str']=date("Y-m-d H:i:s",$val['add_time']);
user_deal.php:            return $this->output_err("没有修改记录!");
user_deal.php:            return $this->output_succ(["data"=>$data]);
user_deal.php:        $userid = $this->get_in_int_val("userid",0);
user_deal.php:        $data = $this->t_student_type_change_list->get_info_by_userid($userid);
user_deal.php:            $val["account"] = $this->t_manager_info->get_account($val["adminid"]);
user_deal.php:            $val["nick"] = $this->t_student_info->get_nick($val["userid"]);
user_deal.php:            $val['add_time_str']=date("Y-m-d H:i:s",$val['add_time']);
user_deal.php:                $val['recover_time_str']=date("Y-m-d",$val['recover_time']);
user_deal.php:                $val['wx_remind_time_str']=date("Y-m-d",$val['wx_remind_time']);
user_deal.php:            return $this->output_err("该老师没有更改类型记录!");
user_deal.php:            return $this->output_succ(["data"=>$data]);
user_deal.php:        $teacherid = $this->get_in_int_val("teacherid",0);
user_deal.php:        $type      = $this->get_in_int_val("type",1);
user_deal.php:            return $this->output_err("老师id出错!");
user_deal.php:        $list = $this->t_teacher_record_list->get_teacher_record_list($teacherid,$type);
user_deal.php:            $val['add_time_str']=date("Y-m-d H:i:s",$val['add_time']);
user_deal.php:            return $this->output_err("该老师没有冻结排课记录!");
user_deal.php:            return $this->output_succ(["data"=>$list]);
user_deal.php:        $adminid = $this->get_in_int_val("adminid",0);
user_deal.php:        $all_count = $this->get_in_int_val("all_count",0);
user_deal.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
user_deal.php:        $data        = $this->t_test_lesson_subject_require->get_teat_lesson_transfor_new($start_time,$end_time,$adminid);
user_deal.php:        $lessonid= $this->get_in_lessonid();
user_deal.php:        $reason = $this->get_in_str_val( "reason");
user_deal.php:        if (!$this->t_flow->get_info_by_key($flow_type,$lessonid)) {
user_deal.php:            $this->t_flow->add_flow(
user_deal.php:                $this->get_account_id(),$reason, $lessonid );
user_deal.php:            return $this->output_succ();
user_deal.php:            return $this->output_err("已经添加了");
user_deal.php:        $from_key_int=$this->get_in_int_val("from_key_int",0);
user_deal.php:        $from_key2_int=$this->get_in_int_val("from_key2_int",0);
user_deal.php:        $flow_type = $this->get_in_e_flow_type(0);
user_deal.php:        $row=$this->t_flow->get_info_by_key($flow_type,$from_key_int,$from_key2_int);
user_deal.php:            $ret_info   = $this->t_flow_node->get_node_list($flowid,"asc");
user_deal.php:                $this->cache_set_item_account_nick($item);
user_deal.php:        return $this->output_succ([
user_deal.php:        $userid=$this->get_in_int_val("userid");
user_deal.php:        $subject=$this->get_in_int_val("subject");
user_deal.php:        $grade=$this->get_in_int_val("grade");
user_deal.php:        $commend_type=$this->get_in_int_val("commend_type");
user_deal.php:        $except_teacher =trim($this->get_in_str_val("except_teacher"));
user_deal.php:        $textbook =trim($this->get_in_str_val("textbook"));
user_deal.php:        $phone_location=trim($this->get_in_str_val("phone_location"));
user_deal.php:        $stu_score_info=trim($this->get_in_str_val("stu_score_info"));
user_deal.php:        $stu_character_info=trim($this->get_in_str_val("stu_character_info"));
user_deal.php:        $stu_request_test_lesson_time=$this->get_in_int_val("stu_request_test_lesson_time");
user_deal.php:        $stu_request_test_lesson_demand  =$this->get_in_str_val("stu_request_test_lesson_demand");
user_deal.php:        $stu_request_lesson_time_info  =$this->get_in_str_val("stu_request_lesson_time_info");
user_deal.php:            return $this->output_err("请设置年级科目");
user_deal.php:            return $this->output_err("请完善试听信息");
user_deal.php:        $ret = $this->t_change_teacher_list->check_is_exist(-1,$userid,$subject,$commend_type);
user_deal.php:            return outputJson(array('ret' => -1, 'info' =>  "<div>已有处理中的该学生该科目的推荐老师申请！<a href='/tea_manage_new/get_seller_require_commend_teacher_info_seller?id=$ret/' target='_blank'>点击查看申请信息<a/><div>"));
user_deal.php:            //return $this->output_err("已有该学生该科目的推荐老师申请!");
user_deal.php:        $accept_adminid = $this->get_account_id_by_subject_and_grade_new($subject,$grade);
user_deal.php:        $num = $this->t_change_teacher_list->get_require_num(-1,$commend_type,$lstart,$lend);
user_deal.php:            return $this->output_err("本月申请次数已达上限".$num."次");
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $res =  $this->t_change_teacher_list->row_insert([
user_deal.php:        $account = $this->get_account();
user_deal.php:        $accept_account = $this->t_manager_info->get_account($accept_adminid);
user_deal.php:        $id= $this->t_change_teacher_list->check_is_exist(-1,$userid,$subject,$commend_type);
user_deal.php:        $teacherid = $this->t_teacher_info->get_teacherid_by_adminid($accept_adminid);
user_deal.php:        $check_lesson_on = $this->t_lesson_info_b2->check_lesson_on($teacherid);
user_deal.php:                $this->t_change_teacher_list->field_update_list($id,["wx_send_time"=>time()]);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($accept_adminid,"推荐老师","销售推荐老师申请","销售".$account."老师申请推荐老师,请尽快处理","http://admin.yb1v1.com/tea_manage_new/get_seller_require_commend_teacher_info?id=".$id);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $except_teacher =trim($this->get_in_str_val("except_teacher"));
user_deal.php:        $this->t_change_teacher_list->field_update_list($id,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $record_teacher=$this->get_in_str_val("record_teacher");
user_deal.php:        $accept_flag=$this->get_in_int_val("accept_flag");
user_deal.php:        $accept_reason=trim($this->get_in_str_val("accept_reason"));
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $res = $this->t_change_teacher_list->field_update_list($id,[
user_deal.php:        $ass_adminid = $this->t_change_teacher_list->get_ass_adminid($id);
user_deal.php:        $userid =  $this->t_change_teacher_list->get_userid($id);
user_deal.php:        $nick = $this->t_student_info->get_nick($userid);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($ass_adminid,"理优教育","推荐老师申请反馈","您为学生".$nick."的推荐老师申请已处理完成,点击查看详情","http://admin.yb1v1.com/tea_manage_new/get_seller_require_commend_teacher_info_seller?id=".$id);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($ass_adminid,"理优教育","推荐老师申请反馈","您为学生".$nick."的推荐老师申请已被驳回,理由如下:
user_deal.php:        return $this->output_succ();
user_deal.php:        $teacherid=$this->get_in_int_val("teacherid");
user_deal.php:        $userid=$this->get_in_int_val("userid");
user_deal.php:        $subject=$this->get_in_int_val("subject");
user_deal.php:        $grade=$this->get_in_int_val("grade");
user_deal.php:        $commend_type=$this->get_in_int_val("commend_type");
user_deal.php:        $change_teacher_reason_type=$this->get_in_int_val("change_teacher_reason_type");
user_deal.php:        $change_reason=trim($this->get_in_str_val("change_reason"));
user_deal.php:        $url=$this->get_in_str_val("change_reason_url");
user_deal.php:        $except_teacher =trim($this->get_in_str_val("except_teacher"));
user_deal.php:        $textbook =trim($this->get_in_str_val("textbook"));
user_deal.php:        $phone_location=trim($this->get_in_str_val("phone_location"));
user_deal.php:        $stu_score_info=trim($this->get_in_str_val("stu_score_info"));
user_deal.php:        $stu_character_info=trim($this->get_in_str_val("stu_character_info"));
user_deal.php:             return $this->output_err("请填写完整!");
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $ret = $this->t_change_teacher_list->check_is_exist($teacherid,$userid,$subject,$commend_type);
user_deal.php:            return $this->output_err("已有该学生该老师的换老师申请!");
user_deal.php:        $res =  $this->t_change_teacher_list->row_insert([
user_deal.php:        $account = $this->get_account();
user_deal.php:        $accept_account = $this->t_manager_info->get_account($accept_adminid);
user_deal.php:        $id= $this->t_change_teacher_list->check_is_exist($teacherid,$userid,$subject,$commend_type);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($accept_adminid,"理优教育","更换老师申请","助教".$account."老师申请更换老师,请尽快协调处理","http://admin.yb1v1.com/user_manage_new/get_ass_change_teacher_info?id=".$id);
user_deal.php:            $realname = $this->t_teacher_info->get_realname($teacherid);
user_deal.php:            $this->t_revisit_info->row_insert([
user_deal.php:                "sys_operator" =>$this->get_account(),
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $commend_teacherid=$this->get_in_int_val("commend_teacherid");
user_deal.php:        $accept_flag=$this->get_in_int_val("accept_flag");
user_deal.php:        $accept_reason=trim($this->get_in_str_val("accept_reason"));
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $res = $this->t_change_teacher_list->field_update_list($id,[
user_deal.php:        $ass_adminid = $this->t_change_teacher_list->get_ass_adminid($id);
user_deal.php:        $teacherid =  $this->t_change_teacher_list->get_teacherid($id);
user_deal.php:        $realname = $this->t_teacher_info->get_realname($teacherid);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($ass_adminid,"理优教育","更换老师申请反馈","您更换".$realname."老师的申请已处理完成,点击查看详情","http://admin.yb1v1.com/user_manage_new/get_ass_change_teacher_info_ass?id=".$id);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($ass_adminid,"理优教育","更换老师申请反馈","您更换".$realname."老师的申请已被驳回,理由如下:
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $change_reason=trim($this->get_in_str_val("change_reason"));
user_deal.php:        $except_teacher =trim($this->get_in_str_val("except_teacher"));
user_deal.php:        $textbook =trim($this->get_in_str_val("textbook"));
user_deal.php:        $phone_location=trim($this->get_in_str_val("phone_location"));
user_deal.php:        $stu_score_info=trim($this->get_in_str_val("stu_score_info"));
user_deal.php:        $stu_character_info=trim($this->get_in_str_val("stu_character_info"));
user_deal.php:        $url=$this->get_in_str_val("change_reason_url");
user_deal.php:            return $this->output_err("请填写完整!");
user_deal.php:        $this->t_change_teacher_list->field_update_list($id,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $this->t_fulltime_teacher_attendance_list->row_delete($id);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $this->t_change_teacher_list->row_delete($id);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $this->t_test_lesson_require_teacher_list->row_delete($id);
user_deal.php:        return $this->output_succ();
user_deal.php:        return $this->output_succ();
user_deal.php:        $teacherid=$this->get_in_int_val("teacherid");
user_deal.php:        $userid=$this->get_in_int_val("userid");
user_deal.php:        $lessonid=$this->get_in_int_val("lessonid");
user_deal.php:        $subject=$this->get_in_int_val("subject");
user_deal.php:        $grade=$this->get_in_int_val("grade");
user_deal.php:        $type=$this->get_in_int_val("type");
user_deal.php:        $is_change_teacher =$this->get_in_int_val("is_change_teacher");
user_deal.php:        $tea_time =$this->get_in_int_val("tea_time");
user_deal.php:        $record_info=trim($this->get_in_str_val("record_info"));
user_deal.php:        $url=$this->get_in_str_val("record_info_url");
user_deal.php:        $textbook =trim($this->get_in_str_val("textbook"));
user_deal.php:        $stu_request_test_lesson_demand =trim($this->get_in_str_val("stu_request_test_lesson_demand"));
user_deal.php:        $stu_score_info=trim($this->get_in_str_val("stu_score_info"));
user_deal.php:        $stu_character_info=trim($this->get_in_str_val("stu_character_info"));
user_deal.php:            return $this->output_err("请填写完整!");
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $ret = $this->t_seller_and_ass_record_list->check_is_exist($lessonid);
user_deal.php:            return $this->output_err("已有该课程的教学质量反馈");
user_deal.php:        $accept_adminid = $this->get_account_id_by_subject_and_grade_new($subject,$grade);
user_deal.php:        $res =  $this->t_seller_and_ass_record_list->row_insert([
user_deal.php:        $account = $this->get_account();
user_deal.php:        $id= $this->t_seller_and_ass_record_list->check_is_exist($lessonid);
user_deal.php:        $accept_account = $this->t_manager_info->get_account($accept_adminid);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($accept_adminid,"理优教育","教学质量反馈待处理",$account."老师提交了一条教学质量反馈,请尽快处理","http://admin.yb1v1.com/tea_manage_new/get_seller_ass_record_info?id=".$id);
user_deal.php:        return $this->output_succ(["account"=>$accept_account]);
user_deal.php:        $lessonid=$this->get_in_int_val("lessonid");
user_deal.php:        $type=$this->get_in_int_val("type");
user_deal.php:        $adminid = $this->get_in_int_val("adminid");
user_deal.php:        $accept_adminid = $this->get_in_int_val("accept_adminid");
user_deal.php:        $add_time = strtotime($this->get_in_str_val("add_time"));
user_deal.php:        $accept_time = strtotime($this->get_in_str_val("accept_time"));
user_deal.php:        $done_time = strtotime($this->get_in_str_val("done_time"));
user_deal.php:        $record_info=trim($this->get_in_str_val("record_info"));
user_deal.php:        $record_scheme=trim($this->get_in_str_val("record_scheme"));
user_deal.php:        $ret = $this->t_seller_and_ass_record_list->check_is_exist($lessonid);
user_deal.php:            return $this->output_err("已有该课程的教学质量反馈");
user_deal.php:        $lesson_info = $this->t_lesson_info->field_get_list($lessonid,"subject,grade,userid,teacherid");
user_deal.php:        $res =  $this->t_seller_and_ass_record_list->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $type=$this->get_in_int_val("type");
user_deal.php:        $adminid = $this->get_in_int_val("adminid");
user_deal.php:        $accept_adminid = $this->get_in_int_val("accept_adminid");
user_deal.php:        $add_time = strtotime($this->get_in_str_val("add_time"));
user_deal.php:        $accept_time = strtotime($this->get_in_str_val("accept_time"));
user_deal.php:        $done_time = strtotime($this->get_in_str_val("done_time"));
user_deal.php:        $record_info=trim($this->get_in_str_val("record_info"));
user_deal.php:        $record_scheme=trim($this->get_in_str_val("record_scheme"));
user_deal.php:        $res =  $this->t_seller_and_ass_record_list->field_update_list($id,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $record_scheme=trim($this->get_in_str_val("record_scheme"));
user_deal.php:        $url=$this->get_in_str_val("record_scheme_url");
user_deal.php:             return $this->output_err("处理方案不能为空!");
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $ret =  $this->t_seller_and_ass_record_list->field_update_list($id,[
user_deal.php:        $require_adminid = $this->t_seller_and_ass_record_list->get_adminid($id);
user_deal.php:        $require_account = $this->t_manager_info->get_account($require_adminid);
user_deal.php:        $account_role = $this->t_manager_info->get_account_role($require_adminid);
user_deal.php:        $account = $this->get_account();
user_deal.php:                 $this->t_manager_info->send_wx_todo_msg_by_adminid ($require_adminid,"理优教育","教学质量反馈结果","您提交的教学质量反馈已由".$account."老师处理完毕,请确认是否解决!","http://admin.yb1v1.com/tea_manage_new/get_seller_ass_record_info_seller?id=".$id);
user_deal.php:                 $this->t_manager_info->send_wx_todo_msg_by_adminid ($require_adminid,"理优教育","教学质量反馈结果","您提交的教学质量反馈已由".$account."老师处理完毕,请确认是否解决!","http://admin.yb1v1.com/tea_manage_new/get_seller_ass_record_info_ass?id=".$id);
user_deal.php:            $leader_adminid = $this->t_admin_group_user->get_main_master_adminid($adminid);
user_deal.php:                 $this->t_manager_info->send_wx_todo_msg_by_adminid ($leader_adminid,"理优教育","教学质量反馈结果",$require_account."提交的教学质量反馈已由".$account."老师处理完毕,请确认是否解决!","http://admin.yb1v1.com/tea_manage_new/get_seller_ass_record_info?id=".$id);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $record_scheme=trim($this->get_in_str_val("record_scheme"));
user_deal.php:        $url=$this->get_in_str_val("record_scheme_url");
user_deal.php:            return $this->output_err("处理方案不能为空!");
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $ret =  $this->t_teacher_complaints_info->field_update_list($id,[
user_deal.php:        $require_adminid = $this->t_teacher_complaints_info->get_adminid($id);
user_deal.php:        $require_account = $this->t_manager_info->get_account($require_adminid);
user_deal.php:        $account = $this->get_account();
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($require_adminid,"理优教育","投诉老师结果反馈","您提交的老师投诉已由".$account."老师处理完毕,点击查看","http://admin.yb1v1.com/tea_manage_new/get_teacher_complaints_info_jw?id=".$id);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $url = $this->get_in_str_val("complaints_info_url");
user_deal.php:        $complaints_info  = $this->get_in_str_val("complaints_info");
user_deal.php:            return $this->output_err("投诉内容不能为空!");
user_deal.php:        $ret =  $this->t_teacher_complaints_info->field_update_list($id,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $is_change_teacher =$this->get_in_int_val("is_change_teacher");
user_deal.php:        $tea_time =$this->get_in_int_val("tea_time");
user_deal.php:        $record_info=trim($this->get_in_str_val("record_info"));
user_deal.php:        $url=$this->get_in_str_val("record_info_url");
user_deal.php:        $textbook =trim($this->get_in_str_val("textbook"));
user_deal.php:        $stu_request_test_lesson_demand =trim($this->get_in_str_val("stu_request_test_lesson_demand"));
user_deal.php:        $stu_score_info=trim($this->get_in_str_val("stu_score_info"));
user_deal.php:        $stu_character_info=trim($this->get_in_str_val("stu_character_info"));
user_deal.php:            return $this->output_err("请填写完整!");
user_deal.php:        $this->t_seller_and_ass_record_list->field_update_list($id,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $this->t_seller_and_ass_record_list->row_delete($id);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $this->t_teacher_complaints_info->row_delete($id);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $is_done_flag =$this->get_in_int_val("is_done_flag");
user_deal.php:        $is_resubmit_flag =$this->get_in_int_val("is_resubmit_flag");
user_deal.php:        $teacherid=$this->get_in_int_val("teacherid");
user_deal.php:        $userid=$this->get_in_int_val("userid");
user_deal.php:        $subject=$this->get_in_int_val("subject");
user_deal.php:        $grade=$this->get_in_int_val("grade");
user_deal.php:        $commend_type=$this->get_in_int_val("commend_type");
user_deal.php:        $change_teacher_reason_type=$this->get_in_int_val("change_teacher_reason_type");
user_deal.php:        $change_reason=trim($this->get_in_str_val("change_reason"));
user_deal.php:        $url=$this->get_in_str_val("change_reason_url");
user_deal.php:        $except_teacher =trim($this->get_in_str_val("except_teacher"));
user_deal.php:        $textbook =trim($this->get_in_str_val("textbook"));
user_deal.php:        $phone_location=trim($this->get_in_str_val("phone_location"));
user_deal.php:        $stu_score_info=trim($this->get_in_str_val("stu_score_info"));
user_deal.php:        $stu_character_info=trim($this->get_in_str_val("stu_character_info"));
user_deal.php:        $account = $this->get_account();
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $accept_adminid = $this->t_seller_and_ass_record_list->get_accept_adminid($id);
user_deal.php:        $accept_account = $this->t_manager_info->get_account($accept_adminid);
user_deal.php:        $ret=  $this->t_change_teacher_list->field_update_list($id,[
user_deal.php:                return $this->output_err("请填写完整!");
user_deal.php:            $res =  $this->t_change_teacher_list->row_insert([
user_deal.php:            $id= $this->t_change_teacher_list->check_is_exist($teacherid,$userid,$subject,$commend_type);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($accept_adminid,"理优教育","更换老师申请(再次提交)","助教".$account."老师申请更换老师,请尽快协调处理","http://admin.yb1v1.com/user_manage_new/get_ass_change_teacher_info?id=".$id);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id=$this->get_in_int_val("id");
user_deal.php:        $is_done_flag =$this->get_in_int_val("is_done_flag");
user_deal.php:        $is_resubmit_flag =$this->get_in_int_val("is_resubmit_flag");
user_deal.php:        $teacherid=$this->get_in_int_val("teacherid");
user_deal.php:        $userid=$this->get_in_int_val("userid");
user_deal.php:        $lessonid=$this->get_in_int_val("lessonid");
user_deal.php:        $subject=$this->get_in_int_val("subject");
user_deal.php:        $grade=$this->get_in_int_val("grade");
user_deal.php:        $type=$this->get_in_int_val("type");
user_deal.php:        $is_change_teacher =$this->get_in_int_val("is_change_teacher");
user_deal.php:        $tea_time =$this->get_in_int_val("tea_time");
user_deal.php:        $record_info=trim($this->get_in_str_val("record_info"));
user_deal.php:        $url=$this->get_in_str_val("record_info_url");
user_deal.php:        $textbook =trim($this->get_in_str_val("textbook"));
user_deal.php:        $stu_request_test_lesson_demand =trim($this->get_in_str_val("stu_request_test_lesson_demand"));
user_deal.php:        $stu_score_info=trim($this->get_in_str_val("stu_score_info"));
user_deal.php:        $stu_character_info=trim($this->get_in_str_val("stu_character_info"));
user_deal.php:        $account = $this->get_account();
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $ret=  $this->t_seller_and_ass_record_list->field_update_list($id,[
user_deal.php:        $accept_adminid = $this->t_seller_and_ass_record_list->get_accept_adminid($id);
user_deal.php:        $accept_account = $this->t_manager_info->get_account($accept_adminid);
user_deal.php:        $leader_adminid = $this->get_account_leader_adminid($accept_adminid);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($accept_adminid,"理优教育","教学质量反馈处理完成",$account."老师提交的教学质量反馈已处理完成,辛苦了","http://admin.yb1v1.com/tea_manage_new/get_seller_ass_record_info?id=".$id);
user_deal.php:                    $this->t_manager_info->send_wx_todo_msg_by_adminid ($leader_adminid,"理优教育","教学质量反馈处理完成",$account."老师提交的教学质量反馈已处理完成,辛苦了","http://admin.yb1v1.com/tea_manage_new/get_seller_ass_record_info?id=".$id);
user_deal.php:            return $this->output_succ();
user_deal.php:                return $this->output_err("请填写完整!");
user_deal.php:            $res =  $this->t_seller_and_ass_record_list->row_insert([
user_deal.php:            $account = $this->get_account();
user_deal.php:            $id= $this->t_seller_and_ass_record_list->check_is_exist($lessonid);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($accept_adminid,"理优教育","教学质量反馈(再次提交)",$account."老师重新提交了一条教学质量反馈,请尽快处理","http://admin.yb1v1.com/tea_manage_new/get_seller_ass_record_info?id=".$id);
user_deal.php:                    $this->t_manager_info->send_wx_todo_msg_by_adminid ($leader_adminid,"理优教育","教学质量反馈(再次提交)",$account."老师重新提交了一条教学质量反馈,将由".$accept_account."老师处理","http://admin.yb1v1.com/tea_manage_new/get_seller_ass_record_info?id=".$id);
user_deal.php:            return $this->output_succ();
user_deal.php:        $machine_id=$this->get_in_int_val("machine_id");
user_deal.php:        $open_door_flag=$this->get_in_int_val("open_door_flag");
user_deal.php:        $title=$this->get_in_str_val("title");
user_deal.php:        $desc=$this->get_in_str_val("desc");
user_deal.php:        $this->t_kaoqin_machine->field_update_list($machine_id,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $machine_id=$this->get_in_int_val("machine_id");
user_deal.php:        $adminid=$this->get_in_adminid();
user_deal.php:        $this->t_kaoqin_machine_adminid->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $machine_id=$this->get_in_int_val("machine_id");
user_deal.php:        $adminid=$this->get_in_adminid();
user_deal.php:        $auth_flag=$this->get_in_int_val("auth_flag");
user_deal.php:        $this->t_kaoqin_machine_adminid->field_update_list_2($machine_id,$adminid, [
user_deal.php:        return $this->output_succ();
user_deal.php:        $machine_id=$this->get_in_int_val("machine_id");
user_deal.php:        $adminid=$this->get_in_adminid();
user_deal.php:        $this->t_kaoqin_machine_adminid->row_delete_2($machine_id,$adminid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $adminid=$this->get_in_adminid();
user_deal.php:        $page_info=$this->get_in_page_info();
user_deal.php:        $ret_list=$this->t_kaoqin_machine_adminid->get_list_by_adminid( $page_info, $adminid  );
user_deal.php:        $ret_list["page_info"]  = $this->get_page_info_for_js( $ret_list["page_info"]   );
user_deal.php:        return $this->output_succ(array('data' => $ret_list ));
user_deal.php:        $adminid=$this->get_in_adminid();
user_deal.php:        $machine_id_list = \App\Helper\Utils::json_decode_as_int_array($this->get_in_str_val("machine_id_list"));
user_deal.php:        $ret_list=$this->t_kaoqin_machine_adminid->get_list_by_adminid( null, $adminid  );
user_deal.php:                    $this->t_kaoqin_machine_adminid->row_insert([
user_deal.php:                    $this->t_kaoqin_machine_adminid->row_delete_2($machine_id,$adminid);
user_deal.php:        $this->t_manager_info->sync_kaoqin_user($adminid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $month = strtotime($this->get_in_str_val("start_time"));
user_deal.php:        $this->t_group_name_month->del_by_month($month);
user_deal.php:        $this->t_group_user_month->del_by_month($month);
user_deal.php:        $this->t_main_group_name_month->del_by_month($month);
user_deal.php:        $admin_group_name_list = $this->t_admin_group_name->get_all_list();
user_deal.php:            $this->t_group_name_month->row_insert([
user_deal.php:        $admin_group_user_list = $this->t_admin_group_user->get_all_list();
user_deal.php:            $this->t_group_user_month->row_insert([
user_deal.php:        $admin_main_group_name_list = $this->t_admin_main_group_name->get_all_list();
user_deal.php:            $this->t_main_group_name_month->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $from_key_int    = $this->get_in_int_val("from_key_int",0);
user_deal.php:        $from_key2_int   = $this->get_in_int_val("from_key2_int",0);
user_deal.php:        $flow_type       = $this->get_in_e_flow_type(0);
user_deal.php:        $reason          = $this->get_in_str_val("reason");
user_deal.php:        $lesson_end_time = $this->t_lesson_info->get_lesson_end($from_key_int);
user_deal.php:        if (strtotime(date('Y-m-d',time(NULL)))<$lesson_end_time) {
user_deal.php:            return $this->output_err( "只能申请今天之前的课程!" );
user_deal.php:        $ret_video_arr = $this->t_lesson_info_b2->get_lesson_url($from_key_int);
user_deal.php:                if ($ret_video['real_begin_time']<($stroke_time-30*60)) {
user_deal.php:                    $this->t_lesson_info_b2->field_update_list($lessonid,[
user_deal.php:        $is_lesson_user_online_status = $this->t_lesson_info_b2->get_online_status_by_lessonid($from_key_int);
user_deal.php:            return $this->output_succ();
user_deal.php:            $ret=$this->t_flow->add_flow(
user_deal.php:                $flow_type,$this->get_account_id(),$reason,$from_key_int,NULL,$from_key2_int
user_deal.php:                return $this->output_err( "已经申请过了" );
user_deal.php:        $teacherid=$this->get_in_int_val("teacherid");
user_deal.php:        $subject=$this->get_in_int_val("subject");
user_deal.php:        $url = $this->get_in_str_val("complaints_info_url");
user_deal.php:        $complaints_info  = $this->get_in_str_val("complaints_info");
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $rr= $this->t_teacher_complaints_info->check_is_exist($teacherid,$adminid);
user_deal.php:            return $this->output_err( "您有对该老师的投诉正在处理中" );
user_deal.php:        $res = $this->t_teacher_complaints_info->row_insert(
user_deal.php:        $account = $this->get_account();
user_deal.php:        $id= $this->t_teacher_complaints_info->check_is_exist($teacherid,$adminid);
user_deal.php:        $accept_account = $this->t_manager_info->get_account($accept_adminid);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($accept_adminid,"理优教育","老师投诉待处理",$account."老师提交了一条老师投诉,请尽快处理","http://admin.yb1v1.com/tea_manage_new/get_teacher_complaints_info?id=".$id);
user_deal.php:        return $this->output_succ();
user_deal.php:        $groupid = $this->get_in_int_val("groupid");
user_deal.php:        $subject = $this->t_admin_group_name->get_subject($groupid);
user_deal.php:        return $this->output_succ(["subject"=>$subject]);
user_deal.php:        $groupid = $this->get_in_int_val("groupid");
user_deal.php:        $subject = $this->get_in_int_val("subject");
user_deal.php:        $this->t_admin_group_name->field_update_list($groupid,["subject"=>$subject]);
user_deal.php:        return $this->output_succ();
user_deal.php:        $ret_info = $this->t_course_order->get_lesson_left_info(1);
user_deal.php:        $list = $this->t_course_order->get_lesson_left_info(2);
user_deal.php:            $ass_master_adminid = $this->t_admin_group_user->get_master_adminid_by_adminid($val["uid"]);
user_deal.php:        $start_time = strtotime(date("Y-m-d",time()))+86400;
user_deal.php:        $end_time = strtotime(date("Y-m-d",time()))+2*86400;
user_deal.php:        $day_start = strtotime(date("Y-m-d",time()));
user_deal.php:        $this->t_test_lesson_require_teacher_list->del_test_lesson_require_teacher_info($day_start,$start_time);
user_deal.php:        $list = $this->t_test_lesson_subject_require->get_need_plan_require($start_time,$end_time);
user_deal.php:            $teacherid_arr = $this->t_lesson_info->get_test_lesson_num_by_free_time_new($lesson_time,$end_time);
user_deal.php:            $ret_info = $this->t_teacher_info->get_usefull_teacher_list($teacherid_arr,$subject,$grade,$lstart,$lend);
user_deal.php:                    $val["week_left_num"]=$val["limit_plan_lesson_type"]-$val["week_lesson_num"];
user_deal.php:                    $ret_num = $this->t_lesson_info->check_teacher_have_test_lesson_pre_week($val["teacherid"],$start_time);
user_deal.php:                        $val["week_left_num"]=$val["limit_week_lesson_num"]-$val["week_lesson_num"];
user_deal.php:                        $val["week_left_num"]=6-$val["week_lesson_num"];
user_deal.php:                    $this->t_test_lesson_require_teacher_list->row_insert([
user_deal.php:        return $this->output_succ();
user_deal.php:        $save_type = $this->get_in_int_val("save_type");
user_deal.php:        $positive_type = $this->get_in_int_val("positive_type");
user_deal.php:        $adminid   = $this->get_in_int_val("adminid");
user_deal.php:        $observe_law_score = $this->get_in_int_val("observe_law_score");
user_deal.php:        $core_socialist_score = $this->get_in_int_val("core_socialist_score");
user_deal.php:        $work_responsibility_score = $this->get_in_int_val("work_responsibility_score");
user_deal.php:        $obey_leadership_score = $this->get_in_int_val("obey_leadership_score");
user_deal.php:        $dedication_score = $this->get_in_int_val("dedication_score");
user_deal.php:        $prepare_lesson_score = $this->get_in_int_val("prepare_lesson_score");
user_deal.php:        $upload_handouts_score = $this->get_in_int_val("upload_handouts_score");
user_deal.php:        $handout_writing_score = $this->get_in_int_val("handout_writing_score");
user_deal.php:        $no_absences_score = $this->get_in_int_val("no_absences_score");
user_deal.php:        $late_leave_score = $this->get_in_int_val("late_leave_score");
user_deal.php:        $prepare_quality_score = $this->get_in_int_val("prepare_quality_score");
user_deal.php:        $class_concent_score = $this->get_in_int_val("class_concent_score");
user_deal.php:        $tea_attitude_score = $this->get_in_int_val("tea_attitude_score");
user_deal.php:        $after_feedback_score = $this->get_in_int_val("after_feedback_score");
user_deal.php:        $modify_homework_score = $this->get_in_int_val("modify_homework_score");
user_deal.php:        $teamwork_positive_score = $this->get_in_int_val("teamwork_positive_score");
user_deal.php:        $test_lesson_prepare_score = $this->get_in_int_val("test_lesson_prepare_score");
user_deal.php:        $undertake_actively_score = $this->get_in_int_val("undertake_actively_score");
user_deal.php:        $active_share_score = $this->get_in_int_val("active_share_score");
user_deal.php:        $active_part_score = $this->get_in_int_val("active_part_score");
user_deal.php:        $order_per_score = $this->get_in_int_val("order_per_score");
user_deal.php:        $stu_num_score  = $this->get_in_int_val("stu_num_score");
user_deal.php:        $lesson_level_score = $this->get_in_int_val("lesson_level_score");
user_deal.php:        $stu_lesson_total_score = $this->get_in_int_val("stu_lesson_total_score");
user_deal.php:        $complaint_refund_score = $this->get_in_int_val("complaint_refund_score");
user_deal.php:        $moral_education_score = $this->get_in_int_val("moral_education_score");
user_deal.php:        $tea_score = $this->get_in_int_val("tea_score");
user_deal.php:        $teach_research_score  = $this->get_in_int_val("teach_research_score");
user_deal.php:        $result_score = $this->get_in_int_val("result_score");
user_deal.php:        $total_score = $this->get_in_int_val("total_score");
user_deal.php:        $rate_stars = $this->get_in_int_val("rate_stars");
user_deal.php:        $order_per = $this->get_in_str_val("order_per");
user_deal.php:        $stu_num = $this->get_in_int_val("stu_num");
user_deal.php:        $stu_lesson_total  = $this->get_in_int_val("stu_lesson_total");
user_deal.php:        $admin_info = $this->t_manager_info->field_get_list($adminid,"post,main_department");
user_deal.php:        $this->t_fulltime_teacher_assessment_list->row_insert([
user_deal.php:        $id = $this->t_fulltime_teacher_assessment_list->get_last_insertid();
user_deal.php:        return $this->output_succ(["id"=>$id]);
user_deal.php:        $id = $this->get_in_int_val("id");
user_deal.php:        $self_assessment = trim($this->get_in_str_val("self_assessment"));
user_deal.php:        $this->t_fulltime_teacher_positive_require_list->field_update_list($id,[
user_deal.php:        return $this->output_succ();
user_deal.php:        $positive_type = $this->get_in_int_val("positive_type");
user_deal.php:        $adminid   = $this->get_in_int_val("adminid");
user_deal.php:        $rate_stars = $this->get_in_int_val("rate_stars");
user_deal.php:        $post = $this->get_in_int_val("post");
user_deal.php:        $main_department = $this->get_in_int_val("main_department");
user_deal.php:        $create_time = $this->get_in_int_val("create_time");
user_deal.php:        $positive_time = $this->get_in_int_val("positive_time");
user_deal.php:        $self_assessment = trim($this->get_in_str_val("self_assessment"));
user_deal.php:        $level = $this->get_in_int_val("level");
user_deal.php:        $positive_level = $this->get_in_int_val("positive_level");
user_deal.php:        $assess_id = $this->get_in_int_val("assess_id");
user_deal.php:        $ret = $this->t_fulltime_teacher_positive_require_list->row_insert([
user_deal.php:            $name = $this->t_manager_info->get_name($adminid);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid (480,"转正申请通知","转正申请通知",$name."老师的已提交转正申请,请审核!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid (349,"转正申请通知","转正申请通知",$name."老师的已提交转正申请,请审核!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id   = $this->get_in_int_val("id");
user_deal.php:        $master_deal_flag  = $this->get_in_int_val("master_deal_flag");
user_deal.php:        $this->t_fulltime_teacher_positive_require_list->field_update_list($id,[
user_deal.php:            "mater_adminid"      =>$this->get_account_id(),
user_deal.php:        $adminid = $this->t_fulltime_teacher_positive_require_list->get_adminid($id);
user_deal.php:        $name = $this->t_manager_info->get_name($adminid);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid ($adminid,"转正申请驳回","转正申请驳回通知",$name."老师,您的转正申请经主管审核,已经被驳回!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid (349,"转正申请驳回","转正申请驳回通知",$name."老师,您的转正申请经主管审核,已经被驳回!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid (72,"转正申请提交","转正申请提交",$name."老师的转正申请经主管审核已同意,请审核!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info_master?adminid=".$adminid);
user_deal.php:            $this->t_manager_info->send_wx_todo_msg_by_adminid (349,"转正申请提交","转正申请提交",$name."老师的转正申请经主管审核已同意,请审核!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info_master?adminid=".$adminid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $id   = $this->get_in_int_val("id");
user_deal.php:        $main_master_deal_flag  = $this->get_in_int_val("main_master_deal_flag");
user_deal.php:        $this->t_fulltime_teacher_positive_require_list->field_update_list($id,[
user_deal.php:            "main_mater_adminid"      =>$this->get_account_id(),
user_deal.php:        $positive_type = $this->t_fulltime_teacher_positive_require_list->get_positive_type($id);
user_deal.php:        $positive_time = $this->t_fulltime_teacher_positive_require_list->get_positive_time($id);
user_deal.php:        $adminid = $this->t_fulltime_teacher_positive_require_list->get_adminid($id);
user_deal.php:        $name = $this->t_manager_info->get_name($adminid);
user_deal.php:                 $this->t_manager_info->send_wx_todo_msg_by_adminid ($adminid,"延期转正申请通过","延期转正申请通过通知",$name."老师,您的延期转正申请经主管和总监审核,已经通过","");
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (349,"延期转正申请通过","延期转正申请通过通知",$name."老师,您的延期转正申请经主管和总监审核,已经通过","");
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (480,"延期转正申请通过","延期转正申请通过通知",$name."老师的延期转正申请经总监审核,已经通过!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (349,"延期转正申请通过","延期转正申请通过通知",$name."老师的延期转正申请经总监审核,已经通过!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (480,"延期转正申请未通过","延期转正申请驳回通知",$name."老师的延期转正申请经总监审核,已经被驳回,请确认!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (349,"延期转正申请未通过","延期转正申请驳回通知",$name."老师的延期转正申请经总监审核,已经被驳回,请确认!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:                $this->t_manager_info->field_update_list($adminid,[
user_deal.php:                 $teacher_info = $this->t_manager_info->get_teacher_info_by_adminid($adminid);
user_deal.php:                $this->t_teacher_info->field_update_list($teacherid,["level"=>1]);
user_deal.php:                $this->t_lesson_info_b2->update_teacher_level($teacherid,1);
user_deal.php:                $email = ["sherry@leoedu.com","hr@leoedu.com","low-key@leoedu.com","erick@leoedu.com","jhp0416@163.com"];
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid ($adminid,"转正申请通过","转正申请通过通知",$name."老师,您的转正申请经主管和总监审核,已经通过,恭喜您!","");
user_deal.php:                //$this->t_manager_info->send_wx_todo_msg_by_adminid (349,"转正申请通过","转正申请通过通知",$name."老师,您的转正申请经主管和总监审核,已经通过,恭喜您!","");
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (480,"转正申请通过","转正申请通过通知",$name."老师的转正申请经总监审核,已经通过!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid."become_full_member_flag=1");
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (349,"转正申请通过","转正申请通过通知",$name."老师的转正申请经总监审核,已经通过!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid."become_full_member_flag=1");
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (480,"转正申请未通过","转正申请驳回通知",$name."老师的转正申请经总监审核,已经被驳回,请确认!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:                $this->t_manager_info->send_wx_todo_msg_by_adminid (349,"转正申请未通过","转正申请驳回通知",$name."老师的转正申请经总监审核,已经被驳回,请确认!","http://admin.yb1v1.com/fulltime_teacher/fulltime_teacher_assessment_positive_info?adminid=".$adminid);
user_deal.php:        return $this->output_succ();
user_deal.php:        $moral_education_score_master = $this->get_in_int_val("moral_education_score_master");
user_deal.php:        $tea_score_master = $this->get_in_int_val("tea_score_master");
user_deal.php:        $teach_research_score_master  = $this->get_in_int_val("teach_research_score_master");
user_deal.php:        $result_score_master = $this->get_in_int_val("result_score_master");
user_deal.php:        $total_score_master = $this->get_in_int_val("total_score_master");
user_deal.php:        $rate_stars_master = $this->get_in_int_val("rate_stars_master");
user_deal.php:        $id = $this->get_in_int_val("id");
user_deal.php:        $this->t_fulltime_teacher_assessment_list->field_update_list($id,[
user_deal.php:            "assess_adminid"               =>$this->get_account_id(),
user_deal.php:        return $this->output_succ();
user_deal.php:        $adminid = $this->get_account_id();
user_deal.php:        $account_role = $this->t_manager_info->get_account_role($adminid);
user_deal.php:            return $this->output_succ(["data"=>0]);
user_deal.php:        $time = strtotime(date("Y-m-d",time()));
user_deal.php:        $num = $this->t_teacher_phone_click_info->get_num($adminid,$time);
user_deal.php:            return $this->output_succ(["data"=>$num]);
user_deal.php:            $this->t_teacher_phone_click_info->field_update_list_2($adminid,$time,[
user_deal.php:            $this->t_teacher_phone_click_info->row_insert([
user_deal.php:        return $this->output_succ(["data"=>$num]);
user_deal.php:        $cc_nick = $this->get_account();
user_deal.php:        $cc_id  = $this->get_account_id();
user_deal.php:        $ispost = $this->get_in_int_val('ispost');
user_deal.php:        $data = \App\Helper\Utils::json_decode_as_array($this->get_in_str_val("data"));
user_deal.php:        $state_arr = $this->t_student_cc_to_cr->get_last_id_reject_flag_by_orderid($orderid);
user_deal.php:            return $this->output_err('交接单已提交,不可修改!');
user_deal.php:            return $this->output_err('首次课时间应在当前时间之后!');
user_deal.php:        $tomo_str  = strtotime(date('Y-m-d',$tomo));  //明天0点时间戳
user_deal.php:        $ten_time_str = strtotime(date('Y-m-d'))-2*60*60; // 今天下午10点
user_deal.php:        $nin_time_str = strtotime(date('Y-m-d'))+9*60*60; // 明天上午9点
user_deal.php:                return $this->output_err('首次上课时间不得早于第二天9点!');
user_deal.php:        $today = strtotime(date('Y-m-d'));
user_deal.php:                return $this->output_err('首次上课时间不得早于9点!');
user_deal.php:             return $this->output_err("每周课次不能为0");
user_deal.php:            return $this->output_err("每次课时不能为0");
user_deal.php:            $ret = $this->t_student_cc_to_cr->row_insert([
user_deal.php:                $master_arr = $this->t_order_info->get_master_openid_by_orderid($data['orderid']);
user_deal.php:                    "keyword3"  => " 提交时间:".date('Y-m-d H:i:s'),
user_deal.php:                $wx->send_template_msg($master_arr['wx_openid'],$template_id,$data_msg ,$url);
user_deal.php:            $this->t_student_cc_to_cr->field_update_list($state_arr['id'],$data);
user_deal.php:        $userid = $this->t_order_info->get_userid($orderid);
user_deal.php:        $this->t_student_info->field_update_list($userid,[
user_deal.php:            "seller_adminid" => $this->get_account_id(),
user_deal.php:        $account=$this->get_account();
user_deal.php:        $this->t_student_info->noti_ass_order($userid, $account );
user_deal.php:        return $this->output_succ();
user_deal.php:        $acc_id         = $this->get_account_id();
user_deal.php:        $acc_nick       = $this->get_account();
user_deal.php:        $is_reject_flag = $this->get_in_int_val('is_reject_flag');
user_deal.php:        $reject_info    = $this->get_in_str_val('reject_info','');
user_deal.php:        $id             = $this->get_in_int_val('id');
user_deal.php:        $orderid        = $this->get_in_int_val('orderid');
user_deal.php:        $sid            = $this->get_in_int_val('sid',0);
user_deal.php:        $cc_id      = $this->t_student_cc_to_cr->get_cc_id_by_id($id);
user_deal.php:        $cc_openid  = $this->t_manager_info->get_wx_openid($cc_id);
user_deal.php:        $now_date   = date('Y-m-d H:i:s');
user_deal.php:            $assistantid         = $this->t_student_info->get_assistantid_by_userid($sid);
user_deal.php:            $ass_master_adminid  = $this->t_student_info->get_ass_master_adminid($sid);
user_deal.php:                return $this->output_err('交接单已分配了助教老师，不能驳回交接单!');
user_deal.php:           $ret = $this->t_student_cc_to_cr->field_update_list($id,[
user_deal.php:                $result = $wx->send_template_msg($cc_openid,$template_id,$data_msg,$url);
user_deal.php:            $ret = $this->t_student_cc_to_cr->field_update_list($id,[
user_deal.php:            return $this->output_succ();
user_deal.php:            return $this->output_err('提交失败!请联系开发人员!');
user_manage_new.php:        $this->check_login_flag =$check_login_flag;
user_manage_new.php:        $this->teacher_money = \App\Helper\Config::get_config("teacher_money");
user_manage_new.php:        return $this->Pageview(__METHOD__);
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range( date("Y-m-01",time(NULL)) ,0 );
user_manage_new.php:        $ret_list   = $this->t_lesson_info->get_confirm_lesson_list($start_time,$end_time);
user_manage_new.php:        $ret_total  = $this->t_lesson_info->get_confirm_lesson_total($start_time,$end_time);
user_manage_new.php:        $week_total = $this->t_lesson_info->get_confirm_lesson_total($date_week["sdate"],$date_week["edate"]);
user_manage_new.php:        $ret_total["assistantid"] =-1;
user_manage_new.php:            $item["assistant_nick"] =$this->cache_get_assistant_nick($item["assistantid"]);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_list );
user_manage_new.php:        return $this->stu_lesson_count_list();
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range( 0 ,0,0,[],2 );
user_manage_new.php:        $assistantid=$this->get_in_assistantid(-1);
user_manage_new.php:        $acc = $this->get_account();
user_manage_new.php:        if($assistantid == -1){
user_manage_new.php:            $assistantid_before = $this->t_assistant_info->get_assistantid($acc);
user_manage_new.php:        $page_num=$this->get_in_page_num();
user_manage_new.php:        $ret_list=$this->t_lesson_info->get_confirm_lesson_list_user($page_num,$start_time,$end_time,$assistantid);
user_manage_new.php:            $this->cache_set_item_student_nick($item);
user_manage_new.php:            $this->cache_set_item_assistant_nick($item);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_list );
user_manage_new.php:        $start_time         = $this->get_in_start_time_from_str(date("Y-m-01",time(NULL)) );
user_manage_new.php:        $end_time           = $this->get_in_end_time_from_str(date("Y-m-d",(time(NULL)+86400)) );
user_manage_new.php:        $lesson_count_start = $this->get_in_int_val("lesson_count_start",0)*100;
user_manage_new.php:        $lesson_count_end   = $this->get_in_int_val("lesson_count_end",0)*100;
user_manage_new.php:        $assistantid        = $this->get_in_int_val("assistantid",-1);
user_manage_new.php:        $type               = $this->get_in_int_val("type",-1);
user_manage_new.php:        $grade              = $this->get_in_grade();
user_manage_new.php:        $page_num           = $this->get_in_page_num();
user_manage_new.php:        $ret_list = $this->t_student_info->get_user_list_by_lesson_count(
user_manage_new.php:            $item["nick"]           = $this->cache_get_student_nick($item["userid"]);
user_manage_new.php:            $item["assistant_nick"] = $this->cache_get_assistant_nick($item["assistantid"]);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_list );
user_manage_new.php:        $start_time = $this->get_in_start_time_from_str(date("Y-m-01",time(NULL)) );
user_manage_new.php:        $end_time   = $this->get_in_end_time_from_str_next_day(date("Y-m-d",(time(NULL)+86400)) );
user_manage_new.php:        $teacher_money_type = $this->get_in_int_val("teacher_money_type",-1);
user_manage_new.php:        $ret_list = $this->t_lesson_info->get_tea_confirm_lesson_list($start_time,$end_time,$teacher_money_type);
user_manage_new.php:            $item["teacher_nick"] =$this->cache_get_teacher_nick($item["teacherid"]);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_list );
user_manage_new.php:        $teacherid  = $this->get_in_teacherid(0);
user_manage_new.php:        $studentid  = $this->get_in_studentid(-1);
user_manage_new.php:        $start_time = $this->get_in_start_time_from_str(date("Y-m-01",time(NULL)-15*86400));
user_manage_new.php:        $end_time   = $this->get_in_end_time_from_str_next_day(
user_manage_new.php:            date("Y-m-d",(strtotime(date("Y-m-01",time(NULL)))-86400)));
user_manage_new.php:        $old_list = $this->t_lesson_info->get_1v1_lesson_list_by_teacher($teacherid,$studentid,$start_time,$end_time);
user_manage_new.php:                    "key_class" => $key_class."-".$cur_key_index,
user_manage_new.php:            $diff = ($item["lesson_end"]-$item["lesson_start"])/60;
user_manage_new.php:                $item["lesson_count_err"]="background-color:red;";
user_manage_new.php:                $data["level"]="l-0";
user_manage_new.php:                    $data["level"]="l-1";
user_manage_new.php:                    $data["stu_nick"]=$this->cache_get_student_nick($key1);
user_manage_new.php:                        $data["level"]="l-2";
user_manage_new.php:                            $data["level"]="l-3";
user_manage_new.php:                            $data["lesson_count_level_str"]="-";
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_list );
user_manage_new.php:        $teacherid  = $this->get_in_teacherid(0);
user_manage_new.php:        $studentid  = $this->get_in_studentid(-1);
user_manage_new.php:        $start_time = $this->get_in_start_time_from_str(date("Y-m-01",time(NULL) -15*86400) );
user_manage_new.php:        $end_time   = $this->get_in_end_time_from_str_next_day(
user_manage_new.php:            date("Y-m-d",(strtotime(date("Y-m-01",time(NULL)))-86400)));
user_manage_new.php:        $lesson_list=$this->t_lesson_info->get_1v1_lesson_list_by_teacher($teacherid,$studentid,$start_time,$end_time);
user_manage_new.php:        list($start_time, $end_time) = $this->get_in_date_range(date("Y-m-01",strtotime("-1 month",time())),0, 0,[],3 );
user_manage_new.php:        $teacherid = $this->get_in_teacherid(0);
user_manage_new.php:            return $this->Pageview(__METHOD__,$ret_list);
user_manage_new.php:        $studentid = $this->get_in_int_val("studentid",-1);
user_manage_new.php:        $teacher_money_type       = $this->t_teacher_info->get_teacher_money_type($teacherid);
user_manage_new.php:        $teacher_honor            = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,1);
user_manage_new.php:        $teacher_trial            = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,2);
user_manage_new.php:        $teacher_compensate       = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,3);
user_manage_new.php:        $teacher_compensate_price = $this->t_teacher_money_list->get_teacher_honor_money($teacherid,$start_time,$end_time,4);
user_manage_new.php:        $old_list                 = $this->t_lesson_info->get_lesson_list_for_wages($teacherid,$start_time,$end_time,$studentid);
user_manage_new.php:            $start = strtotime("-1 month",strtotime(date("Y-m-01",$start_time)));
user_manage_new.php:            $already_lesson_count = $this->t_lesson_info->get_teacher_last_month_lesson_count($teacherid,$start,$end);
user_manage_new.php:                    "key_class" => $key_class."-".$cur_key_index,
user_manage_new.php:                    $arr[$k]-=$v;
user_manage_new.php:                        $lesson_count_level=$key==0?$i:($i-1);
user_manage_new.php:            $diff = ($item["lesson_end"]-$item["lesson_start"])/60;
user_manage_new.php:                $item["lesson_count_err"] = "background-color:red;";
user_manage_new.php:            $this->get_lesson_cost_info($item);
user_manage_new.php:                                        -$item['lesson_cost'];
user_manage_new.php:                        $item["price"]        = $trial_base+$item['lesson_full_reward']-$item['lesson_cost'];
user_manage_new.php:                $data["level"]="l-0";
user_manage_new.php:                    $data["stu_nick"]=$this->cache_get_student_nick($key1);
user_manage_new.php:                    $data["level"]="l-1";
user_manage_new.php:                        $data["level"]      = "l-2";
user_manage_new.php:                            $data["level"]="l-3";
user_manage_new.php:                            $data["lesson_count_level_str"]="-";
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_list,[
user_manage_new.php:            $this->change_num=0;
user_manage_new.php:            $this->late_num=0;
user_manage_new.php:                $lesson_all_cost = $this->teacher_money['lesson_miss_cost']/100;
user_manage_new.php:                if($this->change_num>=3){
user_manage_new.php:                    $lesson_all_cost = $this->teacher_money['lesson_cost']/100;
user_manage_new.php:                    $this->change_num++;
user_manage_new.php:                    $lesson_info     = "本月第".$this->change_num."次换课";
user_manage_new.php:            $lesson_cost = $this->teacher_money['lesson_cost']/100;
user_manage_new.php:                        if($key=="deduct_come_late" && $this->late_num<3){
user_manage_new.php:                            $this->late_num++;
user_manage_new.php:        list($start_time, $end_time, $opt_date_str )= $this->get_in_date_range_month(0,0, [
user_manage_new.php:        $contract_status   = -2;
user_manage_new.php:        $config_courseid   = -1;
user_manage_new.php:        $studentid         = $this->get_in_studentid(-1);
user_manage_new.php:        $check_money_flag  = $this->get_in_int_val("check_money_flag", -1);
user_manage_new.php:        $have_init  = $this->get_in_int_val("have_init", -1);
user_manage_new.php:        $have_master  = $this->get_in_int_val("have_master", -1);
user_manage_new.php:        $assistantid = $this->get_in_int_val("assistantid", -1);
user_manage_new.php:        $page_num          = $this->get_in_page_num();
user_manage_new.php:        $has_money         = -1;
user_manage_new.php:        $contract_type     = $this->get_in_int_val(  'contract_type', -2 );
user_manage_new.php:        $account           = $this->get_account();
user_manage_new.php:        $account_id = $this->get_account_id();
user_manage_new.php:        $is_master = $this->t_admin_main_group_name->check_is_master($main_type,$account_id);
user_manage_new.php:            $up_master_adminid=-1;
user_manage_new.php:        //$up_master_adminid=-1;
user_manage_new.php:        $ret_list=$this->t_order_info->get_order_list($page_num,$start_time,$end_time,$contract_type,$contract_status,$studentid,$config_courseid,$is_test_user, $show_yueyue_flag, $has_money,$check_money_flag ,$assistantid,"",-1,"",-1,-1,-1,-1,-1,-1,$up_master_adminid,$account_id, [],  -1, $opt_date_str," t2.assistantid asc , order_time desc",$have_init,$have_master);
user_manage_new.php:            $item['contract_starttime'    ] = $item['contract_starttime'] ?  date("Y-m-d",$item['contract_starttime']):"无";
user_manage_new.php:            $item['contract_endtime'      ] = date("Y-m-d",$item['contract_endtime']);
user_manage_new.php:            //$item["check_money_admin_nick"] = $this->cache_get_account_nick( $item["check_money_adminid"] );
user_manage_new.php:            $item['assistant_nick']  = $this->cache_get_assistant_nick($item["assistantid"]);
user_manage_new.php:            $item["ass_assign_time"]       = $item["ass_assign_time"]==0?'未分配':date('Y-m-d H:i:s',$item["ass_assign_time"]);
user_manage_new.php:            $item["master_assign_time_str"]       = $item["master_assign_time"]==0?'未分配':date('Y-m-d H:i:s',$item["master_assign_time"]);
user_manage_new.php:                $item["origin_user_nick"] = $this->t_student_info->get_nick($item["origin_userid"]);
user_manage_new.php:                $item["origin_assid"] = $this->t_student_info->get_assistantid($item["origin_userid"]);
user_manage_new.php:                $item["origin_ass_nick"] = $this->t_assistant_info->get_nick($item["origin_assid"]);
user_manage_new.php:            $hand_over_num = $this->t_student_cc_to_cr->get_hand_over_stat_by_orderid($item['orderid']);
user_manage_new.php:            $last_reject_flag = $this->t_student_cc_to_cr->get_last_id_reject_flag_by_orderid($item['orderid']);
user_manage_new.php:                    $item['reject_num'] = $hand_over_num-1;
user_manage_new.php:                $item['modify_num'] = $hand_over_num-1;
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_list, [
user_manage_new.php:        //$this->set_filed_for_js("userid_flag",999);
user_manage_new.php:        return $this->money_contract_list();
user_manage_new.php:        $start_time      = $this->get_in_start_time_from_str(date("Y-m-d",(time(NULL)-86400*7)) );
user_manage_new.php:        $end_time        = $this->get_in_end_time_from_str(date("Y-m-d",(time(NULL)+86400)) );
user_manage_new.php:        $userid_flag   = $this->get_in_int_val("userid_flag",-1);
user_manage_new.php:        $contract_type   = $this->get_in_int_val("contract_type",-2);
user_manage_new.php:        $contract_status =  $this->get_in_el_contract_status();
user_manage_new.php:        $config_courseid = -1;
user_manage_new.php:        $is_test_user    =  $this->get_in_int_val("is_test_user", 0 , E\Eboolean::class  );
user_manage_new.php:        $studentid       = $this->get_in_studentid(-1);
user_manage_new.php:        $check_money_flag = $this->get_in_int_val("check_money_flag", -1);
user_manage_new.php:        $origin           = $this->get_in_str_val("origin");
user_manage_new.php:        $page_num        = $this->get_in_page_num();
user_manage_new.php:        $from_type = $this->get_in_int_val("from_type",-1);
user_manage_new.php:        $account_role = $this->get_in_int_val("account_role",-1);
user_manage_new.php:        $has_money = -1;
user_manage_new.php:        $sys_operator = $this->get_in_str_val("sys_operator","");
user_manage_new.php:        $need_receipt  = $this->get_in_int_val("need_receipt", -1, E\Eboolean::class);
user_manage_new.php:        $account=$this->get_account();
user_manage_new.php:        $this->set_in_value("userid_stu",$studentid);
user_manage_new.php:        $userid_stu   = $this->get_in_int_val("userid_stu");
user_manage_new.php:        $ret_list=$this->t_order_info->get_order_list(
user_manage_new.php:            $check_money_flag,-1,$origin,$from_type,$sys_operator,
user_manage_new.php:            $account_role, -1,-1,-1, $need_receipt, -1, -1, 74 , [], -1, "order_time",  "order_time desc" );
user_manage_new.php:            if(empty($item["lesson_start"]) && $item["order_time"] < strtotime(date("2016-11-01")) && $item["contract_type"]==0){
user_manage_new.php:                $item["lesson_start"] = $this->t_lesson_info->get_user_test_lesson_start($userid,$item["order_time"]);
user_manage_new.php:            $check_time=strtotime( date("Y-m-d",$lesson_start)) +86400*2;
user_manage_new.php:            $item['contract_starttime'] = $item['contract_starttime'] ?  date("Y-m-d",$item['contract_starttime']):"无";
user_manage_new.php:            $item['contract_endtime'] = date("Y-m-d",$item['contract_endtime']);
user_manage_new.php:            $item["check_money_admin_nick"]= $this->cache_get_account_nick( $item["check_money_adminid"] );
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_list, [
user_manage_new.php:            $n             = ["k1"=>"----","k2"=> $level>=2?"----":"","k3"=> $level>=3?"----":"" ];
user_manage_new.php:            $k1_class= $this->gen_class(1);
user_manage_new.php:                    $k2_class= $this->gen_class(2);
user_manage_new.php:                            $k3_class= $this->gen_class(3);
user_manage_new.php:        $list=$this->get_menu_power_list($power_map,$menu,$start );
user_manage_new.php:            ["power_id"=>1, "name"=>"子栏-学生信息", "list"=> $stu_menu],
user_manage_new.php:            ["power_id"=>2, "name"=>"子栏-老师信息", "list"=> $tea_menu],
user_manage_new.php:        $sub_list=$this->get_menu_power_list ($power_map,$sub_menu,$start*2 );
user_manage_new.php:        $list=$this->get_menu_power_list($power_map,$tea_admin_menu,$start );
user_manage_new.php:        $main_type=$this->get_in_int_val("main_type",2);
user_manage_new.php:        $group_list=$this->t_admin_group_name->get_group_list($main_type);
user_manage_new.php:        $groupid=$this->get_in_int_val("groupid", -1);
user_manage_new.php:            $db_main_type= $this->t_admin_group_name->get_main_type($groupid);
user_manage_new.php:                $groupid= -1;
user_manage_new.php:        if ($groupid==-1)  {
user_manage_new.php:            $this->set_in_value("groupid", $default_groupid );
user_manage_new.php:            $groupid=$this->get_in_int_val("groupid", -1);
user_manage_new.php:        $ret_info=$this->t_admin_group_user->get_user_list($groupid);
user_manage_new.php:            $this->cache_set_item_account_nick($item);
user_manage_new.php:            $group_master_adminid= $this->t_admin_group_name->get_master_adminid($groupid);
user_manage_new.php:            $group_master_nick= $this->cache_get_account_nick($group_master_adminid);
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info,
user_manage_new.php:        $main_type=$this->get_in_int_val("main_type",2);
user_manage_new.php:        $group_list=$this->t_admin_main_group_name->get_group_list($main_type);
user_manage_new.php:        $groupid=$this->get_in_int_val("groupid", -1);
user_manage_new.php:            $db_main_type= $this->t_admin_main_group_name->get_main_type($groupid);
user_manage_new.php:                $groupid= -1;
user_manage_new.php:        if ($groupid==-1)  {
user_manage_new.php:            $this->set_in_value("groupid", $default_groupid );
user_manage_new.php:            $groupid=$this->get_in_int_val("groupid", -1);
user_manage_new.php:        $ret_info=$this->t_admin_main_group_name->get_user_list($groupid,$main_type);
user_manage_new.php:            $item['master_nick']= $this->cache_get_account_nick($item['master_adminid']);
user_manage_new.php:            $group_master_adminid= $this->t_admin_main_group_name->get_master_adminid($groupid);
user_manage_new.php:            $group_master_nick= $this->cache_get_account_nick($group_master_adminid);
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info,
user_manage_new.php:        $ret_info=$this->t_admin_main_group_name->get_group_list(2);
user_manage_new.php:            $item['master_nick']= $this->cache_get_account_nick($item['master_adminid']);
user_manage_new.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info));
user_manage_new.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],1);
user_manage_new.php:        $account     = trim($this->get_in_str_val('account',''));
user_manage_new.php:        $seller_work_status = $this->get_in_int_val('seller_work_status',-1);
user_manage_new.php:        $plan_seller_work_status = $this->get_in_int_val('plan_seller_work_status',-1);
user_manage_new.php:        $day = date('Y-m-d',$start_time);
user_manage_new.php:        $month = date('Y-m-01',$start_time);
user_manage_new.php:        $ret_info = $this->t_admin_group_name->get_seller_admin_info(2,$account,$month);
user_manage_new.php:            }else if($seller_work_status==-2){
user_manage_new.php:            if($item['level'] != "l-4"){
user_manage_new.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info),["plan_work_count"=>$plan_work_count,"real_work_count"=>$real_work_count,"leave_count"=>$leave_count,"overtime_count"=>$overtime_count]);
user_manage_new.php:        $month = $this->get_in_str_val('month');
user_manage_new.php:        $day = $this->get_in_str_val('start_time');
user_manage_new.php:        $adminid = $this->get_in_int_val('adminid');
user_manage_new.php:        $seller_work_status = $this->get_in_int_val('seller_work_status');
user_manage_new.php:        $leave_and_overtime = $this->t_seller_month_money_target->field_get_value_2($adminid,$month,"leave_and_overtime");
user_manage_new.php:        $this->t_seller_month_money_target->field_update_list_2($adminid,$month,["leave_and_overtime"=>$leave_and_overtime]);
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        list($start_time,$end_time)=$this->get_in_date_range(date("Y-m-01"),0,0,[],3);
user_manage_new.php:        $start_time = date('Y-m-d',$start_time);
user_manage_new.php:        $ret_info = $this->t_manager_info->get_seller_month_money_info($start_time);
user_manage_new.php:        $num_info = $this->t_admin_group_user->get_group_num($start_time);
user_manage_new.php:            if($item['level'] == "l-4"){
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info,['month'=>$start_time,"month_week_start"=>$month_week_start]);
user_manage_new.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],3);
user_manage_new.php:        $monthtime_flag = $this->get_in_int_val("monthtime_flag",1);
user_manage_new.php:        // $admin_info = $this->t_manager_info->get_admin_member_list();
user_manage_new.php:        return $this->pageView(__METHOD__, \App\Helper\Utils::list_to_page_info($list),["monthtime_flag"=>$monthtime_flag]);
user_manage_new.php:        $month = $this->get_in_str_val('month');
user_manage_new.php:            return $this->error_view(
user_manage_new.php:            list($start_time,$end_time)=$this->get_in_date_range(date("Y-m-01"),0,0,[],3);
user_manage_new.php:            if($month != date('Y-m-d',$start_time )){
user_manage_new.php:                $month = date('Y-m-d',$start_time);
user_manage_new.php:            $adminid = $this->get_in_int_val('adminid');
user_manage_new.php:            $groupid = $this->get_in_int_val('groupid');
user_manage_new.php:            return $this->pageView(__METHOD__, null ,['month_time_str'=>$month_time_str,'start_time'=>$start_time,'adminid'=>$adminid,'groupid'=>$groupid,"month"=>$month]);
user_manage_new.php:        $month = $this->get_in_str_val('month');
user_manage_new.php:        $adminid = $this->get_in_int_val('adminid');
user_manage_new.php:        $groupid = $this->get_in_int_val('groupid');
user_manage_new.php:            $month_time = $this->t_admin_group_month_time->field_get_value_2($groupid,$month,"month_time");
user_manage_new.php:            $month_time = $this->t_seller_month_money_target->field_get_value_2($adminid,$month,"month_time");
user_manage_new.php:        return  $this->output_succ( [ "data" =>$month_time] );
user_manage_new.php:        $month = $this->get_in_str_val('month');
user_manage_new.php:        $adminid = $this->get_in_int_val('adminid');
user_manage_new.php:        $leave_and_overtime = $this->t_seller_month_money_target->field_get_value_2($adminid,$month,"leave_and_overtime");
user_manage_new.php:        return  $this->output_succ( [ "data" =>$leave_and_overtime] );
user_manage_new.php:        list($start_time,$end_time)=$this->get_in_date_range(date("Y-m-01"),0,0,[],3);
user_manage_new.php:        // $start_time = date('Y-m-d',$start_time);
user_manage_new.php:        $account_id = $this->get_account_id();
user_manage_new.php:        $is_master = $this->t_admin_main_group_name->check_is_master($main_type,$account_id);
user_manage_new.php:            $up_master_adminid=-1;
user_manage_new.php:        $lesson_target = $this->t_ass_group_target->get_rate_target($start_time);
user_manage_new.php:        $ret_info = $this->t_manager_info->get_assistant_month_target_info($start_time,$up_master_adminid,$account_id);
user_manage_new.php:            if($item["level"] != "l-4"){
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info);
user_manage_new.php:        $start = strtotime(date('Y-m-01',time()));
user_manage_new.php:        $day = intval(ceil((time()-$start)/86400)-1);
user_manage_new.php:        $day = $day-2*$day;
user_manage_new.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],3);
user_manage_new.php:        $start_first = date('Y-m-01',$start_time);
user_manage_new.php:        $this->t_seller_month_money_target->switch_tongji_database();
user_manage_new.php:        $ret_info = $this->t_seller_month_money_target->get_seller_month_time_info($start_first);
user_manage_new.php:        $end_day = date('d',($end_time-10));
user_manage_new.php:            $day = ceil(($end_time- $start_time)/86400);
user_manage_new.php:                            $l--;
user_manage_new.php:        $this->t_admin_group_user->switch_tongji_database();
user_manage_new.php:        $group_money_info = $this->t_admin_group_user->get_seller_month_money_info($start_first);
user_manage_new.php:        $num_info = $this->t_admin_group_user->get_group_num($start_time);
user_manage_new.php:        $this->t_tq_call_info->switch_tongji_database();
user_manage_new.php:        $list=$this->t_tq_call_info->tongji_tq_info_new($start_time,$end_time);
user_manage_new.php:        $this->t_test_lesson_subject_require->switch_tongji_database();
user_manage_new.php:        $tr_info=$this->t_test_lesson_subject_require->tongji_require_test_lesson_group_by_admin_revisiterid($start_time,$end_time);
user_manage_new.php:        $test_leeson_list=$this->t_test_lesson_subject_require->tongji_test_lesson_group_by_admin_revisiterid($start_time,$end_time );
user_manage_new.php:        $this->t_order_info->switch_tongji_database();
user_manage_new.php:        $order_new = $this->t_order_info->get_1v1_order_list_by_adminid($start_time,$end_time,-1);
user_manage_new.php:                $res[$k]['los_money'] = $res[$k]['target_money']-$v['all_price']/100;
user_manage_new.php:                $res[$k]['los_personal_money'] = $res[$k]['target_personal_money']-$v['all_price']/100;
user_manage_new.php:        $ret_info=\App\Helper\Common::gen_admin_member_data($res,[],0, strtotime( date("Y-m-01",$start_time )   ));
user_manage_new.php:            $item['los_money'] = @$item['target_money']-@$item['all_price_for_month'];
user_manage_new.php:            $item['los_personal_money'] = @$item['target_personal_money']-@$item['all_price_for_month'];
user_manage_new.php:            if($item['level'] == "l-4" ){
user_manage_new.php:        return $this->pageView(__METHOD__,\App\Helper\Utils::list_to_page_info($ret_info));
user_manage_new.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],1);
user_manage_new.php:        $this->t_test_lesson_subject_require->switch_tongji_database();
user_manage_new.php:        $this->t_seller_month_money_target->switch_tongji_database();
user_manage_new.php:        $this->t_tq_call_info->switch_tongji_database();
user_manage_new.php:        $admin_list=$this->t_seller_month_money_target->get_seller_list_day($start_time);
user_manage_new.php:        $tr_desc_info=$this->t_test_lesson_subject_require->tongji_require_test_lesson_list($start_time,$end_time,$admin_list, "desc" );
user_manage_new.php:        $tr_asc_info=$this->t_test_lesson_subject_require->tongji_require_test_lesson_list($start_time,$end_time,$admin_list,"asc");
user_manage_new.php:        $list_tq_desc=$this->t_tq_call_info->tongji_tq_info_ex($start_time,$end_time,$admin_list, "desc");
user_manage_new.php:        $list_tq_asc=$this->t_tq_call_info->tongji_tq_info_ex($start_time,$end_time,$admin_list, "asc");
user_manage_new.php:        return $this->pageView(__METHOD__, null, ["tr_asc_info"=>$tr_asc_info, "tr_desc_info" =>$tr_desc_info ,"list_tq_asc" => $list_tq_asc, "list_tq_desc" => $list_tq_desc]);
user_manage_new.php:        $group_list = $this->t_authority_group->get_auth_groups();
user_manage_new.php:        $groupid  = $this->get_in_int_val("groupid",$default_groupid);
user_manage_new.php:        $show_flag= $this->get_in_int_val("show_flag", -1);
user_manage_new.php:        $user_list=$this->t_manager_info->get_power_group_user_list($groupid);
user_manage_new.php:            $power_map=$this->t_authority_group->get_auth_group_map($groupid);
user_manage_new.php:            $list=$this->get_menu_list($power_map );
user_manage_new.php:            $k1_class= $this->gen_class(1);
user_manage_new.php:                $n=["k1"=>"----","k2"=>"","k3"=>"" ];
user_manage_new.php:                $k2_class= $this->gen_class(2);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info,[
user_manage_new.php:        $uid      = $this->get_in_int_val("uid") ;
user_manage_new.php:        $groupid  = $this->get_in_int_val("groupid") ;
user_manage_new.php:        $opt_type = $this->get_in_str_val("opt_type","add") ;
user_manage_new.php:        $this->t_manager_info->opt_group($uid,$opt_type,$groupid);
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $groupid        = $this->get_in_int_val("groupid") ;
user_manage_new.php:        $power_list_str = $this->get_in_str_val("power_list_str") ;
user_manage_new.php:        $this->t_authority_group->field_update_list($groupid,[
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $this->t_authority_group->row_insert([
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $groupid    = $this->get_in_int_val("groupid");
user_manage_new.php:        $group_name = $this->get_in_str_val("group_name");
user_manage_new.php:        $this->t_authority_group->field_update_list($groupid,[
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $phone  = $this->get_in_phone();
user_manage_new.php:        $role   = $this->get_in_int_val("role");
user_manage_new.php:        $userid = $this->get_in_userid();
user_manage_new.php:        if ($this->t_phone_to_user->get_info_by_userid($userid)) {
user_manage_new.php:            return $this->output_err("userid已存在:$userid");
user_manage_new.php:        $this->t_phone_to_user->set_userid($phone,$role,$userid);
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $userid = $this->get_in_userid();
user_manage_new.php:        $parentid  = $this->get_in_parentid();
user_manage_new.php:        $parent_type= $this->get_in_int_val("parent_type");
user_manage_new.php:        $this->t_parent_child->set_parentid($userid,$parent_type,$parentid);
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $userid = $this->get_in_userid();
user_manage_new.php:        $parentid  = $this->get_in_parentid();
user_manage_new.php:        $parent_type= $this->get_in_int_val("parent_type");
user_manage_new.php:        $this->t_parent_child->del($userid,$parent_type,$parentid);
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $page_num=$this->get_in_page_num();
user_manage_new.php:        $phone= $this->get_in_phone();
user_manage_new.php:        $userid= $this->get_in_userid(-1);
user_manage_new.php:        $ret_info=$this->t_phone_to_user->get_list($page_num,$phone,$userid);
user_manage_new.php:                $nick=$this->cache_get_student_nick($id);
user_manage_new.php:                $nick=$this->cache_get_teacher_nick($id);
user_manage_new.php:                $nick=$this->cache_get_assistant_nick($id);
user_manage_new.php:                $nick=$this->cache_get_parent_nick($id);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage_new.php:        $type    = $this->get_in_int_val("type",0);
user_manage_new.php:        $groupid = $this->get_in_int_val("groupid");
user_manage_new.php:            $ret = $this->t_authority_group->row_delete($groupid);
user_manage_new.php:            $ret=$this->t_user_authority_group->row_delete($groupid);
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $courseid = $this->get_in_courseid();
user_manage_new.php:        $userid   = $this->get_in_userid();
user_manage_new.php:        $lessonid_list = $this->t_lesson_info->get_lessonid_list($courseid,0);
user_manage_new.php:        $this->t_small_class_user->start_transaction();
user_manage_new.php:        $ret = $this->t_small_class_user->row_delete_2($courseid,$userid);
user_manage_new.php:                $ret = $this->t_small_lesson_info->row_delete_2($val['lessonid'],$userid);
user_manage_new.php:                    $this->t_small_lesson_info->rollback();
user_manage_new.php:                    return $this->output_err("删除失败，请重试！");
user_manage_new.php:            $this->t_small_lesson_info->commit();
user_manage_new.php:            return $this->output_succ();
user_manage_new.php:            $this->t_small_lesson_info->rollback();
user_manage_new.php:            return $this->output_err("删除失败，请重试！");
user_manage_new.php:        $orderid          = $this->get_in_int_val("orderid");
user_manage_new.php:        $is_invoice       = $this->get_in_int_val("is_invoice" );
user_manage_new.php:        $invoice          = $this->get_in_str_val("invoice" );
user_manage_new.php:        $check_money_desc = $this->get_in_str_val("check_money_desc" );
user_manage_new.php:        $order_stamp_flag = $this->get_in_str_val("order_stamp_flag" );
user_manage_new.php:        $this->t_order_info->field_update_list($orderid,[
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $page_num = $this->get_in_page_num();
user_manage_new.php:        $ret_list = $this->t_assistant_info->get_type_count_by_ass($page_num);
user_manage_new.php:            $item['yi_total_revisit'] = $this->t_student_info->get_revisit_count_all_by_assistantid($item['assistantid']);
user_manage_new.php:            $item['total_revisit']    = ($this->t_student_info->get_lesson_count_all_by_assistantid($item['assistantid']))+1;
user_manage_new.php:            $item['first_revisit']    = $this->t_student_info->get_first_revisit_by_assistantid($item['assistantid']);
user_manage_new.php:            $item['yi_first_revisit'] = $this->t_student_info->get_yi_first_revisit_by_assistantid($item['assistantid']);
user_manage_new.php:            $item['xq_revisit']       = $this->t_student_info->get_xq_revisit_by_assistantid($item['assistantid']);
user_manage_new.php:            $item['yd_revisit']       = $this->t_student_info->get_yd_revisit_by_assistantid($item['assistantid']);
user_manage_new.php:            $item['assistant_nick']   = $this->cache_get_assistant_nick($item['assistantid']);
user_manage_new.php:            $item['yyd_revisit']      = ($item['total_revisit']-1)/4;
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_list );
user_manage_new.php:        $phone    = $this->get_in_phone();
user_manage_new.php:        $list     = $this->t_seller_student_info->get_origin_info($phone);
user_manage_new.php:        $ret_list["page_info"] = $this->get_page_info_for_js( $ret_list["page_info"]   );
user_manage_new.php:        $lessonid=$this->get_in_lessonid();
user_manage_new.php:        $info=$this->t_lesson_info_b2-> get_info_for_monitor($lessonid);
user_manage_new.php:        return $this->output_succ(["data"=>$info]);
user_manage_new.php:        $year=$this->get_in_int_val("year","2016");
user_manage_new.php:        $month=$this->get_in_int_val("month","5");
user_manage_new.php:        $start_time=strtotime( "$year-$month-01");
user_manage_new.php:            $next_month=$next_month-12;
user_manage_new.php:        $end_time=strtotime( "$year-$next_month-01");
user_manage_new.php:        $old_order_list=$this->t_order_info->get_order_list_for_tongji(-1,$start_time);
user_manage_new.php:        $new_order_list=$this->t_order_info->get_order_list_for_tongji($start_time,$end_time);
user_manage_new.php:        $ret["old_pay_user_count"]= count($new_user_map)- $ret["new_user_count"];
user_manage_new.php:        $lesson_list=$this->t_lesson_info-> get_lesson_list_for_tongji($start_time,$end_time);
user_manage_new.php:        return $this->pageView(__METHOD__,null, [
user_manage_new.php:        $userid=$this->get_in_userid();
user_manage_new.php:        $init_info_pdf_url=$this->get_in_str_val("init_info_pdf_url");
user_manage_new.php:        $this->t_student_info->field_update_list($userid,[
user_manage_new.php:        $nick=$this->cache_get_student_nick($userid);
user_manage_new.php:        $account=$this->get_account();
user_manage_new.php:        $ret= $this->t_manager_info->send_template_msg("fly",$template_id,[
user_manage_new.php:            "keyword1" => "学生-$nick",
user_manage_new.php:            "keyword2" => "助教-$account",
user_manage_new.php:            "keyword3" => date("Y-m-d H:i:s"),
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $page_num=$this->get_in_page_num();
user_manage_new.php:        $ret_info=$this->t_audio_record_server->get_server_list($page_num);
user_manage_new.php:        $check_time=time(NULL)-60;
user_manage_new.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage_new.php:        $ip=$this->get_in_str_val("ip");
user_manage_new.php:        //$this->t_audio_record_server->row_delete($ip);
user_manage_new.php:        //return $this->output_succ();
user_manage_new.php:        $ip=$this->get_in_str_val("ip");
user_manage_new.php:        $priority=$this->get_in_int_val("priority");
user_manage_new.php:        $max_record_count=$this->get_in_int_val("max_record_count");
user_manage_new.php:        $config_userid=$this->get_in_int_val("config_userid");
user_manage_new.php:        $desc=$this->get_in_str_val("desc");
user_manage_new.php:        $this->t_audio_record_server->field_update_list($ip,[
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $teacher_money_type = $this->get_in_int_val("teacher_money_type");
user_manage_new.php:        $level = $this->get_in_int_val("level");
user_manage_new.php:        return $this->pageView(__METHOD__, $page_info);
user_manage_new.php:        $teacher_money_type = $this->get_in_int_val("teacher_money_type");
user_manage_new.php:            $level = $this->get_in_int_val("level");
user_manage_new.php:        $type      = $this->t_teacher_money_type->get_teacher_type($teacher_money_type,$level);
user_manage_new.php:        $ret = $this->t_teacher_money_type->get_teacher_money_type_list($teacher_money_type,$level);
user_manage_new.php:        return $this->pageView(__METHOD__,$page_info,["total_type" => $total_type]);
user_manage_new.php:        $powerid = $this->get_in_int_val("powerid");
user_manage_new.php:        $list    = $this->t_authority_group->get_all_list();
user_manage_new.php:        return $this->output_succ(["data"=> $list]);
user_manage_new.php:        $powerid      = $this->get_in_int_val("powerid");
user_manage_new.php:        $groupid_list = \App\Helper\Utils::json_decode_as_int_array( $this->get_in_str_val("groupid_list"));
user_manage_new.php:        $list         = $this->t_authority_group->get_all_list();
user_manage_new.php:                $this->t_authority_group->field_update_list($groupid,[
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $this->set_in_value("check_adminid", $this->get_account_id() );
user_manage_new.php:        $this->set_in_value("show_add_money_flag", 0 );
user_manage_new.php:        return $this->tea_lesson_count_total_list();
user_manage_new.php:        list($start_time, $end_time)=$this->get_in_date_range(date("Y-m-01", time(NULL)-28*86400 ),0, 0,[],3 );
user_manage_new.php:        $confirm_flag           = $this->get_in_int_val("confirm_flag",-1, E\Eboolean::class);
user_manage_new.php:        $pay_flag               = $this->get_in_int_val("pay_flag",-1, E\Eboolean::class);
user_manage_new.php:        $show_add_money_flag    = $this->get_in_int_val("show_add_money_flag",1);
user_manage_new.php:        $check_adminid          = $this->get_in_int_val("check_adminid",-1);
user_manage_new.php:        $has_check_adminid_flag = $this->get_in_int_val("has_check_adminid_flag",-1,E\Eboolean::class );
user_manage_new.php:        $ret_info = $this->t_lesson_info->get_lesson_info_for_teacher($start_time,$end_time,$has_check_adminid_flag,$check_adminid);
user_manage_new.php:        $real_money_list = $this->t_teacher_month_money->get_list($start_time,$confirm_flag,$pay_flag);
user_manage_new.php:            $this->cache_set_item_account_nick($item,"confirm_adminid", "confirm_admin_nick");
user_manage_new.php:            $this->cache_set_item_account_nick($item,"pay_adminid", "pay_admin_nick");
user_manage_new.php:            $this->cache_set_item_account_nick($item,"check_adminid", "check_admin_nick");
user_manage_new.php:            $subject = $this->t_lesson_info->get_teacher_subject($teacherid,$start_time,$end_time);
user_manage_new.php:        if ($confirm_flag != -1 ||  $pay_flag  != -1 ) {
user_manage_new.php:                if ($confirm_flag  != -1  ){
user_manage_new.php:                    if ($pay_flag !=-1 ){
user_manage_new.php:        return $this->pageView(__METHOD__,$ret_info,[
user_manage_new.php:        list($start_time,$end_time)=$this->get_in_date_range_month(date("Y-m-01"));
user_manage_new.php:        $ret_info=$this->t_lesson_info->get_lesson_student_grade_list($start_time,$end_time);
user_manage_new.php:            $this->cache_set_item_student_nick($item);
user_manage_new.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage_new.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0);
user_manage_new.php:        $teacherid = $this->get_in_teacherid();
user_manage_new.php:        $studentid = -1;
user_manage_new.php:        $old_list     = $this->t_lesson_info->get_1v1_lesson_list_by_teacher($teacherid,$studentid,$start_time,$end_time);
user_manage_new.php:        return $this->output_succ([
user_manage_new.php:        list($start_time,$end_time) =        $this->get_in_date_range(-30,0);
user_manage_new.php:        $page_num=$this->get_in_page_num();
user_manage_new.php:        $lesson_type=$this->get_in_int_val("lesson_type",-1, E\Econtract_type::class);
user_manage_new.php:        $this->t_lesson_info->switch_tongji_database();
user_manage_new.php:        $ret_info=$this->t_lesson_info->get_error_record_lesson_list($page_num,$lesson_type,$start_time,$end_time );
user_manage_new.php:            $this->cache_set_item_student_nick($item);
user_manage_new.php:            $this->cache_set_item_teacher_nick($item);
user_manage_new.php:            #$item ["lesson_upload_time"]= date('Y-m-d H:i:s',$item["lesson_upload_time"]);
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info );
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(-30,0);
user_manage_new.php:        $page_num    = $this->get_in_page_num();
user_manage_new.php:        $gift_type   = $this->get_in_int_val("gift_type" ,-1, E\Econtract_type::class);
user_manage_new.php:        $status      = $this->get_in_int_val("status" ,-1, E\Econtract_type::class);
user_manage_new.php:        $assistantid = $this->get_in_int_val("assistantid",-1);
user_manage_new.php:        $ret_info = $this->t_gift_consign->get_commodity_consign_list(
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info );
user_manage_new.php:        $assistantid=$this->t_assistant_info->get_assistantid($this->get_account());
user_manage_new.php:        $this->set_in_value("assistantid", $assistantid);
user_manage_new.php:        return $this->commodity_exchange_management();
user_manage_new.php:        $page_num = $this->get_in_page_num();
user_manage_new.php:        $ret_info = $this->t_gift_info->get_gift_info($page_num);
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info );
user_manage_new.php:        $student_type = $this->get_in_int_val("student_type" ,-1);
user_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid" ,-1);
user_manage_new.php:        $ret_info = $this->t_course_order->get_tea_stu($student_type,$teacherid);
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info );
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range( date("Y-m-01",time(NULL)) ,0,0,[],3 );
user_manage_new.php:        $grade    = $this->get_in_grade();
user_manage_new.php:        $page_num = $this->get_in_page_num();
user_manage_new.php:        $ret_info = $this->t_student_info ->get_test_lesson_lost_user_list( $page_num,$grade,$start_time,$end_time);
user_manage_new.php:            $this->cache_set_item_account_nick( $item, "last_revisit_adminid", "last_revisit_admin_nick");
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info );
user_manage_new.php:        $userid           = $this->get_in_int_val("userid");
user_manage_new.php:        $competition_flag = $this->get_in_int_val("competition_flag");
user_manage_new.php:        $orderid          = $this->get_in_int_val("orderid");
user_manage_new.php:            $userid           = $this->t_order_info->get_userid($orderid);
user_manage_new.php:            $competition_flag = $this->t_order_info->get_competition_flag($orderid);
user_manage_new.php:        //$course_cost = $this->t_course_order->reset_assigned_lesson_count($userid,$competition_flag);
user_manage_new.php:        $lesson_unassigned = $this->t_course_order->get_unassigned_lesson_total($userid,$competition_flag,$orderid);
user_manage_new.php:        return $this->output_succ(["lesson_unassigned" => $lesson_unassigned]);
user_manage_new.php:        list($start_time, $end_time) = $this->get_in_date_range(date("Y-m-01",strtotime("-1 month",time())),0, 0,[],3 );
user_manage_new.php:        $teacher_ref_type            = $this->get_in_int_val("teacher_ref_type",-1);
user_manage_new.php:        $teacher_money_type          = $this->get_in_int_val("teacher_money_type",-1);
user_manage_new.php:        $level                       = $this->get_in_int_val("level",-1);
user_manage_new.php:        $show_data                   = $this->get_in_int_val("show_data");
user_manage_new.php:        $acc                         = $this->get_account();
user_manage_new.php:        $this->switch_tongji_database();
user_manage_new.php:        $tea_list = $this->t_lesson_info->get_tea_month_list(
user_manage_new.php:        $full_start_time = strtotime("-1 month",$start_time);
user_manage_new.php:        $full_tea_list = $this->t_lesson_info->get_tea_month_list(
user_manage_new.php:        $stu_num = $this->t_lesson_info->get_stu_total($start_time,$end_time,$teacher_money_type);
user_manage_new.php:        $all_lesson_money = $this->t_order_lesson_list->get_all_lesson_money($start_time,$end_time,$teacher_money_type);
user_manage_new.php:        return $this->pageView(__METHOD__,$list,[
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(date("Y-m-01",strtotime("-1 month",time())),0, 0,[],3 );
user_manage_new.php:        $this->t_lesson_info->switch_tongji_database();
user_manage_new.php:        $list = $this->t_lesson_info->get_tea_wages_count_list($start_time,$end_time);
user_manage_new.php:        $ret = $this->get_teacher_1v1_money($start_time,$end_time);
user_manage_new.php:                $data['cost_percent']         = $this->get_price_percent($data['cost'],$all_cost);
user_manage_new.php:                $data['price_percent']        = $this->get_price_percent($data['price'],$all_price);
user_manage_new.php:                $data['lesson_price_percent'] = $this->get_price_percent($data['lesson_price'],$all_lesson_price);
user_manage_new.php:                $data['last_price_percent']   = $this->get_price_percent($data['last_price'],$all_last_price);
user_manage_new.php:                $data['final_percent']        = $this->get_price_percent($data['last_price'],$data['lesson_price']);
user_manage_new.php:        return $this->pageView(__METHOD__,$result);
user_manage_new.php:        $start_fourth = strtotime("-1 month",$start);
user_manage_new.php:        $end_fourth   = strtotime("-1 month",$end);
user_manage_new.php:        $fourth_list = $this->t_lesson_info->get_all_fourth_teacher_already_lesson_count($start_fourth,$end_fourth);
user_manage_new.php:        $list = $this->t_lesson_info->get_teacher_1v1_money($start,$end);
user_manage_new.php:                if($start<strtotime("2016-12-1")){
user_manage_new.php:                    $item['last_price'] = $item['price']-$item['cost'];
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
user_manage_new.php:        $this->t_lesson_info->switch_tongji_database();
user_manage_new.php:            $tea_list   = $this->t_lesson_info->get_tea_month_list(
user_manage_new.php:                $start_time,$end_time,-1,0,-1,-1
user_manage_new.php:            $full_start_time = strtotime("-1 month",$start_time);
user_manage_new.php:            $full_tea_list   = $this->t_lesson_info->get_tea_month_list(
user_manage_new.php:                $full_start_time,$start_time,-1,3,-1,-1
user_manage_new.php:            $date_str = date("m-d",$start_time);
user_manage_new.php:            $stu_num  = $this->t_lesson_info->get_stu_total($start_time,$end_time);
user_manage_new.php:                        $stu_num = $this->t_lesson_info->get_stu_total($start_time,$end_time,$teacher_money_type);
user_manage_new.php:                        $stu_num = $this->t_lesson_info->get_stu_total($start_time,$end_time,$teacher_money_type,$level);
user_manage_new.php:                        $stu_num = $this->t_lesson_info->get_stu_total($start_time,$end_time,$teacher_money_type,$level);
user_manage_new.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage_new.php:        $page_num=$this->get_in_page_num();
user_manage_new.php:        $ret_info = $this->t_send_wx_template_record_list->get_send_wx_template_record_list($page_num);
user_manage_new.php:            $item["send_time_str"] = date("Y-m-d H:i:s",$item["send_time"]);
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info );
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(date('Y-m-01',time()), 0 );
user_manage_new.php:        $page_num=$this->get_in_page_num();
user_manage_new.php:        $subject = $this->get_in_int_val("subject",-1);
user_manage_new.php:        $ret_info = $this->t_good_video_send_list->get_all_video_senf_info($start_time,$end_time,$subject,$page_num);
user_manage_new.php:            $item["send_time_str"] = date("Y-m-d H:i:s",$item["send_time"]);
user_manage_new.php:        return $this->pageView(__METHOD__, $ret_info );
user_manage_new.php:        $exchangeid = $this->get_in_int_val("exchangeid");
user_manage_new.php:        $status     = $this->get_in_int_val("status");
user_manage_new.php:        $ret=$this->t_gift_consign->field_update_list($exchangeid,[
user_manage_new.php:            return $this->output_succ();
user_manage_new.php:            return $this->output_err("设置失败！");
user_manage_new.php:        $group_list = $this->t_user_authority_group->get_auth_groups();
user_manage_new.php:        $role    = $this->get_in_int_val("role",2);
user_manage_new.php:        $groupid = $this->get_in_int_val("groupid",1);
user_manage_new.php:        $power_map = $this->t_authority_group->get_auth_group_map($groupid);
user_manage_new.php:        $list      = $this->get_tea_admin_menu_list($power_map );
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info,[
user_manage_new.php:        $orderid    = $this->get_in_int_val("orderid");
user_manage_new.php:        $apply_time = $this->get_in_int_val("apply_time");
user_manage_new.php:        $refund_info = $this->t_order_refund->field_get_list_2($orderid,$apply_time,"*");
user_manage_new.php:        $order_info  = $this->t_order_info->get_order_info_by_orderid($orderid);
user_manage_new.php:        $this->t_order_info->start_transaction();
user_manage_new.php:        $ret = $this->t_order_info->field_update_list($orderid,[
user_manage_new.php:            $ret = $this->t_order_refund->row_delete_2($orderid,$apply_time);
user_manage_new.php:                $this->t_order_info->commit();
user_manage_new.php:                return $this->output_succ();
user_manage_new.php:                $this->t_order_info->rollback();
user_manage_new.php:                return $this->output_err("退费记录删除失败!");
user_manage_new.php:            $this->t_order_info->rollback();
user_manage_new.php:            return $this->output_err("合同课时变更失败!");
user_manage_new.php:        $account_id = $this->get_account_id();
user_manage_new.php:        $is_master = $this->t_admin_main_group_name->check_is_master($main_type,$account_id);
user_manage_new.php:            $up_master_adminid=-1;
user_manage_new.php:        list($start_time, $end_time) = $this->get_in_date_range(0,0, 0,[],2 );
user_manage_new.php:        $page_num    = $this->get_in_page_num();
user_manage_new.php:        $leader_flag = $this->get_in_int_val("leader_flag",0);
user_manage_new.php:        $assistantid = $this->get_in_int_val("assistantid",-1);
user_manage_new.php:        $ass_renw_flag = $this->get_in_int_val("ass_renw_flag",-1);
user_manage_new.php:        $master_renw_flag = $this->get_in_int_val("master_renw_flag",-1);
user_manage_new.php:        $renw_week = $this->get_in_int_val("renw_week",-1);
user_manage_new.php:        $end_week = $this->get_in_int_val("end_week",-1);
user_manage_new.php:        $ret_info    = $this->t_month_ass_warning_student_info->get_all_info_by_month(
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage_new.php:        $this->set_in_value("leader_flag",$leader_flag);
user_manage_new.php:        return $this->ass_warning_stu_info();
user_manage_new.php:        $this->set_in_value("leader_flag",$leader_flag);
user_manage_new.php:        return $this->ass_warning_stu_info_new();
user_manage_new.php:        $account_id = $this->get_account_id();
user_manage_new.php:        $is_master = $this->t_admin_main_group_name->check_is_master($main_type,$account_id);
user_manage_new.php:            $up_master_adminid=-1;
user_manage_new.php:        $page_num    = $this->get_in_page_num();
user_manage_new.php:        $leader_flag = $this->get_in_int_val("leader_flag",0);
user_manage_new.php:        $assistantid = $this->get_in_int_val("assistantid",-1);
user_manage_new.php:        $ass_renw_flag = $this->get_in_int_val("ass_renw_flag",-1);
user_manage_new.php:        $master_renw_flag = $this->get_in_int_val("master_renw_flag",-1);
user_manage_new.php:        $renw_week = $this->get_in_int_val("renw_week",-1);
user_manage_new.php:        $end_week = $this->get_in_int_val("end_week",-1);
user_manage_new.php:        $ret_info    = $this->t_month_ass_warning_student_info->get_all_info_by_month_new(
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage_new.php:        $orderid = $this->get_in_int_val("orderid");
user_manage_new.php:        $order_info             = $this->t_order_info->get_order_info_by_orderid($orderid);
user_manage_new.php:        $order_info['realname'] = $this->t_student_info->get_realname($order_info['userid']);
user_manage_new.php:        $order_info['phone']    = $this->t_student_info->get_phone($order_info['userid']);
user_manage_new.php:        return $this->output_succ(["data"=>$order_info]);
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(date("Y-m-d",time()),0,0,null,3);
user_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid",-1);
user_manage_new.php:        $type      = $this->get_in_int_val("type",-1);
user_manage_new.php:        $lessonid  = $this->get_in_int_val("lessonid",-1);
user_manage_new.php:        $list = $this->t_teacher_money_list->get_teacher_trial_reward_list($start_time,$end_time,$teacherid,$type,$lessonid);
user_manage_new.php:            $val['tea_nick'] = $this->cache_get_teacher_nick($val['teacherid']);
user_manage_new.php:                $val['stu_nick'] = $this->cache_get_student_nick($val['userid']);
user_manage_new.php:        return $this->Pageview(__METHOD__,$list);
user_manage_new.php:        $id = $this->get_in_int_val("id",-1);
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
user_manage_new.php:        $adminid = $this->get_account_id();
user_manage_new.php:            $adminid=-1;
user_manage_new.php:        $page_num        = $this->get_in_page_num();
user_manage_new.php:        $ass_adminid     = $this->get_in_int_val("ass_adminid",-1);
user_manage_new.php:        $accept_flag     = $this->get_in_int_val("accept_flag",-1);
user_manage_new.php:        $require_adminid = $this->get_in_int_val("require_adminid",-1);
user_manage_new.php:        $accept_adminid = $this->get_in_int_val("accept_adminid",$adminid);
user_manage_new.php:        $ret_info        = $this->t_change_teacher_list->get_ass_change_teacher_info($start_time,$end_time,$ass_adminid,$page_num,$id,$require_adminid,$accept_adminid,$accept_flag,1);
user_manage_new.php:            $val["url"] = substr($val["change_reason_url"],$num,$num_url-1);
user_manage_new.php:                $val["deal_time"] = round(($val["accept_time"] - $val["add_time"])/3600,2);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage_new.php:        $adminid = $this->get_account_id();
user_manage_new.php:        $this->set_in_value("ass_adminid",$adminid);
user_manage_new.php:        $this->set_in_value("accept_adminid",-1);
user_manage_new.php:        return $this->get_ass_change_teacher_info();
user_manage_new.php:        $id         = $this->get_in_int_val("id");
user_manage_new.php:        $type       = $this->get_in_int_val("type");
user_manage_new.php:        $money_info = $this->get_in_str_val("money_info");
user_manage_new.php:        $money      = $this->get_in_str_val("money");
user_manage_new.php:        $this->t_teacher_money_list->field_update_list($id,[
user_manage_new.php:            "acc"        => $this->get_account(),
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $id = $this->get_in_int_val("id");
user_manage_new.php:        $ret=$this->t_teacher_money_list->row_delete($id);
user_manage_new.php:            return $this->output_err("删除失败！请重试！");
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,3);
user_manage_new.php:        $page_num        = $this->get_in_page_num();
user_manage_new.php:        $is_warning_flag = $this->get_in_int_val("is_warning_flag",1);
user_manage_new.php:        $ass_adminid = $this->get_in_int_val("ass_adminid",-1);
user_manage_new.php:        $seller_groupid_ex    = $this->get_in_str_val('seller_groupid_ex', "");
user_manage_new.php:        $require_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
user_manage_new.php:        $adminid_right              = $this->get_seller_adminid_and_right();
user_manage_new.php:        $this->t_revisit_info->switch_tongji_database();
user_manage_new.php:        $ret_info = $this->t_revisit_info->get_ass_revisit_warning_info($start_time,$end_time,$page_num,$is_warning_flag,$ass_adminid,$require_adminid_list);
user_manage_new.php:        return $this->pageView(__METHOD__,$ret_info,[
user_manage_new.php:        $this->set_in_value("ass_adminid",$this->get_account_id());
user_manage_new.php:        return $this->ass_revisit_warning_info();
user_manage_new.php:        $adminid = $this->get_account_id();
user_manage_new.php:            $adminid=-1;
user_manage_new.php:        // list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],2);
user_manage_new.php:        $assistantid = $this->get_in_int_val('assistantid',-1);
user_manage_new.php:        $userid      = $this->get_in_int_val('userid',-1);
user_manage_new.php:        $teacherid      = $this->get_in_int_val('teacherid',-1);
user_manage_new.php:        $adminid      = $this->get_in_int_val('adminid',$adminid);
user_manage_new.php:        $ret = $this->t_week_regular_course->get_all_week_regular_course_info_all($assistantid,$userid,$teacherid,$adminid);
user_manage_new.php:        $list1 = $this->t_week_regular_course->get_all_week_regular_course_info($lstart,$assistantid,$userid,$teacherid,$adminid);
user_manage_new.php:            $item["lesson_start_str"] = date("Y-m-d H:i:s",$item["lesson_start"]);
user_manage_new.php:        $list2 = $this->t_week_regular_course->get_all_week_regular_course_info($lstart+7*86400,$assistantid,$userid,$teacherid,$adminid);
user_manage_new.php:            $tt["lesson_start_str"] = date("Y-m-d H:i:s",$tt["lesson_start"]);
user_manage_new.php:        $list3 = $this->t_week_regular_course->get_all_week_regular_course_info($lstart+14*86400,$assistantid,$userid,$teacherid,$adminid);
user_manage_new.php:            $ttt["lesson_start_str"] = date("Y-m-d H:i:s",$ttt["lesson_start"]);
user_manage_new.php:        return $this->Pageview(__METHOD__,$list);
user_manage_new.php:        $page_num = $this->get_in_page_num();
user_manage_new.php:        $ret_info = $this->t_user_report->get_report_info($page_num);
user_manage_new.php:                $opt_nick= $this->cache_get_parent_nick($report_uid);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage_new.php:        $grade          = $this->get_in_grade();
user_manage_new.php:        $all_flag       = $this->get_in_int_val('all_flag',0);
user_manage_new.php:        $test_user      = $this->get_in_int_val('test_user',-1);
user_manage_new.php:        $originid       = $this->get_in_int_val('originid',-1);
user_manage_new.php:        $user_name      = trim($this->get_in_str_val('user_name',''));
user_manage_new.php:        $phone          = trim($this->get_in_str_val('phone',''));
user_manage_new.php:        $assistantid    = $this->get_in_int_val("assistantid",-1);
user_manage_new.php:        $seller_adminid = $this->get_in_int_val("seller_adminid",-1);
user_manage_new.php:        $order_type     = $this->get_in_int_val("order_type",-1);
user_manage_new.php:        $page_num       = $this->get_in_page_num();
user_manage_new.php:        $status         = -1;
user_manage_new.php:        $userid         = $this->get_in_userid(-1);
user_manage_new.php:        $ass_groupid_ex    = $this->get_in_str_val('seller_groupid_ex', "");
user_manage_new.php:        $ass_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($ass_groupid_ex);
user_manage_new.php:        $adminid_right              = $this->get_seller_adminid_and_right();
user_manage_new.php:        $teacherid = -1;
user_manage_new.php:        // if ($assistantid >0 && $order_type == -1) {
user_manage_new.php:        list($start_time,$end_time)= $this->get_in_date_range(-100 ,0, 0 );
user_manage_new.php:        $ret_info = $this->t_student_info->get_student_list_search_two_weeks( $start_time,$end_time,
user_manage_new.php:            $item["seller_admin_nick"] = $this->cache_get_account_nick($item["seller_adminid"] );
user_manage_new.php:            $item["assistant_nick"]    = $this->cache_get_assistant_nick ($item["assistantid"] );
user_manage_new.php:            $item["ss_assign_time"]    = $item["ass_assign_time"]==0?'未分配':date('Y-m-d H:i:s',$item["ass_assign_time"]);
user_manage_new.php:            $item["cache_nick"]        = $this->cache_get_student_nick($item["userid"]) ;
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info,[
user_manage_new.php:        $page_num       = $this->get_in_page_num();
user_manage_new.php:        list($start_time,$end_time)= $this->get_in_date_range(0,0,0,[],3 );
user_manage_new.php:        $attendance_type  = $this->get_in_int_val("attendance_type",-1);
user_manage_new.php:        $teacherid = $this->get_in_int_val("teacherid",-1);
user_manage_new.php:        $adminid = $this->get_in_int_val("adminid",-1);
user_manage_new.php:        $account_role = $this->get_in_int_val("account_role",-1);
user_manage_new.php:        $ret_info = $this->t_fulltime_teacher_attendance_list->get_fulltime_teacher_attendance_list($start_time,$end_time,$attendance_type,$teacherid,$page_num,$adminid,$account_role);
user_manage_new.php:            $item["attendance_time_str"] = date("Y-m-d",$item["attendance_time"]);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info,[
user_manage_new.php:        $this->set_in_value("account_role",5);
user_manage_new.php:        return $this->get_fulltime_teacher_attendance_info();
user_manage_new.php:        $orderid         = $this->get_in_int_val("orderid");
user_manage_new.php:        $order_time_date = $this->get_in_str_val("order_time_date",date("Y-m-d H:i",time()));
user_manage_new.php:        $acc             = $this->get_account();
user_manage_new.php:        $ret = $this->t_order_info->field_update_list($orderid,[
user_manage_new.php:            return $this->output_err("更新失败！请重试！");
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $page_info = $this->get_in_page_info();
user_manage_new.php:        $post = $this->get_in_int_val("post",-1);
user_manage_new.php:        $department = $this->get_in_int_val("department",-1);
user_manage_new.php:        $department_group = $this->get_in_int_val("department_group",-1);
user_manage_new.php:        $user_info         = trim($this->get_in_str_val('user_info',''));
user_manage_new.php:        $adminid           = $this->get_in_adminid(-1);
user_manage_new.php:        $main_department = $this->get_in_int_val("main_department",-1);
user_manage_new.php:        $ret_info = $this->t_manager_info->get_product_department_memeber_list( $page_info,$user_info,$adminid,$post,$department,$department_group,$main_department);
user_manage_new.php:            \App\Helper\Utils::unixtime2date_for_item($item,"create_time","_str","Y-m-d");
user_manage_new.php:            \App\Helper\Utils::unixtime2date_for_item($item,"become_full_member_time","_str","Y-m-d");
user_manage_new.php:            \App\Helper\Utils::unixtime2date_for_item($item,"order_end_time","_str","Y-m-d");
user_manage_new.php:                $item["rurl"] = substr($item["resume_url"],$num,$num_surl-1);
user_manage_new.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage_new.php:        $this->set_in_value("main_department",2);
user_manage_new.php:        return $this->production_department_memeber_list();
user_manage_new.php:        $this->set_in_value("main_department",1);
user_manage_new.php:        return $this->production_department_memeber_list();
user_manage_new.php:        $this->set_in_value("main_department",3);
user_manage_new.php:        return $this->production_department_memeber_list();
user_manage_new.php:        $this->set_in_value("main_department",4);
user_manage_new.php:        return $this->production_department_memeber_list();
user_manage_new.php:        $this->set_in_value("main_department",5);
user_manage_new.php:        return $this->production_department_memeber_list();
user_manage_new.php:        $this->set_in_value("main_department",6);
user_manage_new.php:        return $this->production_department_memeber_list();
user_manage_new.php:        $this->set_in_value("main_department",7);
user_manage_new.php:        return $this->production_department_memeber_list();
user_manage_new.php:        $main_department = $this->get_in_int_val("main_department");
user_manage_new.php:        return  $this->output_succ( [ "data" =>$list] );
user_manage_new.php:        $type = $this->get_in_int_val("type",1);
user_manage_new.php:        $acc  = $this->get_account();
user_manage_new.php:        $send_info = $acc."用户在".date("Y-m-d H:i",time())."时候，尝试重置学生的相关年级,类型为".$type_str;
user_manage_new.php:            return $this->output_err("你没有此权限!");
user_manage_new.php:        $type = $this->get_in_int_val("type");
user_manage_new.php:        $stu_list = $this->t_student_info->get_stu_list($type);
user_manage_new.php:        $orderid = $this->get_in_int_val("orderid");
user_manage_new.php:        $contract_type= $this->get_in_int_val("contract_type");
user_manage_new.php:            $orderid=$this->t_order_info->get_parent_order_id($orderid);
user_manage_new.php:                return $this->output_err("没有数据");
user_manage_new.php:        $ret_list=$this->t_order_info->get_relation_order_list($orderid);
user_manage_new.php:            $this->cache_set_item_student_nick($item );
user_manage_new.php:        return $this->pageView(__METHOD__,$ret_list);
user_manage_new.php:        $userid              = $this->get_in_int_val("userid");
user_manage_new.php:        $orderid             = $this->get_in_int_val("orderid");
user_manage_new.php:        $parent_lesson_count = ($this->get_in_str_val("parent_lesson_count"))*100;
user_manage_new.php:        $lesson_count        = ($this->get_in_str_val("lesson_count"))*100;
user_manage_new.php:        $grade               = $this->get_in_int_val("grade");
user_manage_new.php:        $competition_flag    = $this->get_in_int_val("competition_flag");
user_manage_new.php:        $order_info = $this->t_order_info->get_order_info_by_orderid($orderid);
user_manage_new.php:            return $this->output_err("此合同不是执行中的合同，无法拆分！");
user_manage_new.php:            return $this->output_err("此合同不是常规或续费合同，无法拆分！");
user_manage_new.php:        $this->t_order_info->start_transaction();
user_manage_new.php:            return $this->output_err("课时不足！无法拆分！");
user_manage_new.php:        $ret = $this->t_order_info->row_insert([
user_manage_new.php:            $this->t_order_info->rollback();
user_manage_new.php:            return $this->output_err("分割失败！请重试！");
user_manage_new.php:        $ret = $this->t_order_info->field_update_list($orderid,[
user_manage_new.php:            $this->t_order_info->rollback();
user_manage_new.php:            return $this->output_err("分割失败！请重试！");
user_manage_new.php:        $this->t_order_info->commit();
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $orderid = $this->get_in_int_val("orderid");
user_manage_new.php:        $order_info = $this->t_order_info->get_order_info_by_orderid($orderid);
user_manage_new.php:            return $this->output_err("合同不存在！");
user_manage_new.php:        $parent_order_info = $this->t_order_info->get_order_info_by_orderid($order_info['parent_order_id']);
user_manage_new.php:            return $this->output_err("父合同不存在！");
user_manage_new.php:        $this->t_order_info->start_transaction();
user_manage_new.php:        $ret = $this->t_order_info->field_update_list($order_info['parent_order_id'],[
user_manage_new.php:            $this->t_order_info->rollback();
user_manage_new.php:            return $this->output_err("父合同还原失败！请重试！");
user_manage_new.php:        $ret = $this->t_order_info->row_delete($orderid);
user_manage_new.php:            $this->t_order_info->rollback();
user_manage_new.php:            return $this->output_err("赠送合同取消失败！请重试！");
user_manage_new.php:        $this->t_order_info->commit();
user_manage_new.php:        return $this->output_succ();
user_manage_new.php:        $orderid  = $this->get_in_int_val("orderid");
user_manage_new.php:        $from_key = $this->get_in_str_val("from_key");
user_manage_new.php:        $from_url = $this->get_in_str_val("from_url");
user_manage_new.php:        $ret = $this->t_order_info->field_update_list($orderid,[
user_manage_new.php:            return $this->output_succ();
user_manage_new.php:            return $this->output_err("修改失败!");
user_manage_new.php:        $acc = $this->get_account();
user_manage_new.php:            $this->t_teacher_lecture_info->reset_lecture_grade();
user_manage_new.php:        $userid = $this->get_in_int_val("userid",0);
user_manage_new.php:        $data = $this->t_student_type_change_list->get_info_by_userid_last($userid);
user_manage_new.php:                $data["recover_time"] = date("Y-m-d", $data["recover_time"]);
user_manage_new.php:                $data["wx_remind_time"] = date("Y-m-d", $data["wx_remind_time"]);
user_manage_new.php:        return $this->output_succ(["data"=>$data]);
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,2);
user_manage_new.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage_new.php:        $start_time = strtotime($this->get_in_str_val("start_time"));
user_manage_new.php:        $end_time = strtotime($this->get_in_str_val("end_time")." 23:59:59");
user_manage_new.php:        list($start_time,$end_time) = $this->get_in_date_range(0,0,0,null,2);
user_manage_new.php:        $list= $this->t_psychological_teacher_time_list->get_info_by_time($start_time,$end_time);
user_manage_new.php:        //$ret = $this->t_psychological_teacher_time_list->get_all_info();
user_manage_new.php:        // dd(date("Y-m-d",1500652800));
user_manage_new.php:            $lesson_start = strtotime(date("Y-m-d",$val["day"])." ".$val["start"]);
user_manage_new.php:                $teacherid = $this->t_teacher_info->get_teacherid_by_phone($item);
user_manage_new.php:                $realname = $this->t_teacher_info->get_realname($teacherid);
user_manage_new.php:                $check_lesson = $this->t_lesson_info_b2->check_psychological_lesson($teacherid,$lesson_start);
user_manage_new.php:            $val["lesson_start"] = strtotime(date("Y-m-d",$val["day"])." ".$val["start"]);
user_manage_new.php:            $val["lesson_end"]   = strtotime(date("Y-m-d",$val["day"])." ".$val["end"]);
user_manage_new.php:            $week_day = $week_start+($w-1)*86400;
user_manage_new.php:            $val["start_time_ex"] = strtotime(date("Y-m-d",$week_day)." ".$val["start"])*1000;
user_manage_new.php:            $val["end_time_ex"]   = strtotime(date("Y-m-d",$week_day)." ".$val["end"])*1000;
user_manage_new.php:            $val["start_time"] = $w."-".$val["start"];
user_manage_new.php:        $lesson_start  = $this->get_in_int_val("lesson_start");
user_manage_new.php:        $lesson_end = $this->get_in_int_val("lesson_end");
user_manage_new.php:        $userid = $this->get_in_int_val("userid");
user_manage_new.php:        $tea_list = $this->get_in_str_val("tea_list");
user_manage_new.php:             return $this->output_err("未选择学生或老师已经用完");
user_manage_new.php:        $ret_row1 = $this->t_lesson_info->check_student_time_free($userid,0,$lesson_start,$lesson_end);
user_manage_new.php:            return $this->output_err(
user_manage_new.php:        $ret_row2 = $this->t_lesson_info->check_teacher_time_free($teacherid,0,$lesson_start,$lesson_end);
user_manage_new.php:            return $this->output_err(
user_manage_new.php:        $teacher_info = $this->t_teacher_info->field_get_list($teacherid,"teacher_money_type,level");
user_manage_new.php:        $grade = $this->t_student_info->get_grade($userid);
user_manage_new.php:        $courseid     = $this->t_course_order->add_course_info_new($orderid,$userid,$grade,$subject,150,2,0,1,1,0,$teacherid);
user_manage_new.php:        $lessonid     = $this->t_lesson_info->add_lesson(
user_manage_new.php:        $this->t_homework_info->add(
user_manage_new.php:        $this->t_lesson_info->reset_lesson_list($courseid);
user_manage_new.php:        return $this->output_succ();
user_manage.php:        $g_request->offsetSet("all_flag",1);
user_manage.php:        return $this->index();
user_manage.php:        $test_user       = $this->get_in_int_val('test_user',"-1");
user_manage.php:        $originid        = $this->get_in_int_val('originid',"-1");
user_manage.php:        $grade           = $this->get_in_grade();
user_manage.php:        $user_name       = trim($this->get_in_str_val('user_name',''));
user_manage.php:        $phone           = trim($this->get_in_str_val('phone',''));
user_manage.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
user_manage.php:        $assistantid     = $this->get_in_int_val("assistantid",-1);
user_manage.php:        $page_num        = $this->get_in_page_num();
user_manage.php:        $status          = -1;
user_manage.php:        $userid          = $this->get_in_userid(-1);
user_manage.php:        $ret_info = $this->t_student_info->get_student_list_count($userid, $grade, $status, $user_name, $phone, $teacherid,
user_manage.php:            $arr                = $this->t_revisit_info->get_last_revisit( $userid);
user_manage.php:            $arrf               = $this->t_revisit_info->get_first_revisit( $userid);
user_manage.php:            $item["assistant_nick"]      = $this->cache_get_assistant_nick ($item["assistantid"] );
user_manage.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage.php:        $parentid    = $this->get_in_int_val('parentid',"-1");
user_manage.php:        $gender      = $this->get_in_int_val('gender',-1);
user_manage.php:        $nick        = trim($this->get_in_str_val('nick',''));
user_manage.php:        $phone       = trim($this->get_in_str_val('phone',''));
user_manage.php:        $time        = strtotime($this->get_in_str_val("last_modified_time"));
user_manage.php:        $assistantid = $this->get_in_int_val("assistantid",-1);
user_manage.php:        $page_num    = $this->get_in_page_num();
user_manage.php:        $ret_info = $this->t_parent_info->get_parent_info($parentid,$phone,$nick,$page_num);
user_manage.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage.php:        $grade          = $this->get_in_grade();
user_manage.php:        $all_flag       = $this->get_in_int_val('all_flag',0);
user_manage.php:        $test_user      = $this->get_in_int_val('test_user',-1);
user_manage.php:        $originid       = $this->get_in_int_val('originid',-1);
user_manage.php:        $user_name      = trim($this->get_in_str_val('user_name',''));
user_manage.php:        $phone          = trim($this->get_in_str_val('phone',''));
user_manage.php:        $assistantid    = $this->get_in_int_val("assistantid",-1);
user_manage.php:        $seller_adminid = $this->get_in_int_val("seller_adminid",-1);
user_manage.php:        $order_type     = $this->get_in_int_val("order_type",-1);
user_manage.php:        $student_type   = $this->get_in_int_val("student_type",-1);
user_manage.php:        $page_num       = $this->get_in_page_num();
user_manage.php:        $status         = -1;
user_manage.php:        $userid         = $this->get_in_userid(-1);
user_manage.php:        $teacherid = -1;
user_manage.php:        if ($assistantid >0 && $order_type == -1) {
user_manage.php:        $ret_info = $this->t_student_info->get_student_list_search(
user_manage.php:            $item["seller_admin_nick"] = $this->cache_get_account_nick($item["seller_adminid"] );
user_manage.php:            $item["assistant_nick"]    = $this->cache_get_assistant_nick ($item["assistantid"] );
user_manage.php:            $item["ss_assign_time"]    = $item["ass_assign_time"]==0?'未分配':date('Y-m-d H:i:s',$item["ass_assign_time"]);
user_manage.php:            $item["cache_nick"]        = $this->cache_get_student_nick($item["userid"]) ;
user_manage.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage.php:        $page_num = $this->get_in_page_num();
user_manage.php:        $ret_info = $this->t_student_info->get_student_list($page_num);
user_manage.php:        $ret_info["page_info"] = $this->get_page_info_for_js( $ret_info["page_info"]   );
user_manage.php:        $start_date      = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-3*86400 ));
user_manage.php:        $end_date        = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
user_manage.php:        $test_user       = $this->get_in_int_val('test_user',"-1");
user_manage.php:        $originid        = $this->get_in_int_val('originid',"-1");
user_manage.php:        $grade           = $this->get_in_grade();
user_manage.php:        $user_name       = trim($this->get_in_str_val('user_name',''));
user_manage.php:        $phone           = trim($this->get_in_str_val('phone',''));
user_manage.php:        $teacherid       = $this->get_in_int_val("teacherid",-1);
user_manage.php:        $assistantid     = $this->get_in_int_val("assistantid",-1);
user_manage.php:        $revisit_assistantid     = $this->get_in_int_val("revisit_assistantid",-1);
user_manage.php:        $page_num        = $this->get_in_page_num();
user_manage.php:        $status          = -1;
user_manage.php:        $userid          = $this->get_in_userid(-1);
user_manage.php:        $revisit_type    = $this->get_in_int_val('revisit_type',"-1");
user_manage.php:        $ret_info = $this->t_student_info->get_student_list_counts($userid, $grade, $status, $user_name, $phone, $teacherid,
user_manage.php:            $this->cache_set_item_assistant_nick($item);
user_manage.php:        return $this->Pageview(__METHOD__,$ret_info);
user_manage.php:        $assistantid = $this->t_assistant_info->get_assistantid( $this->get_account());
user_manage.php:        $adminid = $this->get_account_id();
user_manage.php:        $this->set_in_value("assistantid",$assistantid );
user_manage.php:        return $this->ass_archive();
user_manage.php:            =$this->get_in_order_by_str($order_field_arr ,"ass_assign_time desc");
user_manage.php:        $test_user    = $this->get_in_int_val('test_user',"-1");
user_manage.php:        $originid     = $this->get_in_int_val('originid',"-1");
user_manage.php:        $grade        = $this->get_in_el_grade();
user_manage.php:        $user_name    = trim($this->get_in_str_val('user_name',''));
user_manage.php:        $phone        = trim($this->get_in_str_val('phone',''));
user_manage.php:        $teacherid    = $this->get_in_int_val("teacherid",-1);
user_manage.php:        $student_type = $this->get_in_int_val("student_type",-1);
user_manage.php:        $assistantid  = $this->get_in_int_val("assistantid",-1);
user_manage.php:        $page_num     = $this->get_in_page_num();
user_manage.php:        $status       = -1;
user_manage.php:        $userid       = $this->get_in_userid(-1);
user_manage.php:        $revisit_flag = $this->get_in_int_val('revisit_flag',-1);
user_manage.php:        $warning_stu  = $this->get_in_int_val('warning_stu',-1);
user_manage.php:        $now  = strtotime(date("Y-m-d",time()));
user_manage.php:                $userid=-1;
user_manage.php:        $month_start = strtotime(date("Y-m-01",time()));
user_manage.php:        $month_end_str = $y."-".$next_m."-"."01";
user_manage.php:        $cur_time_str = date("m.d",$cur_start)."-".date("m.d",$cur_end-300);
user_manage.php:        $last_time_str = date("m.d",$last_start)."-".date("m.d",$last_end-300);
user_manage.php:        $ret = $this->t_student_info->get_student_sum_archive( $assistantid);
user_manage.php:        //  dd(date("Y-m-d",$sum_start));
user_manage.php:        $sumweek = $this->t_student_info->get_student_sum_archive_new($assistantid,$sum_start);
user_manage.php:        $ret_info = $this->t_student_info->get_student_list_archive( $userid, $grade, $status, $user_name, $phone, $teacherid,
user_manage.php:            $ret_revisit_info_cur = $this->t_revisit_info->get_ass_revisit_info_new(-1,$cur_start,$cur_end,$userid_list);
user_manage.php:            $ret_revisit_info_last = $this->t_revisit_info->get_ass_revisit_info_new(-1,$last_start,$last_end,$userid_list);
user_manage.php:            $item['lesson_count_done'] = $item['lesson_count_all']-$item['lesson_count_left'];
user_manage.php:            $item["assistant_nick"]    = $this->cache_get_assistant_nick ($item["assistantid"] );
user_manage.php:            $item ["ass_revisit_week_flag"]= (($now - $ass_revisit_last_week_time) < 7*86400 )  ;
user_manage.php:            $item ["ass_revisit_month_flag"]= (($now - $ass_revisit_last_month_time) < 28*86400 )  ;
user_manage.php:        $account_id = $this->get_account_id();
user_manage.php:        $is_master = $this->t_admin_group_name->check_is_master($main_type,$account_id);
user_manage.php:        return $this->Pageview(__METHOD__,$ret_info,['sumweek'=>$sumweek,'summonth'=>$ret['summonth'],"master_adminid"=>$master_adminid,"cur_time_str"=>$cur_time_str,"last_time_str"=>$last_time_str,"acc" => session("acc")]);
user_manage.php:        $this->set_in_value("sys_operator", $this->get_account());
user_manage.php:        return $this->contract_list();
user_manage.php:        $this->set_in_value("contract_status", 0);
user_manage.php:        $this->set_in_value("sys_operator", $this->get_account());
user_manage.php:        return $this->contract_list();
user_manage.php:        $this->set_in_value("sys_operator", $this->get_account());
user_manage.php:        $this->set_in_value("contract_status", -2);
user_manage.php:        return $this->contract_list();
user_manage.php:        $this->set_in_value("sys_operator", $this->get_account());
user_manage.php:        return $this->contract_list();
user_manage.php:        list($start_time,$end_time,$opt_date_type)=$this->get_in_date_range(date("Y-m-01"),0,1,[
user_manage.php:        $contract_type     = $this->get_in_int_val('contract_type',-1);
user_manage.php:        $contract_status   = $this->get_in_int_val('contract_status',-1);
user_manage.php:        $config_courseid   = $this->get_in_int_val('config_courseid',-1);
user_manage.php:        $is_test_user      = $this->get_in_int_val('test_user',0);
user_manage.php:        $studentid         = $this->get_in_studentid(-1);
user_manage.php:        $page_num          = $this->get_in_page_num();
user_manage.php:        $has_money         = $this->get_in_int_val("has_money",-1);
user_manage.php:        $sys_operator      = $this->get_in_str_val("sys_operator","");
user_manage.php:        $stu_from_type     = $this->get_in_int_val("stu_from_type",-1);
user_manage.php:        $account_role      = $this->get_in_int_val("account_role",-1);
user_manage.php:        $seller_groupid_ex = $this->get_in_str_val('seller_groupid_ex', "");
user_manage.php:        $grade             = $this->get_in_int_val("grade",-1);
user_manage.php:        $subject           = $this->get_in_int_val("subject",-1);
user_manage.php:        $this->get_in_int_val("self_adminid", $this->get_account_id());
user_manage.php:        $tmk_adminid       = $this->get_in_int_val("tmk_adminid", -1);
user_manage.php:        $teacherid         = $this->get_in_teacherid(-1);
user_manage.php:        $origin_userid     = $this->get_in_int_val("origin_userid", -1);
user_manage.php:        $referral_adminid  = $this->get_in_int_val("referral_adminid",-1, "");
user_manage.php:        $assistantid       = $this->get_in_assistantid(-1);
user_manage.php:        $from_key          = $this->get_in_str_val('from_key');
user_manage.php:        $from_url          = $this->get_in_str_val('from_url');
user_manage.php:        $require_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
user_manage.php:        $account = $this->get_account();
user_manage.php:        $ret_auth = $this->t_manager_info->check_permission($account, E\Epower::V_SHOW_MONEY );
user_manage.php:        $ret_list = $this->t_order_info->get_order_list_require_adminid(
user_manage.php:            -1, $assistantid,"",$stu_from_type,$sys_operator,
user_manage.php:            $account_role,$grade,$subject,$tmk_adminid,-1,
user_manage.php:            $teacherid, -1 , 0, $require_adminid_list,$origin_userid,
user_manage.php:            $this->cache_set_item_account_nick($item,"tmk_adminid", "tmk_admin_nick" );
user_manage.php:            $this->cache_set_item_assistant_nick($item,"assistantid", "assistant_nick");
user_manage.php:            $this->cache_set_item_account_nick($item,"origin_assistantid", "origin_assistant_nick");
user_manage.php:            $this->cache_set_item_teacher_nick($item);
user_manage.php:                $item['price'] = "---";
user_manage.php:        return $this->Pageview(__METHOD__,$ret_list,["all_lesson_count" => $all_lesson_count ] );
user_manage.php:        $orderid = $this->get_in_int_val("orderid");
user_manage.php:        $userid  = $this->get_in_int_val("userid");
user_manage.php:        $from_type = $this->t_order_info->get_from_type($orderid);
user_manage.php:            $lesson_account_id=$this->t_order_info->get_config_lesson_account_id($orderid);
user_manage.php:        $sys_operator=$this->t_order_info->get_sys_operator($orderid);
user_manage.php:        $opt_adminid=$this->t_manager_info->get_id_by_account($sys_operator);
user_manage.php:        $this->t_flow->flow_del_by_from_key_int($opt_adminid, E\Eflow_type::V_SELLER_ORDER_REQUIRE,$orderid);
user_manage.php:        //$this->cache_del_teacher_nick($id);
user_manage.php:        $ret = $this->t_order_info->del_contract($orderid,$userid);
user_manage.php:                $total_money=$this->t_user_lesson_account->get_total_money($lesson_account_id);
user_manage.php:                    $this->t_user_lesson_account->row_delete($lesson_account_id);
user_manage.php:            $this->t_student_info->field_update_list($userid,[
user_manage.php:            $son_order_list = $this->t_order_info->get_son_order_list($orderid);
user_manage.php:                $this->t_order_info->del_contract($item["orderid"],$userid);
user_manage.php:        $courseid = $this->get_in_int_val("courseid") ;
user_manage.php:        $count= $this->t_course_order->count_course($courseid);
user_manage.php:        $userid        = $this->get_in_int_val('userid',0);
user_manage.php:        $type          = $this->get_in_int_val('type',0);
user_manage.php:        $ret_note = $this->t_student_info->set_test_type($userid,$type);
user_manage.php:        $userid = $this->get_in_int_val('userid',0);
user_manage.php:        $type   = $this->get_in_int_val('type',0);
user_manage.php:        $is_auto_set_type_flag   = $this->get_in_int_val('is_auto_set_type_flag',0);
user_manage.php:        $lesson_stop_reason   = trim($this->get_in_str_val('lesson_stop_reason'));
user_manage.php:        $recover_time   = $this->get_in_str_val('recover_time');
user_manage.php:        $wx_remind_time   = $this->get_in_str_val('wx_remind_time');
user_manage.php:        $stop_duration   = trim($this->get_in_str_val('stop_duration'));
user_manage.php:            return $this->output_err("请填写原因");
user_manage.php:                return $this->output_err("请填写完整");
user_manage.php:                return $this->output_err("微信提醒时间不能早于当前时间,不能大于复课时间");
user_manage.php:        $old_type= $this->t_student_info->get_type($userid);
user_manage.php:        $ret_note = $this->t_student_info->set_student_type($userid,$type,$is_auto_set_type_flag,$lesson_stop_reason);
user_manage.php:            $ret_note= $this->t_student_info->field_update_list($userid,[
user_manage.php:            $this->t_student_type_change_list->row_insert([
user_manage.php:                "adminid"     =>$this->get_account_id(),
user_manage.php:        $type        = $this->get_in_str_val("type","teacher");
user_manage.php:        $gender      = $this->get_in_int_val('gender',-1);
user_manage.php:        $id          = $this->get_in_int_val('id',-1);
user_manage.php:        $nick_phone  = trim($this->get_in_str_val('nick_phone',""));
user_manage.php:        $lru_flag    = $this->get_in_int_val("lru_flag");
user_manage.php:        $lru_id      = $this->get_in_int_val("lru_id");
user_manage.php:        $lru_id_name = $this->get_in_str_val("lru_id_name" );
user_manage.php:        $lru_key = "USER_LIST_".$type."_".$this->get_account_id();
user_manage.php:            return $this->output_succ();
user_manage.php:        $main_type = $this->get_in_int_val('main_type', -1);
user_manage.php:        $groupid   = $this->get_in_int_val('groupid', -1);
user_manage.php:        $adminid   = $this->get_in_int_val('adminid', -1);
user_manage.php:        $page_num  = $this->get_in_page_num();
user_manage.php:            $ret_list= $this->t_teacher_info->get_tea_list_for_select($id,$gender, $nick_phone, $page_num);
user_manage.php:            $ret_list= $this->t_assistant_info->get_ass_list_for_select($id,$gender, $nick_phone, $page_num);
user_manage.php:            $this->t_student_info->switch_tongji_database();
user_manage.php:            $ret_list= $this->t_student_info->get_list_for_select($id,$gender, $nick_phone, $page_num,$adminid);
user_manage.php:            $ret_list= $this->t_student_info->get_seller_list_for_select($id,$gender, $nick_phone, $page_num,$adminid);
user_manage.php:            $ret_list= $this->t_manager_info->get_list_for_select($id,$gender, $nick_phone, $page_num,$main_type);
user_manage.php:            $ret_list= $this->t_manager_info-> get_group_master_for_select($id,$gender,$nick_phone,$page_num,$main_type);
user_manage.php:            $ret_list= $this->t_manager_info-> get_group_user_list_for_select($id,$gender,$nick_phone,$page_num,$groupid);
user_manage.php:            $ret_list= $this->t_parent_info->get_list_for_select($id,$gender, $nick_phone, $page_num);
user_manage.php:            $ret_list= $this->t_teacher_info->get_none_freeze_tea_list_for_select($id,$gender, $nick_phone, $page_num);
user_manage.php:            $ret_list= $this->t_teacher_info->get_interview_tea_list_for_select($id,$gender, $nick_phone, $page_num);
user_manage.php:            $ret_list= $this->t_teacher_info->get_jiaoyan_tea_list_for_select($id,$gender, $nick_phone, $page_num);
user_manage.php:            $ret_list= $this->t_teacher_info->get_research_tea_list_for_select($id,$gender, $nick_phone, $page_num);
user_manage.php:                $item["phone"] = preg_replace('/(1[358]{1}[0-9])[0-9]{4}([0-9]{4})/i','$1****$2',$item["phone"]);
user_manage.php:        return $this->output_ajax_table($ret_list, [ "lru_list" => $lru_list ]);
user_manage.php:        $phone = $this->get_in_phone_ex();
user_manage.php:        $userid=$this->t_phone_to_user->get_userid_by_phone($phone);
user_manage.php:        $userid= $this->get_in_userid();
user_manage.php:        $userid=$this->t_course_order->get_student_courseid_by_userid($userid);
user_manage.php:        return $this->output_succ(["has_flag"=>$ret]);
user_manage.php:        $parentid = $this->get_in_int_val('parentid',-1);
user_manage.php:        $ret_info = $this->t_parent_info->get_parent_sim_info($parentid);
user_manage.php:        $parentid    = $this->get_in_int_val('parentid',-1);
user_manage.php:        $nick        = $this->get_in_str_val('nick');
user_manage.php:        $gender      = $this->get_in_int_val('gender');
user_manage.php:        $phone       = $this->get_in_str_val('phone');
user_manage.php:        $last_time   = $this->get_in_str_val('last_time');
user_manage.php:        $has_login   = $this->get_in_int_val('has_login',-1);
user_manage.php:        $wx_openid   = $this->get_in_str_val("wx_openid");
user_manage.php:        return $this->t_parent_info->update_parent_info($parentid,$nick,$gender,$phone,$last_time,$has_login,$wx_openid);
user_manage.php:        $studentid = $this->get_in_int_val('studentid');
user_manage.php:        $spree     = $this->get_in_str_val('spree');
user_manage.php:        $this->t_student_info->set_spree_details($studentid,$spree);
user_manage.php:        $userid     = $this->get_in_int_val('userid',-1);
user_manage.php:        $contractid = $this->get_in_str_val('contractid');
user_manage.php:        $row = $this->t_order_info->get_contract_type_by_userid($userid,$contractid);
user_manage.php:        $userid        = $this->get_in_int_val('userid',-1);
user_manage.php:        $contractid    = $this->get_in_str_val('contractid');
user_manage.php:        $contract_type = $this->get_in_int_val('contract_type',-1);
user_manage.php:        $this->t_order_info->update_only_contract_type($userid,$contractid,$contract_type);
user_manage.php:        $contractid = $this->get_in_int_val('contractid',-1);
user_manage.php:        $orderid    = $this->get_in_int_val('orderid',-1);
user_manage.php:        $ret_info = $this->t_order_info->get_contract_starttime_info($contractid,$orderid);
user_manage.php:        $contractid         = $this->get_in_int_val('contractid',-1);
user_manage.php:        $orderid            = $this->get_in_int_val('orderid',-1);
user_manage.php:        $contract_starttime = strtotime($this->get_in_str_val('contract_starttime'));
user_manage.php:        $contract_endtime   = $this->get_in_str_val('contract_starttime');
user_manage.php:        $contract_endtime_s1   = explode('-',$contract_endtime);
user_manage.php:        $contract_endtime_s2   = strtotime(implode('-',$contract_endtime_s1));
user_manage.php:        $ret_info = $this->t_order_info->set_contract_sim_starttime($contractid,$orderid,$contract_starttime,$contract_endtime_s2);
user_manage.php:        $page_num  = $this->get_in_page_num();
user_manage.php:        $studentid = $this->get_in_studentid(-1);
user_manage.php:        $parentid  = $this->get_in_parentid(-1);
user_manage.php:        $ret_list = $this->t_parent_child->get_relationship($page_num,$studentid,$parentid);
user_manage.php:            $item['parent_nick'] = $this->cache_get_parent_nick($item['parentid']);
user_manage.php:            $item['user_nick']   = $this->cache_get_student_nick($item['userid']);
user_manage.php:        return $this->Pageview(__METHOD__,$ret_list );
user_manage.php:        $praise_type = $this->get_in_int_val('praise_type',-1);
user_manage.php:        $start_date  = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-3*86400 ));
user_manage.php:        $end_date    = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
user_manage.php:        $ret_info = $this->t_mypraise->get_praise_list_by_page($praise_type,$start_date_s,$end_date_s);
user_manage.php:                $item['praise_num'] = '-'.$item['praise_num'];
user_manage.php:        $js_values_str   =  $this->get_js_g_args($args);
user_manage.php:        return $this->view(__METHOD__,["ret_info"=>$ret_info,"js_values_str" => $js_values_str]);
user_manage.php:        $type     = $this->get_in_int_val('type',-1);
user_manage.php:        $page_num = $this->get_in_page_num();
user_manage.php:        $ret_db = $this->t_mypraise->get_praise_list($type,$page_num);
user_manage.php:        $start_date = $this->get_in_str_val('start_date',date('Y-m-d', time(NULL)-30*86400 ));
user_manage.php:        $end_date   = $this->get_in_str_val('end_date',date('Y-m-d', time(NULL)+86400 ));
user_manage.php:        $type       = $this->get_in_int_val('praise_type',-1);
user_manage.php:        $userid     = $this->get_in_int_val('userid',-1);
user_manage.php:        $page_num   = $this->get_in_page_num();
user_manage.php:        $lessonid   = $this->get_in_lessonid(-1);
user_manage.php:        $ret_info = $this->t_mypraise->get_all_info( $page_num,$start_time,$end_time,$type,$userid ,$lessonid);
user_manage.php:            $item['ts']   = date('Y-m-d H:i',$item['ts']);
user_manage.php:            $item['name'] = $this->cache_get_student_nick($item['userid']);
user_manage.php:                $item['add_user_name'] = $this->t_manager_info->get_account($item['add_userid']);
user_manage.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage.php:        $userid   = $this->get_in_int_val('userid',0);
user_manage.php:        $orderid  = $this->get_in_int_val('orderid',0);
user_manage.php:        $courseid = $this->get_in_int_val('courseid',0);
user_manage.php:        $userid     = $this->get_in_int_val('userid',0);
user_manage.php:        $type       = $this->get_in_int_val('type',1099);
user_manage.php:        $praise_num = $this->get_in_int_val('praise_num',0);
user_manage.php:        $reason     = $this->get_in_str_val('reason','');
user_manage.php:        $ret_info = $this->t_mypraise->add_mypraise($userid,$praise_num,$reason,$add_userid,$type);
user_manage.php:                $str="-".$i."month";
user_manage.php:            $start     = strtotime(date("Y-m-01",time()).$str);
user_manage.php:            $ret_count = $this->t_order_info->get_user_lesson_count($start);
user_manage.php:            $ret_cost  = $this->t_lesson_info->get_user_lesson_cost($start);
user_manage.php:                $order_count=$this->t_order_info->get_order_count($key);
user_manage.php:                        $ret_cost[$key]['lesson_left']=$val['lesson_count']-$ret_cost[$key]['lesson_cost'];
user_manage.php:        $this->set_in_value( "refund_userid", $this->get_account_id() );
user_manage.php:        return $this->refund_list();
user_manage.php:        $this->set_in_value( "refund_userid", $this->get_account_id() );
user_manage.php:        return $this->refund_list();
user_manage.php:        list($start_time,$end_time,$opt_date_str) = $this->get_in_date_range_month(0,0, [
user_manage.php:        $adminid       = $this->get_account_id();
user_manage.php:        $refund_type   = $this->get_in_int_val('refund_type',-1);
user_manage.php:        $userid        = $this->get_in_int_val('userid',-1);
user_manage.php:        $is_test_user  = $this->get_in_int_val('is_test_user',0);
user_manage.php:        $page_num      = $this->get_in_page_num();
user_manage.php:        $refund_userid = $this->get_in_int_val("refund_userid", -1);
user_manage.php:        $seller_groupid_ex    = $this->get_in_str_val('seller_groupid_ex', "");
user_manage.php:        $require_adminid_list = $this->t_admin_main_group_name->get_adminid_list_new($seller_groupid_ex);
user_manage.php:        $adminid_right        = $this->get_seller_adminid_and_right();
user_manage.php:        $ret_info = $this->t_order_refund->get_order_refund_list($page_num,$opt_date_str,$refund_type,$userid,$start_time,$end_time,
user_manage.php:            $item['user_nick']         = $this->cache_get_student_nick($item['userid']);
user_manage.php:            $item['refund_user']       = $this->cache_get_account_nick($item['refund_userid']);
user_manage.php:            $item['apply_time_str']    = date("Y-m-d H:i",$item['apply_time']);
user_manage.php:            \App\Helper\Utils::unixtime2date_for_item($item,"order_time","","Y-m-d");
user_manage.php:            $refund_qc_list = $this->t_order_refund->get_refund_analysis($item['apply_time'], $item['orderid']);
user_manage.php:        return $this->pageView(__METHOD__,$ret_info,["adminid_right"=>$adminid_right,"adminid"=>$adminid]);
user_manage.php:        $userid        = $this->get_in_int_val("userid");
user_manage.php:        $orderid       = $this->get_in_int_val("orderid");
user_manage.php:        $contractid    = $this->get_in_int_val("contractid");
user_manage.php:        $contract_type = $this->get_in_int_val("contract_type");
user_manage.php:        $lesson_total  = $this->get_in_int_val("lesson_total");
user_manage.php:        $order_left    = $this->get_in_str_val("order_left");
user_manage.php:        $should_refund = $this->get_in_int_val("should_refund")/100;
user_manage.php:        $real_refund   = $this->get_in_int_val("real_refund")/100;
user_manage.php:        $price         = $this->get_in_str_val("price");
user_manage.php:        $refund_info   = $this->get_in_str_val("refund_info");
user_manage.php:        $pay_account   = $this->get_in_str_val("pay_account");
user_manage.php:        $pay_account_admin   = $this->get_in_str_val("pay_account_admin");
user_manage.php:        $save_info     = $this->get_in_str_val("save_info");
user_manage.php:        $file_url      = $this->get_in_str_val("file_url");
user_manage.php:        $lesson_unassigned = $this->get_in_str_val("lesson_unassigned");
user_manage.php:        $competition_flag  = $this->get_in_int_val("competition_flag");
user_manage.php:        $adminid           = $this->get_account_id();
user_manage.php:        $account           = $this->get_account();
user_manage.php:            return $this->output_err("所退课时不足！请检查学生未分配的课时！");
user_manage.php:            $ret = $this->t_course_order->reset_assigned_lesson_count($userid,$competition_flag);
user_manage.php:                return $this->output_err("重置学生已分配课时失败！请重试！");
user_manage.php:            return $this->output_err("退费金额错误！");
user_manage.php:        $this->t_order_refund->start_transaction();
user_manage.php:        $ret = $this->t_order_refund->row_insert([
user_manage.php:            $this->t_order_refund->rollback();
user_manage.php:            return $this->output_err("退费添加失败");
user_manage.php:        $lesson_left     = $order_left-$should_refund;
user_manage.php:        $ret = $this->t_order_info->field_update_list($orderid,[
user_manage.php:            $this->t_order_refund->rollback();
user_manage.php:            return $this->output_err("合同更新失败！");
user_manage.php:         $msg = "登陆后台->服务管理->其他->退费管理 进行审核。";
user_manage.php:         $this->t_manager_info->send_wx_todo_msg("echo",$account,$header_msg,$msg,$url);
user_manage.php:        $ret = $this->t_flow->add_flow(
user_manage.php:            $this->get_account_id(),"退费申请", $orderid,NULL,$apply_time  );
user_manage.php:            $this->t_order_refund->commit();
user_manage.php:            $ret = $this->cost_praise($userid,$lesson_total,$real_refund);
user_manage.php:                return $this->output_err("学生退赞失败！请联系技术人员！");
user_manage.php:            return $this->output_succ();
user_manage.php:            $this->t_order_refund->rollback();
user_manage.php:            return $this->output_err("生成退费流程失败！");
user_manage.php:        $ret = $this->t_mypraise->add_praise($userid,2003,$praise_num);
user_manage.php:        $userid=$this->get_in_int_val("userid",0);
user_manage.php:        $order_list=$this->t_order_info->get_user_normal_order($userid);
user_manage.php:            $val['order_time_str'] = date("Y-m-d H:i",$val['order_time']);
user_manage.php:        $ret_list["page_info"] = $this->get_page_info_for_js($ret_list["page_info"]);
user_manage.php:        return $this->output_succ(["data"=>$ret_list]);
user_manage.php:        $orderid    = $this->get_in_int_val('orderid', -1);
user_manage.php:        $channelid  = $this->get_in_int_val('channelid',-1);
user_manage.php:        $userid     = $this->get_in_int_val('userid',-1);
user_manage.php:        $pay_number = $this->get_in_str_val('pay_number', "");
user_manage.php:        if($orderid == -1 || $channelid == -1 || $pay_number == "") {
user_manage.php:            return $this->output_err("参数错误");
user_manage.php:        $ret_status = $this->t_order_info->get_contract_status($orderid);
user_manage.php:        $channel = $this->t_order_info->get_channel($orderid);
user_manage.php:            return $this->output_err("已经付款！不能再手动更改！");
user_manage.php:        $stu_nick   = $this->t_student_info->get_realname($userid);
user_manage.php:        $ret_type   = $this->t_order_info->get_contract_type($orderid);
user_manage.php:        $ret_info   = $this->t_student_info->has_parent_logined($orderid);
user_manage.php:        $order_info = $this->t_order_info ->field_get_list($orderid,"contract_type,lesson_total,default_lesson_count,price");
user_manage.php:            $phone = $this->t_phone_to_user->get_phone_by_userid($ret_info['parentid']);
user_manage.php:            $this->t_user_info->field_update_list($ret_info['parentid'],[
user_manage.php:                 * 第一次支付成功2-14
user_manage.php:            $phone       = $this->t_phone_to_user->get_phone_by_userid($ret_info['parentid']);
user_manage.php:            $order_price = $this->t_order_info->get_price($orderid)/100;
user_manage.php:                 * 第二次支付成功2-14
user_manage.php:        $this->t_order_info->set_order_payed($orderid, $channelid, $pay_number);
user_manage.php:            $this->add_praise_by_order($orderid,$userid,$ret_type,$lesson_total);
user_manage.php:            $this->update_agent_order($orderid,$userid,$order_info['price']);
user_manage.php:        return $this->output_succ();
user_manage.php:        $agent_order = $this->t_agent_order->get_row_by_orderid($orderid);
user_manage.php:            $phone    = $this->t_student_info->get_phone($userid);
user_manage.php:            $ret_info = $this->t_agent->get_p_pp_id_by_phone($phone);
user_manage.php:                    $level1 = $this->check_agent_level($ret_info['p_phone']);
user_manage.php:                    $level2 = $this->check_agent_level($ret_info['pp_phone']);
user_manage.php:                $this->t_agent_order->row_insert([
user_manage.php:        $student_info = $this->t_student_info->get_stu_row_by_phone($phone);
user_manage.php:            $agent_item = $this->t_agent->get_agent_info_row_by_phone($phone);
user_manage.php:                $test_lesson = $this->t_agent->get_agent_test_lesson_count_by_id($agent_item['id']);
user_manage.php:        $price        = $this->t_order_info->get_price($orderid);
user_manage.php:        $order_status = $this->t_order_info->get_order_status($orderid);
user_manage.php:            $this->t_mypraise->add_praise($userid,1029,$praise_num);
user_manage.php:            $ret_info[$i] = $this->t_lesson_info->get_user_info_by_month($i);
user_manage.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage.php:        list($start_time,$end_time)=$this->get_in_date_range(-7,0);
user_manage.php:        $account = $this->get_in_str_val("account","");
user_manage.php:        $page_num   = $this->get_in_page_num();
user_manage.php:        $ret_info = $this->t_login_log->get_login_list_by_time_new($start_time,$end_time,$account, $page_num);
user_manage.php:            $item["login_time_str"] = date("Y-m-d H:i:s",$item["login_time"]);
user_manage.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0,[],1);
user_manage.php:        $account = $this->get_in_str_val("account","");
user_manage.php:        $ret_info = $this->t_login_log->tongji_login_ip_info_new($start_time,$end_time,$account);
user_manage.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage.php:        $orderid     = $this->get_in_int_val("orderid");
user_manage.php:        $apply_time  = $this->get_in_int_val("apply_time");
user_manage.php:        $list        = $this->t_refund_analysis->get_list($orderid,$apply_time);
user_manage.php:                $keys       = $this->t_order_refund_confirm_config->get_refundid_by_configid($item['configid']);
user_manage.php:                $ret        = $this->t_order_refund_confirm_config->get_refund_str_by_keys($keys);
user_manage.php:        list($refund_info ,$map) = $this->t_order_refund_confirm_config->get_refund_list_and_map( -1, -1, -1);
user_manage.php:        return $this->output_succ(
user_manage.php:        $orderid          = $this->get_in_int_val("orderid");
user_manage.php:        $apply_time       = $this->get_in_int_val("apply_time");
user_manage.php:        $confirm_info     = $this->get_in_str_val("confirm_info");
user_manage.php:        $re = $this->t_refund_analysis->delete_by_order_apply_time($orderid, $apply_time);
user_manage.php:            if ($item['key3'] == -1 && $item['key4'] == -1) {
user_manage.php:                $refund_arr_key3 = $this->insert_refund_info($item['key1'], $item['key2'], $item['key3'], $item['key4'], $item['key3_str']);
user_manage.php:                $refund_arr_key4 = $this->insert_refund_info($item['key1'], $item['key2'], $item['key3'], $item['key4'], $item['key3_str']);
user_manage.php:            $configid = $this->t_order_refund_confirm_config->get_id_by_keys($item['key1'], $item['key2'], $item['key3'], $item['key4'] );
user_manage.php:            $ret =  $this->t_refund_analysis->row_insert([
user_manage.php:           return $this->output_succ();
user_manage.php:           return $this->output_err("退费添加失败");
user_manage.php:        $orderid          = $this->get_in_int_val("orderid");
user_manage.php:        $apply_time       = $this->get_in_int_val("apply_time");
user_manage.php:        $list = $this->t_refund_analysis->get_list($orderid, $apply_time);
user_manage.php:        $key1_value = $this->t_order_refund_confirm_config->get_all_key1_value();
user_manage.php:            $item['department'] = $this->t_order_refund_confirm_config->get_department_name_by_configid($item['configid']);
user_manage.php:        return $this->output_succ(
user_manage.php:        $orderid          = $this->get_in_int_val("orderid");
user_manage.php:        $apply_time       = $this->get_in_int_val("apply_time");
user_manage.php:        $list = $this->t_refund_analysis->get_list($orderid, $apply_time);
user_manage.php:        return $this->output_succ(
user_manage.php:        $orderid          = $this->get_in_int_val("orderid");
user_manage.php:        $apply_time       = $this->get_in_int_val("apply_time");
user_manage.php:        $confirm_info     = $this->get_in_str_val("confirm_info");
user_manage.php:        $this->t_refund_analysis->clear_by_order_apply_time($orderid, $apply_time);
user_manage.php:            $ret =  $this->t_refund_analysis->update_reply($orderid,$apply_time, $item["other_reason"],$item['qc_analysia'],$item['reply']);
user_manage.php:        $adminid = $this->get_account_id();
user_manage.php:        $orderid     = $this->get_in_int_val("orderid");
user_manage.php:        $apply_time  = $this->get_in_int_val("apply_time");
user_manage.php:        $list        = $this->t_refund_analysis->get_list($orderid,$apply_time);
user_manage.php:            $keys       = $this->t_order_refund_confirm_config->get_refundid_by_configid($item['configid']);
user_manage.php:            $ret        = $this->t_order_refund_confirm_config->get_refund_str_by_keys($keys);
user_manage.php:        list($refund_info ,$map) = $this->t_order_refund_confirm_config->get_refund_list_and_map( -1, -1, -1);
user_manage.php:        $key1_value    = $this->t_order_refund_confirm_config->get_all_key1_value();
user_manage.php:            $item['department'] = $this->t_order_refund_confirm_config->get_department_name_by_configid($item['configid']);
user_manage.php:                $total_score = $total_score - $item['score'];
user_manage.php:        $qc_anaysis = $this->t_order_refund->get_qc_anaysis_by_orderid_apply($orderid, $apply_time);
user_manage.php:        return $this->pageView(__METHOD__,null,
user_manage.php:        $orderid           = $this->get_in_int_val("orderid");
user_manage.php:        $apply_time        = $this->get_in_int_val("apply_time");
user_manage.php:        $qc_other_reason   = $this->get_in_str_val("qc_other_reason");
user_manage.php:        $qc_analysia       = $this->get_in_str_val("qc_analysia");
user_manage.php:        $qc_reply          = $this->get_in_str_val("qc_reply");
user_manage.php:        $this->t_order_refund->update_refund_list($orderid, $apply_time, $qc_other_reason, $qc_analysia, $qc_reply);
user_manage.php:        return $this->output_succ();
user_manage.php:        if ($key1==-1) {
user_manage.php:            $key1= $this->t_order_refund_confirm_config-> get_next_key_value($key1,$key2,$key3);
user_manage.php:        }else if($key2==-1) {
user_manage.php:            $key2= $this->t_order_refund_confirm_config-> get_next_key_value($key1,$key2,$key3);
user_manage.php:        }else if($key3==-1) {
user_manage.php:            $key3= $this->t_order_refund_confirm_config-> get_next_key_value($key1,$key2,$key3);
user_manage.php:            $key4= $this->t_order_refund_confirm_config-> get_next_key_value($key1,$key2,$key3);
user_manage.php:       $ret = $this->t_order_refund_confirm_config->row_insert($refund_arr);
user_manage.php:        list($start_time,$end_time) = $this->get_in_date_range(date("Y-04-01"),0,0,[],3);
user_manage.php:        $adminid = $this->get_account_id();
user_manage.php:        $group_id = $this->t_admin_group_name->get_group_id($adminid);
user_manage.php:        $permission_str = $this->t_manager_info->get_permission_by_adminid($adminid);
user_manage.php:            $group_id_lists = $this->t_admin_group_user->get_group_id_lists($group_id);
user_manage.php:        $residual_flag  = $this->get_in_e_boolean(-1,"residual_flag");
user_manage.php:        $page_num     = $this->get_in_page_num();
user_manage.php:        $lists_all    = $this->t_student_info->get_graduating_student_info($page_num, $start_time, $group_id_lists_str, $assistantid_flag );
user_manage.php:        $date         = date('Y-04-01',$start_time);
user_manage.php:        $weeks        = $this->datetoweek($date);
user_manage.php:            $plan_lists[$index] = $this->t_graduating_student_lesson_time_count->get_plan_lesson_count($item['userid'], $start_time);
user_manage.php:            $item["assistant_nick"] = $this->cache_get_assistant_nick ($item["assistantid"] );
user_manage.php:            $item_tmp_arr     = $this->t_lesson_info->get_actual_lesson_time($item['userid'], $start_time);
user_manage.php:            $weeks_actual_time[] = $this->t_lesson_info->get_week_actual_time($weeks,$item['userid'], $year);
user_manage.php:            $item['residual_value']    = ($item['lesson_count_left']- $item['plan_lesson_time_all'])/100;
user_manage.php:            $tmp[$i-1]['plan_lesson_time']= 0;
user_manage.php:                    $total_plan_actual_time[$index_actual_total_time][$index_actual_time-1]['actual_lesson_time'] = 2;
user_manage.php:                    $total_plan_actual_time[$index_actual_total_time][$index_actual_time-1]['actual_lesson_time'] = number_format($item_actual_time/2400,2);
user_manage.php:        return $this->pageView(__METHOD__,$lists_all,
user_manage.php:        list($start_time,$end_time) = $this->get_in_date_range(date("Y-04-01"),0,0,[],3);
user_manage.php:        $res_json   = $this->get_in_str_val('res');
user_manage.php:        $userid     = $this->get_in_int_val('userid');
user_manage.php:        $date   = date('Y-04-01',$start_time);
user_manage.php:        $weeks  = $this->datetoweek($date);
user_manage.php:        $this->t_graduating_student_lesson_time_count->set_plan_lesson_time($res_arr, $userid, $weeks, $year);
user_manage.php:        return $this->output_succ();
user_manage.php:        list($start_time,$end_time)=$this->get_in_date_range(date("Y-04-01"),0,0,[],3);
user_manage.php:        $userid   = $this->get_in_int_val('userid');
user_manage.php:        $plan_list = $this->t_graduating_student_lesson_time_count->get_plan_lesson_count($userid, $start_time );
user_manage.php:        $date = date('Y-04-01',$start_time);
user_manage.php:        $ret  = $this->datetoweek($date);
user_manage.php:                $plan_lesson_count = $plan_list[$i-1]['plan_lesson_time']?$plan_list[$i-1]['plan_lesson_time']:0;
user_manage.php:        return $this->output_succ(['list'=>$ret_list]);
user_manage.php:        $medate       = date('Y-m-'.$mdays,$stimestamp);
user_manage.php:        $lastedate          = date('Y-m-'.$lastdays,$lasttimestamp);
user_manage.php:            $zcsy = 7-date('w',$stimestamp);//第一周去掉第一天還有幾天
user_manage.php:        $next_mon = date('Y-m-d',strtotime("+$zcsy day",$stimestamp));
user_manage.php:        $ret[1]=$zcs1.'-'.$zce1;
user_manage.php:            $jzc = $jzc0-1;
user_manage.php:            $b = strtotime("+$n week -1 week", $t);
user_manage.php:            $ret[$jzcz]=$dsdate.'-'.$dedate;
user_manage.php:        $zcs1=date('m.d',strtotime("-$zcsy day",$lasttimestampend));
user_manage.php:        $ret[$jzcz]=$zcs1.'-'.$zce1;
user_manage.php:        $page_num = $this->get_in_page_num();
user_manage.php:        $is_complaint_state = $this->get_in_int_val('is_complaint_state', -1);
user_manage.php:        list($start_time,$end_time,$opt_date_str) = $this->get_in_date_range_month(0,0, [
user_manage.php:        $ret_info = $this->t_complaint_info->get_complaint_info_for_qc($time_type=-1,$page_num,$opt_date_str,$start_time,$end_time,$is_complaint_state );
user_manage.php:            $item['deal_admin_nick'] = $this->t_manager_info->get_ass_master_nick($item['deal_adminid']);
user_manage.php:            $this->get_nick_phone_by_account_type($item['account_type'],$item);
user_manage.php:            $current_account_arr = $this->t_complaint_assign_info->get_last_accept_adminid($item['complaint_id']);
user_manage.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage.php:        $this->set_in_value('account_type',2);
user_manage.php:        return $this->complaint_department_deal();
user_manage.php:        $this->set_in_value('account_type',1);
user_manage.php:        return $this->complaint_department_deal();
user_manage.php:        $page_num   = $this->get_in_page_num();
user_manage.php:        $account_id = $this->get_account_id();
user_manage.php:        $account_role = $this->get_account_role();
user_manage.php:        $account_type = $this->get_in_int_val('account_type');
user_manage.php:        $up_groupid = $this->t_admin_group_name->get_up_groupid_by_master_adminid($account_id);
user_manage.php:            $account_id_arr = $this->t_admin_group_name->get_adminid_list_by_up_groupid($up_groupid);
user_manage.php:        list($start_time,$end_time,$opt_date_str) = $this->get_in_date_range_month(0,0, [
user_manage.php:        $ret_info   = $this->t_complaint_info->get_complaint_info_by_ass($page_num,$opt_date_str,$start_time,$end_time,$account_id_str,$account_type,$root_flag );
user_manage.php:            $item['deal_admin_nick'] = $this->t_manager_info->get_ass_master_nick($item['deal_adminid']);
user_manage.php:            $this->get_nick_phone_by_account_type($item['account_type'],$item);
user_manage.php:            $current_account_arr = $this->t_complaint_assign_info->get_last_accept_adminid($item['complaint_id']);
user_manage.php:        return $this->pageView(__METHOD__,$ret_info);
user_manage.php:            $item['phone']      = $this->t_parent_info->get_phone_by_userid($item['userid']);
user_manage.php:            $item["user_nick"]  = $this->cache_get_parent_nick ($item["userid"] );
user_manage.php:            $item["user_nick"]  = $this->cache_get_teacher_nick ($item["userid"] );
user_manage.php:                $item['phone']      = $this->t_teacher_info->get_phone_by_nick($item['user_nick']);
user_manage.php:            $item["user_nick"]  = $this->cache_get_account_nick($item["userid"] );
user_manage.php:            $item['phone']      = $this->t_manager_info->get_operation_phone($item['userid']);
user.php:        $teacherid = $this->get_teacherid();
user.php:            return $this->output_err("工资汇总详情获取失败!");
user.php:            return $this->output_succ([
user.php:            return $this->output_err('工资汇总详情不存在!');
user.php:        $teacherid = $this->get_teacherid();
user.php:        $start     = $this->get_in_int_val('start');
user.php:        $end       = $this->get_in_int_val('end');
user.php:        $tea_lessons_arr = $this->t_lesson_info_b2->get_teacher_lessons($teacherid ,$start, $end);
user.php:        $free_time_str = $this->t_teacher_freetime_for_week->get_vacant_arr($teacherid);
user.php:            return $this->output_succ([
user.php:            return $this->output_succ(['data'=>[]]);
user.php:        $report_uid   = $this->get_teacherid();
user.php:        $report_msg   = $this->get_in_str_val('report_msg');
user.php:        $complaint_type = $this->get_in_int_val('complaint_type');
user.php:        $url="http://wx-parent.leo1v1.com/wx_teacher_api/teacher_report_msg";
user.php:            return $this->output_err("投诉提交失败!");
user.php:            return $this->output_succ();
user.php:        $teacherid = $this->get_teacherid();
user.php:        $time      = $this->get_in_str_val('time');
user.php:        $type      = $this->get_in_str_val('type');
user.php:            $format_arr[] = date("Y-m-d H:i",$item_time);
user.php:        $ret_str = $this->t_teacher_freetime_for_week->get_vacant_arr($teacherid);
user.php:            $ret_update = $this->t_teacher_freetime_for_week->field_update_list($teacherid,[
user.php:                return $this->output_succ(["data"=>$ret_update]);
user.php:                return $this->output_err('老师空闲时间设置失败!');
user.php:        $today_time = strtotime(date('Y-m-d',time(NULL)));
user.php:        $from_time  = $today_time-$day*24*60*60;
user.php:        return $this->output_succ(['data'=>$arr]);
user.php:        $teacherid = $this->get_teacherid();
user.php:        $lessonid  = $this->get_in_int_val('lessonid');
user.php:        $feedlist_arr = $this->t_teacher_feedback_list->get_feedback_list($teacherid,$lessonid);
user.php:            return $this->output_succ(['data'=>[]]);
user.php:            return $this->output_succ(["data"=>$feedlist_arr]);
user.php:        $teacherid     = $this->get_teacherid();
user.php:        $lessonid      = $this->get_in_int_val("lessonid");
user.php:        $feedback_type = $this->get_in_int_val("feedback_type");
user.php:        $lesson_count  = $this->get_in_str_val("lesson_count");
user.php:        $tea_reason    = $this->get_in_str_val("tea_reason");
user.php:        $ret_flag = $this->t_teacher_feedback_list->get_feedback_count($teacherid, $lessonid, $feedback_type);
user.php:            $ret_affect = $this->t_teacher_feedback_list->set_feedback( $teacherid, $lessonid, $feedback_type, $lesson_count, $tea_reason, $add_time);
user.php:                return $this->output_succ(['data'=>$ret_affect]);
user.php:            return $this->output_err("回馈条目已存在!");
user.php:        $teacherid = $this->get_teacherid();
user.php:        $ret = $this->t_teacher_info->get_teacher_info_all($teacherid);
user.php:            return $this->output_succ(['data'=>$ret]);
user.php:            return $this->output_err('获取老师信息失败!');
user.php:        return $this->output_succ(["data"=>$options]);
ViewDeal.php:             $this->last_in_values[$key ]=array( "is_page_arg" => false ,
ViewDeal.php:        return $this->getTplPageInfoAndJsValue($this->last_in_values,$page_data["page_info"],$page_data["list"],$showPages );
ViewDeal.php:        if (isset( $this->last_in_values["date_type_config"] ) ) { //id_date_type
ViewDeal.php:        foreach( $this->last_in_types as $key => $value)  {
ViewDeal.php:                                         "\n".'        <div class="col-xs-6 col-md-2">'."\n".
ViewDeal.php:                                         '            <div class="input-group ">'. "\n".
ViewDeal.php:                                         '                <span class="input-group-addon">'.$name.'</span>'."\n".
ViewDeal.php:                                         '                <select class="opt-change form-control" id="id_'.$key.'" >'."\n".
ViewDeal.php:                            "\n".'        <div class="col-xs-6 col-md-2">'."\n".
ViewDeal.php:                            '            <div class="input-group ">'. "\n".
ViewDeal.php:                            '                <span class="input-group-addon">'.$key.'</span>'."\n".
ViewDeal.php:                            '                <input class="opt-change form-control" id="id_'.$key.'" />'."\n".
ViewDeal.php:        $reload_filed_str=substr($reload_filed_str,0,-2)."\n";
ViewDeal.php:        $row_file_name =app_path("../public/page_ts/g_args.d.ts/.row-{$this->view_ctrl}-{$this->view_action}.tmp");
ViewDeal.php:             "\ntofile: \n\t mkdir -p ../{$this->view_ctrl}; vi  ../{$this->view_ctrl}/{$this->view_action}.ts\n\n".
ViewDeal.php:             "/// <reference path=\"../g_args.d.ts/{$this->view_ctrl}-{$this->view_action}.d.ts\" />\n".
ViewDeal.php:             "\t\$('.opt-change').set_input_change_event(load_data);\n".
ViewDeal.php:        $file_name =app_path("../public/page_ts/g_args.d.ts/{$this->view_ctrl}-{$this->view_action}.d.ts");
ViewDeal.php:                                          "value" => $this->g_config['qiniu_pub'] )
ViewDeal.php:        $path_arr   = explode( "/", $g_request->path());
ViewDeal.php:        $js_values_str = $this->get_js_g_args($g_args);
ViewDeal.php:            $this->store_gargs_d_ts_file($table_data_list);
ViewDeal.php:        $url = $this->get_page_url( $controller,$method,$args );
ViewDeal.php:        $a_page_info = $this->getPageInfo( $url,$page_info["total_num"],
ViewDeal.php:        $start = $current_page - 4;
ViewDeal.php:            $offset = 1 - $start;
ViewDeal.php:                $offset = $page_num - $end;
ViewDeal.php:            if(($current_page-1) == 0)
ViewDeal.php:                $link1= str_replace("{Page}" , $current_page-1 ,$send_var_with_page_count);
ViewDeal.php:            $link2= str_replace("{Page}" , $current_page-2 ,$send_var_with_page_count);
ViewDeal.php:            $prev_page2 = array('page_num'=>$current_page-2,'page_url'=>$link2);
ViewDeal.php:        $page_info['pre_page']     = ($page - 1) == 0 ? $page : ($page - 1);
ViewDeal.php:        $page_info['page']         = $this->_page($page_info['page_num'],$page_size ,$page,$url,$showPages);
ViewDeal.php:        $offset             = ($page-1)*$page_size;
ViewDeal.php:        $upper              = min($offset + $page_size - 1, $total-1);
ViewDeal.php:        return $this->get_url($controller,$method,$args_str);
ViewDeal.php:        return view( $view,$data,$mergeData )->render();
ViewDeal.php:        if (preg_match("/([a-zA-Z0-9_]+)::([a-zA-Z0-9_]+)/",$method, $matches)  )  {
ViewDeal.php:        $objPHPExcel->getProperties()->setCreator("jim ")
ViewDeal.php:                             ->setLastModifiedBy("jim")
ViewDeal.php:                             ->setTitle("jim title")
ViewDeal.php:                             ->setSubject("jim subject")
ViewDeal.php:                             ->setDescription("jim Desc")
ViewDeal.php:                             ->setKeywords("jim key")
ViewDeal.php:                             ->setCategory("jim  category");
ViewDeal.php:        $objPHPExcel->setActiveSheetIndex(0);
ViewDeal.php:                    $objPHPExcel->getActiveSheet()->setCellValue( $pos_str,$k );
ViewDeal.php:                        $objPHPExcel->getActiveSheet()->setCellValue( $pos_str, $cell_data);
ViewDeal.php:        header('Content-type: application/vnd.ms-excel');
ViewDeal.php:        header( "Content-Disposition:attachment;filename=\"all_$date.xlsx\"");
ViewDeal.php:        $objWriter->save('php://output');
ViewDeal.php:            if (preg_match("/([a-zA-Z0-9_]+)::([a-zA-Z0-9_]+)/",$method, $matches)  )  {
ViewDeal.php:                $this->view_ctrl=$matches[1];
ViewDeal.php:                $this->view_action=strtolower($matches[2]);
ViewDeal.php:        if (isset($this->last_in_values["page_num"]) && $this->last_in_values["page_num"]==0xFFFFFFFF+2) {
ViewDeal.php:            $this->out_xls($ret_info);
ViewDeal.php:        $data=$this->getPageData($ret_info,$ex_js_args,$showPages);
ViewDeal.php:        return $this->view($method,$data);
ViewDeal.php:        $path_arr=explode( "/", $g_request->path());
ViewDeal.php:        $args=array_merge($args,$this->last_in_values );
ViewDeal.php:        $url=$this->get_page_url( $controller,$method,$args );
ViewDeal.php:        $page_info['pre_page']     = ($page - 1) == 0 ? $page : ($page - 1);
ViewDeal.php:        $page_info['page']         = $this->_page($page_info['page_num'],$page_count,$page,$url,$showPages);
ViewDeal.php:        $offset             = ($page-1)*$page_size;
ViewDeal.php:        $upper              = min($offset + $page_size - 1, $total-1);
wx_login.php:        $code       = $this->get_in_str_val("code") ;
wx_login.php:        $admin_code = $this->get_in_str_val("admin_code") ;
wx_login.php:            $redirect_url=urlencode("http://wx-parent.leo1v1.com/wx_login/login?admin_code=$admin_code" );
wx_login.php:            $wx->goto_wx_login( $redirect_url );
wx_login.php:            $token_info = $wx->get_token_from_code($code);
wx_login.php:                $user_info=$wx->get_user_info_from_token($openid,$token);
wx_login.php:                $admin_row=$this->t_manager_info->get_info_for_wx_openid($openid);
wx_login.php:                return $this->pageView(__METHOD__,[],[
wx_login.php:                return $this->pageView(__METHOD__,[],[
wx_login.php:        $admin_code = $this->get_in_str_val("admin_code") ;
wx_login.php:        $account    = $this->get_in_str_val("account") ;
wx_login.php:        $url= $this->get_in_str_val("url") ;
wx_login.php:            $ret=$this->t_manager_info->send_wx_todo_msg($account,"后台系统","后台系统登陆请求","",$url );
wx_login.php:                return $this->output_err("用户不存在,或未绑定微信,或没有关注[理优教育在线学习APP]");
wx_login.php:        $redirect_url=urlencode("http://wx-parent.leo1v1.com/wx_login/login?admin_code=$admin_code" );
wx_login.php:        $wx_url=$wx->get_wx_login_url($redirect_url);
wx_login.php:        return $this->output_succ(["wx_url"=>$wx_url]);
wx_login.php:        $admin_code = $this->get_in_str_val("admin_code") ;
wx_login.php:        if ( $now - @$info["check_time"] <10   ) {
wx_login.php:            $ret_row=$this->t_manager_info-> get_info_for_wx_openid($openid);
wx_login.php:            $ip      = $this->get_in_client_ip();
wx_login.php:                $old_info=$this->t_manager_info->get_info_by_tquin($tquin);
wx_login.php:                    $this->t_manager_info->field_update_list($old_info["id"],[
wx_login.php:                $old_tquin=$this->t_manager_info->field_get_value($id,"tquin");
wx_login.php:                    $this->t_manager_info->field_update_list($id,[
wx_login.php:            $this->t_login_log->add($account,$ip,1);
wx_login.php:            $permission=  $login->reset_power($account);
wx_login.php:            $this->t_admin_users->set_last_ip( $account,$ip );
wx_login.php:            return $this->output_succ(["flag"=>true]);
wx_login.php:            return $this->output_succ(["flag"=>false]);
wx_parent_api.php:        if (! $this->get_parentid()  ) {
wx_parent_api.php:            echo $this->output_err("未登录");
wx_parent_api.php:        $parentid= $this->get_in_int_val("_parentid") ? $this->get_in_int_val("_parentid") : session("parentid");
wx_parent_api.php:        $parentid = $this->get_parentid();
wx_parent_api.php:        $ret_list=$this->t_lesson_info_b2->get_list_by_parent_id($parentid);
wx_parent_api.php:            $this->cache_set_item_student_nick($item);
wx_parent_api.php:            $this->cache_set_item_teacher_nick($item);
wx_parent_api.php:        return $this->output_succ(["children_lesson_info"=>$ret_list]);
wx_parent_api.php:        $lessonid = $this->get_in_lessonid();
wx_parent_api.php:        $parentid = $this->get_parentid();
wx_parent_api.php:        $has_lesson_bool = $this->t_lesson_info_b2->check_lesson_parentid( $lessonid, $parentid );
wx_parent_api.php:            return $this->output_err('暂无课程');
wx_parent_api.php:        $this->t_test_lesson_subject_sub_list->field_update_list($lessonid,[
wx_parent_api.php:        return $this->output_succ();
wx_parent_api.php:        $interaction        = $this->get_in_str_val("interaction");
wx_parent_api.php:        $class_atmos        = $this->get_in_str_val("class_atmos");
wx_parent_api.php:        $tea_standard       = $this->get_in_str_val("tea_standard");
wx_parent_api.php:        $tea_style          = $this->get_in_str_val("tea_style");
wx_parent_api.php:        $level              = $this->get_in_int_val("level");
wx_parent_api.php:        $device_level       = $this->get_in_int_val("device_level");
wx_parent_api.php:        $record_info        = $this->get_in_str_val("record_info");
wx_parent_api.php:        $lessonid           = $this->get_in_lessonid();
wx_parent_api.php:        $device_description = $this->get_in_str_val("device_description");
wx_parent_api.php:        $device_record      = $this->get_in_str_val("device_record");
wx_parent_api.php:        $parentid = $this->get_parentid();
wx_parent_api.php:        $has_lesson_bool = $this->t_lesson_info_b2->check_lesson_parentid( $lessonid, $parentid );
wx_parent_api.php:            return $this->output_err('暂无课程');
wx_parent_api.php:        $ret = $this->t_teacher_label->evaluate_row_delete($lessonid,1);
wx_parent_api.php:        $insert_ret=$this->t_teacher_label->row_insert([
wx_parent_api.php:        return $this->output_succ();
wx_parent_api.php:        $token = $auth->uploadToken($bucket);
wx_parent_api.php:        return  $this->output_succ([
wx_parent_api.php:        $public_flag=$this->get_in_int_val("publish_flag",0 );
wx_parent_api.php:        return $this->do_qiniu($public_flag );
wx_parent_api.php:        $token = $this->get_wx_token_jssdk(  $appid_tec, $appscript_tec);
wx_parent_api.php:            $jssdk    = $this->get_wx_jsapi_ticket($token);
wx_parent_api.php:        return $wx->get_wx_token($appid_tec,$appscript_tec);
wx_parent_api.php:        $json_jssdk_data=file_get_contents("https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=$token&type=jsapi ");
wx_parent_api.php:        $lessonid     = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $serverId_str = $this->get_in_str_val('wx_picid_list');
wx_parent_api.php:        $this->t_test_lesson_subject->put_pic_to_alibaba($lessonid, "");
wx_parent_api.php:        return $this->output_succ();
wx_parent_api.php:        $accessToken = $this->get_wx_token_jssdk( $appid_tec, $appscript_tec);
wx_parent_api.php:        curl_setopt($ch,CURLOPT_URL,"http://file.api.weixin.qq.com/cgi-bin/media/get?access_token=$accessToken&media_id=$serverId");
wx_parent_api.php:            $ossClient->uploadFile($bucket, $file_name, $target  );
wx_parent_api.php:            return  $this->output_succ([
wx_parent_api.php:            return $this->output_err("init OssClient fail" );
wx_parent_api.php:        $ref=$this->get_in_str_val("ref");
wx_parent_api.php:        $signature_str = $this->get_signature_str($ref);
wx_parent_api.php:        return $this->output_succ($config);
wx_parent_api.php:        $report_uid   = $this->get_parentid();
wx_parent_api.php:        $report_msg   = $this->get_in_str_val('report_msg');
wx_parent_api.php:        $obj_account_type    = $this->get_in_str_val('obj_account_type',-1);
wx_parent_api.php:        $report_account_type = $this->get_in_str_val('report_account_type',-1);
wx_parent_api.php:        $report_msg_last = $this->t_user_report->get_last_msg($report_uid);
wx_parent_api.php:            return $this->output_err("投诉已受理,请勿重复提交..");
wx_parent_api.php:         $ret_info_qc = $this->t_complaint_info->row_insert([
wx_parent_api.php:        $ret_info = $this->t_user_report->row_insert([
wx_parent_api.php:            $log_time_date = date('Y-m-d H:i:s',$log_time);
wx_parent_api.php:                $opt_nick= $this->cache_get_parent_nick($report_uid);
wx_parent_api.php:                $wx->send_template_msg($qc_item,$template_id,$data_msg ,$url);
wx_parent_api.php:               8GYohyn1V6dmhuEB6ZQauz5ZtmqnnJFy-ETM8yesU3I
wx_parent_api.php:            $template_id_parent = "8GYohyn1V6dmhuEB6ZQauz5ZtmqnnJFy-ETM8yesU3I";//反馈给投诉者
wx_parent_api.php:            $parent_openid = $this->t_parent_info->get_wx_openid_by_parentid($report_uid);
wx_parent_api.php:            $ret = $wx->send_template_msg($parent_openid,$template_id_parent,$data_msg ,$url);
wx_parent_api.php:            return $this->output_succ();
wx_parent_api.php:        $lessonid = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $lesson_time = $this->t_lesson_info_b2->get_lesson_time($lessonid);
wx_parent_api.php:        $teacher_lesson_time = $this->t_lesson_info_b2->get_teacher_time_by_lessonid($lessonid);
wx_parent_api.php:        $student_lesson_time = $this->t_lesson_info_b2->get_student_lesson_time_by_lessonid($lessonid);
wx_parent_api.php:            $t['time'][0] = date('Y-m-d',$item['lesson_start']);
wx_parent_api.php:            $t2['time'][0] = date('Y-m-d',$item['lesson_end']);
wx_parent_api.php:           $t4['time'][0] = date('Y-m-d',$item['lesson_start']);
wx_parent_api.php:           $t3['time'][0] = date('Y-m-d',$item['lesson_end']);
wx_parent_api.php:       return $this->output_succ(['data'=>$lesson_time_arr]);
wx_parent_api.php:        $parent_modify_time   = $this->get_in_str_val('parent_modify_time');
wx_parent_api.php:        $parent_modify_remark = $this->get_in_str_val('parent_modify_remark');
wx_parent_api.php:        $lessonid = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $lesson_start_time = $this->t_lesson_info_b2->get_lesson_start($lessonid);
wx_parent_api.php:        $stu_nick          = $this->t_student_info->get_stu_nick_by_lessonid($lessonid);
wx_parent_api.php:        $ret = $this->t_lesson_time_modify->row_insert([
wx_parent_api.php:            $parent_wx_openid = $this->t_parent_info->get_parent_wx_openid($lessonid);
wx_parent_api.php:            $lesson_start_date = date('Y-m-d',$lesson_start_time );
wx_parent_api.php:            $day_time = date('Y-m-d H:i:s');
wx_parent_api.php:            $wx->send_template_msg($parent_wx_openid,$template_id,$data_msg ,$url);
wx_parent_api.php:            $teacher_wx_openid = $this->t_teacher_info->get_wx_openid_by_lessonid($lessonid);
wx_parent_api.php:            $template_id_teacher  = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
wx_parent_api.php:            return $this->output_succ();
wx_parent_api.php:            return $this->output_err('提交失败,请稍后再试..');
wx_parent_api.php:        $lessonid = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $lesson_time     = $this->t_lesson_info_b2->get_lesson_time($lessonid);
wx_parent_api.php:        $original_time = $this->t_lesson_time_modify->get_original_time_by_lessonid($lessonid);
wx_parent_api.php:            $lesson_time_arr['lesson_time_old'] = date('Y年m月d日 H:i:s',$original_time_arr[0]).'-'.date('H:i:s',$original_time_arr[1]);
wx_parent_api.php:            $lesson_time_arr['lesson_time_new'] = date('Y年m月d日 H:i:s',$lesson_time[0]['lesson_start']).' - '.date('H:i:s',$lesson_time[0]['lesson_end']);
wx_parent_api.php:            $lesson_time_arr['lesson_time_old'] = date('Y年m月d日 H:i:s',$lesson_time[0]['lesson_start']).' - '.date('H:i:s',$lesson_time[0]['lesson_end']);
wx_parent_api.php:        $lesson_modify_arr = $this->t_lesson_time_modify->get_parent_modify_time_by_lessonid($lessonid);
wx_parent_api.php:        $lesson_time_arr['ass_phone']     = $this->t_assistant_info->get_ass_phone_by_lessonid($lessonid);
wx_parent_api.php:        $lesson_time_arr['seller_phone']  = $this->t_lesson_info_b2->get_seller_phone_by_lessonid($lessonid);
wx_parent_api.php:        return $this->output_succ(['data'=>$lesson_time_arr]);
wx_parent_api.php:        $lessonid = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $lesson_time = $this->t_lesson_info_b2->get_lesson_time($lessonid);
wx_parent_api.php:        $teacher_lesson_time = $this->t_lesson_info_b2->get_teacher_time_by_lessonid($lessonid);
wx_parent_api.php:        $student_lesson_time = $this->t_lesson_info_b2->get_student_lesson_time_by_lessonid($lessonid);
wx_parent_api.php:        $parent_modify_time  = $this->t_lesson_time_modify->get_parent_modify_time($lessonid);
wx_parent_api.php:            $t['time'][0] = date('Y-m-d',$item['lesson_start']);
wx_parent_api.php:            $t2['time'][0] = date('Y-m-d',$item['lesson_end']);
wx_parent_api.php:           $t4['time'][0] = date('Y-m-d',$item['lesson_start']);
wx_parent_api.php:           $t3['time'][0] = date('Y-m-d',$item['lesson_end']);
wx_parent_api.php:               $t5['time'][0] = date('Y-m-d',$item);
wx_parent_api.php:       return $this->output_succ(['data'=>$lesson_time_arr]);
wx_parent_api.php:        $lessonid        = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $lesson_time_str = $this->get_in_str_val('lesson_time_str');
wx_parent_api.php:        $lesson_old_start = $this->t_lesson_info_b2->get_lesson_start($lessonid);
wx_parent_api.php:        $lesson_old_end   = $this->t_lesson_info_b2->get_lesson_end($lessonid);
wx_parent_api.php:        $ret1 = $this->t_lesson_info_b2->field_update_list($lessonid,[
wx_parent_api.php:        $ret2 = $this->t_lesson_time_modify->field_update_list($lessonid,[
wx_parent_api.php:            $this->send_wx_msg_by_agree($lessonid,$is_teacher_agree);
wx_parent_api.php:            return $this->output_succ();
wx_parent_api.php:            return $this->output_err('提交失败,请稍后重试....');
wx_parent_api.php:    //     $lessonid = $this->get_in_int_val('lessonid');
wx_parent_api.php:    //     $original_time = $this->t_lesson_time_modify->get_original_time_by_lessonid($lessonid);
wx_parent_api.php:    //     $lesson_status_info['original_time_str'] = date('Y年m月d日 H:i:s',$original_time_arr[0]).'-'.date('H:i:s',$original_time_arr[1]);
wx_parent_api.php:    //     $modify_lesson_time_arr = $this->t_lesson_info_b2->get_modify_lesson_time($lessonid);
wx_parent_api.php:    //     $lesson_status_info['modify_lesson_time_str'] = date('Y年m月d日 H:i:s',$modify_lesson_time_arr['lesson_start']).'-'.date('H:i:s',$modify_lesson_time_arr['lesson_end']);
wx_parent_api.php:    //     $lesson_status_info['ass_phone']     = $this->t_assistant_info->get_ass_phone_by_lessonid($lessonid);
wx_parent_api.php:    //     $lesson_status_info['seller_phone']  = $this->t_lesson_info_b2->get_seller_phone_by_lessonid($lessonid);
wx_parent_api.php:    //     $lesson_status_info['is_modify_time_flag'] = $this->t_lesson_info_b2->get_modify_flag($lessonid);
wx_parent_api.php:    //     return $this->output_succ(['data'=>$lesson_status_info]);
wx_parent_api.php:        $lessonid        = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $is_role_account = $this->get_in_int_val('role_account'); // 1:家长 2:老师
wx_parent_api.php:            $parent_keep_original_remark  = $this->get_in_str_val('parent_keep_original_remark');
wx_parent_api.php:            $ret = $this->t_lesson_time_modify->field_update_list($lessonid,[
wx_parent_api.php:            $teacher_keep_original_remark = $this->get_in_str_val('teacher_keep_original_remark');
wx_parent_api.php:            $ret = $this->t_lesson_time_modify->field_update_list($lessonid,[
wx_parent_api.php:            $this->send_wx_msg_by_keep($lessonid,$is_role_account );
wx_parent_api.php:            return $this->output_succ();
wx_parent_api.php:    //     $lessonid = $this->get_in_int_val('lessonid');
wx_parent_api.php:    //     $lesson_status_info['ass_phone']     = $this->t_assistant_info->get_ass_phone_by_lessonid($lessonid);
wx_parent_api.php:    //     $lesson_status_info['seller_phone']  = $this->t_lesson_info_b2->get_seller_phone_by_lessonid($lessonid);
wx_parent_api.php:    //     $lesson_start = $this->t_lesson_info_b2->get_lesson_start($lessonid);
wx_parent_api.php:    //     $lesson_end   = $this->t_lesson_info_b2->get_lesson_end($lessonid);
wx_parent_api.php:    //     $lesson_status_info['lesson_time_str'] = date('Y年m月d日 H:i:s',$lesson_start).'-'.date('H:i:s',$lesson_end);
wx_parent_api.php:    //     $lesson_status_info['is_modify_time_flag'] = $this->t_lesson_time_modify->get_modify_flag($lessonid);
wx_parent_api.php:    //     return $this->output_succ(['data'=>$lesson_status_info]);
wx_parent_api.php:    //     $lessonid          = $this->get_in_int_val('lessonid');
wx_parent_api.php:    //     $lesson_name       = $this->t_lesson_info_b2->get_lesson_name($lessonid);
wx_parent_api.php:    //     $stu_nick          = $this->t_student_info->get_stu_nick_by_lessonid($lessonid);
wx_parent_api.php:    //     $teacher_nick      = $this->t_teacher_info->get_teacher_nick_lessonid($lessonid);
wx_parent_api.php:    //     $lesson_time_arr   = $this->t_lesson_info_b2->get_modify_lesson_time($lessonid);
wx_parent_api.php:    //     $lesson_new_time   = date('m月d日',$lesson_time_arr[0]).'-'.date('H:i:s',$lesson_time_arr[1]);
wx_parent_api.php:    //     $lesson_old_time_str   = $this->t_lesson_time_modify->get_original_time_by_lessonid($lessonid);
wx_parent_api.php:        $lessonid = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $lesson_time         = $this->t_lesson_info_b2->get_lesson_time($lessonid);
wx_parent_api.php:        $teacher_lesson_time = $this->t_lesson_info_b2->get_teacher_time_by_lessonid($lessonid);
wx_parent_api.php:        $student_lesson_time = $this->t_lesson_info_b2->get_student_lesson_time_by_lessonid($lessonid);
wx_parent_api.php:        $parent_modify_time  = $this->t_lesson_time_modify->get_parent_modify_time($lessonid);
wx_parent_api.php:            $t['time'][0] = date('Y-m-d',$item['lesson_start']);
wx_parent_api.php:            $t2['time'][0] = date('Y-m-d',$item['lesson_end']);
wx_parent_api.php:           $t4['time'][0] = date('Y-m-d',$item['lesson_start']);
wx_parent_api.php:           $t3['time'][0] = date('Y-m-d',$item['lesson_end']);
wx_parent_api.php:           $t5['time'][0] = date('Y-m-d',$item_parent_modify);
wx_parent_api.php:       return $this->output_succ(['data'=>$lesson_time_arr]);
wx_parent_api.php:        $lessonid = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $teacher_modify_remark = $this->get_in_str_val('teacher_modify_remark');
wx_parent_api.php:        $teacher_modify_time   = $this->get_in_str_val('teacher_modify_time');
wx_parent_api.php:        $lesson_old_time = $this->t_lesson_info_b2->get_lesson_start($lessonid);
wx_parent_api.php:        $ret = $this->t_lesson_time_modify->field_update_list($lessonid,[
wx_parent_api.php:            $day_date = date('Y-m-d H:i:s');
wx_parent_api.php:            $teacher_nick      = $this->t_teacher_info->get_teacher_nick_lessonid($lessonid);
wx_parent_api.php:            $teacher_wx_openid = $this->t_teacher_info->get_wx_openid_by_lessonid($lessonid);
wx_parent_api.php:            $template_id_teacher  = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
wx_parent_api.php:            $parent_wx_openid    = $this->t_parent_info->get_parent_wx_openid($lessonid);
wx_parent_api.php:            $wx->send_template_msg($parent_wx_openid, $parent_template_id, $data_parent, $url_parent);
wx_parent_api.php:        return $this->output_succ();
wx_parent_api.php:        $lessonid = $this->get_in_int_val('lessonid');
wx_parent_api.php:        $lesson_time_str = $this->get_in_str_val('lesson_time_str');
wx_parent_api.php:        $lesson_old_start = $this->t_lesson_info_b2->get_lesson_start($lessonid);
wx_parent_api.php:        $lesson_old_end   = $this->t_lesson_info_b2->get_lesson_end($lessonid);
wx_parent_api.php:        $ret1 = $this->t_lesson_info_b2->field_update_list($lessonid,[
wx_parent_api.php:        $ret2 = $this->t_lesson_time_modify->field_update_list($lessonid,[
wx_parent_api.php:            $this->send_wx_msg_by_agree($lessonid,$is_teacher_agree);
wx_parent_api.php:            return $this->output_succ();
wx_parent_api.php:        $teacher_nick      = $this->t_teacher_info->get_teacher_nick_lessonid($lessonid);
wx_parent_api.php:        $lesson_name       = $this->t_lesson_info_b2->get_lesson_name($lessonid);
wx_parent_api.php:        $stu_nick          = $this->t_student_info->get_stu_nick_by_lessonid($lessonid);
wx_parent_api.php:        $lesson_time_arr   = $this->t_lesson_info_b2->get_modify_lesson_time($lessonid);
wx_parent_api.php:        $lesson_new_time   = date('m月d日',$lesson_time_arr[0]).' - '.date('H:i:s',$lesson_time_arr[1]);
wx_parent_api.php:        $lesson_old_time_str  = $this->t_lesson_time_modify->get_original_time_by_lessonid($lessonid);
wx_parent_api.php:        $lesson_old_time      = date('m月d日 H:i:s',$lesson_old_time_arr[0]).' - '.date('H:i:s',$lesson_old_time_arr[1]);
wx_parent_api.php:           //J57C9QLB-K3SeKgIwdvBMz1RfjUinhwWsN3lEM-Xo5o
wx_parent_api.php:        $teacher_wx_openid = $this->t_teacher_info->get_wx_openid_by_lessonid($lessonid);
wx_parent_api.php:        $template_id_teacher  = "J57C9QLB-K3SeKgIwdvBMz1RfjUinhwWsN3lEM-Xo5o";
wx_parent_api.php:        $parent_wx_openid = $this->t_parent_info->get_parent_wx_openid($lessonid);
wx_parent_api.php:        $wx->send_template_msg($parent_wx_openid, $parent_template_id, $data_parent, $url_parent);
wx_parent_api.php:        $wx_openid_arr[0] = $this->t_lesson_info_b2->get_ass_wx_openid($lessonid);
wx_parent_api.php:        $wx_openid_arr[1] = $this->t_lesson_info_b2->get_seller_wx_openid($lessonid);
wx_parent_api.php:        $wx_openid_arr[2] = $this->t_test_lesson_subject_sub_list->get_jiaowu_wx_openid($lessonid);
wx_parent_api.php:            $wx->send_template_msg($item_openid, $parent_template_id, $data_leo, $url_leo);
wx_parent_api.php:        $lesson_start_time = $this->t_lesson_info_b2->get_lesson_start($lessonid);
wx_parent_api.php:        $stu_nick          = $this->t_student_info->get_stu_nick_by_lessonid($lessonid);
wx_parent_api.php:        $teacher_nick      = $this->t_teacher_info->get_teacher_nick_lessonid($lessonid);
wx_parent_api.php:        $day_date = date('Y-m-d H:i:s');
wx_parent_api.php:            $teacher_keep_original_remark = $this->t_lesson_time_modify->get_teacher_keep_original_remark($lessonid);
wx_parent_api.php:            $parent_wx_openid    = $this->t_parent_info->get_parent_wx_openid($lessonid);
wx_parent_api.php:            $wx->send_template_msg($parent_wx_openid, $parent_template_id, $data_parent, $url_parent);
wx_parent_api.php:            $parent_keep_original_remark = $this->t_lesson_time_modify->get_parent_keep_original_remark($lessonid);
wx_parent_api.php:            $teacher_wx_openid = $this->t_teacher_info->get_wx_openid_by_lessonid($lessonid);
wx_parent_api.php:            $template_id_teacher  = "rSrEhyiqVmc2_NVI8L6fBSHLSCO9CJHly1AU-ZrhK-o";
wx_parent_api.php:        $wx_openid_arr[0]    = $this->t_lesson_info_b2->get_ass_wx_openid($lessonid);
wx_parent_api.php:        $wx_openid_arr[1]    = $this->t_lesson_info_b2->get_seller_wx_openid($lessonid);
wx_parent_api.php:            $wx->send_template_msg($item_openid, $parent_template_id, $data_leo, $url_leo);
wx_parent_api.php:        $teacher_nick      = $this->t_teacher_info->get_teacher_nick_lessonid($lessonid);
wx_parent_api.php:        $stu_nick          = $this->t_student_info->get_stu_nick_by_lessonid($lessonid);
wx_parent_api.php:        $lesson_old_time_str  = $this->t_lesson_time_modify->get_original_time_by_lessonid($lessonid);
wx_parent_api.php:        $lesson_time_arr   = $this->t_lesson_info_b2->get_modify_lesson_time($lessonid);
wx_parent_api.php:        $lesson_new_time   = date('m月d日',$lesson_time_arr[0]).'-'.date('H:i:s',$lesson_time_arr[1]);
wx_parent_api.php:        $teacher_wx_openid = $this->t_teacher_info->get_wx_openid_by_lessonid($lessonid);
wx_parent_api.php:        $template_id_teacher  = "J57C9QLB-K3SeKgIwdvBMz1RfjUinhwWsN3lEM-Xo5o";
wx_parent_api.php:        $parent_wx_openid = $this->t_parent_info->get_parent_wx_openid($lessonid);
wx_parent_api.php:        $wx->send_template_msg($parent_wx_openid, $parent_template_id, $data_parent, $url_parent);
wx_parent_api.php:        $wx_openid_arr[0] = $this->t_lesson_info_b2->get_ass_wx_openid($lessonid);
wx_parent_api.php:        $wx_openid_arr[1] = $this->t_lesson_info_b2->get_seller_wx_openid($lessonid);
wx_parent_api.php:        $wx_openid_arr[2] = $this->t_test_lesson_subject_sub_list->get_jiaowu_wx_openid($lessonid);
wx_parent_api.php:            $wx->send_template_msg($item_openid, $parent_template_id, $data_leo, $url_leo);
wx_parent_common.php:        $code       = $this->get_in_str_val("code");
wx_parent_common.php:        $token_info = $wx->get_token_from_code($code);
wx_parent_common.php:        $goto_url     = urldecode(hex2bin($this->get_in_str_val("goto_url")));
wx_parent_common.php:        $web_html_url="http://wx-parent-web.leo1v1.com";
wx_parent_common.php:            $parentid= $this->t_parent_info->get_parentid_by_wx_openid($openid);
wx_parent_common.php:        $phone = trim($this->get_in_str_val('phone'));
wx_parent_common.php:            return $this->output_err("电话号码出错");
wx_parent_common.php:        $parentid=$this->t_phone_to_user->get_userid_by_phone($phone,E\Erole::V_PARENT );
wx_parent_common.php:            return $this->output_err("你的孩子还没有注册理优1对1,不能绑定!");
wx_parent_common.php:        return $this->output_succ(["msg_num" =>$msg_num,"code" => $code ]);
wx_parent_common.php:        $code      = $this->get_in_str_val('code');
wx_parent_common.php:            return $this->output_err("请重新绑定");
wx_parent_common.php:            return $this->output_err("请重新绑定");
wx_parent_common.php:        $parentid = $this->t_phone_to_user->get_userid_by_phone($phone,E\Erole::V_PARENT );
wx_parent_common.php:            return $this->output_err("你的孩子还没有注册理优1对1,不能绑定!");
wx_parent_common.php:        $db_parentid = $this->t_parent_info->get_parentid_by_wx_openid($wx_openid );
wx_parent_common.php:            $this->t_parent_info->field_update_list($db_parentid,[
wx_parent_common.php:        $this->t_parent_info->field_update_list($parentid,[
wx_parent_common.php:        return $this->output_succ();
wx_parent_common.php:        $lessonid     = $this->get_in_lessonid();
wx_parent_common.php:        $userid       = $this->get_in_userid();
wx_parent_common.php:        $item = $this->t_teacher_label->get_info_by_lessonid($lessonid,$userid,$label_origin);
wx_parent_common.php:            return $this->output_succ($item);
wx_parent_common.php:            return $this->output_err("没有数据");
wx_parent_common.php:        return $this->output_succ();
wx_parent.php:            $to_url=bin2hex($this->get_in_str_val("_url"));
wx_parent.php:            $redirect_url=urlencode("http://wx-parent.leo1v1.com/wx_parent_common/wx_parent_jump_page?goto_url=$to_url" );
wx_parent.php:            $wx->goto_wx_login( $redirect_url );
wx_parent.php:            $web_html_url="http://wx-parent-web.leo1v1.com";
wx_parent.php:            $to_url=$this->get_in_str_val("_url");
wx_score.php:        $openid=$this->get_in_str_val("openid");
wx_score.php:        $m1_score=$this->get_in_float_val("m1_score");
wx_score.php:        $m2_score=$this->get_in_float_val("m2_score");
wx_score.php:        $areaid=$this->get_in_float_val("areaid");
wx_score.php:            $school_list=$this->t_scores_info->get_find_school_list($areaid,$score );
wx_score.php:        $user_info=$this->t_wx_user_info->field_get_list($openid,"*");
wx_score.php:        }else if ( $score >= $this->t_scores_info->min_score($areaid) ) {
wx_score.php:            $all_percent=0.25*($score-430)+60;
wx_score.php:            $all_percent=60-0.15*(400-$score);
wx_score.php:        $this->t_wx_key_value->row_insert([
wx_score.php:        $id=$this->t_wx_key_value->get_last_insertid();
wx_score.php:        return $this->output_succ(["id" =>$id]);
wx_score.php:        $id=$this->get_in_str_val("id");
wx_score.php:        $openid=$this->get_in_str_val("openid");
wx_score.php:        $data=\App\Helper\Utils::json_decode_as_array($this->t_wx_key_value->field_get_value($id,"data"));
wx_score.php:                    return ($percent1<$percent2 ) ? 1:-1;
wx_score.php:                return $this->output_succ(["data" =>$data]);
wx_score.php:        return $this->output_err("参数出错");
wx_teacher_api.php:        $teacherid= $this->get_in_int_val("teacherid") ? $this->get_in_int_val("teacherid") : session("teacherid");
wx_teacher_api.php:        $report_uid   = $this->get_teacherid();
wx_teacher_api.php:        $report_msg   = $this->get_in_str_val('report_msg');
wx_teacher_api.php:        $complaint_type = $this->get_in_int_val('complaint_type');
wx_teacher_api.php:        $report_msg_last = $this->t_complaint_info->get_last_msg($report_uid);
wx_teacher_api.php:            return $this->output_err("投诉已受理,请勿重复提交..");
wx_teacher_api.php:        $ret_info_qc = $this->t_complaint_info->row_insert([
wx_teacher_api.php:            $log_time_date = date('Y-m-d H:i:s',time(NULL));
wx_teacher_api.php:            $opt_nick= $this->cache_get_teacher_nick($report_uid);
wx_teacher_api.php:                $wx->send_template_msg($qc_item,$template_id,$data_msg ,$url);
wx_teacher_api.php:            $teacher_openid   = $this->t_teacher_info->get_wx_openid_by_teacherid($report_uid);
wx_teacher_api.php:            return $this->output_succ();
wx_teacher_common.php:        $code       = $this->get_in_str_val("code");
wx_teacher_common.php:        $token_info = $wx->get_token_from_code($code);
wx_teacher_common.php:        $goto_url     = urldecode(hex2bin($this->get_in_str_val("goto_url")));
wx_teacher_common.php:        $web_html_url="http://wx-teacher-web.leo1v1.com";
wx_teacher_common.php:            $teacherid   = $this->t_teacher_info->get_teacherid_by_openid($openid);
wx_teacher_common.php:            $wx_use_flag = $this->t_teacher_info->get_wx_use_flag($teacherid);
wx_teacher_common.php:        return $this->output_succ();
wx_teacher_info.php:        $appid=$this->appid;
wx_teacher_info.php:        $this->appid=\App\Helper\Config::get_wx_appid();
wx_teacher_info.php:        $this->appsecret=\App\Helper\Config::get_wx_appsecret();
wx_teacher_info.php:            $this->teacherid=$teacherid;
wx_teacher_info.php:            $code=$this->get_in_str_val("code");
wx_teacher_info.php:                $token_info = $this->get_token_from_code($code);
wx_teacher_info.php:                    $this->goto_wx_login($redirect_url );
wx_teacher_info.php:                $userid     = $this->t_wx_openid_bind->get_userid($openid,E\Erole::V_TEACHER);
wx_teacher_info.php:                $teacher_info=$this->t_teacher_info->get_teacher_info($userid);
wx_teacher_info.php:                $this->goto_wx_login($redirect_url );
wx_teacher_info.php:        $appid=$this->appid;
wx_teacher_info.php:        $appsecret=$this->appsecret;
wx_teacher_info.php:        return $this->pageView(__METHOD__);
wx_teacher_info.php:        $url="https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=$token";
wx_teacher_info.php:        $teacherid   = $this->teacherid;
wx_teacher_info.php:        return $this->pageView(__METHOD__ );
wx_teacher_info.php:        $teacherid   = $this->teacherid;
wx_teacher_info.php:        $timestamp = $this->get_in_int_val("timestamp");
wx_teacher_info.php:        $type = $this->get_in_int_val("type",0);
wx_teacher_info.php:        $lesson_list=$this->t_lesson_info->get_teacher_lesson_info($teacherid,$start_time,$end_time);
wx_teacher_info.php:            $nick=$this->cache_get_student_nick($item["userid"]);
wx_teacher_info.php:        return $this->output_succ(["lesson_list"=>$lesson_list]);
wx_teacher_info.php:        $this->t_seller_student_info->start_transaction();
wx_teacher_info.php:        $update_count=$this->t_seller_student_info->set_assinged_teacherid($seller_student_id, $teacherid );
wx_teacher_info.php:        $assigned_teacherid=$this->t_seller_student_info->get_assigned_teacherid([
wx_teacher_info.php:        $teacher_confirm_flag=-1;
wx_teacher_info.php:        if($teacher_confirm_flag != -1) {
wx_teacher_info.php:            $ret=$this->t_test_lesson_assign_teacher->field_update_list([
wx_teacher_info.php:                $this->t_seller_student_info->rollback();
wx_teacher_info.php:        $this->t_seller_student_info->commit();
wx_teacher_info.php:        $teacherid=$this->teacherid;
wx_teacher_info.php:        $seller_student_id=$this->get_in_int_val("seller_student_id");
wx_teacher_info.php:        $msg=$this->do_confirm_test_lesson($teacherid,$seller_student_id);
wx_teacher_info.php:        return $this->output_succ(["msg"=>$msg]);
wx_teacher_info.php:        $teacherid=$this->teacherid;
wx_teacher_info.php:        $seller_student_id=$this->get_in_int_val("seller_student_id");
wx_teacher_info.php:        $msg=$this->do_confirm_test_lesson($teacherid,$seller_student_id);
wx_teacher_info.php:        return $this->pageView(__METHOD__,null,[
wx_teacher_info.php:        $teacherid=$this->teacherid;
wx_teacher_info.php:            $teacherid=-1;
wx_teacher_info.php:        $opt_type=$this->get_in_opt_type(0); //可抢单
wx_teacher_info.php:        $page_num=$this->get_in_page_num();
wx_teacher_info.php:        $ret_info=$this->t_test_lesson_assign_teacher->get_list_by_teacherid( $page_num,$teacherid,$opt_type);
wx_teacher_info.php:            \App\Helper\Utils::unixtime2date_for_item($item,"st_class_time","_str","Y-m-d H:i");
wx_teacher_info.php:        return $this->pageView(__METHOD__,$ret_info);
wx_teacher_info.php:        //$this->t_test_lesson_assign_teacher->get
wx_teacher.php:        $appid     = $this->appid;
wx_teacher.php:        $appsecret = $this->appsecret;
wx_teacher.php:        return $wx->get_wx_token($appid,$appsecret);
wx_teacher.php:        $appid     = $this->appid;
wx_teacher.php:        $appsecret = $this->appsecret;
wx_teacher.php:        $token=$this->get_token();
wx_teacher.php:        $url="https://api.weixin.qq.com/cgi-bin/menu/create?access_token=$token";
wx_teacher.php:        switch ($object->Event)
wx_teacher.php:                $content = "欢迎关注理优1对1 \n 你可以绑定在这里绑定 理优账户 随时关注孩子的学习情况 \n open id ={$object->FromUserName}";
wx_teacher.php:                //$content .= (!empty($object->EventKey))?("\n来自二维码场景 ".str_replace("qrscene_","",$object->EventKey)):"";
wx_teacher.php:                switch ($object->EventKey)
wx_teacher.php:                        $openid=$object->FromUserName;
wx_teacher.php:                        $content = "点击菜单：".$object->EventKey;
wx_teacher.php:        $result = $this->transmitText($object, $content);
wx_teacher.php:        $result = sprintf($xmlTpl, $object->FromUserName, $object->ToUserName, time(), $content);
wx_teacher.php:            $RX_TYPE = trim($postObj->MsgType);
wx_teacher.php:                    $result = $this->receiveEvent($postObj);
wx_teacher.php:                    $result = $this->receiveText($postObj);
wx_teacher.php:        $openid = $this->get_in_str_val("openid");
wx_teacher.php:        $url    = $this->get_in_str_val("url");
wx_teacher.php:        return $this->pageView(__METHOD__,$page_info);
wx_teacher.php:        $ret=$this->t_wx_openid_bind->row_delete_2(session("openid"),E\Erole::V_TEACHER );
wx_teacher.php:        return $this->output_bool_ret($ret==1);
wx_teacher.php:        $openid   = $this->get_in_str_val("openid");
wx_teacher.php:        $account  = $this->get_in_str_val("account");
wx_teacher.php:        $password = $this->get_in_str_val('password');
wx_teacher.php:        $seccode  = $this->get_in_str_val('seccode');
wx_teacher.php:        $ip       = $this->get_in_client_ip();
wx_teacher.php:            return  $this->output_err( E\Eerror::V_WRONG_VERIFY_CODE);
wx_teacher.php:        $user_info=$this->t_phone_to_user->get_info_from_role_phone(E\Erole::V_TEACHER, $account);
wx_teacher.php:            if ($password == $this->t_user_info->get_passwd($userid))  {
wx_teacher.php:                $this->t_wx_openid_bind->row_insert([
wx_teacher.php:            return $this->output_succ();
wx_teacher.php:            return $this->output_err("用户名密码不匹配");
wx_teacher.php:        $lessonid = $this->get_in_int_val("lessonid");
wx_teacher.php:        $wx->notice_teacher_check_stu_homework($lessonid);
wx_teacher.php:        $token = $this->get_wx_token_jssdk();
wx_teacher.php:            $jssdk    = $this->get_wx_jsapi_ticket($token);
wx_teacher.php:        return $this->pageView(__METHOD__,null,
wx_teacher.php:        return $wx->get_wx_token($appid_tec,$appscript_tec);
wx_teacher.php:        $json_jssdk_data=file_get_contents("https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=$token&type=jsapi ");
wx_teacher.php:        $serverId_str = $this->get_in_str_val('serverId');
wx_teacher.php:        $lessonid     = $this->get_in_int_val('lessonid');
wx_teacher.php:            $imgStateInfo = $this->savePicToServer($serverId);
wx_teacher.php:            $result = $this->put_img_to_alibaba($imgStateInfo['savePathFile']);
wx_teacher.php:        // $imgStateInfo = $this->savePicToServer($serverId);
wx_teacher.php:        // $result = $this->put_img_to_alibaba($imgStateInfo['savePathFile']);
wx_teacher.php:        $this->t_test_lesson_subject->put_pic_to_alibaba($lessonid, $alibaba_url_str);
wx_teacher.php:        $accessToken = $this->get_wx_token_jssdk();
wx_teacher.php:        curl_setopt($ch,CURLOPT_URL,"http://file.api.weixin.qq.com/cgi-bin/media/get?access_token=$accessToken&media_id=$serverId");
wx_teacher.php:            $ossClient->uploadFile($bucket, $file_name, $target  );
wx_teacher.php:            return  $this->output_succ([
wx_teacher.php:            return $this->output_err("init OssClient fail" );
wx_teacher_web.php:        $to_url=$this->get_in_str_val("_url");
wx_teacher_web.php:            $url = "http://wx-teacher-web.leo1v1.com/tea.html?reference";
wx_teacher_web.php:            $web_html_url="http://wx-teacher-web.leo1v1.com";
wx_teacher_web.php:            // $to_url=$this->get_in_str_val("_url");
wx_teacher_web.php:            $wx_use_flag = $this->t_teacher_info->get_wx_use_flag($teacherid);
wx_teacher_web.php:            $to_url=bin2hex($this->get_in_str_val("_url"));
wx_teacher_web.php:            $redirect_url=urlencode("http://wx-teacher.leo1v1.com/wx_teacher_common/wx_jump_page?goto_url=$to_url" );
wx_teacher_web.php:            $wx->goto_wx_login( $redirect_url );
wx_test.php:        $r = $wechat->checkSignature();
wx_test.php:        // $ret=$wechat->run();
wx_test.php:            array('id'=>'4', 'pid'=>'1', 'name'=>'设置上课时间', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/jump_page?url=course_arrange.html'),
wx_test.php:            array('id'=>'5', 'pid'=>'1', 'name'=>'试听课评价', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/jump_page?url=comment_list.html?type=0'),
wx_test.php:            array('id'=>'6', 'pid'=>'1', 'name'=>'常规课评价', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/jump_page?url=comment_list.html?type=1'),
wx_test.php:            array('id'=>'7', 'pid'=>'2', 'name'=>'荣誉棒', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/jump_page?url=honor_rank.html'),
wx_test.php:            array('id'=>'8', 'pid'=>'2', 'name'=>'老师升级制度', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/jump_page?url=wage_upgrade_rule.html'),
wx_test.php:            array('id'=>'9', 'pid'=>'2', 'name'=>'薪资奖励规则', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/jump_page?url=wage_award_rule.html'),
wx_test.php:            array('id'=>'10', 'pid'=>'2', 'name'=>'工资汇总情况', 'type'=>'view', 'code'=>'http://wx-teacher.leo1v1.com/jump_page?url=wage_summary.html'),
wx_test.php:            // array('id'=>'7', 'pid'=>'1', 'name'=>'分享微信二维码', 'type'=>'view', 'code'=>'https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx636f1058abca1bc1&redirect_uri=http%3A%2F%2Fwx-parent.leo1v1.com%2Farticle_wx%2Fget_openid&response_type=code&scope=snsapi_base&state=1#wechat_redirect' ),
wx_test.php:        return $this->output_succ(["index" =>$phone_index ]);
wx_token.php:        $appid=$this->appid;
wx_token.php:        $appsecret=$this->appsecret;
wx_token.php:        $json_data=file_get_contents( "https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=$appid&secret=$appsecret"  );
wx_token.php:        $appid=$this->appid;
wx_token.php:        $appsecret=$this->appsecret;
wx_token.php:        $appid=$this->appid;
wx_token.php:        $appsecret=$this->appsecret;
wx_token.php:            $this->t_wx_user_info->add_or_udpate($ret_arr); 
wx_token.php:        $token_info=$this->get_token_from_code($code);
wx_token.php:        $user_info=$this->get_user_info_from_token($openid,$token);
wx_token.php:        $url=$this->get_in_str_val("url");
wx_token.php:        $jssdk=new \App\Helper\Wxjssdk(  $this->appid, $this->appsecret);
wx_token.php:        $signPackage= $jssdk->GetSignPackage($url);
wx_token.php:        return $this->output_succ(["signPackage"=>$signPackage]);
wx_token.php:        $openid=$this->get_in_str_val("openid");
wx_token.php:        $row=$this->t_wx_user_info->field_get_list($openid,"*");
wx_token.php:        return $this->output_succ(["data"=>$row ]);
wx_user.php:        list($start_time,$end_time)=$this->get_in_date_range(0,0,0);
wx_user.php:        $this->t_wx_user_info->
wx_yxyx_api.php:        if (! $this->get_agent_id()){
wx_yxyx_api.php:            echo $this->output_err("未登录");
wx_yxyx_api.php:        $agent_id= $this->get_in_int_val("_agent_id")?$this->get_in_int_val("_agent_id"):session("agent_id");
wx_yxyx_api.php:        $p_phone   = $this->get_in_str_val('p_phone');
wx_yxyx_api.php:        $phone   = $this->get_in_str_val('phone');
wx_yxyx_api.php:            return $this->output_err("请输入规范的手机号!");
wx_yxyx_api.php:            return $this->output_err("不能邀请自己!");
wx_yxyx_api.php:        $ret_list = $this->t_agent->get_id_by_phone($phone_str);
wx_yxyx_api.php:                return $this->output_err("您已被邀请过!");
wx_yxyx_api.php:        $ret = $this->t_agent->add_agent_row($parentid,$phone);
wx_yxyx_api.php:            return $this->output_succ("邀请成功!");
wx_yxyx_api.php:            return $this->output_err("数据请求异常!");
wx_yxyx_api.php:        $agent_id   = $this->get_agent_id();
wx_yxyx_api.php:        $agent_info = $this->t_agent->get_agent_info_by_id($agent_id);
wx_yxyx_api.php:            return $this->output_err("请先绑定优学优享账号!");
wx_yxyx_api.php:            return $this->output_err("请输入规范的手机号!");
wx_yxyx_api.php:        $student_info = $this->t_student_info->get_stu_row_by_phone($phone);
wx_yxyx_api.php:            $ret       = $this->get_pp_pay_cash($phone);
wx_yxyx_api.php:            $cash_item = $this->t_agent_cash->get_cash_by_phone($phone);
wx_yxyx_api.php:            $count_row = $this->t_agent->get_count_by_phone($phone);
wx_yxyx_api.php:            $agent_list = $this->t_agent->get_agent_list_by_phone($phone);
wx_yxyx_api.php:                $test_lesson = $this->t_agent->get_agent_test_lesson_count_by_id($agent_item['id']);
wx_yxyx_api.php:                $cash_item   = $this->t_agent_cash->get_cash_by_phone($phone);
wx_yxyx_api.php:                    $ret = $this->get_pp_pay_cash($phone);
wx_yxyx_api.php:                    $ret = $this->get_p_pay_cash($phone);
wx_yxyx_api.php:                return $this->output_err("您暂无资格!");
wx_yxyx_api.php:        $cash_new     = (int)(($cash-$have_cash/100)*100)/100;
wx_yxyx_api.php:        return $this->output_succ(["user_info_list" =>$data]);
wx_yxyx_api.php:        $agent_id   = $this->get_agent_id();
wx_yxyx_api.php:        $agent_info = $this->t_agent->get_agent_info_by_id($agent_id);
wx_yxyx_api.php:            return $this->output_err("请先绑定优学优享账号!");
wx_yxyx_api.php:            return $this->output_err("请输入规范的手机号!");
wx_yxyx_api.php:        $ret = $this->t_agent->get_p_list_by_phone($phone);
wx_yxyx_api.php:            $p_ret = $this->t_agent->get_agent_order_by_phone($p_id);
wx_yxyx_api.php:            $ret_new = $this->t_agent_order->get_order_by_id($id);
wx_yxyx_api.php:                        $count_item = $this->t_lesson_info_b2->get_test_lesson_count_by_userid($item['userid']);
wx_yxyx_api.php:        return $this->output_succ(["list" =>$ret_list]);
wx_yxyx_api.php:        $agent_id = $this->get_agent_id();
wx_yxyx_api.php:        $type = $this->get_in_int_val('type');
wx_yxyx_api.php:        $agent_info = $this->t_agent->get_agent_info_by_id($agent_id);
wx_yxyx_api.php:            return $this->output_err("请先绑定优学优享账号!");
wx_yxyx_api.php:            return $this->output_err("请输入规范的手机号!");
wx_yxyx_api.php:        $student_info = $this->t_student_info->get_stu_row_by_phone($phone);
wx_yxyx_api.php:            $ret = $this->get_pp_pay_cash($phone);
wx_yxyx_api.php:            $agent_list = $this->t_agent->get_agent_list_by_phone($phone);
wx_yxyx_api.php:                $test_lesson = $this->t_agent->get_agent_test_lesson_count_by_id($agent_item['id']);
wx_yxyx_api.php:                    $ret = $this->get_pp_pay_cash($phone);
wx_yxyx_api.php:                    $ret = $this->get_p_pay_cash($phone);
wx_yxyx_api.php:                return $this->output_err("您暂无资格!");
wx_yxyx_api.php:            return $this->output_succ(["list" =>$ret_list]);
wx_yxyx_api.php:        return $this->output_succ(["cash"=>$cash,"list" =>$ret_list]);
wx_yxyx_api.php:        $agent_id = $this->get_agent_id();
wx_yxyx_api.php:        $agent_info = $this->t_agent->get_agent_info_by_id($agent_id);
wx_yxyx_api.php:            return $this->output_err("请先绑定优学优享账号!");
wx_yxyx_api.php:            return $this->output_err("请输入规范的手机号!");
wx_yxyx_api.php:        $ret = $this->t_agent_cash->get_cash_list_by_phone($phone);
wx_yxyx_api.php:            $ret_list[$key]['create_time'] = date('Y-m-d',$item['create_time']);
wx_yxyx_api.php:        return $this->output_succ(["list" =>$ret_list]);
wx_yxyx_api.php:        $pay_list = $this->t_agent_order->get_price_by_phone($phone);
wx_yxyx_api.php:                $ret_list[$key]['pay_time'] = date('Y-m-d H:i:s',$item['pay_time']);
wx_yxyx_api.php:        $ret = $this->get_cash($ret_list);
wx_yxyx_api.php:        $pay_list  = $this->t_agent_order->get_p_price_by_phone($phone);
wx_yxyx_api.php:                $ret_list[$key]['pay_time'] = date('Y-m-d H:i:s',$item['pay_time']);
wx_yxyx_api.php:        $ret = $this->get_cash($ret_list);
wx_yxyx_api.php:            $ret_row = $this->t_lesson_info_b2->get_lesson_count_by_userid($userid);
wx_yxyx_api.php:            $ret_list[$key]['level2_cash'] = $pay-$ret_list[$key]['level1_cash'];
wx_yxyx_api.php:        $agent_id = $this->get_agent_id();
wx_yxyx_api.php:        $agent_info = $this->t_agent->get_agent_info_by_id($agent_id);
wx_yxyx_api.php:            return $this->output_err("请先绑定优学优享账号!");
wx_yxyx_api.php:            return $this->output_err("请输入规范的手机号!");
wx_yxyx_api.php:        $ret = $this->t_agent->get_agent_info_by_phone($phone);
wx_yxyx_api.php:            return $this->output_err('请先绑定优学优享账号!');
wx_yxyx_api.php:        return $this->output_succ(["data" =>$data]);
wx_yxyx_api.php:        $agent_id = $this->get_agent_id();
wx_yxyx_api.php:        $agent_info = $this->t_agent->get_agent_info_by_id($agent_id);
wx_yxyx_api.php:            return $this->output_err("请先绑定优学优享账号!");
wx_yxyx_api.php:        $bankcard      = $this->get_in_str_val("bankcard");
wx_yxyx_api.php:        $idcard        = $this->get_in_str_val("idcard");
wx_yxyx_api.php:        $bank_address  = $this->get_in_str_val("bank_address");
wx_yxyx_api.php:        $bank_account  = $this->get_in_str_val("bank_account");
wx_yxyx_api.php:        $bank_phone    = $this->get_in_str_val("bank_phone");
wx_yxyx_api.php:        $bank_province = $this->get_in_str_val("bank_province");
wx_yxyx_api.php:        $bank_city     = $this->get_in_str_val("bank_city");
wx_yxyx_api.php:        $bank_type     = $this->get_in_str_val("bank_type");
wx_yxyx_api.php:        $zfb_name      = $this->get_in_str_val("zfb_name");
wx_yxyx_api.php:        $zfb_account   = $this->get_in_str_val("zfb_account");
wx_yxyx_api.php:        $cash          = $this->get_in_str_val("cash"); //要提现
wx_yxyx_api.php:            return $this->output_err("请输入提现金额!");
wx_yxyx_api.php:        $check_cash = $this->check_user_cash($phone);
wx_yxyx_api.php:            return $this->output_err("超出可提现金额!");
wx_yxyx_api.php:                return $this->output_err("请完善所有数据后重新提交！");
wx_yxyx_api.php:                return $this->output_err("请输入规范的手机号!");
wx_yxyx_api.php:                $ret = $this->t_agent->field_update_list($id,[
wx_yxyx_api.php:                    $ret_new = $this->t_agent_cash->row_insert([
wx_yxyx_api.php:                        return $this->output_err('更新失败！请重试！');
wx_yxyx_api.php:                    return $this->output_err("更新失败！请重试！");
wx_yxyx_api.php:                return $this->output_err("请完善所有数据后重新提交！");
wx_yxyx_api.php:            $ret = $this->t_agent->field_update_list($id,[
wx_yxyx_api.php:                $ret_new = $this->t_agent_cash->row_insert([
wx_yxyx_api.php:                    return $this->output_err('更新失败！请重试！');
wx_yxyx_api.php:                return $this->output_err("更新失败！请重试！");
wx_yxyx_api.php:        return $this->output_succ('成功');
wx_yxyx_api.php:        $student_info = $this->t_student_info->get_stu_row_by_phone($phone);
wx_yxyx_api.php:            $ret       = $this->get_pp_pay_cash($phone);
wx_yxyx_api.php:            $cash_item = $this->t_agent_cash->get_cash_by_phone($phone);
wx_yxyx_api.php:            $agent_list = $this->t_agent->get_agent_list_by_phone($phone);
wx_yxyx_api.php:                $test_lesson = $this->t_agent->get_agent_test_lesson_count_by_id($agent_item['id']);
wx_yxyx_api.php:                $cash_item   = $this->t_agent_cash->get_cash_by_phone($phone);
wx_yxyx_api.php:                    $ret = $this->get_pp_pay_cash($phone);
wx_yxyx_api.php:                    $ret = $this->get_p_pay_cash($phone);
wx_yxyx_api.php:                return $this->output_err("您暂无资格!");
wx_yxyx_common.php:        $code       = $this->get_in_str_val("code");
wx_yxyx_common.php:        $token_info = $wx->get_token_from_code($code);
wx_yxyx_common.php:        $goto_url     = urldecode(hex2bin($this->get_in_str_val("goto_url")));
wx_yxyx_common.php:        $web_html_url = "http://wx-yxyx-web.leo1v1.com";
wx_yxyx_common.php:            $agent_info = $this->t_agent->get_agent_info_by_openid($openid);
wx_yxyx_common.php:        return $this->output_succ('注销成功!');
wx_yxyx_common.php:        $phone = trim($this->get_in_str_val('phone'));
wx_yxyx_common.php:            return $this->output_err("请输入规范的手机号!");
wx_yxyx_common.php:            // $agent_info = $this->t_agent->get_agent_info_by_openid($wx_openid);
wx_yxyx_common.php:            $agent_info = $this->t_agent->get_agent_info_by_phone($phone);
wx_yxyx_common.php:                return $this->output_err("您已绑定过！");
wx_yxyx_common.php:        return $this->output_succ(["msg_num" =>$msg_num,"code" => $code ]);
wx_yxyx_common.php:        $phone      = $this->get_in_str_val("phone");
wx_yxyx_common.php:        $code       = $this->get_in_str_val("code");
wx_yxyx_common.php:            return $this->output_err('微信绑定失败!请重新登录后绑定!"');
wx_yxyx_common.php:            return $this->output_err("请输入规范的手机号!");
wx_yxyx_common.php:            $agent_info = $this->t_agent->get_agent_info_by_phone($phone);
wx_yxyx_common.php:            $user_info  = $this->get_wx_user_info($wx_openid);
wx_yxyx_common.php:                $id = $this->t_agent->update_field_list('t_agent',['wx_openid'=>$wx_openid,'headimgurl'=>$headimgurl,'nickname'=>$nickname],'id',$agent_info['id']);
wx_yxyx_common.php:                $id = $this->t_agent->add_agent_row_new($phone,$headimgurl,$nickname,$wx_openid);
wx_yxyx_common.php:                return $this->output_err("生成失败！请退出重试！");
wx_yxyx_common.php:            return $this->output_succ("绑定成功!");
wx_yxyx_common.php:            return $this->output_err ("验证码错误");
wx_yxyx_common.php:        $access_token = $wx->get_wx_token($wx_config["appid"],$wx_config["appsecret"]);
wx_yxyx_common.php:        $url = "https://api.weixin.qq.com/cgi-bin/user/info?access_token=".$access_token."&openid=".$wx_openid."&lang=zh_cn";
wx_yxyx_common.php:        $p_phone = $this->get_in_str_val('p_phone');
wx_yxyx_common.php:        $phone   = $this->get_in_str_val('phone');
wx_yxyx_common.php:            return $this->output_err("请输入规范的手机号!");
wx_yxyx_common.php:            return $this->output_err("不能邀请自己!");
wx_yxyx_common.php:        $ret_list = $this->t_agent->get_id_by_phone($phone_str);
wx_yxyx_common.php:                return $this->output_err("您已被邀请过!");
wx_yxyx_common.php:        $userid = $this->t_student_info->get_userid_by_phone($phone);
wx_yxyx_common.php:        $ret = $this->t_agent->add_agent_row($parentid,$phone,$userid);
wx_yxyx_common.php:            return $this->output_succ("邀请成功!");
wx_yxyx_common.php:            return $this->output_err("数据请求异常!");
wx_yxyx.php:        $this->appid = $config["appid"] ;
wx_yxyx.php:        $this->appsecret = $config['appseret'];
wx_yxyx.php:                    "url" => "http://wx-yxyx.leo1v1.com",
wx_yxyx.php:        $appid     = $this->appid;
wx_yxyx.php:        $appsecret = $this->appsecret;
wx_yxyx.php:        return $wx->get_wx_token($appid,$appsecret);
wx_yxyx.php:        $appid     = $this->appid;
wx_yxyx.php:        $appsecret = $this->appsecret;
wx_yxyx.php:        switch ($object->Event)
wx_yxyx.php:                $content = "欢迎关注理优1对1 \n 你可以绑定在这里绑定 理优账户 随时关注孩子的学习情况 \n open id ={$object->FromUserName}";
wx_yxyx.php:                //$content .= (!empty($object->EventKey))?("\n来自二维码场景 ".str_replace("qrscene_","",$object->EventKey)):"";
wx_yxyx.php:                switch ($object->EventKey)
wx_yxyx.php:                        $openid=$object->FromUserName;
wx_yxyx.php:                        $content = "点击菜单：".$object->EventKey;
wx_yxyx.php:        $result = $this->transmitText($object, $content);
wx_yxyx.php:        $result = sprintf($xmlTpl, $object->FromUserName, $object->ToUserName, time(), $content);
wx_yxyx.php:            $RX_TYPE = trim($postObj->MsgType);
wx_yxyx.php:                    $result = $this->receiveEvent($postObj);
wx_yxyx.php:                    $result = $this->receiveText($postObj);
wx_yxyx.php:        $openid = $this->get_in_str_val("openid");
wx_yxyx.php:        $url    = $this->get_in_str_val("url");
wx_yxyx.php:        return $this->pageView(__METHOD__,$page_info);
wx_yxyx.php:        $ret=$this->t_wx_openid_bind->row_delete_2(session("openid"),E\Erole::V_TEACHER );
wx_yxyx.php:        return $this->output_bool_ret($ret==1);
wx_yxyx.php:        $openid   = $this->get_in_str_val("openid");
wx_yxyx.php:        $account  = $this->get_in_str_val("account");
wx_yxyx.php:        $password = $this->get_in_str_val('password');
wx_yxyx.php:        $seccode  = $this->get_in_str_val('seccode');
wx_yxyx.php:        $ip       = $this->get_in_client_ip();
wx_yxyx.php:            return  $this->output_err( E\Eerror::V_WRONG_VERIFY_CODE);
wx_yxyx.php:        $user_info=$this->t_phone_to_user->get_info_from_role_phone(E\Erole::V_TEACHER, $account);
wx_yxyx.php:            if ($password == $this->t_user_info->get_passwd($userid))  {
wx_yxyx.php:                $this->t_wx_openid_bind->row_insert([
wx_yxyx.php:            return $this->output_succ();
wx_yxyx.php:            return $this->output_err("用户名密码不匹配");
wx_yxyx.php:        $lessonid = $this->get_in_int_val("lessonid");
wx_yxyx.php:        $wx->notice_teacher_check_stu_homework($lessonid);
wx_yxyx.php:        $token = $this->get_wx_token_jssdk();
wx_yxyx.php:            $jssdk    = $this->get_wx_jsapi_ticket($token);
wx_yxyx.php:        return $this->pageView(__METHOD__,null,
wx_yxyx.php:        return $wx->get_wx_token($appid_tec,$appscript_tec);
wx_yxyx.php:        $json_jssdk_data=file_get_contents("https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=$token&type=jsapi ");
wx_yxyx.php:        $serverId_str = $this->get_in_str_val('serverId');
wx_yxyx.php:        $lessonid     = $this->get_in_int_val('lessonid');
wx_yxyx.php:            $imgStateInfo = $this->savePicToServer($serverId);
wx_yxyx.php:            $result = $this->put_img_to_alibaba($imgStateInfo['savePathFile']);
wx_yxyx.php:        // $imgStateInfo = $this->savePicToServer($serverId);
wx_yxyx.php:        // $result = $this->put_img_to_alibaba($imgStateInfo['savePathFile']);
wx_yxyx.php:        $this->t_test_lesson_subject->put_pic_to_alibaba($lessonid, $alibaba_url_str);
wx_yxyx.php:        $accessToken = $this->get_wx_token_jssdk();
wx_yxyx.php:        curl_setopt($ch,CURLOPT_URL,"http://file.api.weixin.qq.com/cgi-bin/media/get?access_token=$accessToken&media_id=$serverId");
wx_yxyx.php:            $ossClient->uploadFile($bucket, $file_name, $target  );
wx_yxyx.php:            return  $this->output_succ([
wx_yxyx.php:            return $this->output_err("init OssClient fail" );
wx_yxyx_web.php:        $agent_id = $this->get_in_int_val("_agent_id")?$this->get_in_int_val("_agent_id"):session("agent_id");
wx_yxyx_web.php:        $agent_id= $this->get_agent_id();
wx_yxyx_web.php:            $web_html_url="http://wx-yxyx-web.leo1v1.com";
wx_yxyx_web.php:            $to_url      = $this->get_in_str_val("_url");
wx_yxyx_web.php:            $to_url=bin2hex($this->get_in_str_val("_url"));
wx_yxyx_web.php:            $redirect_url=urlencode("http://wx-yxyx.leo1v1.com/wx_yxyx_common/wx_jump_page?goto_url=$to_url" );
wx_yxyx_web.php:            $wx->goto_wx_login( $redirect_url );
yxyx_wx_server.php:        $r = $wechat->checkSignature();
yxyx_wx_server.php:        $ret=$wechat->run();
yxyx_wx_server.php:            array('id'=>'7', 'pid'=>'2', 'name'=>'理优简介', 'type'=>'view', 'code'=>'https://m.llspace.com/g-main-3765446.html?platform=ard&client_version=1.14.2&from=singlemessage&isappinstalled=1'),
yxyx_wx_server.php:            array('id'=>'9', 'pid'=>'2', 'name'=>'学员反馈', 'type'=>'view', 'code'=>'https://h5.in66.com/inpromo/inweb/in-share/in.html?uid=1EwYvwxb&_ig=share_my_copy'),
yxyx_wx_server.php:            array('id'=>'10', 'pid'=>'2', 'name'=>'每日卡片', 'type'=>'view', 'code'=>'https://m.llspace.com/g-main-3765446.html?platform=ard&client_version=1.14.2&from=singlemessage'),
yxyx_wx_server.php:            // array('id'=>'13', 'pid'=>'3', 'name'=>'绑定账号', 'type'=>'view', 'code'=>'http://wx-yxyx.leo1v1.com/wx_yxyx_web/bind'),
yxyx_wx_server.php:            array('id'=>'16', 'pid'=>'3', 'name'=>'注销账号', 'type'=>'view', 'code'=>'http://wx-yxyx.leo1v1.com/wx_yxyx_common/logout'),
yxyx_wx_server.php:            array('id'=>'13', 'pid'=>'3', 'name'=>'个人中心', 'type'=>'view', 'code'=>'http://wx-yxyx.leo1v1.com/wx_yxyx_web/index' ),
yxyx_wx_server.php:        return $this->output_succ(["index" =>$phone_index ]);
yxyx_wx_server.php:        $url = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx636f1058abca1bc1&redirect_uri=http%3A%2F%2Fwx-parent.leo1v1.com%2Farticle_wx%2Fget_openid&response_type=code&scope=snsapi_base&state=1#wechat_redirect";
