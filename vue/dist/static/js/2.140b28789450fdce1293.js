webpackJsonp([2],{"c+8m":function(t,e,a){"use strict";function n(t){return function(e,a,n){var o="function"==typeof e?e:e.constructor;o.__decorators__||(o.__decorators__=[]),"number"!=typeof n&&(n=void 0),o.__decorators__.push(function(e){return t(e,a,n)})}}function o(t){var e=typeof t;return null==t||"object"!==e&&"function"!==e}function r(t,e){e.prototype._init=function(){var e=this,a=Object.getOwnPropertyNames(t);if(t.$options.props)for(var n in t.$options.props)t.hasOwnProperty(n)||a.push(n);a.forEach(function(a){"_"!==a.charAt(0)&&Object.defineProperty(e,a,{get:function(){return t[a]},set:function(e){return t[a]=e},configurable:!0})})};var a=new e,n={};return Object.keys(a).forEach(function(t){void 0!==a[t]&&(n[t]=a[t])}),n}function i(t,e){void 0===e&&(e={}),e.name=e.name||t._componentTag||t.name;var a=t.prototype;Object.getOwnPropertyNames(a).forEach(function(t){if("constructor"!==t){if(l.indexOf(t)>-1)return void(e[t]=a[t]);var n=Object.getOwnPropertyDescriptor(a,t);"function"==typeof n.value?(e.methods||(e.methods={}))[t]=n.value:(n.get||n.set)&&((e.computed||(e.computed={}))[t]={get:n.get,set:n.set})}}),(e.mixins||(e.mixins=[])).push({data:function(){return r(this,t)}});var n=t.__decorators__;n&&(n.forEach(function(t){return t(e)}),delete t.__decorators__);var o=Object.getPrototypeOf(t.prototype),i=o instanceof d?o.constructor:d,s=i.extend(e);return c(s,t,i),s}function c(t,e,a){Object.getOwnPropertyNames(e).forEach(function(n){if("prototype"!==n){var r=Object.getOwnPropertyDescriptor(t,n);if(!r||r.configurable){var i=Object.getOwnPropertyDescriptor(e,n);if(!p){if("cid"===n)return;var c=Object.getOwnPropertyDescriptor(a,n);if(!o(i.value)&&c&&c.value===i.value)return}Object.defineProperty(t,n,i)}}})}function s(t){return"function"==typeof t?i(t):function(e){return i(e,t)}}/**
  * vue-class-component v6.1.1
  * (c) 2015-2017 Evan You
  * @license MIT
  */
Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){return t&&"object"==typeof t&&"default"in t?t.default:t}(a("7+uW")),p={__proto__:[]}instanceof Array,l=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured"];!function(t){function e(t){l.push.apply(l,t)}t.registerHooks=e}(s||(s={}));var f=s;e.default=f,e.createDecorator=n},oSN2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o=a("c+8m"),r=a.n(o),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,a,n){var o,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,a,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(r<3?o(i):r>3?o(e,a,i):o(e,a))||i);return r>3&&i&&Object.defineProperty(e,a,i),i},s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reset_sort_info=function(t){var e=t.split(/ /),a=e[0],n=e[1],o=$(".common-table").find("thead >tr>td");o.find(".td-sort-item").remove(),$.each(o,function(t,e){var o=$(e).data("field_name");if(o){var r=$('<a href="javascript:;" class=" fa  td-sort-item " ></a>');o==a?"asc"==n?r.addClass("fa-sort-up"):r.addClass("fa-sort-down"):r.addClass("fa-sort"),$(e).append(r)}})},e.get_table_key=function(t){var e=window.location.hash.split("/");return t+"-"+e[1]+"-"+e[2].split("?")[0]},e}return i(e,t),e.prototype.load_data_for_route=function(){this.load_data()},e.prototype.base_init=function(){var t=this;window.vue_load_data=function(){t.load_data()},this.table_base_init()},e.prototype.query_init=function(){},e.prototype.row_init=function(){},e.prototype.page_info_init=function(t){var e=this,a=t.page_num,n=t.per_page_count,o=t.total_num,r=Math.ceil(o/n),i=a-3,c=a+3;i<1&&(i=1),c>r&&(c=r);var s=$('<div class="pages"> </div>');s.append("<span>总记录数:"+o+"</span>"),s.append('<select class="select_page_count" > <option value="10"> 每页10行 </option> <option value="50"> 每页50行 </option> <option value="100"> 每页100行 </option> <option value="500"> 每页500行 </option> <option value="1000"> 每页1000行 </option> <option value="5000"> 每页5000行 </option> </select> <input style="width:50px" placeholder="输入页数" class="input_page_num" >'),s.find(".select_page_count").val(t.per_page_count);var d=a-1;d<1&&(d=1);var p=a+1;p>r&&(p=r),s.append(' <a class="page_prev" data-page_num="'+d+'"   >&lt;</a> '),s.append(' <a class=" page_num" data-page_num="1" >1</a> ');var l=i;i>2?s.append("<span >...</span>"):i<2&&(l=2);for(var f=l;f<a;f++)s.append(' <a class=" page_num" data-page_num="'+f+'" >'+f+" </a> ");1!=a&&a!=r&&s.append(' <a class=" page_num" data-page_num="'+a+'" >'+a+" </a> ");var u=c;c==r&&u--;for(var f=a+1;f<=u;f++)s.append(' <a class=" page_num" data-page_num="'+f+'" >'+f+"</a> ");u<r-1&&s.append("<span >...</span>"),r>1&&s.append(' <a class=" page_num" data-page_num="'+r+'" >'+r+"</a> "),s.append(' <a class="page_next " data-page_num="'+p+'"     >&gt;</a> ');var _=$(".common-table").parent();_.find(".pages").remove(),_.find(".pages").remove(),_.append(s),s.find("[data-page_num="+a+"]").addClass("page_cur"),s.find("a").attr("href","javascript:;"),s.find("a").on("click",function(t){var n=$(t.currentTarget).data("page_num");return n!=a&&e.reload_page_by_page_info(n),!1}),s.find(".select_page_count").on("change",function(t){var a=$(t.currentTarget).val();return console.log(a),e.reload_page_by_page_info(1,a),!1}),s.find(".input_page_num").on("keypress",function(t){if(13==t.which){var a=$(t.currentTarget).val();e.reload_page_by_page_info(a)}})},e.prototype.reload_page_by_page_info=function(t,e){var a=this.$route.query;t&&(a.page_num=t),e&&(a.page_count=e),$.reload_self_page({}),$.reload_self_page(a)},e.prototype.load_data=function(){var t=this.$route.query,e=this.$route.path,a=this,n=$(".common-table").parent();n.append(' <div class="overlay"> <i class="fa fa-refresh fa-spin"></i> </div> \x3c!-- end loading --\x3e </div> '),$.do_ajax(e,t,function(t){0==t.ret?(console.log("out:"),console.log(t),a.$data.table_data=t.list,window.g_args=t.g_args,n.find(".overlay").remove(),t.g_args.order_by_str&&a.reset_sort_info(t.g_args.order_by_str),a.$nextTick(function(){a.query_init(),a.table_row_init(),a.page_info_init(t.page_info)})):1005==t.ret&&(alert("未登录, 将跳转到登录页"),$.wopen(window.admin_api+"?to_url="+encodeURIComponent(window.location.href),!0))},!0),this.reset_menu_select()},e.prototype.reset_menu_select=function(){var t=$("#__id_menu"),e=window.location.toString().split("?")[0],a=t.find('li>a[href="'+e+'"]'),n=!1;$.each(a,function(t,e){$(e).parent().hasClass("active")&&(n=!0)}),n||$.do_select_menu(a)},e.prototype.get_args_base=function(){return window.g_args},e.prototype.get_opt_data_base=function(t){var e=$(t);return this.$data.table_data[e.parent().data("index")]},e.prototype.table_base_init=function(){var t=this,e=$(".common-table");e.addClass("table"),e.addClass("table-bordered"),e.addClass("table-striped"),e.css({"border-top":"3px solid #d2d6de","border-radius":"3px"});var a=$('<div class="table-responsive box "/>');e.before(a),a.append(e),e.on("click",".remove-for-not-xs .start-opt-mobile",function(t){$(t.currentTarget).closest("tr").find("td > div .td-info ").click()});var n=e.find("thead >tr");console.log(n),n.prepend('<td class="remove-for-not-xs" > </td>'),$.each(n,function(e,a){if(!$(a).parent().hasClass("table-clean-flag")){var n=(window.location.pathname.split("/"),t.get_table_key("field_list")),o=$(a).find("td:last");o.css("min-width")||o.css("min-width","80px"),o.addClass("remove-for-xs");var r=$(' <a href="javascript:; " style="color:red;" title=" 列显示配置"   >列</a>');r.on("click",function(t){var e=$(t.currentTarget).closest("table"),a=e.find("thead >tr"),o=a.find(">td"),r=[];$.each(o,function(t,e){if(0!=t&&t!=o.length-1){var a=$(e),n=a.data("title");n||(n=$.trim(a.text()));var i=a.css("display"),c=$('<input type="checkbox"/>');"none"==i||c.attr("checked","checked"),c.data("index",n),r.push([n,c])}}),$.show_key_value_table("列显示配置",r,[{label:"默认",cssClass:"btn-primary",action:function(t){$.do_ajax("/page_common/opt_table_field_list",{opt_type:"set",table_key:n,data:""}),window.localStorage.setItem(n,"")}},{label:"确认",cssClass:"btn-warning",action:function(t){var e={};$.each(r,function(t,a){var n=a[1],o=n.data("index"),r=n.prop("checked");e[o]=r}),$.do_ajax("/page_common/opt_table_field_list",{opt_type:"set",table_key:n,data:JSON.stringify(e)},function(){$.do_ajax("/page_common/opt_table_field_list",{opt_type:"get",table_key:n},function(t){var e=(new Date).getTime()/1e3;t.log_time=e,window.localStorage.setItem(n,JSON.stringify(t)),window.location.reload()})})}}])}),o.append(r)}}),n=e.find("thead >tr");var o=function(t){t&&t.field_list&&n.find("td").each(function(e,a){var n=$(a),o=n.data("title");o||(o=$.trim(n.text())),!1===t.field_list[o]&&n.hide()})},r=t.get_table_key("field_list");if(!$.check_in_phone()){var i=window.localStorage.getItem(r),c=(new Date).getTime()/1e3,s=null;try{i&&(s=JSON.parse(i))}catch(t){}s&&c-s.log_time<3600?o(s):$.do_ajax("/page_common/opt_table_field_list",{opt_type:"get",table_key:r},function(t){o(s),t.log_time=c,window.localStorage.setItem(r,JSON.stringify(t))})}n.on("click",".td-sort-item",function(e){var a="",n=$(e.currentTarget),o=$.trim(n.parent().data("field_name"));return a=n.hasClass("fa-sort-down")?o+" asc":o+" desc",window.g_args.order_by_str=a,t.$header_query_info.query(),!1}),e.on("click",".td-info",function(t){var e=$(t.currentTarget).closest("table").find("thead td"),a=$(t.currentTarget).closest("tr").find("td"),n=[];return e.each(function(o,r){if(0!=o&&o!=e.length-1&&n.push([$(r).text(),$(a[o]).text().replace(/,/g,", ")]),o==e.length-1){var i=$(a).find(">div >a"),c=[],s=$('<a class="btn fa inter-data" href="javascript:;"  >inter data</a>');$(t.currentTarget).hasClass("table-clean-flag")||c.push(["操作",s]),s.on("click",function(){var t=$(a[a.length-1]).find(">div"),e=t.data(),n=[];$.each(e,function(t,e){n.push([t,e])}),$.show_key_value_table("内部数据",n)}),$.each(i,function(t,e){var a=$(e).clone();a.hasClass("td-info")||"none"==a.css("display")||(a.append(" "+a.attr("title")),a.on("click",function(){$(e)[0].click()}),c.push(["操作",a]))}),n=c.concat(n)}}),$.show_key_value_table("详细信息",n),!1})},e.prototype.table_row_init=function(){var t=$(".common-table"),e=this;$.each(t,function(t,a){var n=window.location.pathname.split("/"),o=(n[1],n[2],$(a));!function(){var t=o.find("tbody >tr  "),e=o.find("thead >tr"),a=[],n=[],r=e.find("td");$.each(r,function(t,e){var o=$(e);"none"==o.css("display")&&a.push(t),o.hasClass("remove-for-xs")&&n.push(t)}),$.each(t,function(t,e){var o=$(e),r=o.find("td");if(!(o.find(".start-opt-mobile").length>0)){o.prepend($('<td class="remove-for-not-xs"  > <a class="  fa  fa-cog  start-opt-mobile " style="font-size:25px"  href="javascript:;"  > </a> </td>')),$.each(a,function(t,e){$(r[e-1]).css("display","none")}),$.each(n,function(t,e){$(r[e]).addClass("remove-for-xs")});var i=$(r[r.length-1]);i.addClass("remove-for-xs"),i.find("a").addClass("btn fa"),i.find(">div").prepend('<a href="javascript:;" class="btn  fa fa-cog td-info" title="竖向显示" ></a>')}}),$.check_in_phone()?o.find(".remove-for-xs").hide():o.find(".remove-for-not-xs").hide()}(),e.row_init()})},e=c([r()({created:function(){this.load_data()},mounted:function(){this.base_init()},data:function(){return{table_data:[]}},watch:{$route:"load_data_for_route"}})],e)}(n.default);e.default=s}});
//# sourceMappingURL=2.140b28789450fdce1293.js.map